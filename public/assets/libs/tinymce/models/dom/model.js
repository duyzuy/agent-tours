!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.ModelManager");let t=(e,t,r)=>{var l;return!!r(e,t.prototype)||(null===(l=e.constructor)||void 0===l?void 0:l.name)===t.name},r=e=>{let r=typeof e;return null===e?"null":"object"===r&&Array.isArray(e)?"array":"object"===r&&t(e,String,(e,t)=>t.isPrototypeOf(e))?"string":r},l=e=>t=>r(t)===e,o=e=>t=>typeof t===e,n=e=>t=>e===t,s=l("string"),a=l("object"),i=l("array"),m=n(null),c=o("boolean"),d=n(void 0),u=e=>null==e,f=e=>!u(e),g=o("function"),h=o("number"),p=()=>{},b=(e,t)=>(...r)=>e(t.apply(null,r)),w=(e,t)=>r=>e(t(r)),v=e=>()=>e,y=e=>e,C=(e,t)=>e===t;function T(e,...t){return(...r)=>{let l=t.concat(r);return e.apply(null,l)}}let x=e=>t=>!e(t),S=e=>()=>{throw Error(e)},R=e=>e(),D=v(!1),O=v(!0);class k{constructor(e,t){this.tag=e,this.value=t}static some(e){return new k(!0,e)}static none(){return k.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?k.some(e(this.value)):k.none()}bind(e){return this.tag?e(this.value):k.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:k.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return f(e)?k.some(e):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);let E=Array.prototype.slice,A=Array.prototype.indexOf,B=Array.prototype.push,N=(e,t)=>A.call(e,t),z=(e,t)=>N(e,t)>-1,_=(e,t)=>{for(let r=0,l=e.length;r<l;r++){let l=e[r];if(t(l,r))return!0}return!1},j=(e,t)=>{let r=[];for(let l=0;l<e;l++)r.push(t(l));return r},W=(e,t)=>{let r=e.length,l=Array(r);for(let o=0;o<r;o++){let r=e[o];l[o]=t(r,o)}return l},L=(e,t)=>{for(let r=0,l=e.length;r<l;r++){let l=e[r];t(l,r)}},M=(e,t)=>{for(let r=e.length-1;r>=0;r--){let l=e[r];t(l,r)}},I=(e,t)=>{let r=[],l=[];for(let o=0,n=e.length;o<n;o++){let n=e[o],s=t(n,o)?r:l;s.push(n)}return{pass:r,fail:l}},P=(e,t)=>{let r=[];for(let l=0,o=e.length;l<o;l++){let o=e[l];t(o,l)&&r.push(o)}return r},F=(e,t,r)=>(M(e,(e,l)=>{r=t(r,e,l)}),r),H=(e,t,r)=>(L(e,(e,l)=>{r=t(r,e,l)}),r),$=(e,t,r)=>{for(let l=0,o=e.length;l<o;l++){let o=e[l];if(t(o,l))return k.some(o);if(r(o,l))break}return k.none()},V=(e,t)=>$(e,t,D),q=(e,t)=>{for(let r=0,l=e.length;r<l;r++){let l=e[r];if(t(l,r))return k.some(r)}return k.none()},U=e=>{let t=[];for(let r=0,l=e.length;r<l;++r){if(!i(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);B.apply(t,e[r])}return t},G=(e,t)=>U(W(e,t)),K=(e,t)=>{for(let r=0,l=e.length;r<l;++r){let l=e[r];if(!0!==t(l,r))return!1}return!0},Y=e=>{let t=E.call(e,0);return t.reverse(),t},J=(e,t)=>{let r={};for(let l=0,o=e.length;l<o;l++){let o=e[l];r[String(o)]=t(o,l)}return r},Q=(e,t)=>{let r=E.call(e,0);return r.sort(t),r},X=(e,t)=>t>=0&&t<e.length?k.some(e[t]):k.none(),Z=e=>X(e,0),ee=e=>X(e,e.length-1),et=(e,t)=>{for(let r=0;r<e.length;r++){let l=t(e[r],r);if(l.isSome())return l}return k.none()},er=Object.keys,el=Object.hasOwnProperty,eo=(e,t)=>{let r=er(e);for(let l=0,o=r.length;l<o;l++){let o=r[l],n=e[o];t(n,o)}},en=(e,t)=>es(e,(e,r)=>({k:r,v:t(e,r)})),es=(e,t)=>{let r={};return eo(e,(e,l)=>{let o=t(e,l);r[o.k]=o.v}),r},ea=e=>(t,r)=>{e[r]=t},ei=(e,t,r,l)=>{eo(e,(e,o)=>{(t(e,o)?r:l)(e,o)})},em=(e,t)=>{let r={};return ei(e,t,ea(r),p),r},ec=(e,t)=>{let r=[];return eo(e,(e,l)=>{r.push(t(e,l))}),r},ed=e=>ec(e,y),eu=(e,t)=>ef(e,t)?k.from(e[t]):k.none(),ef=(e,t)=>el.call(e,t),eg=(e,t)=>ef(e,t)&&void 0!==e[t]&&null!==e[t],eh=e=>{for(let t in e)if(el.call(e,t))return!1;return!0},ep="undefined"!=typeof window?window:Function("return this;")(),eb=(e,t)=>{let r=null!=t?t:ep;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r},ew=(e,t)=>{let r=e.split(".");return eb(r,t)},ev=(e,t)=>ew(e,t),ey=(e,t)=>{let r=ev(e,t);if(null==r)throw Error(e+" not available on this browser");return r},eC=Object.getPrototypeOf,eT=e=>ey("HTMLElement",e),ex=e=>{let t=ew("ownerDocument.defaultView",e);return a(e)&&(eT(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(eC(e).constructor.name))},eS=e=>{let t=e.dom.nodeName;return t.toLowerCase()},eR=e=>e.dom.nodeType,eD=e=>t=>eR(t)===e,eO=e=>8===eR(e)||"#comment"===eS(e),ek=e=>eE(e)&&ex(e.dom),eE=eD(1),eA=eD(3),eB=eD(9),eN=eD(11),ez=e=>t=>eE(t)&&eS(t)===e,e_=(e,t,r)=>{if(s(r)||c(r)||h(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},ej=(e,t,r)=>{e_(e.dom,t,r)},eW=(e,t)=>{let r=e.dom;eo(t,(e,t)=>{e_(r,t,e)})},eL=(e,t)=>{eo(t,(t,r)=>{t.fold(()=>{eP(e,r)},t=>{e_(e.dom,r,t)})})},eM=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},eI=(e,t)=>k.from(eM(e,t)),eP=(e,t)=>{e.dom.removeAttribute(t)},eF=e=>H(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),eH=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},e$={fromHtml:(e,t)=>{let r=t||document,l=r.createElement("div");if(l.innerHTML=e,!l.hasChildNodes()||l.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return eH(l.childNodes[0])},fromTag:(e,t)=>{let r=t||document,l=r.createElement(e);return eH(l)},fromText:(e,t)=>{let r=t||document,l=r.createTextNode(e);return eH(l)},fromDom:eH,fromPoint:(e,t,r)=>k.from(e.dom.elementFromPoint(t,r)).map(eH)},eV=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},eq=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,eU=(e,t)=>{let r=void 0===t?document:t.dom;return eq(r)?[]:W(r.querySelectorAll(e),e$.fromDom)},eG=(e,t)=>{let r=void 0===t?document:t.dom;return eq(r)?k.none():k.from(r.querySelector(e)).map(e$.fromDom)},eK=(e,t)=>e.dom===t.dom,eY=(e,t)=>{let r=e.dom,l=t.dom;return r!==l&&r.contains(l)},eJ=e=>e$.fromDom(e.dom.ownerDocument),eQ=e=>eB(e)?e:eJ(e),eX=e=>e$.fromDom(eQ(e).dom.documentElement),eZ=e=>e$.fromDom(eQ(e).dom.defaultView),e0=e=>k.from(e.dom.parentNode).map(e$.fromDom),e1=e=>k.from(e.dom.parentElement).map(e$.fromDom),e9=(e,t)=>{let r=g(t)?t:D,l=e.dom,o=[];for(;null!==l.parentNode&&void 0!==l.parentNode;){let e=l.parentNode,t=e$.fromDom(e);if(o.push(t),!0===r(t))break;l=e}return o},e3=e=>k.from(e.dom.previousSibling).map(e$.fromDom),e2=e=>k.from(e.dom.nextSibling).map(e$.fromDom),e5=e=>W(e.dom.childNodes,e$.fromDom),e7=(e,t)=>{let r=e.dom.childNodes;return k.from(r[t]).map(e$.fromDom)},e4=e=>e7(e,0),e6=(e,t)=>{let r=e0(e);r.each(r=>{r.dom.insertBefore(t.dom,e.dom)})},e8=(e,t)=>{let r=e2(e);r.fold(()=>{let r=e0(e);r.each(e=>{tt(e,t)})},e=>{e6(e,t)})},te=(e,t)=>{let r=e4(e);r.fold(()=>{tt(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},tt=(e,t)=>{e.dom.appendChild(t.dom)},tr=(e,t,r)=>{e7(e,r).fold(()=>{tt(e,t)},e=>{e6(e,t)})},tl=(e,t)=>{e6(e,t),tt(t,e)},to=(e,t)=>{L(t,(r,l)=>{let o=0===l?e:t[l-1];e8(o,r)})},tn=(e,t)=>{L(t,t=>{tt(e,t)})},ts=e=>{e.dom.textContent="",L(e5(e),e=>{ta(e)})},ta=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},ti=e=>{let t=e5(e);t.length>0&&to(e,t),ta(e)},tm=(e,t)=>e$.fromDom(e.dom.cloneNode(t)),tc=e=>tm(e,!1),td=e=>tm(e,!0),tu=(e,t)=>{let r=e$.fromTag(t),l=eF(e);return eW(r,l),r},tf=(e,t)=>{let r=tu(e,t),l=e5(td(e));return tn(r,l),r},tg=(e,t)=>{let r=tu(e,t);e8(e,r);let l=e5(e);return tn(r,l),ta(e),r},th=["tfoot","thead","tbody","colgroup"],tp=e=>z(th,e),tb=(e,t)=>({rows:e,columns:t}),tw=(e,t)=>({row:e,column:t}),tv=(e,t,r)=>({element:e,rowspan:t,colspan:r}),ty=(e,t,r,l)=>({element:e,rowspan:t,colspan:r,isNew:l}),tC=(e,t,r,l,o,n)=>({element:e,rowspan:t,colspan:r,row:l,column:o,isLocked:n}),tT=(e,t,r)=>({element:e,cells:t,section:r}),tx=(e,t,r,l)=>({element:e,cells:t,section:r,isNew:l}),tS=(e,t,r)=>({element:e,isNew:t,isLocked:r}),tR=(e,t,r,l)=>({element:e,cells:t,section:r,isNew:l}),tD=(e,t,r,l)=>({startRow:e,startCol:t,finishRow:r,finishCol:l}),tO=(e,t,r)=>({element:e,colspan:t,column:r}),tk=(e,t)=>({element:e,columns:t}),tE=e=>eN(e)&&f(e.dom.host),tA=g(Element.prototype.attachShadow)&&g(Node.prototype.getRootNode),tB=v(tA),tN=tA?e=>e$.fromDom(e.dom.getRootNode()):eQ,tz=e=>{let t=tN(e);return tE(t)?k.some(t):k.none()},t_=e=>e$.fromDom(e.dom.host),tj=e=>{if(tB()&&f(e.target)){let t=e$.fromDom(e.target);if(eE(t)&&tW(t)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return Z(t)}}return k.from(e.target)},tW=e=>f(e.dom.shadowRoot),tL=e=>{let t=eA(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return tz(e$.fromDom(t)).fold(()=>r.body.contains(t),w(tL,t_))},tM=()=>tI(e$.fromDom(document)),tI=e=>{let t=e.dom.body;if(null==t)throw Error("Body is not available yet");return e$.fromDom(t)},tP=(e,t,r)=>P(e9(e,r),t),tF=(e,t)=>P(e5(e),t),tH=(e,t)=>{let r=[];return L(e5(e),e=>{t(e)&&(r=r.concat([e])),r=r.concat(tH(e,t))}),r},t$=(e,t,r)=>tP(e,e=>eV(e,t),r),tV=(e,t)=>tF(e,e=>eV(e,t)),tq=(e,t)=>eU(t,e);var tU=(e,t,r,l,o)=>e(r,l)?k.some(r):g(o)&&o(r)?k.none():t(r,l,o);let tG=(e,t,r)=>{let l=e.dom,o=g(r)?r:D;for(;l.parentNode;){l=l.parentNode;let e=e$.fromDom(l);if(t(e))return k.some(e);if(o(e))break}return k.none()},tK=(e,t,r)=>tU((e,t)=>t(e),tG,e,t,r),tY=(e,t)=>{let r=V(e.dom.childNodes,e=>t(e$.fromDom(e)));return r.map(e$.fromDom)},tJ=(e,t)=>{let r=e=>{for(let l=0;l<e.childNodes.length;l++){let o=e$.fromDom(e.childNodes[l]);if(t(o))return k.some(o);let n=r(e.childNodes[l]);if(n.isSome())return n}return k.none()};return r(e.dom)},tQ=(e,t,r)=>tG(e,e=>eV(e,t),r),tX=(e,t)=>tY(e,e=>eV(e,t)),tZ=(e,t)=>eG(t,e),t0=(e,t,r)=>tU((e,t)=>eV(e,t),tQ,e,t,r),t1=(e,t,r=C)=>e.exists(e=>r(e,t)),t9=e=>{let t=[],r=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(r);return t},t3=(e,t)=>null!=e?t(e):k.none(),t2=(e,t)=>e?k.some(t):k.none(),t5=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,t7=(e,t,r=0,l)=>{let o=e.indexOf(t,r);return -1!==o&&(!!d(l)||o+t.length<=l)},t4=(e,t)=>t5(e,t,0),t6=(e,t)=>t5(e,t,e.length-t.length),t8=e=>e.replace(/^\s+|\s+$/g,""),re=e=>e.length>0,rt=e=>{let t=parseFloat(e);return isNaN(t)?k.none():k.some(t)},rr=e=>void 0!==e.style&&g(e.style.getPropertyValue),rl=(e,t,r)=>{if(!s(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);rr(e)&&e.style.setProperty(t,r)},ro=(e,t)=>{rr(e)&&e.style.removeProperty(t)},rn=(e,t,r)=>{let l=e.dom;rl(l,t,r)},rs=(e,t)=>{let r=e.dom;eo(t,(e,t)=>{rl(r,t,e)})},ra=(e,t)=>{let r=e.dom,l=window.getComputedStyle(r),o=l.getPropertyValue(t);return""!==o||tL(e)?o:ri(r,t)},ri=(e,t)=>rr(e)?e.style.getPropertyValue(t):"",rm=(e,t)=>{let r=e.dom,l=ri(r,t);return k.from(l).filter(e=>e.length>0)},rc=(e,t)=>{let r=e.dom;ro(r,t),t1(eI(e,"style").map(t8),"")&&eP(e,"style")},rd=(e,t)=>{let r=e.dom,l=t.dom;rr(r)&&rr(l)&&(l.style.cssText=r.style.cssText)},ru=(e,t,r=0)=>eI(e,t).map(e=>parseInt(e,10)).getOr(r),rf=(e,t)=>ru(e,t,1),rg=e=>ez("col")(e)?ru(e,"span",1)>1:rf(e,"colspan")>1,rh=e=>rf(e,"rowspan")>1,rp=(e,t)=>parseInt(ra(e,t),10),rb=v(10),rw=v(10),rv=(e,t)=>ry(e,t,O),ry=(e,t,r)=>G(e5(e),e=>eV(e,t)?r(e)?[e]:[]:ry(e,t,r)),rC=(e,t,r=D)=>r(t)?k.none():z(e,eS(t))?k.some(t):tQ(t,e.join(","),e=>eV(e,"table")||r(e)),rT=(e,t)=>rC(["td","th"],e,t),rx=e=>rv(e,"th,td"),rS=e=>eV(e,"colgroup")?tV(e,"col"):G(rO(e),e=>tV(e,"col")),rR=(e,t)=>t0(e,"table",t),rD=e=>rv(e,"tr"),rO=e=>rR(e).fold(v([]),e=>tV(e,"colgroup")),rk=(e,t)=>W(e,e=>{if("colgroup"===eS(e)){let t=W(rS(e),e=>{let t=ru(e,"span",1);return tv(e,1,t)});return tT(e,t,"colgroup")}{let r=W(rx(e),e=>{let t=ru(e,"rowspan",1),r=ru(e,"colspan",1);return tv(e,t,r)});return tT(e,r,t(e))}}),rE=e=>e0(e).map(e=>{let t=eS(e);return tp(t)?t:"tbody"}).getOr("tbody"),rA=e=>{let t=rD(e),r=rO(e),l=[...r,...t];return rk(l,rE)},rB=(e,t)=>rk(e,()=>t),rN=e=>{let t,r=!1;return(...l)=>(r||(r=!0,t=e.apply(null,l)),t)},rz=(e,t,r,l)=>{let o=e.isiOS()&&!0===/ipad/i.test(r),n=e.isiOS()&&!o,s=e.isiOS()||e.isAndroid(),a=s||l("(pointer:coarse)"),i=o||!n&&s&&l("(min-device-width:768px)"),m=n||s&&!i,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),d=!m&&!i&&!c;return{isiPad:v(o),isiPhone:v(n),isTablet:v(i),isPhone:v(m),isTouch:v(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:v(c),isDesktop:v(d)}},r_=(e,t)=>{for(let r=0;r<e.length;r++){let l=e[r];if(l.test(t))return l}},rj=(e,t)=>{let r=r_(e,t);if(!r)return{major:0,minor:0};let l=e=>Number(t.replace(r,"$"+e));return rL(l(1),l(2))},rW=()=>rL(0,0),rL=(e,t)=>({major:e,minor:t}),rM={nu:rL,detect:(e,t)=>{let r=String(t).toLowerCase();return 0===e.length?rW():rj(e,r)},unknown:rW},rI=(e,t)=>et(t.brands,t=>{let r=t.brand.toLowerCase();return V(e,e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:rM.nu(parseInt(t.version,10),0)}))}),rP=(e,t)=>{let r=String(t).toLowerCase();return V(e,e=>e.search(r))},rF=(e,t)=>rP(e,t).map(e=>{let r=rM.detect(e.versionRegexes,t);return{current:e.name,version:r}}),rH=(e,t)=>rP(e,t).map(e=>{let r=rM.detect(e.versionRegexes,t);return{current:e.name,version:r}}),r$=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rV=e=>t=>t7(t,e),rq=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>t7(e,"edge/")&&t7(e,"chrome")&&t7(e,"safari")&&t7(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,r$],search:e=>t7(e,"chrome")&&!t7(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>t7(e,"msie")||t7(e,"trident")},{name:"Opera",versionRegexes:[r$,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rV("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rV("firefox")},{name:"Safari",versionRegexes:[r$,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(t7(e,"safari")||t7(e,"mobile/"))&&t7(e,"applewebkit")}],rU=[{name:"Windows",search:rV("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>t7(e,"iphone")||t7(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rV("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:rV("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rV("linux"),versionRegexes:[]},{name:"Solaris",search:rV("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rV("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:rV("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],rG={browsers:v(rq),oses:v(rU)},rK="Edge",rY="Chromium",rJ="Opera",rQ="Firefox",rX="Safari",rZ=e=>{let t=e.current,r=e.version,l=e=>()=>t===e;return{current:t,version:r,isEdge:l(rK),isChromium:l(rY),isIE:l("IE"),isOpera:l(rJ),isFirefox:l(rQ),isSafari:l(rX)}},r0={unknown:()=>rZ({current:void 0,version:rM.unknown()}),nu:rZ,edge:v(rK),chromium:v(rY),ie:v("IE"),opera:v(rJ),firefox:v(rQ),safari:v(rX)},r1="Windows",r9="Android",r3="Linux",r2="macOS",r5="Solaris",r7="FreeBSD",r4="ChromeOS",r6=e=>{let t=e.current,r=e.version,l=e=>()=>t===e;return{current:t,version:r,isWindows:l(r1),isiOS:l("iOS"),isAndroid:l(r9),isMacOS:l(r2),isLinux:l(r3),isSolaris:l(r5),isFreeBSD:l(r7),isChromeOS:l(r4)}},r8={unknown:()=>r6({current:void 0,version:rM.unknown()}),nu:r6,windows:v(r1),ios:v("iOS"),android:v(r9),linux:v(r3),macos:v(r2),solaris:v(r5),freebsd:v(r7),chromeos:v(r4)},le={detect:(e,t,r)=>{let l=rG.browsers(),o=rG.oses(),n=t.bind(e=>rI(l,e)).orThunk(()=>rF(l,e)).fold(r0.unknown,r0.nu),s=rH(o,e).fold(r8.unknown,r8.nu),a=rz(s,n,e,r);return{browser:n,os:s,deviceType:a}}},lt=e=>window.matchMedia(e).matches,lr=rN(()=>le.detect(navigator.userAgent,k.from(navigator.userAgentData),lt)),ll=()=>lr(),lo=(e,t)=>{let r=r=>{let l=t(r);if(l<=0||null===l){let t=ra(r,e);return parseFloat(t)||0}return l},l=(e,t)=>H(t,(t,r)=>{let l=ra(e,r),o=void 0===l?0:parseInt(l,10);return isNaN(o)?t:t+o},0);return{set:(t,r)=>{if(!h(r)&&!r.match(/^[0-9]+$/))throw Error(e+".set accepts only positive integer values. Value was "+r);let l=t.dom;rr(l)&&(l.style[e]=r+"px")},get:r,getOuter:r,aggregate:l,max:(e,t,r)=>{let o=l(e,r);return t>o?t-o:0}}},ln=(e,t)=>rt(e).getOr(t),ls=(e,t,r)=>ln(ra(e,t),r),la=(e,t,r,l)=>{let o=ls(e,`padding-${r}`,0),n=ls(e,`padding-${l}`,0),s=ls(e,`border-${r}-width`,0),a=ls(e,`border-${l}-width`,0);return t-o-n-s-a},li=(e,t)=>{let r=e.dom,l=r.getBoundingClientRect().width||r.offsetWidth;return"border-box"===t?l:la(e,l,"left","right")},lm=lo("width",e=>e.dom.offsetWidth),lc=e=>lm.get(e),ld=e=>lm.getOuter(e),lu=e=>li(e,"content-box"),lf=e=>ls(e,"width",e.dom.offsetWidth),lg=(e,t,r)=>{let l=e.cells,o=l.slice(0,t),n=l.slice(t),s=o.concat(r).concat(n);return lb(e,s)},lh=(e,t,r)=>lg(e,t,[r]),lp=(e,t,r)=>{let l=e.cells;l[t]=r},lb=(e,t)=>tR(e.element,t,e.section,e.isNew),lw=(e,t)=>{let r=e.cells,l=W(r,t);return tR(e.element,l,e.section,e.isNew)},lv=(e,t)=>e.cells[t],ly=(e,t)=>lv(e,t).element,lC=e=>e.cells.length,lT=e=>{let t=I(e,e=>"colgroup"===e.section);return{rows:t.fail,cols:t.pass}},lx=(e,t,r)=>{let l=W(e.cells,r);return tR(t(e.element),l,e.section,!0)},lS="data-snooker-locked-cols",lR=e=>eI(e,lS).bind(e=>k.from(e.match(/\d+/g))).map(e=>J(e,O)),lD=e=>{let t=H(lT(e).rows,(e,t)=>(L(t.cells,(t,r)=>{t.isLocked&&(e[r]=!0)}),e),{}),r=ec(t,(e,t)=>parseInt(t,10));return Q(r)},lO=(e,t)=>e+","+t,lk=(e,t)=>{let r=G(e.all,e=>e.cells);return P(r,t)},lE=e=>{let t={},r=0;return L(e.cells,e=>{let l=e.colspan;j(l,o=>{let n=r+o;t[n]=tO(e.element,l,n)}),r+=l}),t},lA=e=>{let t={},r=[],l=Z(e).map(e=>e.element).bind(rR),o=l.bind(lR).getOr({}),n=0,s=0,a=0,{pass:i,fail:m}=I(e,e=>"colgroup"===e.section);L(m,e=>{let l=[];L(e.cells,e=>{let r=0;for(;void 0!==t[lO(a,r)];)r++;let n=eg(o,r.toString()),i=tC(e.element,e.rowspan,e.colspan,a,r,n);for(let l=0;l<e.colspan;l++)for(let o=0;o<e.rowspan;o++){let e=a+o,n=r+l,m=lO(e,n);t[m]=i,s=Math.max(s,n+1)}l.push(i)}),n++,r.push(tT(e.element,l,e.section)),a++});let{columns:c,colgroups:d}=ee(i).map(e=>{let t=lE(e),r=tk(e.element,ed(t));return{colgroups:[r],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}})),u=tb(n,s);return{grid:u,access:t,all:r,columns:c,colgroups:d}},lB={fromTable:e=>{let t=rA(e);return lA(t)},generate:lA,getAt:(e,t,r)=>k.from(e.access[lO(t,r)]),findItem:(e,t,r)=>{let l=lk(e,e=>r(t,e.element));return l.length>0?k.some(l[0]):k.none()},filterItems:lk,justCells:e=>G(e.all,e=>e.cells),justColumns:e=>ed(e.columns),hasColumns:e=>er(e.columns).length>0,getColumnAt:(e,t)=>k.from(e.columns[t])},lN=(e,t=O)=>{let r=e.grid,l=j(r.columns,y),o=j(r.rows,y);return W(l,r=>lz(()=>G(o,t=>lB.getAt(e,t,r).filter(e=>e.column===r).toArray()),e=>1===e.colspan&&t(e.element),()=>lB.getAt(e,0,r)))},lz=(e,t,r)=>{let l=e(),o=V(l,t),n=o.orThunk(()=>k.from(l[0]).orThunk(r));return n.map(e=>e.element)},l_=e=>{let t=e.grid,r=j(t.rows,y),l=j(t.columns,y);return W(r,t=>lz(()=>G(l,r=>lB.getAt(e,t,r).filter(e=>e.row===t).fold(v([]),e=>[e])),e=>1===e.rowspan,()=>lB.getAt(e,t,0)))},lj=(e,t)=>{if(t<0||t>=e.length-1)return k.none();let r=e[t].fold(()=>{let r=Y(e.slice(0,t));return et(r,(e,t)=>e.map(e=>({value:e,delta:t+1})))},e=>k.some({value:e,delta:0})),l=e[t+1].fold(()=>{let r=e.slice(t+1);return et(r,(e,t)=>e.map(e=>({value:e,delta:t+1})))},e=>k.some({value:e,delta:1}));return r.bind(e=>l.map(t=>{let r=t.delta+e.delta;return Math.abs(t.value-e.value)/r}))},lW=(e,t)=>r=>"rtl"===lL(r)?t:e,lL=e=>"rtl"===ra(e,"direction")?"rtl":"ltr",lM=lo("height",e=>{let t=e.dom;return tL(e)?t.getBoundingClientRect().height:t.offsetHeight}),lI=e=>lM.get(e),lP=e=>lM.getOuter(e),lF=e=>ls(e,"height",e.dom.offsetHeight),lH=(e,t)=>({left:e,top:t,translate:(r,l)=>lH(e+r,t+l)}),l$=e=>{let t=e.getBoundingClientRect();return lH(t.left,t.top)},lV=(e,t)=>void 0!==e?e:void 0!==t?t:0,lq=e=>{let t=e.dom.ownerDocument,r=t.body,l=t.defaultView,o=t.documentElement;if(r===e.dom)return lH(r.offsetLeft,r.offsetTop);let n=lV(null==l?void 0:l.pageYOffset,o.scrollTop),s=lV(null==l?void 0:l.pageXOffset,o.scrollLeft),a=lV(o.clientTop,r.clientTop),i=lV(o.clientLeft,r.clientLeft);return lU(e).translate(s-i,n-a)},lU=e=>{let t=e.dom,r=t.ownerDocument,l=r.body;return l===t?lH(l.offsetLeft,l.offsetTop):tL(e)?l$(t):lH(0,0)},lG=(e,t)=>({row:e,y:t}),lK=(e,t)=>({col:e,x:t}),lY=e=>{let t=lq(e);return t.left+ld(e)},lJ=e=>lq(e).left,lQ=(e,t)=>lK(e,lJ(t)),lX=(e,t)=>lK(e,lY(t)),lZ=e=>lq(e).top,l0=(e,t)=>lG(e,lZ(t)),l1=(e,t)=>lG(e,lZ(t)+lP(t)),l9=(e,t,r)=>{if(0===r.length)return[];let l=W(r.slice(1),(t,r)=>t.map(t=>e(r,t))),o=r[r.length-1].map(e=>t(r.length-1,e));return l.concat([o])},l3={delta:y,positions:e=>l9(l0,l1,e),edge:lZ},l2=lW({delta:y,edge:lJ,positions:e=>l9(lQ,lX,e)},{delta:e=>-e,edge:lY,positions:e=>l9(lX,lQ,e)}),l5={delta:(e,t)=>l2(t).delta(e,t),positions:(e,t)=>l2(t).positions(e,t),edge:e=>l2(e).edge(e)},l7={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},l4=(()=>{let e="[0-9]+",t="[+-]?"+e,r="[eE]"+t,l=e=>`(?:${e})?`,o=["Infinity",e+"\\."+l(e)+l(r),"\\."+e+l(r),e+l(r)].join("|"),n=`[+-]?(?:${o})`;return RegExp(`^(${n})(.*)$`)})(),l6=(e,t)=>_(t,t=>_(l7[t],t=>e===t)),l8=(e,t)=>{let r=k.from(l4.exec(e));return r.bind(e=>{let r=Number(e[1]),l=e[2];return l6(l,t)?k.some({value:r,unit:l}):k.none()})},oe=/(\d+(\.\d+)?)%/,ot=/(\d+(\.\d+)?)px|em/,or=ez("col"),ol=(e,t,r)=>{let l=e1(e).getOrThunk(()=>tI(eJ(e)));return t(e)/r(l)*100},oo=(e,t)=>{rn(e,"width",t+"px")},on=(e,t)=>{rn(e,"width",t+"%")},os=(e,t)=>{rn(e,"height",t+"px")},oa=e=>lF(e)+"px",oi=(e,t,r,l)=>{let o=rR(e).map(e=>{let l=r(e);return Math.floor(t/100*l)}).getOr(t);return l(e,o),o},om=(e,t,r,l)=>{let o=parseFloat(e);return t6(e,"%")&&"table"!==eS(t)?oi(t,o,r,l):o},oc=e=>{let t=oa(e);return t?om(t,e,lI,os):lI(e)},od=(e,t,r)=>{let l=r(e),o=rf(e,t);return l/o},ou=(e,t)=>rm(e,t).orThunk(()=>eI(e,t).map(e=>e+"px")),of=e=>ou(e,"width"),og=e=>ou(e,"height"),oh=e=>ol(e,lc,lu),op=e=>or(e)?lc(e):lf(e),ob=e=>od(e,"rowspan",oc),ow=e=>{let t=of(e);return t.bind(e=>l8(e,["fixed","relative","empty"]))},ov=(e,t,r)=>{rn(e,"width",t+r)},oy=e=>lc(e)+"px",oC=e=>ol(e,lc,lu)+"%",oT=v(oe),ox=ez("col"),oS=e=>of(e).getOrThunk(()=>op(e)+"px"),oR=e=>og(e).getOrThunk(()=>ob(e)+"px"),oD=e=>W(lB.justColumns(e),e=>k.from(e.element)),oO=e=>{let t=ll().browser,r=t.isChromium()||t.isFirefox();return!ox(e)||r},ok=(e,t,r,l,o,n)=>e.filter(l).fold(()=>n(lj(r,t)),e=>o(e)),oE=(e,t,r,l)=>{let o=lN(e),n=lB.hasColumns(e)?oD(e):o,s=[k.some(l5.edge(t))].concat(W(l5.positions(o,t),e=>e.map(e=>e.x))),a=x(rg);return W(n,(e,t)=>ok(e,t,s,a,e=>{if(oO(e))return r(e);{let e=t3(o[t],y);return ok(e,t,s,a,e=>l(k.some(lc(e))),l)}},l))},oA=e=>e.map(e=>e+"px").getOr(""),oB=(e,t)=>oE(e,t,oS,oA),oN=(e,t,r)=>oE(e,t,oh,e=>e.fold(()=>r.minCellWidth(),e=>e/r.pixelWidth()*100)),oz=(e,t,r)=>oE(e,t,op,e=>e.getOrThunk(r.minCellWidth)),o_=(e,t,r,l,o)=>{let n=l_(e),s=[k.some(r.edge(t))].concat(W(r.positions(n,t),e=>e.map(e=>e.y)));return W(n,(e,t)=>ok(e,t,s,x(rh),l,o))},oj=(e,t,r)=>o_(e,t,r,ob,e=>e.getOrThunk(rw)),oW=(e,t,r)=>o_(e,t,r,oR,oA),oL=(e,t)=>()=>tL(e)?t(e):parseFloat(rm(e,"width").getOr("0")),oM=e=>{let t=oL(e,lc),r=v(0);return{width:t,pixelWidth:t,getWidths:(t,r)=>oz(t,e,r),getCellDelta:r,singleColumnWidth:v([0]),minCellWidth:r,setElementWidth:p,adjustTableWidth:p,isRelative:!0,label:"none"}},oI=e=>{let t=oL(e,e=>parseFloat(oC(e))),r=oL(e,lc);return{width:t,pixelWidth:r,getWidths:(t,r)=>oN(t,e,r),getCellDelta:e=>e/r()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>rb()/r()*100,setElementWidth:on,adjustTableWidth:r=>{let l=t();on(e,l+r/100*l)},isRelative:!0,label:"percent"}},oP=e=>{let t=oL(e,lc);return{width:t,pixelWidth:t,getWidths:(t,r)=>oz(t,e,r),getCellDelta:y,singleColumnWidth:(e,t)=>{let r=Math.max(rb(),e+t);return[r-e]},minCellWidth:rb,setElementWidth:oo,adjustTableWidth:r=>{let l=t()+r;oo(e,l)},isRelative:!1,label:"pixel"}},oF=(e,t)=>{let r=oT().exec(t);return null!==r?oI(e):oP(e)},oH={getTableSize:e=>{let t=of(e);return t.fold(()=>oM(e),t=>oF(e,t))},pixelSize:oP,percentageSize:oI,noneSize:oM},o$=(e,t,r,l,o,n)=>({minRow:e,minCol:t,maxRow:r,maxCol:l,allCells:o,selectedCells:n}),oV=(e,t)=>{let r=e.grid.columns,l=e.grid.rows,o=l,n=r,s=0,a=0,i=[],m=[];return eo(e.access,e=>{if(i.push(e),t(e)){m.push(e);let t=e.row,r=t+e.rowspan-1,l=e.column,i=l+e.colspan-1;t<o?o=t:r>s&&(s=r),l<n?n=l:i>a&&(a=i)}}),o$(o,n,s,a,i,m)},oq=(e,t,r)=>{let l=e[r].element,o=e$.fromTag("td");tt(o,e$.fromTag("br"));let n=t?tt:te;n(l,o)},oU=(e,t,r,l)=>{let o=P(e,e=>"colgroup"!==e.section),n=t.grid.columns,s=t.grid.rows;for(let e=0;e<s;e++){let s=!1;for(let a=0;a<n;a++)if(!(e<r.minRow||e>r.maxRow||a<r.minCol||a>r.maxCol)){let r=lB.getAt(t,e,a).filter(l).isNone();r?oq(o,s,e):s=!0}}},oG=(e,t,r,l)=>{eo(r.columns,e=>{(e.column<t.minCol||e.column>t.maxCol)&&ta(e.element)});let o=P(rv(e,"tr"),e=>0===e.dom.childElementCount);L(o,ta),(t.minCol===t.maxCol||t.minRow===t.maxRow)&&L(rv(e,"th,td"),e=>{eP(e,"rowspan"),eP(e,"colspan")}),eP(e,lS),eP(e,"data-snooker-col-series");let n=oH.getTableSize(e);n.adjustTableWidth(l)},oK=(e,t,r,l)=>{if(0===l.minCol&&t.grid.columns===l.maxCol+1)return 0;let o=oz(t,e,r),n=H(o,(e,t)=>e+t,0),s=H(o.slice(l.minCol,l.maxCol+1),(e,t)=>e+t,0),a=s/n*r.pixelWidth(),i=a-r.pixelWidth();return r.getCellDelta(i)},oY=(e,t)=>{let r=e=>eV(e.element,t),l=td(e),o=rA(l),n=oH.getTableSize(e),s=lB.generate(o),a=oV(s,r),i="th:not("+t+"),td:not("+t+")",m=ry(l,"th,td",e=>eV(e,i));L(m,ta),oU(o,s,a,r);let c=lB.fromTable(e),d=oK(e,c,n,a);return oG(l,a,s,d),l},oJ=((e,t)=>{let r=t=>e(t)?k.from(t.dom.nodeValue):k.none();return{get:l=>{if(!e(l))throw Error("Can only get "+t+" value of a "+t+" node");return r(l).getOr("")},getOption:r,set:(r,l)=>{if(!e(r))throw Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=l}}})(eA,"text"),oQ=e=>oJ.get(e),oX=e=>oJ.getOption(e),oZ=(e,t)=>oJ.set(e,t),o0=e=>"img"===eS(e)?1:oX(e).fold(()=>e5(e).length,e=>e.length),o1=e=>oX(e).filter(e=>0!==e.trim().length||e.indexOf("\xa0")>-1).isSome(),o9=e=>ek(e)&&"false"===eM(e,"contenteditable"),o3=["img","br"],o2=e=>{let t=o1(e);return t||z(o3,eS(e))||o9(e)},o5=e=>tJ(e,o2),o7=e=>o4(e,o2),o4=(e,t)=>{let r=e=>{let l=e5(e);for(let e=l.length-1;e>=0;e--){let o=l[e];if(t(o))return k.some(o);let n=r(o);if(n.isSome())return n}return k.none()};return r(e)},o6={scope:["row","col"]},o8=e=>()=>{let t=e$.fromTag("td",e.dom);return tt(t,e$.fromTag("br",e.dom)),t},ne=e=>()=>e$.fromTag("col",e.dom),nt=e=>()=>e$.fromTag("colgroup",e.dom),nr=e=>()=>e$.fromTag("tr",e.dom),nl=(e,t,r)=>{let l=tf(e,t);return eo(r,(e,t)=>{null===e?eP(l,t):ej(l,t,e)}),l},no=e=>e,nn=(e,t,r)=>{let l=o5(e);return l.map(l=>{let o=r.join(","),n=t$(l,o,t=>eK(t,e));return F(n,(e,t)=>{let r=tc(t);return tt(e,r),r},t)}).getOr(t)},ns=(e,t)=>{eo(o6,(r,l)=>eI(e,l).filter(e=>z(r,e)).each(e=>ej(t,l,e)))},na=(e,t,r)=>{let l=(e,t)=>{rd(e.element,t),rc(t,"height"),1!==e.colspan&&rc(t,"width")};return{col:r=>{let o=e$.fromTag(eS(r.element),t.dom);return l(r,o),e(r.element,o),o},colgroup:nt(t),row:nr(t),cell:o=>{let n=e$.fromTag(eS(o.element),t.dom),s=r.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=s.length>0?nn(o.element,n,s):n;return tt(a,e$.fromTag("br")),l(o,n),ns(o.element,n),e(o.element,n),n},replace:nl,colGap:ne(t),gap:o8(t)}},ni=e=>({col:ne(e),colgroup:nt(e),row:nr(e),cell:o8(e),replace:no,colGap:ne(e),gap:o8(e)}),nm=(e,t)=>{let r=t||document,l=r.createElement("div");return l.innerHTML=e,e5(e$.fromDom(l))},nc=e=>W(e,e$.fromDom),nd=e=>t=>t.options.get(e),nu="100%",nf=e=>{var t;let r=e.dom,l=null!==(t=r.getParent(e.selection.getStart(),r.isBlock))&&void 0!==t?t:e.getBody();return lu(e$.fromDom(l))+"px"},ng=(e,t)=>nD(e)||!nk(e)?t:nR(e)?{...t,width:nf(e)}:{...t,width:nu},nh=(e,t)=>nD(e)||nk(e)?t:nR(e)?{...t,width:nf(e)}:{...t,width:nu},np=e=>{let t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{let t=z(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:e=>{let t=z(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0}),t("table_merge_content_on_paste",{processor:"boolean",default:!0})},nb=e=>k.from(e.options.get("table_clone_elements")),nw=e=>{let t=e.options.get("object_resizing");return z(t.split(","),"table")},nv=nd("table_header_type"),ny=nd("table_column_resizing"),nC=e=>"preservetable"===ny(e),nT=e=>"resizetable"===ny(e),nx=nd("table_sizing_mode"),nS=e=>"relative"===nx(e),nR=e=>"fixed"===nx(e),nD=e=>"responsive"===nx(e),nO=nd("table_resize_bars"),nk=nd("table_style_by_css"),nE=nd("table_merge_content_on_paste"),nA=e=>{let t=e.options,r=t.get("table_default_attributes");return t.isSet("table_default_attributes")?r:nh(e,r)},nB=e=>{let t=e.options,r=t.get("table_default_styles");return t.isSet("table_default_styles")?r:ng(e,r)},nN=nd("table_use_colgroups"),nz=e=>t0(e,"[contenteditable]"),n_=(e,t=!1)=>tL(e)?e.dom.isContentEditable:nz(e).fold(v(t),e=>"true"===nj(e)),nj=e=>e.dom.contentEditable,nW=e=>e$.fromDom(e.getBody()),nL=e=>t=>eK(t,nW(e)),nM=e=>{eP(e,"data-mce-style");let t=e=>eP(e,"data-mce-style");L(rx(e),t),L(rS(e),t),L(rD(e),t)},nI=e=>e$.fromDom(e.selection.getStart()),nP=e=>e.getBoundingClientRect().width,nF=e=>e.getBoundingClientRect().height,nH=(e,t)=>{let r=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return k.from(r).filter(re)},n$=e=>/^(\d+(\.\d+)?)%$/.test(e),nV=e=>/^(\d+(\.\d+)?)px$/.test(e),nq=e=>tK(e,ez("table")).exists(n_),nU=(e,t)=>{let r=t.column,l=t.column+t.colspan-1,o=t.row,n=t.row+t.rowspan-1;return r<=e.finishCol&&l>=e.startCol&&o<=e.finishRow&&n>=e.startRow},nG=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,nK=(e,t)=>{let r=!0,l=T(nG,t);for(let o=t.startRow;o<=t.finishRow;o++)for(let n=t.startCol;n<=t.finishCol;n++)r=r&&lB.getAt(e,o,n).exists(l);return r?k.some(t):k.none()},nY=(e,t)=>tD(Math.min(e.row,t.row),Math.min(e.column,t.column),Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),Math.max(e.column+e.colspan-1,t.column+t.colspan-1)),nJ=(e,t,r)=>{let l=lB.findItem(e,t,eK),o=lB.findItem(e,r,eK);return l.bind(e=>o.map(t=>nY(e,t)))},nQ=(e,t,r)=>nJ(e,t,r).bind(t=>nK(e,t)),nX=(e,t,r,l)=>lB.findItem(e,t,eK).bind(t=>{let o=r>0?t.row+t.rowspan-1:t.row,n=l>0?t.column+t.colspan-1:t.column,s=lB.getAt(e,o+r,n+l);return s.map(e=>e.element)}),nZ=(e,t,r)=>nJ(e,t,r).map(t=>{let r=lB.filterItems(e,T(nU,t));return W(r,e=>e.element)}),n0=(e,t)=>lB.findItem(e,t,(e,t)=>eY(t,e)).map(e=>e.element),n1=(e,t,r)=>rR(e).bind(l=>{let o=n5(l);return nX(o,e,t,r)}),n9=(e,t,r)=>{let l=n5(e);return nZ(l,t,r)},n3=(e,t,r,l,o)=>{let n=n5(e),s=eK(e,r)?k.some(t):n0(n,t),a=eK(e,o)?k.some(l):n0(n,l);return s.bind(e=>a.bind(t=>nZ(n,e,t)))},n2=(e,t,r)=>{let l=n5(e);return nQ(l,t,r)},n5=lB.fromTable;var n7=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],n4=()=>({up:v({selector:tQ,closest:t0,predicate:tG,all:e9}),down:v({selector:tq,predicate:tH}),styles:v({get:ra,getRaw:rm,set:rn,remove:rc}),attrs:v({get:eM,set:ej,remove:eP,copyTo:(e,t)=>{let r=eF(e);eW(t,r)}}),insert:v({before:e6,after:e8,afterAll:to,append:tt,appendAll:tn,prepend:te,wrap:tl}),remove:v({unwrap:ti,remove:ta}),create:v({nu:e$.fromTag,clone:e=>e$.fromDom(e.dom.cloneNode(!1)),text:e$.fromText}),query:v({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:e3,nextSibling:e2}),property:v({children:e5,name:eS,parent:e0,document:e=>eQ(e).dom,isText:eA,isComment:eO,isElement:eE,isSpecial:e=>{let t=eS(e);return z(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>eE(e)?eI(e,"lang"):k.none(),getText:oQ,setText:oZ,isBoundary:e=>!!eE(e)&&("body"===eS(e)||z(n7,eS(e))),isEmptyTag:e=>!!eE(e)&&z(["br","img","hr","input"],eS(e)),isNonEditable:e=>eE(e)&&"false"===eM(e,"contenteditable")}),eq:eK,is:eV});let n6=(e,t,r,l)=>{let o=r[0],n=r.slice(1);return l(e,t,o,n)},n8=(e,t,r,l)=>{let o=t(e,r);return F(l,(r,l)=>{let o=t(e,l);return se(e,r,o)},o)},se=(e,t,r)=>t.bind(t=>r.filter(T(e.eq,t))),st=(e,t)=>T(e.eq,t),sr=(e,t,r)=>r.length>0?n6(e,t,r,n8):k.none(),sl=(e,t,r,l=D)=>{let o=[t].concat(e.up().all(t)),n=[r].concat(e.up().all(r)),s=e=>{let t=q(e,l);return t.fold(()=>e,t=>e.slice(0,t+1))},a=s(o),i=s(n),m=V(a,t=>_(i,st(e,t)));return{firstpath:a,secondpath:i,shared:m}},so=n4(),sn=(e,t)=>sr(so,(t,r)=>e(r),t),ss=(e,t,r)=>sl(so,e,t,r),sa=e=>tQ(e,"table"),si=(e,t,r)=>{let l=e=>t=>void 0!==r&&r(t)||eK(t,e);return eK(e,t)?k.some({boxes:k.some([e]),start:e,finish:t}):sa(e).bind(o=>sa(t).bind(n=>{if(eK(o,n))return k.some({boxes:n9(o,e,t),start:e,finish:t});if(eY(o,n)){let r=t$(t,"td,th",l(o)),s=r.length>0?r[r.length-1]:t;return k.some({boxes:n3(o,e,o,t,n),start:e,finish:s})}if(!eY(n,o))return ss(e,t).shared.bind(s=>t0(s,"table",r).bind(r=>{let s=t$(t,"td,th",l(r)),a=s.length>0?s[s.length-1]:t,i=t$(e,"td,th",l(r)),m=i.length>0?i[i.length-1]:e;return k.some({boxes:n3(r,e,o,t,n),start:m,finish:a})}));{let r=t$(e,"td,th",l(n)),s=r.length>0?r[r.length-1]:e;return k.some({boxes:n3(n,e,o,t,n),start:e,finish:s})}}))},sm=(e,t)=>{let r=tq(e,t);return r.length>0?k.some(r):k.none()},sc=(e,t)=>V(e,e=>eV(e,t)),sd=(e,t,r)=>tZ(e,t).bind(t=>tZ(e,r).bind(e=>sn(sa,[t,e]).map(r=>({first:t,last:e,table:r})))),su=(e,t)=>tQ(e,"table").bind(r=>tZ(r,t).bind(t=>si(t,e).bind(e=>e.boxes.map(t=>({boxes:t,start:e.start,finish:e.finish}))))),sf=(e,t,r,l,o)=>sc(e,o).bind(e=>n1(e,t,r).bind(e=>su(e,l))),sg=(e,t)=>sm(e,t),sh=(e,t,r)=>sd(e,t,r).bind(t=>{let r=t=>eK(e,t),l="thead,tfoot,tbody,table",o=tQ(t.first,l,r),n=tQ(t.last,l,r);return o.bind(e=>n.bind(r=>eK(e,r)?n2(t.table,t.first,t.last):k.none()))}),sp=e=>{let t=(e,t)=>eI(e,t).exists(e=>parseInt(e,10)>1);return e.length>0&&K(e,e=>t(e,"rowspan")||t(e,"colspan"))?k.some(e):k.none()},sb=(e,t,r)=>t.length<=1?k.none():sh(e,r.firstSelectedSelector,r.lastSelectedSelector).map(e=>({bounds:e,cells:t})),sw="data-mce-selected",sv="data-mce-first-selected",sy="data-mce-last-selected",sC="["+sw+"]",sT={selected:sw,selectedSelector:"td["+sw+"],th["+sw+"]",firstSelected:sv,firstSelectedSelector:"td["+sv+"],th["+sv+"]",lastSelected:sy,lastSelectedSelector:"td["+sy+"],th["+sy+"]"},sx=(e,t,r)=>({element:r,mergable:sb(t,e,sT),unmergable:sp(e),selection:y(e)}),sS=(e,t,r)=>({element:e,clipboard:t,generators:r}),sR=(e,t,r,l)=>({selection:y(e),clipboard:r,generators:l}),sD=e=>rR(e).bind(e=>sg(e,sT.firstSelectedSelector)).fold(v(e),e=>e[0]),sO=e=>(t,r)=>{let l=eS(t),o="col"===l||"colgroup"===l?sD(t):t;return t0(o,e,r)},sk=sO("th,td,caption"),sE=sO("th,td"),sA=e=>nc(e.model.table.getSelectedCells()),sB=e=>P(sA(e),e=>eV(e,sT.selectedSelector)),sN=e=>rR(e[0]).map(e=>{let t=oY(e,sC);return nM(t),[t]}),sz=(e,t)=>W(t,t=>e.selection.serializer.serialize(t.dom,{})).join(""),s_=e=>W(e,e=>e.dom.innerText).join(""),sj=(e,t)=>{e.on("BeforeGetContent",t=>{if(!0===t.selection){let r=sB(e);r.length>=1&&(t.preventDefault(),sN(r).each(r=>{t.content="text"===t.format?s_(r):sz(e,r)}))}}),e.on("BeforeSetContent",r=>{if(!0===r.selection&&!0===r.paste){let l=sA(e);Z(l).each(l=>{rR(l).each(o=>{let n=P(nm(r.content),e=>"meta"!==eS(e)),s=ez("table");if(nE(e)&&1===n.length&&s(n[0])){r.preventDefault();let s=e$.fromDom(e.getDoc()),a=ni(s),i=sS(l,n[0],a);t.pasteCells(o,i).each(()=>{e.focus()})}})})}})},sW=(e,t)=>({element:e,offset:t}),sL=(e,t,r)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?r(t).bind(t=>sL(e,t,r).orThunk(()=>k.some(t))):k.none(),sM=(e,t)=>{if(e.property().isText(t))return e.property().getText(t).length;let r=e.property().children(t);return r.length},sI=(e,t)=>{let r=sL(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(r))return sW(r,sM(e,r));let l=e.property().children(r);return l.length>0?sI(e,l[l.length-1]):sW(r,sM(e,r))},sP=n4(),sF=e=>sI(sP,e),sH=(e,t)=>{if(!rg(e)){let r=ow(e);r.each(r=>{let l=r.value/2;ov(e,l,r.unit),ov(t,l,r.unit)})}},s$=e=>W(e,v(0)),sV=(e,t,r,l,o)=>o(e.slice(0,t)).concat(l).concat(o(e.slice(r))),sq=e=>(t,r,l,o)=>{if(!e(l))return l;{let e=Math.max(o,t[r]-Math.abs(l)),n=Math.abs(e-t[r]);return l>=0?n:-n}},sU=sq(e=>e<0),sG=sq(O),sK=()=>{let e=(e,t,r,l,o)=>{let n=sU(e,t,l,o);return sV(e,t,r+1,[n,0],s$)},t=(e,t,r,l)=>{let o=(100+r)/100,n=Math.max(l,(e[t]+r)/o);return W(e,(e,r)=>(r===t?n:e/o)-e)},r=(r,l,o,n,s,a)=>a?t(r,l,n,s):e(r,l,o,n,s);return{resizeTable:(e,t)=>e(t),clampTableDelta:sU,calcLeftEdgeDeltas:r,calcMiddleDeltas:(e,t,l,o,n,s,a)=>r(e,l,o,n,s,a),calcRightEdgeDeltas:(e,r,l,o,n,s)=>{if(s)return t(e,l,o,n);{let t=sU(e,l,o,n);return s$(e.slice(0,l)).concat([t])}},calcRedestributedWidths:(e,t,r,l)=>{if(!l)return{delta:r,newSizes:e};{let l=(t+r)/t,o=W(e,e=>e/l);return{delta:100*l-100,newSizes:o}}}}},sY=()=>{let e=(e,t,r,l,o)=>{let n=l>=0?r:t,s=sG(e,n,l,o);return sV(e,t,r+1,[s,-s],s$)};return{resizeTable:(e,t,r)=>{r&&e(t)},clampTableDelta:(e,t,r,l,o)=>{if(!o)return sU(e,t,r,l);if(r>=0)return r;{let t=H(e,(e,t)=>e+t-l,0);return Math.max(-t,r)}},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,r,l,o,n,s)=>e(t,l,o,n,s),calcRightEdgeDeltas:(e,t,r,l,o,n)=>{if(n)return s$(e);{let t=l/e.length;return W(e,v(t))}},calcRedestributedWidths:(e,t,r,l)=>({delta:0,newSizes:e})}},sJ=e=>{let t=lB.fromTable(e);return t.grid},sQ=ez("th"),sX=e=>K(e,e=>sQ(e.element)),sZ=(e,t)=>e&&t?"sectionCells":e?"section":"cells",s0=e=>{let t="thead"===e.section,r=t1(s1(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||r?{type:"header",subType:sZ(t,r)}:{type:"body"}},s1=e=>{let t=P(e,e=>sQ(e.element));return 0===t.length?k.some("td"):t.length===e.length?k.some("th"):k.none()},s9=e=>{let t=W(e,e=>s0(e).type),r=z(t,"header"),l=z(t,"footer");if(!r&&!l)return k.some("body");{let e=z(t,"body");return!r||e||l?r||e||!l?k.none():k.some("footer"):k.some("header")}},s3=e=>et(e.all,e=>{let t=s0(e);return"header"===t.type?k.from(t.subType):k.none()}),s2=(e,t,r)=>tS(r(e.element,t),!0,e.isLocked),s5=(e,t)=>e.section!==t?tR(e.element,e.cells,t,e.isNew):e,s7=()=>({transformRow:s5,transformCell:(e,t,r)=>{let l=r(e.element,t),o="td"!==eS(l)?tg(l,"td"):l;return tS(o,e.isNew,e.isLocked)}}),s4=()=>({transformRow:s5,transformCell:s2}),s6=()=>({transformRow:(e,t)=>{let r="thead"===t?"tbody":t;return s5(e,r)},transformCell:s2}),s8={getTableSectionType:(e,t)=>{let r=lB.fromTable(e),l=s3(r).getOr(t);switch(l){case"section":return s7();case"sectionCells":return s4();case"cells":return s6()}},section:s7,sectionCells:s4,cells:s6,fallback:()=>({transformRow:y,transformCell:s2})},ae=(e,t,r,l)=>{r===l?eP(e,t):ej(e,t,r)},at=(e,t,r)=>{ee(tV(e,t)).fold(()=>te(e,r),e=>e8(e,r))},ar=(e,t)=>{let r=tX(e,t).getOrThunk(()=>{let r=e$.fromTag(t,eJ(e).dom);return"thead"===t?at(e,"caption,colgroup",r):"colgroup"===t?at(e,"caption",r):tt(e,r),r});return ts(r),r},al=(e,t)=>{let r=[],l=[],o=e=>W(e,e=>{e.isNew&&r.push(e.element);let t=e.element;return ts(t),L(e.cells,e=>{e.isNew&&l.push(e.element),ae(e.element,"colspan",e.colspan,1),ae(e.element,"rowspan",e.rowspan,1),tt(t,e.element)}),t}),n=e=>G(e,e=>W(e.cells,e=>(ae(e.element,"span",e.colspan,1),e.element))),s=(t,r)=>{let l=ar(e,r),s="colgroup"===r?n:o,a=s(t);tn(l,a)},a=t=>{tX(e,t).each(ta)},i=(e,t)=>{e.length>0?s(e,t):a(t)},m=[],c=[],d=[],u=[];return L(t,e=>{switch(e.section){case"thead":m.push(e);break;case"tbody":c.push(e);break;case"tfoot":d.push(e);break;case"colgroup":u.push(e)}}),i(u,"colgroup"),i(m,"thead"),i(c,"tbody"),i(d,"tfoot"),{newRows:r,newCells:l}},ao=e=>W(e,e=>{let t=tc(e.element);return L(e.cells,e=>{let r=td(e.element);ae(r,"colspan",e.colspan,1),ae(r,"rowspan",e.rowspan,1),tt(t,r)}),t}),an=(e,t)=>W(e,e=>lv(e,t)),as=(e,t)=>e[t],aa=(e,t)=>{if(0===e.length)return 0;let r=e[0],l=q(e,e=>!t(r.element,e.element));return l.getOr(e.length)},ai=(e,t,r,l)=>{let o=as(e,t),n="colgroup"===o.section,s=aa(o.cells.slice(r),l),a=n?1:aa(an(e.slice(t),r),l);return{colspan:s,rowspan:a}},am=(e,t)=>{let r=W(e,e=>W(e.cells,D)),l=(e,t,l,o)=>{for(let n=e;n<e+l;n++)for(let e=t;e<t+o;e++)r[n][e]=!0};return W(e,(o,n)=>{let s=G(o.cells,(o,s)=>{if(!1!==r[n][s])return[];{let r=ai(e,n,s,t);return l(n,s,r.rowspan,r.colspan),[ty(o.element,r.rowspan,r.colspan,o.isNew)]}});return tx(o.element,s,o.section,o.isNew)})},ac=(e,t,r)=>{let l=[];L(e.colgroups,o=>{let n=[];for(let l=0;l<e.grid.columns;l++){let o=lB.getColumnAt(e,l).map(e=>tS(e.element,r,!1)).getOrThunk(()=>tS(t.colGap(),!0,!1));n.push(o)}l.push(tR(o.element,n,"colgroup",r))});for(let o=0;o<e.grid.rows;o++){let n=[];for(let l=0;l<e.grid.columns;l++){let s=lB.getAt(e,o,l).map(e=>tS(e.element,r,e.isLocked)).getOrThunk(()=>tS(t.gap(),!0,!1));n.push(s)}let s=e.all[o],a=tR(s.element,n,s.section,r);l.push(a)}return l},ad=(e,t)=>ac(e,t,!1),au=e=>am(e,eK),af=(e,t)=>et(e.all,e=>V(e.cells,e=>eK(t,e.element))),ag=(e,t,r)=>{let l=W(t.selection,t=>rT(t).bind(t=>af(e,t)).filter(r)),o=t9(l);return t2(o.length>0,o)},ah=(e,t,r,l,o)=>(n,s,a,i)=>{let m=lB.fromTable(n),c=k.from(null==i?void 0:i.section).getOrThunk(s8.fallback),d=t(m,s).map(t=>{let r=ad(m,a),l=e(r,t,eK,o(a),c),n=lD(l.grid),s=au(l.grid);return{info:t,grid:s,cursor:l.cursor,lockedColumns:n}});return d.bind(e=>{let t=al(n,e.grid),o=k.from(null==i?void 0:i.sizing).getOrThunk(()=>oH.getTableSize(n)),s=k.from(null==i?void 0:i.resize).getOrThunk(sY);return r(n,e.grid,e.info,{sizing:o,resize:s,section:c}),l(n),eP(n,lS),e.lockedColumns.length>0&&ej(n,lS,e.lockedColumns.join(",")),k.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})},ap=(e,t)=>ag(e,t,O).map(e=>({cells:e,generators:t.generators,clipboard:t.clipboard})),ab=(e,t)=>t.mergable,aw=(e,t)=>t.unmergable,av=(e,t)=>ag(e,t,O),ay=(e,t)=>ag(e,t,e=>!e.isLocked),aC=(e,t)=>af(e,t).exists(e=>!e.isLocked),aT=(e,t)=>K(t,t=>aC(e,t)),ax=(e,t,r,l)=>{let o=lT(e).rows;if(0===o.length)return e;for(let e=t.startRow;e<=t.finishRow;e++)for(let r=t.startCol;r<=t.finishCol;r++){let t=o[e],n=lv(t,r).isLocked;lp(t,r,tS(l(),!1,n))}return e},aS=(e,t,r,l)=>{let o=lT(e).rows,n=!0;for(let e=0;e<o.length;e++)for(let s=0;s<lC(o[0]);s++){let a=o[e],i=lv(a,s),m=i.element,c=r(m,t);c&&!n?lp(a,s,tS(l(),!0,i.isLocked)):c&&(n=!1)}return e},aR=(e,t)=>H(e,(e,r)=>_(e,e=>t(e.element,r.element))?e:e.concat([r]),[]),aD=(e,t,r,l)=>(t>0&&t<e[0].cells.length&&L(e,e=>{let o=e.cells[t-1],n=0,s=l();for(;e.cells.length>t+n&&r(o.element,e.cells[t+n].element);)lp(e,t+n,tS(s,!0,e.cells[t+n].isLocked)),n++}),e),aO=(e,t,r,l)=>{let o=lT(e).rows;if(t>0&&t<o.length){let e=o[t-1].cells,n=aR(e,r);L(n,e=>{let n=k.none();for(let s=t;s<o.length;s++)for(let t=0;t<lC(o[0]);t++){let a=o[s],i=lv(a,t),m=r(i.element,e.element);m&&(n.isNone()&&(n=k.some(l())),n.each(e=>{lp(a,t,tS(e,!0,i.isLocked))}))}})}return e},ak=e=>{let t=t=>t(e),r=v(e),l={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:O,isError:D,map:t=>aA.value(t(e)),mapError:()=>l,bind:t,exists:t,forall:t,getOr:r,or:()=>l,getOrThunk:r,orThunk:()=>l,getOrDie:r,each:t=>{t(e)},toOptional:()=>k.some(e)};return l},aE=e=>{let t={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:D,isError:O,map:()=>t,mapError:t=>aA.error(t(e)),bind:()=>t,exists:D,forall:O,getOr:y,or:y,getOrThunk:R,orThunk:R,getOrDie:S(String(e)),each:p,toOptional:k.none};return t},aA={value:ak,error:aE,fromOption:(e,t)=>e.fold(()=>aE(t),ak)},aB=(e,t,r)=>{if(e.row>=t.length||e.column>lC(t[0]))return aA.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);let l=t.slice(e.row),o=l[0].cells.slice(e.column),n=lC(r[0]),s=r.length;return aA.value({rowDelta:l.length-s,colDelta:o.length-n})},aN=(e,t)=>{let r=lC(e[0]),l=lC(t[0]);return{rowDelta:0,colDelta:r-l}},az=(e,t)=>{let r=e.length,l=t.length;return{rowDelta:r-l,colDelta:0}},a_=(e,t,r,l)=>{let o="colgroup"===t.section?r.col:r.cell;return j(e,e=>tS(o(),!0,l(e)))},aj=(e,t,r,l)=>{let o=e[e.length-1];return e.concat(j(t,()=>{let e="colgroup"===o.section?r.colgroup:r.row,t=lx(o,e,y),n=a_(t.cells.length,t,r,e=>ef(l,e.toString()));return lb(t,n)}))},aW=(e,t,r,l)=>W(e,e=>{let o=a_(t,e,r,D);return lg(e,l,o)}),aL=(e,t,r)=>W(e,e=>H(r,(r,l)=>{let o=a_(1,e,t,O)[0];return lh(r,l,o)},e)),aM=(e,t,r)=>{let l=t.colDelta<0?aW:y,o=t.rowDelta<0?aj:y,n=lD(e),s=lC(e[0]),a=_(n,e=>e===s-1),i=l(e,Math.abs(t.colDelta),r,a?s-1:s),m=lD(i);return o(i,Math.abs(t.rowDelta),r,J(m,O))},aI=(e,t,r,l)=>{let o=lv(e[t],r),n=T(l,o.element),s=e[t];return e.length>1&&lC(s)>1&&(r>0&&n(ly(s,r-1))||r<s.cells.length-1&&n(ly(s,r+1))||t>0&&n(ly(e[t-1],r))||t<e.length-1&&n(ly(e[t+1],r)))},aP=(e,t,r,l,o,n)=>{let s=e.row,a=e.column,i=r.length,m=lC(r[0]),c=s+i,d=a+m+n.length,u=J(n,O);for(let e=s;e<c;e++){let n=0;for(let i=a;i<d;i++){if(u[i]){n++;continue}aI(t,e,i,o)&&aS(t,ly(t[e],i),o,l.cell);let m=i-a-n,c=lv(r[e-s],m),d=c.element,f=l.replace(d);lp(t[e],i,tS(f,!0,c.isLocked))}}return t},aF=(e,t,r)=>{let l=lC(t[0]),o=lT(t).cols.length+e.row,n=j(l-e.column,t=>t+e.column),s=V(n,e=>K(r,t=>t!==e)).getOr(l-1);return{row:o,column:s}},aH=(e,t,r)=>P(r,r=>r>=e.column&&r<=lC(t[0])+e.column),a$=(e,t,r,l,o)=>{let n=lD(t),s=aF(e,t,n),a=lT(r).rows,i=aH(s,a,n),m=aB(s,t,a);return m.map(e=>{let r={...e,colDelta:e.colDelta-i.length},n=aM(t,r,l),m=lD(n),c=aH(s,a,m);return aP(s,n,a,l,o,c)})},aV=(e,t,r,l,o)=>{aD(t,e,o,l.cell);let n=az(r,t),s=aM(r,n,l),a=az(t,s),i=aM(t,a,l);return W(i,(t,r)=>lg(t,e,s[r].cells))},aq=(e,t,r,l,o)=>{aO(t,e,o,l.cell);let n=lD(t),s=aN(t,r),a={...s,colDelta:s.colDelta-n.length},i=aM(t,a,l),{cols:m,rows:c}=lT(i),d=lD(i),u=aN(r,t),f={...u,colDelta:u.colDelta+d.length},g=aL(r,l,d),h=aM(g,f,l);return[...m,...c.slice(0,e),...h,...c.slice(e,c.length)]},aU=(e,t,r,l)=>lx(e,e=>l(e,r),t),aG=(e,t,r,l,o)=>{let{rows:n,cols:s}=lT(e),a=n.slice(0,t),i=n.slice(t),m=aU(n[r],(e,r)=>{let s=t>0&&t<n.length&&l(ly(n[t-1],r),ly(n[t],r)),a=s?lv(n[t],r):tS(o(e.element,l),!0,e.isLocked);return a},l,o);return[...s,...a,m,...i]},aK=(e,t,r,l,o,n,s)=>{if("colgroup"!==r&&l)return lv(e,t);{let t=lv(e,o);return tS(s(t.element,n),!0,!1)}},aY=(e,t,r,l,o)=>W(e,e=>{let n=t>0&&t<lC(e)&&l(ly(e,t-1),ly(e,t)),s=aK(e,t,e.section,n,r,l,o);return lh(e,t,s)}),aJ=(e,t)=>G(e,e=>{let r=e.cells,l=F(t,(e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e,r);return l.length>0?[tR(e.element,l,e.section,e.isNew)]:[]}),aQ=(e,t,r)=>{let{rows:l,cols:o}=lT(e);return[...o,...l.slice(0,t),...l.slice(r+1)]},aX=(e,t,r,l)=>void 0!==ly(e[t],r)&&t>0&&l(ly(e[t-1],r),ly(e[t],r)),aZ=(e,t,r)=>t>0&&r(ly(e,t-1),ly(e,t)),a0=(e,t,r,l)=>aX(e,t,r,l)||aZ(e[t],r,l),a1=(e,t)=>{let r=K(t,y)&&sX(e.cells);return r?O:(e,r,l)=>{let o=eS(e.element);return!("th"===o&&t[l])}},a9=(e,t)=>{let r=K(t,y)&&sX(e);return r?O:(e,r,l)=>{let o=eS(e.element);return!("th"===o&&t[r])}},a3=(e,t,r,l)=>{let o=e=>"row"===e?rh(t):rg(t),n=e=>o(e)?`${e}group`:e;if(e)return sQ(t)?n(r):null;if(!(l&&sQ(t)))return null;{let e="row"===r?"col":"row";return n(e)}},a2=(e,t)=>(r,l,o)=>k.some(a3(e,r.element,"col",t[o])),a5=(e,t)=>(r,l)=>k.some(a3(e,r.element,"row",t[l])),a7=(e,t,r)=>tS(r(e.element,t),!0,e.isLocked),a4=(e,t,r,l,o,n,s)=>{let a=e=>_(t,t=>r(e.element,t.element));return W(e,(e,t)=>lw(e,(e,i)=>{if(!a(e))return e;{let a=s(e,t,i)?o(e,r,l):e;return n(a,t,i).each(e=>{eL(a.element,{scope:k.from(e)})}),a}}))},a6=(e,t,r)=>G(e,(l,o)=>a0(e,o,t,r)?[]:[lv(l,t)]),a8=(e,t,r)=>{let l=e[t];return G(l.cells,(l,o)=>a0(e,t,o,r)?[]:[l])},ie=(e,t,r,l,o)=>{let n=lT(e).rows,s=G(t,e=>a6(n,e,l)),a=W(n,e=>sX(e.cells)),i=a9(s,a),m=a5(r,a);return a4(e,s,l,o,a7,m,i)},it=(e,t,r,l,o,n,s)=>{let{cols:a,rows:i}=lT(e),m=i[t[0]],c=G(t,e=>a8(i,e,o)),d=W(m.cells,(e,t)=>sX(a6(i,t,o))),u=[...i];L(t,e=>{u[e]=s.transformRow(i[e],r)});let f=[...a,...u],g=a1(m,d),h=a2(l,d);return a4(f,c,o,n,s.transformCell,h,g)},ir=(e,t,r,l)=>{let o=lT(e).rows,n=W(t,e=>lv(o[e.row],e.column));return a4(e,n,r,l,a7,k.none,O)},il={generate:e=>{if(!i(e))throw Error("cases must be an array");if(0===e.length)throw Error("there must be at least one case");let t=[],r={};return L(e,(l,o)=>{let n=er(l);if(1!==n.length)throw Error("one and only one name per case");let s=n[0],a=l[s];if(void 0!==r[s])throw Error("duplicate key detected:"+s);if("cata"===s)throw Error("cannot have a case named cata (sorry)");if(!i(a))throw Error("case arguments must be an array");t.push(s),r[s]=(...r)=>{let l=r.length;if(l!==a.length)throw Error("Wrong number of arguments to case "+s+". Expected "+a.length+" ("+a+"), got "+l);return{fold:(...t)=>{if(t.length!==e.length)throw Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);let l=t[o];return l.apply(null,r)},match:e=>{let l=er(e);if(t.length!==l.length)throw Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+l.join(","));let o=K(t,e=>z(l,e));if(!o)throw Error("Not all branches were specified when using match. Specified: "+l.join(", ")+"\nRequired: "+t.join(", "));return e[s].apply(null,r)},log:e=>{console.log(e,{constructors:t,constructor:s,params:r})}}}}),r}},io=il.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),is={...io},ia=(e,t)=>0===e.length?is.none():1===e.length?is.only(0):0===t?is.left(0,1):t===e.length-1?is.right(t-1,t):t>0&&t<e.length-1?is.middle(t-1,t,t+1):is.none(),ii=(e,t,r,l,o)=>{let n=e.slice(0),s=ia(e,t),a=v(W(n,v(0)));return s.fold(a,e=>l.singleColumnWidth(n[e],r),(e,t)=>o.calcLeftEdgeDeltas(n,e,t,r,l.minCellWidth(),l.isRelative),(e,t,s)=>o.calcMiddleDeltas(n,e,t,s,r,l.minCellWidth(),l.isRelative),(e,t)=>o.calcRightEdgeDeltas(n,e,t,r,l.minCellWidth(),l.isRelative))},im=(e,t,r)=>{let l=0;for(let o=e;o<t;o++)l+=void 0!==r[o]?r[o]:0;return l},ic=(e,t)=>{let r=lB.justCells(e);return W(r,e=>{let r=im(e.column,e.column+e.colspan,t);return{element:e.element,width:r,colspan:e.colspan}})},id=(e,t)=>{let r=lB.justColumns(e);return W(r,(e,r)=>({element:e.element,width:t[r],colspan:e.colspan}))},iu=(e,t)=>{let r=lB.justCells(e);return W(r,e=>{let r=im(e.row,e.row+e.rowspan,t);return{element:e.element,height:r,rowspan:e.rowspan}})},ig=(e,t)=>W(e.all,(e,r)=>({element:e.element,height:t[r]})),ih=e=>F(e,(e,t)=>e+t,0),ip=(e,t)=>lB.hasColumns(e)?id(e,t):ic(e,t),ib=(e,t,r)=>{let l=ip(e,t);L(l,e=>{r.setElementWidth(e.element,e.width)})},iw=(e,t,r,l,o)=>{let n=lB.fromTable(e),s=o.getCellDelta(t),a=o.getWidths(n,o),i=r===n.grid.columns-1,m=l.clampTableDelta(a,r,s,o.minCellWidth(),i),c=ii(a,r,m,o,l),d=W(c,(e,t)=>e+a[t]);ib(n,d,o),l.resizeTable(o.adjustTableWidth,m,i)},iv=(e,t,r,l)=>{let o=lB.fromTable(e),n=oj(o,e,l),s=W(n,(e,l)=>r===l?Math.max(t+e,rw()):e),a=iu(o,s),i=ig(o,s);L(i,e=>{os(e.element,e.height)}),L(a,e=>{os(e.element,e.height)});let m=ih(s);os(e,m)},iy=(e,t,r,l,o)=>{let n=lB.generate(t),s=l.getWidths(n,l),a=l.pixelWidth(),{newSizes:i,delta:m}=o.calcRedestributedWidths(s,a,r.pixelDelta,l.isRelative);ib(n,i,l),l.adjustTableWidth(m)},iC=(e,t,r,l)=>{let o=lB.generate(t),n=l.getWidths(o,l);ib(o,n,l)},iT=e=>H(e,(e,t)=>{let r=_(e,e=>e.column===t.column);return r?e:e.concat([t])},[]).sort((e,t)=>e.column-t.column),ix=ez("col"),iS=ez("colgroup"),iR=e=>"tr"===eS(e)||iS(e),iD=e=>{let t=ru(e,"colspan",1),r=ru(e,"rowspan",1);return{element:e,colspan:t,rowspan:r}},iO=e=>eI(e,"scope").map(e=>e.substr(0,3)),ik={modification:(e,t=iD)=>{let r=t=>ix(t.element)?e.col(t):e.cell(t),l=t=>iS(t.element)?e.colgroup(t):e.row(t),o=e=>{if(iR(e))return l({element:e});{let l=r(t(e));return n=k.some({item:e,replacement:l}),l}},n=k.none();return{getOrInit:(e,t)=>n.fold(()=>o(e),r=>t(e,r.item)?r.replacement:o(e))}},transform:e=>t=>{let r=[],l=(e,t)=>V(r,r=>t(r.item,e)),o=l=>{let o="td"===e?{scope:null}:{},n=t.replace(l,e,o);return r.push({item:l,sub:n}),n};return{replaceOrInit:(e,t)=>iR(e)||ix(e)?e:l(e,t).fold(()=>o(e),r=>t(e,r.item)?r.sub:o(e))}},merging:e=>({unmerge:t=>{let r=iO(t);return r.each(e=>ej(t,"scope",e)),()=>{let l=e.cell({element:t,colspan:1,rowspan:1});return rc(l,"width"),rc(t,"width"),r.each(e=>ej(l,"scope",e)),l}},merge:e=>(rc(e[0],"width"),(()=>{let t=t9(W(e,iO));if(0===t.length)return k.none();{let e=t[0],r=["row","col"],l=_(t,t=>t!==e&&z(r,t));return l?k.none():k.from(e)}})().fold(()=>eP(e[0],"scope"),t=>ej(e[0],"scope",t+"group")),v(e[0]))})},iE=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],iA=(e,t)=>{let r=e.property().name(t);return z(["ol","ul"],r)},iB=(e,t)=>{let r=e.property().name(t);return z(iE,r)},iN=(e,t)=>z(["br","img","hr","input"],e.property().name(t)),iz=n4(),i_=e=>iB(iz,e),ij=e=>iA(iz,e),iW=e=>iN(iz,e),iL=e=>{let t=ez("br"),r=e=>K(e,e=>t(e)||eA(e)&&0===oQ(e).trim().length),l=e=>"li"===eS(e)||tG(e,ij).isSome(),o=e=>e2(e).map(e=>!!i_(e)||!!iW(e)&&"img"!==eS(e)).getOr(!1),n=e=>o7(e).bind(r=>{let n=o(r);return e0(r).map(o=>!0===n||l(o)||t(r)||i_(o)&&!eK(e,o)?[]:[e$.fromTag("br")])}).getOr([]),s=(()=>{let t=G(e,e=>{let t=e5(e);return r(t)?[]:t.concat(n(e))});return 0===t.length?[e$.fromTag("br")]:t})();ts(e[0]),tn(e[0],s)},iM=e=>n_(e,!0),iI=e=>{let t=rx(e);0===t.length&&ta(e)},iP=(e,t)=>({grid:e,cursor:t}),iF=e=>et(e,e=>et(e.cells,e=>{let t=e.element;return t2(iM(t),t)})),iH=(e,t,r)=>{var l,o;let n=lT(e).rows;return k.from(null===(o=null===(l=n[t])||void 0===l?void 0:l.cells[r])||void 0===o?void 0:o.element).filter(iM).orThunk(()=>iF(n))},i$=(e,t,r)=>{let l=iH(e,t,r);return iP(e,l)},iV=e=>H(e,(e,t)=>{let r=_(e,e=>e.row===t.row);return r?e:e.concat([t])},[]).sort((e,t)=>e.row-t.row),iq=(e,t)=>(r,l,o,n,s)=>{let a=iV(l),i=W(a,e=>e.row),m=it(r,i,e,t,o,n.replaceOrInit,s);return i$(m,l[0].row,l[0].column)},iU=iq("thead",!0),iG=iq("tbody",!1),iK=iq("tfoot",!1),iY=(e,t,r)=>{let l=rB(e,r.section),o=lB.generate(l);return ac(o,t,!0)},iJ=(e,t,r,l)=>iC(e,t,r,l.sizing),iQ=(e,t,r,l)=>iy(e,t,r,l.sizing,l.resize),iX=(e,t)=>_(t,e=>0===e.column&&e.isLocked),iZ=(e,t)=>_(t,t=>t.column+t.colspan>=e.grid.columns&&t.isLocked),i0=(e,t)=>{let r=lN(e),l=iT(t);return H(l,(e,t)=>{let l=r[t.column],o=l.map(ld).getOr(0);return e+o},0)},i1=e=>(t,r)=>av(t,r).filter(r=>!(e?iX:iZ)(t,r)).map(e=>({details:e,pixelDelta:i0(t,e)})),i9=e=>(t,r)=>ap(t,r).filter(r=>!(e?iX:iZ)(t,r.cells)),i3=ik.transform("th"),i2=ik.transform("td"),i5=ah((e,t,r,l)=>{let o=t[0].row,n=iV(t),s=F(n,(e,t)=>{let n=aG(e.grid,o,t.row+e.delta,r,l.getOrInit);return{grid:n,delta:e.delta+1}},{grid:e,delta:0}).grid;return i$(s,o,t[0].column)},av,p,p,ik.modification),i7=ah((e,t,r,l)=>{let o=iV(t),n=o[o.length-1],s=n.row+n.rowspan,a=F(o,(e,t)=>aG(e,s,t.row,r,l.getOrInit),e);return i$(a,s,t[0].column)},av,p,p,ik.modification),i4=ah((e,t,r,l)=>{let o=t.details,n=iT(o),s=n[0].column,a=F(n,(e,t)=>{let o=aY(e.grid,s,t.column+e.delta,r,l.getOrInit);return{grid:o,delta:e.delta+1}},{grid:e,delta:0}).grid;return i$(a,o[0].row,s)},i1(!0),iQ,p,ik.modification),i6=ah((e,t,r,l)=>{let o=t.details,n=o[o.length-1],s=n.column+n.colspan,a=iT(o),i=F(a,(e,t)=>aY(e,s,t.column,r,l.getOrInit),e);return i$(i,o[0].row,s)},i1(!1),iQ,p,ik.modification),i8=ah((e,t,r,l)=>{let o=iT(t.details),n=aJ(e,W(o,e=>e.column)),s=n.length>0?n[0].cells.length-1:0;return i$(n,o[0].row,Math.min(o[0].column,s))},(e,t)=>ay(e,t).map(t=>({details:t,pixelDelta:-i0(e,t)})),iQ,iI,ik.modification),me=ah((e,t,r,l)=>{let o=iV(t),n=aQ(e,o[0].row,o[o.length-1].row),s=n.length>0?n.length-1:0;return i$(n,Math.min(t[0].row,s),t[0].column)},av,p,iI,ik.modification),mt=ah((e,t,r,l)=>{let o=iT(t),n=W(o,e=>e.column),s=ie(e,n,!0,r,l.replaceOrInit);return i$(s,t[0].row,t[0].column)},ay,p,p,i3),mr=ah((e,t,r,l)=>{let o=iT(t),n=W(o,e=>e.column),s=ie(e,n,!1,r,l.replaceOrInit);return i$(s,t[0].row,t[0].column)},ay,p,p,i2),ml=ah(iU,ay,p,p,i3),mo=ah(iG,ay,p,p,i2),mn=ah(iK,ay,p,p,i2),ms=ah((e,t,r,l)=>{let o=ir(e,t,r,l.replaceOrInit);return i$(o,t[0].row,t[0].column)},ay,p,p,i3),ma=ah((e,t,r,l)=>{let o=ir(e,t,r,l.replaceOrInit);return i$(o,t[0].row,t[0].column)},ay,p,p,i2),mi=ah((e,t,r,l)=>{let o=t.cells;iL(o);let n=ax(e,t.bounds,r,l.merge(o));return iP(n,k.from(o[0]))},(e,t)=>ab(e,t).filter(t=>aT(e,t.cells)),iJ,p,ik.merging),mm=ah((e,t,r,l)=>{let o=F(t,(e,t)=>aS(e,t,r,l.unmerge(t)),e);return iP(o,k.from(t[0]))},(e,t)=>aw(e,t).filter(t=>aT(e,t)),iJ,p,ik.merging),mc=ah((e,t,r,l)=>{let o=((e,t)=>{let r=lB.fromTable(e);return ac(r,t,!0)})(t.clipboard,t.generators),n=tw(t.row,t.column),s=a$(n,e,o,t.generators,r);return s.fold(()=>iP(e,k.some(t.element)),e=>i$(e,t.row,t.column))},(e,t)=>rT(t.element).bind(r=>af(e,r).map(e=>{let r={...e,generators:t.generators,clipboard:t.clipboard};return r})),iJ,p,ik.modification),md=ah((e,t,r,l)=>{let o=lT(e).rows,n=t.cells[0].column,s=o[t.cells[0].row],a=iY(t.clipboard,t.generators,s),i=aV(n,e,a,t.generators,r);return i$(i,t.cells[0].row,t.cells[0].column)},i9(!0),p,p,ik.modification),mu=ah((e,t,r,l)=>{let o=lT(e).rows,n=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,s=o[t.cells[0].row],a=iY(t.clipboard,t.generators,s),i=aV(n,e,a,t.generators,r);return i$(i,t.cells[0].row,t.cells[0].column)},i9(!1),p,p,ik.modification),mf=ah((e,t,r,l)=>{let o=lT(e).rows,n=t.cells[0].row,s=o[n],a=iY(t.clipboard,t.generators,s),i=aq(n,e,a,t.generators,r);return i$(i,t.cells[0].row,t.cells[0].column)},ap,p,p,ik.modification),mg=ah((e,t,r,l)=>{let o=lT(e).rows,n=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,s=o[t.cells[0].row],a=iY(t.clipboard,t.generators,s),i=aq(n,e,a,t.generators,r);return i$(i,t.cells[0].row,t.cells[0].column)},ap,p,p,ik.modification),mh=(e,t)=>{let r=lB.fromTable(e),l=av(r,t);return l.bind(e=>{let t=e[e.length-1],l=e[0].column,o=t.column+t.colspan,n=U(W(r.all,e=>P(e.cells,e=>e.column>=l&&e.column<o)));return s1(n)}).getOr("")},mp=(e,t)=>{let r=lB.fromTable(e),l=av(r,t);return l.bind(s1).getOr("")},mb=(e,t)=>{let r=lB.fromTable(e),l=av(r,t);return l.bind(e=>{let t=e[e.length-1],l=e[0].row,o=t.row+t.rowspan,n=r.all.slice(l,o);return s9(n)}).getOr("")},mw=(e,t)=>e.dispatch("NewRow",{node:t}),mv=(e,t)=>e.dispatch("NewCell",{node:t}),my=(e,t,r)=>{e.dispatch("TableModified",{...r,table:t})},mC=(e,t,r,l,o)=>{e.dispatch("TableSelectionChange",{cells:t,start:r,finish:l,otherCells:o})},mT=e=>{e.dispatch("TableSelectionClear")},mx=(e,t,r,l,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:l,origin:o})},mS=(e,t,r,l,o)=>{e.dispatch("ObjectResized",{target:t,width:r,height:l,origin:o})},mR={structure:!1,style:!0},mD={structure:!0,style:!1},mO={structure:!0,style:!0},mk=(e,t)=>nS(e)?oH.percentageSize(t):nR(e)?oH.pixelSize(t):oH.getTableSize(t),mE=(e,t,r)=>{let l=e=>"table"===eS(nW(e)),o=nb(e),n=nT(e)?p:sH,s=t=>{switch(nv(e)){case"section":return s8.section();case"sectionCells":return s8.sectionCells();case"cells":return s8.cells();default:return s8.getTableSectionType(t,"section")}},a=(t,l)=>l.cursor.fold(()=>{let l=rx(t);return Z(l).filter(tL).map(l=>{r.clearSelectedCells(t.dom);let o=e.dom.createRng();return o.selectNode(l.dom),e.selection.setRng(o),ej(l,"data-mce-selected","1"),o})},l=>{let o=sF(l),n=e.dom.createRng();return n.setStart(o.element.dom,o.offset),n.setEnd(o.element.dom,o.offset),e.selection.setRng(n),r.clearSelectedCells(t.dom),k.some(n)}),i=(r,l,n,i)=>(m,c,d=!1)=>{nM(m);let u=e$.fromDom(e.getDoc()),f=na(n,u,o),g={sizing:mk(e,m),resize:nT(e)?sK():sY(),section:s(m)};return l(m)?r(m,c,f,g).bind(r=>{t.refresh(m.dom),L(r.newRows,t=>{mw(e,t.dom)}),L(r.newCells,t=>{mv(e,t.dom)});let l=a(m,r);return tL(m)&&(nM(m),d||my(e,m.dom,i)),l.map(e=>({rng:e,effect:i}))}):k.none()},m=i(me,t=>!l(e)||sJ(t).rows>1,p,mD),c=i(i8,t=>!l(e)||sJ(t).columns>1,p,mD),d=i(i5,O,p,mD),u=i(i7,O,p,mD),f=i(i4,O,n,mD),g=i(i6,O,n,mD),h=i(mi,O,p,mD),b=i(mm,O,p,mD),w=i(md,O,p,mD),v=i(mu,O,p,mD),y=i(mf,O,p,mD),C=i(mg,O,p,mD),T=i(mc,O,p,mO),x=i(ms,O,p,mD),S=i(ma,O,p,mD),R=i(mt,O,p,mD),D=i(mr,O,p,mD),E=i(ml,O,p,mD),A=i(mo,O,p,mD),B=i(mn,O,p,mD);return{deleteRow:m,deleteColumn:c,insertRowsBefore:d,insertRowsAfter:u,insertColumnsBefore:f,insertColumnsAfter:g,mergeCells:h,unmergeCells:b,pasteColsBefore:w,pasteColsAfter:v,pasteRowsBefore:y,pasteRowsAfter:C,pasteCells:T,makeCellsHeader:x,unmakeCellsHeader:S,makeColumnsHeader:R,unmakeColumnsHeader:D,makeRowsHeader:E,makeRowsBody:A,makeRowsFooter:B,getTableRowType:mb,getTableCellType:mp,getTableColType:mh}},mA=(e,t,r)=>{let l=ru(e,t,1);1===r||l<=1?eP(e,t):ej(e,t,Math.min(r,l))},mB=(e,t)=>r=>{let l=r.column+r.colspan-1,o=r.column;return l>=e&&o<t},mN=(e,t,r)=>{if(!lB.hasColumns(e))return[];{let l=P(lB.justColumns(e),mB(t,r)),o=W(l,e=>{let l=td(e.element);return mA(l,"span",r-t),l}),n=e$.fromTag("colgroup");return tn(n,o),[n]}},mz=(e,t,r)=>W(e.all,e=>{let l=P(e.cells,mB(t,r)),o=W(l,e=>{let l=td(e.element);return mA(l,"colspan",r-t),l}),n=e$.fromTag("tr");return tn(n,o),n}),m_=(e,t)=>{let r=lB.fromTable(e),l=ay(r,t);return l.map(e=>{let t=e[e.length-1],l=e[0].column,o=t.column+t.colspan,n=mN(r,l,o),s=mz(r,l,o);return[...n,...s]})},mj=(e,t,r)=>{let l=lB.fromTable(e),o=av(l,t);return o.bind(e=>{let t=ac(l,r,!1),o=lT(t).rows,n=o.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),s=G(n,e=>{let t=P(e.cells,e=>!e.isLocked);return t.length>0?[{...e,cells:t}]:[]}),a=au(s);return t2(a.length>0,a)}).map(e=>ao(e))},mW=il.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),mL=(e,t,r)=>{let l=r.substring(0,r.length-e.length),o=parseFloat(l);return l===o.toString()?t(o):mW.invalid(r)},mM={...mW,from:e=>t6(e,"%")?mL("%",mW.percent,e):t6(e,"px")?mL("px",mW.pixels,e):mW.invalid(e)},mI=(e,t)=>W(e,e=>{let r=mM.from(e);return r.fold(()=>e,e=>e/t*100+"%",e=>e+"%")}),mP=(e,t,r)=>{let l=r/t;return W(e,e=>{let t=mM.from(e);return t.fold(()=>e,e=>e*l+"px",e=>e/100*r+"px")})},mF=(e,t)=>{let r=e.fold(()=>v(""),e=>{let r=e/t;return v(r+"px")},()=>{let e=100/t;return v(e+"%")});return j(t,r)},mH=(e,t,r)=>e.fold(()=>t,e=>mP(t,r,e),e=>mI(t,r)),m$=(e,t,r)=>{let l=mM.from(r),o=K(e,e=>"0px"===e)?mF(l,e.length):mH(l,e,t);return mG(o)},mV=(e,t)=>0===e.length?t:F(e,(e,t)=>mM.from(t).fold(v(0),y,y)+e,0),mq=(e,t)=>{let r=Math.floor(e);return{value:r+t,remainder:e-r}},mU=(e,t)=>mM.from(e).fold(v(e),e=>e+t+"px",e=>e+t+"%"),mG=e=>{if(0===e.length)return e;let t=F(e,(e,t)=>{let r=mM.from(t).fold(()=>({value:t,remainder:0}),e=>mq(e,"px"),e=>({value:e+"%",remainder:0}));return{output:[r.value].concat(e.output),remainder:e.remainder+r.remainder}},{output:[],remainder:0}),r=t.output;return r.slice(0,r.length-1).concat([mU(r[r.length-1],Math.round(t.remainder))])},mK=mM.from,mY=(e,t,r)=>{L(t,t=>{let l=e.slice(t.column,t.colspan+t.column),o=mV(l,rb());rn(t.element,"width",o+r)})},mJ=(e,t,r)=>{L(t,(t,l)=>{let o=mV([e[l]],rb());rn(t.element,"width",o+r)})},mQ=(e,t,r,l)=>{L(r,t=>{let r=e.slice(t.row,t.rowspan+t.row),o=mV(r,rw());rn(t.element,"height",o+l)}),L(t,(t,r)=>{rn(t.element,"height",e[r])})},mX=e=>mK(e).fold(v("px"),v("px"),v("%")),mZ=(e,t,r)=>{let l=lB.fromTable(e),o=l.all,n=lB.justCells(l),s=lB.justColumns(l);t.each(t=>{let r=mX(t),o=lc(e),a=oB(l,e),i=m$(a,o,t);lB.hasColumns(l)?mJ(i,s,r):mY(i,n,r),rn(e,"width",t)}),r.each(t=>{let r=mX(t),s=lI(e),a=oW(l,e,l3),i=m$(a,s,t);mQ(i,o,n,r),rn(e,"height",t)})},m0=e=>of(e).exists(e=>oe.test(e)),m1=e=>of(e).exists(e=>ot.test(e)),m9=e=>of(e).isNone(),m3=e=>{eP(e,"width")},m2=e=>{let t=oC(e);mZ(e,k.some(t),k.none()),m3(e)},m5=e=>{let t=oy(e);mZ(e,k.some(t),k.none()),m3(e)},m7=e=>{rc(e,"width");let t=rS(e),r=t.length>0?t:rx(e);L(r,e=>{rc(e,"width"),m3(e)}),m3(e)},m4={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},m6=()=>e$.fromTag("th"),m8=()=>e$.fromTag("td"),ce=()=>e$.fromTag("col"),ct=(e,t,r,l)=>{let o=e$.fromTag("tr");for(let n=0;n<e;n++){let e=l<t||n<r?m6():m8();n<r&&ej(e,"scope","row"),l<t&&ej(e,"scope","col"),tt(e,e$.fromTag("br")),tt(o,e)}return o},cr=e=>{let t=e$.fromTag("colgroup");return j(e,()=>tt(t,ce())),t},cl=(e,t,r,l)=>j(e,e=>ct(t,r,l,e)),co=(e,t,r,l,o,n=m4)=>{let s=e$.fromTag("table"),a="cells"!==o;rs(s,n.styles),eW(s,n.attributes),n.colGroups&&tt(s,cr(t));let i=Math.min(e,r);if(a&&r>0){let e=e$.fromTag("thead");tt(s,e);let n=cl(r,t,"sectionCells"===o?i:0,l);tn(e,n)}let m=e$.fromTag("tbody");tt(s,m);let c=a?0:r,d=cl(a?e-i:e,t,c,l);return tn(m,d),s},cn=e=>e.dom.innerHTML,cs=e=>{let t=e$.fromTag("div"),r=e$.fromDom(e.dom.cloneNode(!0));return tt(t,r),cn(t)},ca=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},ci=(e,t)=>{tZ(t,"td,th").each(T(ca,e))},cm=(e,t)=>{L(tq(t,"tr"),t=>{mw(e,t.dom),L(tq(t,"th,td"),t=>{mv(e,t.dom)})})},cc=e=>s(e)&&-1!==e.indexOf("%"),cd=(e,t,r,l,o)=>{let n=nB(e),s={styles:n,attributes:nA(e),colGroups:nN(e)};return e.undoManager.ignore(()=>{let n=co(r,t,o,l,nv(e),s);ej(n,"data-mce-id","__mce");let a=cs(n);e.insertContent(a),e.addVisual()}),tZ(nW(e),'table[data-mce-id="__mce"]').map(t=>(nR(e)?m5(t):nD(e)?m7(t):(nS(e)||cc(n.width))&&m2(t),nM(t),eP(t,"data-mce-id"),cm(e,t),ci(e,t),t.dom)).getOrNull()},cu=(e,t,r,l={})=>{let o=e=>h(e)&&e>0;if(!(o(t)&&o(r)))return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null;{let o=l.headerRows||0,n=l.headerColumns||0;return cd(e,r,t,n,o)}};var cf=tinymce.util.Tools.resolve("tinymce.FakeClipboard");let cg="x-tinymce/dom-table-",ch=cg+"rows",cp=cg+"columns",cb=e=>{let t=cf.FakeClipboardItem(e);cf.write([t])},cw=e=>{var t;let r=null!==(t=cf.read())&&void 0!==t?t:[];return et(r,t=>k.from(t.getType(e)))},cv=e=>{cw(e).isSome()&&cf.clear()},cy=e=>{e.fold(cT,e=>cb({[ch]:e}))},cC=()=>cw(ch),cT=()=>cv(ch),cx=e=>{e.fold(cR,e=>cb({[cp]:e}))},cS=()=>cw(cp),cR=()=>cv(cp),cD=e=>sk(nI(e),nL(e)).filter(nq),cO=e=>sE(nI(e),nL(e)).filter(nq),ck=(e,t)=>{let r=nL(e),l=t=>cD(e).each(l=>{let o=nD(e)||nR(e)||nS(e);o||rR(l,r).each(r=>{"relative"!==t||m0(r)?"fixed"!==t||m1(r)?"responsive"!==t||m9(r)||m7(r):m5(r):m2(r),nM(r),my(e,r.dom,mD)})}),o=e=>rR(e,r),n=t=>cO(e).bind(e=>o(e).map(r=>t(r,e))),i=t=>{e.focus()},m=(t,r=!1)=>n((l,o)=>{let n=sx(sA(e),l,o);t(l,n,r).each(i)}),c=()=>n((t,r)=>{let l=sx(sA(e),t,r),o=na(p,e$.fromDom(e.getDoc()),k.none());return mj(t,l,o)}),d=()=>n((t,r)=>{let l=sx(sA(e),t,r);return m_(t,l)}),u=(t,r)=>r().each(r=>{let l=W(r,e=>td(e));n((r,o)=>{let n=ni(e$.fromDom(e.getDoc())),s=sR(sA(e),o,l,n);t(r,s).each(i)})}),f=e=>(t,r)=>eu(r,"type").each(t=>{m(e(t),r.no_events)});eo({mceTableSplitCells:()=>m(t.unmergeCells),mceTableMergeCells:()=>m(t.mergeCells),mceTableInsertRowBefore:()=>m(t.insertRowsBefore),mceTableInsertRowAfter:()=>m(t.insertRowsAfter),mceTableInsertColBefore:()=>m(t.insertColumnsBefore),mceTableInsertColAfter:()=>m(t.insertColumnsAfter),mceTableDeleteCol:()=>m(t.deleteColumn),mceTableDeleteRow:()=>m(t.deleteRow),mceTableCutCol:()=>d().each(e=>{cx(e),m(t.deleteColumn)}),mceTableCutRow:()=>c().each(e=>{cy(e),m(t.deleteRow)}),mceTableCopyCol:()=>d().each(e=>cx(e)),mceTableCopyRow:()=>c().each(e=>cy(e)),mceTablePasteColBefore:()=>u(t.pasteColsBefore,cS),mceTablePasteColAfter:()=>u(t.pasteColsAfter,cS),mceTablePasteRowBefore:()=>u(t.pasteRowsBefore,cC),mceTablePasteRowAfter:()=>u(t.pasteRowsAfter,cC),mceTableDelete:()=>cD(e).each(t=>{rR(t,r).filter(x(r)).each(t=>{let r=e$.fromText("");if(e8(t,r),ta(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{let t=e.dom.createRng();t.setStart(r.dom,0),t.setEnd(r.dom,0),e.selection.setRng(t),e.nodeChanged()}})}),mceTableCellToggleClass:(t,r)=>{n(t=>{let l=sA(e),o=K(l,t=>e.formatter.match("tablecellclass",{value:r},t.dom)),n=o?e.formatter.remove:e.formatter.apply;L(l,e=>n("tablecellclass",{value:r},e.dom)),my(e,t.dom,mR)})},mceTableToggleClass:(t,r)=>{n(t=>{e.formatter.toggle("tableclass",{value:r},t.dom),my(e,t.dom,mR)})},mceTableToggleCaption:()=>{cD(e).each(t=>{rR(t,r).each(r=>{tX(r,"caption").fold(()=>{let t=e$.fromTag("caption");tt(t,e$.fromText("Caption")),tr(r,t,0),e.selection.setCursorLocation(t.dom,0)},l=>{ez("caption")(t)&&eG("td",r).each(t=>e.selection.setCursorLocation(t.dom,0)),ta(l)}),my(e,r.dom,mD)})})},mceTableSizingMode:(e,t)=>l(t),mceTableCellType:f(e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader),mceTableColType:f(e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader),mceTableRowType:f(e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}})},(t,r)=>e.addCommand(r,t)),e.addCommand("mceInsertTable",(t,r)=>{cu(e,r.rows,r.columns,r.options)}),e.addCommand("mceTableApplyCellStyle",(t,r)=>{let l=e=>"tablecell"+e.toLowerCase().replace("-","");if(!a(r))return;let n=P(sA(e),nq);if(0===n.length)return;let i=em(r,(t,r)=>e.formatter.has(l(r))&&s(t));eh(i)||(eo(i,(t,r)=>{let o=l(r);L(n,r=>{""===t?e.formatter.remove(o,{value:null},r.dom,!0):e.formatter.apply(o,{value:t},r.dom)})}),o(n[0]).each(t=>my(e,t.dom,mR)))})},cE=(e,t)=>{let r=nL(e),l=t=>sE(nI(e)).bind(l=>rR(l,r).map(r=>{let o=sx(sA(e),r,l);return t(r,o)})).getOr("");eo({mceTableRowType:()=>l(t.getTableRowType),mceTableCellType:()=>l(t.getTableCellType),mceTableColType:()=>l(t.getTableColType)},(t,r)=>e.addQueryValueHandler(r,t))},cA=il.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),cB=cA.before,cN=cA.on,cz=cA.after,c_={before:cB,on:cN,after:cz,cata:(e,t,r,l)=>e.fold(t,r,l),getStart:e=>e.fold(y,y,y)},cj={create:(e,t)=>({selection:e,kill:t})},cW=(e,t)=>{let r=e.document.createRange();return r.selectNode(t.dom),r},cL=(e,t)=>{let r=e.document.createRange();return cM(r,t),r},cM=(e,t)=>e.selectNodeContents(t.dom),cI=(e,t)=>{t.fold(t=>{e.setStartBefore(t.dom)},(t,r)=>{e.setStart(t.dom,r)},t=>{e.setStartAfter(t.dom)})},cP=(e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,r)=>{e.setEnd(t.dom,r)},t=>{e.setEndAfter(t.dom)})},cF=(e,t,r)=>{let l=e.document.createRange();return cI(l,t),cP(l,r),l},cH=(e,t,r,l,o)=>{let n=e.document.createRange();return n.setStart(t.dom,r),n.setEnd(l.dom,o),n},c$=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),cV=e=>{let t=e.getClientRects(),r=t.length>0?t[0]:e.getBoundingClientRect();return r.width>0||r.height>0?k.some(r).map(c$):k.none()},cq=il.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),cU=(e,t,r)=>t(e$.fromDom(r.startContainer),r.startOffset,e$.fromDom(r.endContainer),r.endOffset),cG=(e,t)=>t.match({domRange:e=>({ltr:v(e),rtl:k.none}),relative:(t,r)=>({ltr:rN(()=>cF(e,t,r)),rtl:rN(()=>k.some(cF(e,r,t)))}),exact:(t,r,l,o)=>({ltr:rN(()=>cH(e,t,r,l,o)),rtl:rN(()=>k.some(cH(e,l,o,t,r)))})}),cK=(e,t)=>{let r=t.ltr();if(!r.collapsed)return cU(e,cq.ltr,r);{let l=t.rtl().filter(e=>!1===e.collapsed);return l.map(e=>cq.rtl(e$.fromDom(e.endContainer),e.endOffset,e$.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>cU(e,cq.ltr,r))}},cY=(e,t)=>{let r=cG(e,t);return cK(e,r)},cJ=(e,t)=>{let r=cY(e,t);return r.match({ltr:(t,r,l,o)=>{let n=e.document.createRange();return n.setStart(t.dom,r),n.setEnd(l.dom,o),n},rtl:(t,r,l,o)=>{let n=e.document.createRange();return n.setStart(l.dom,o),n.setEnd(t.dom,r),n}})};cq.ltr,cq.rtl;let cQ={create:(e,t,r,l)=>({start:e,soffset:t,finish:r,foffset:l})},cX={create:(e,t,r,l)=>({start:c_.on(e,t),finish:c_.on(r,l)})},cZ=(e,t)=>{let r=cJ(e,t);return cQ.create(e$.fromDom(r.startContainer),r.startOffset,e$.fromDom(r.endContainer),r.endOffset)},c0=cX.create,c1=(e,t,r,l,o,n,s)=>eK(r,o)&&l===n?k.none():t0(r,"td,th",t).bind(r=>t0(o,"td,th",t).bind(l=>c9(e,t,r,l,s))),c9=(e,t,r,l,o)=>eK(r,l)?k.none():si(r,l,t).bind(t=>{let l=t.boxes.getOr([]);return l.length>1?(o(e,l,t.start,t.finish),k.some(cj.create(k.some(c0(r,0,r,o0(r))),!0))):k.none()}),c3=(e,t,r,l,o)=>sf(l,e,t,o.firstSelectedSelector,o.lastSelectedSelector).map(e=>(o.clearBeforeUpdate(r),o.selectRange(r,e.boxes,e.start,e.finish),e.boxes)),c2=(e,t)=>({item:e,mode:t}),c5=(e,t,r,l=c7)=>e.property().parent(t).map(e=>c2(e,l)),c7=(e,t,r,l=c4)=>r.sibling(e,t).map(e=>c2(e,l)),c4=(e,t,r,l=c4)=>{let o=e.property().children(t),n=r.first(o);return n.map(e=>c2(e,l))},c6=[{current:c5,next:c7,fallback:k.none()},{current:c7,next:c4,fallback:k.some(c5)},{current:c4,next:c4,fallback:k.some(c7)}],c8=(e,t,r,l,o=c6)=>{let n=V(o,e=>e.current===r);return n.bind(r=>r.current(e,t,l,r.next).orThunk(()=>r.fallback.bind(r=>c8(e,t,r,l))))},de={left:()=>({sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?k.some(e[e.length-1]):k.none()}),right:()=>({sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?k.some(e[0]):k.none()})},dt=(e,t,r,l,o,n)=>{let s=c8(e,t,l,o);return s.bind(t=>n(t.item)?k.none():r(t.item)?k.some(t.item):dt(e,t.item,r,t.mode,o,n))},dr=e=>t=>0===e.property().children(t).length,dl=(e,t,r)=>ds(e,t,dr(e),r),dn=(e,t,r)=>da(e,t,dr(e),r),ds=(e,t,r,l)=>dt(e,t,r,c7,de.left(),l),da=(e,t,r,l)=>dt(e,t,r,c7,de.right(),l),di=n4(),dm=(e,t)=>dl(di,e,t),dc=(e,t)=>dn(di,e,t),dd=(e,t,r)=>ds(di,e,t,r),du=(e,t,r)=>da(di,e,t,r),df=(e,t,r)=>tG(e,t,r).isSome(),dg=il.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),dh=(e,t,r)=>{let l=e.getRect(t),o=e.getRect(r);return o.right>l.left&&o.left<l.right},dp=e=>t0(e,"tr"),db={...dg,verify:(e,t,r,l,o,n,s)=>t0(l,"td,th",s).bind(r=>t0(t,"td,th",s).map(t=>eK(r,t)?eK(l,r)&&o0(r)===o?n(t):dg.none("in same cell"):sn(dp,[r,t]).fold(()=>dh(e,t,r)?dg.success():n(t),e=>n(t)))).getOr(dg.none("default")),cata:(e,t,r,l,o)=>e.fold(t,r,l,o)},dw=(e,t,r,l)=>({parent:e,children:t,element:r,index:l}),dv=e=>e0(e).bind(t=>{let r=e5(t);return dy(r,e).map(l=>dw(t,r,e,l))}),dy=(e,t)=>q(e,T(eK,t)),dC=ez("br"),dT=(e,t,r)=>t(e,r).bind(e=>eA(e)&&0===oQ(e).trim().length?dT(e,t,r):k.some(e)),dx=(e,t,r)=>r.traverse(t).orThunk(()=>dT(t,r.gather,e)).map(r.relative),dS=(e,t)=>e7(e,t).filter(dC).orThunk(()=>e7(e,t-1).filter(dC)),dR=(e,t,r,l)=>dS(t,r).bind(t=>l.traverse(t).fold(()=>dT(t,l.gather,e).map(l.relative),e=>dv(e).map(e=>c_.on(e.parent,e.index)))),dD=(e,t,r,l)=>{let o=dC(t)?dx(e,t,l):dR(e,t,r,l);return o.map(e=>({start:e,finish:e}))},dO=e=>db.cata(e,e=>k.none(),()=>k.none(),e=>k.some(sW(e,0)),e=>k.some(sW(e,o0(e)))),dk=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),dE=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),dA=(e,t,r)=>({left:e.left+t,top:e.top+r,right:e.right+t,bottom:e.bottom+r}),dB=(e,t,r)=>r>=0&&r<o0(t)?e.getRangedRect(t,r,t,r+1):r>0?e.getRangedRect(t,r-1,t,r):k.none(),dN=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),dz=(e,t)=>k.some(e.getRect(t)),d_=(e,t,r)=>eE(t)?dz(e,t).map(dN):eA(t)?dB(e,t,r).map(dN):k.none(),dj=(e,t)=>eE(t)?dz(e,t).map(dN):eA(t)?e.getRangedRect(t,0,t,o0(t)).map(dN):k.none(),dW=il.generate([{none:[]},{retry:["caret"]}]),dL=(e,t)=>e.left<t.left||1>Math.abs(t.right-e.left)||e.left>t.right,dM=(e,t,r)=>tK(t,i_).fold(D,t=>dj(e,t).exists(e=>dL(r,e))),dI=(e,t,r)=>e.elementFromPoint(t,r).filter(e=>"table"===eS(e)).isSome(),dP=(e,t,r,l,o)=>dF(e,t,r,t.move(l,5),o),dF=(e,t,r,l,o)=>0===o?k.some(l):dI(e,l.left,t.point(l))?dP(e,t,r,l,o-1):e.situsFromPoint(l.left,t.point(l)).bind(n=>n.start.fold(k.none,n=>dj(e,n).bind(s=>t.adjuster(e,n,s,r,l).fold(k.none,l=>dF(e,t,r,l,o-1))).orThunk(()=>k.some(l)),k.none)),dH=(e,t,r)=>e.point(t)>r.getInnerHeight()?k.some(e.point(t)-r.getInnerHeight()):0>e.point(t)?k.some(-e.point(t)):k.none(),d$=(e,t,r)=>{let l=e.move(r,5),o=dF(t,e,r,l,100).getOr(l);return dH(e,o,t).fold(()=>t.situsFromPoint(o.left,e.point(o)),r=>(t.scrollBy(0,r),t.situsFromPoint(o.left,e.point(o)-r)))},dV={tryUp:T(d$,{point:e=>e.top,adjuster:(e,t,r,l,o)=>{let n=dE(o,5);return 1>Math.abs(r.top-l.top)||r.bottom<o.top?dW.retry(n):r.bottom===o.top?dW.retry(dE(o,1)):dM(e,t,o)?dW.retry(dA(n,5,0)):dW.none()},move:dE,gather:dm}),tryDown:T(d$,{point:e=>e.bottom,adjuster:(e,t,r,l,o)=>{let n=dk(o,5);return 1>Math.abs(r.bottom-l.bottom)||r.top>o.bottom?dW.retry(n):r.top===o.bottom?dW.retry(dk(o,1)):dM(e,t,o)?dW.retry(dA(n,5,0)):dW.none()},move:dk,gather:dc}),getJumpSize:v(5)},dq=(e,t,r)=>e.getSelection().bind(l=>dD(t,l.finish,l.foffset,r).fold(()=>k.some(sW(l.finish,l.foffset)),o=>{let n=e.fromSitus(o),s=db.verify(e,l.finish,l.foffset,n.finish,n.foffset,r.failure,t);return dO(s)})),dU=(e,t,r,l,o,n)=>0===n?k.none():dY(e,t,r,l,o).bind(s=>{let a=e.fromSitus(s),i=db.verify(e,r,l,a.finish,a.foffset,o.failure,t);return db.cata(i,()=>k.none(),()=>k.some(s),s=>eK(r,s)&&0===l?dG(e,r,l,dE,o):dU(e,t,s,0,o,n-1),s=>eK(r,s)&&l===o0(s)?dG(e,r,l,dk,o):dU(e,t,s,o0(s),o,n-1))}),dG=(e,t,r,l,o)=>d_(e,t,r).bind(t=>dK(e,o,l(t,dV.getJumpSize()))),dK=(e,t,r)=>{let l=ll().browser;return l.isChromium()||l.isSafari()||l.isFirefox()?t.retry(e,r):k.none()},dY=(e,t,r,l,o)=>d_(e,r,l).bind(t=>dK(e,o,t)),dJ=(e,t,r)=>dq(e,t,r).bind(l=>dU(e,t,l.element,l.offset,r,20).map(e.fromSitus)),dQ=(e,t)=>df(e,e=>e0(e).exists(e=>eK(e,t))),dX=(e,t,r,l,o)=>t0(l,"td,th",t).bind(l=>t0(l,"table",t).bind(n=>dQ(o,n)?dJ(e,t,r).bind(e=>t0(e.finish,"td,th",t).map(t=>({start:l,finish:t,range:e}))):k.none())),dZ=(e,t,r,l,o,n)=>n(l,t).orThunk(()=>dX(e,t,r,l,o).map(e=>{let t=e.range;return cj.create(k.some(c0(t.start,t.soffset,t.finish,t.foffset)),!0)})),d0=(e,t)=>t0(e,"tr",t).bind(e=>t0(e,"table",t).bind(r=>{let l=tq(r,"tr");return eK(e,l[0])?dd(r,e=>o7(e).isSome(),t).map(e=>{let t=o0(e);return cj.create(k.some(c0(e,t,e,t)),!0)}):k.none()})),d1=(e,t)=>t0(e,"tr",t).bind(e=>t0(e,"table",t).bind(r=>{let l=tq(r,"tr");return eK(e,l[l.length-1])?du(r,e=>o5(e).isSome(),t).map(e=>cj.create(k.some(c0(e,0,e,0)),!0)):k.none()})),d9=(e,t,r,l,o,n,s)=>dX(e,r,l,o,n).bind(e=>c9(t,r,e.start,e.finish,s)),d3=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},d2=e=>{let t=d3(k.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(k.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(k.some(e))}}},d5=()=>{let e=d2(p);return{...e,on:t=>e.get().each(t)}},d7=(e,t)=>t0(e,"td,th",t),d4=e=>e1(e).exists(n_),d6=(e,t,r,l)=>{let o=d5(),n=o.clear,s=n=>{o.on(o=>{l.clearBeforeUpdate(t),d7(n.target,r).each(s=>{si(o,s,r).each(r=>{let o=r.boxes.getOr([]);if(1===o.length){let r=o[0],s="false"===nj(r),a=t1(nz(n.target),r,eK);s&&a&&(l.selectRange(t,o,r,r),e.selectContents(r))}else o.length>1&&(l.selectRange(t,o,r.start,r.finish),e.selectContents(s))})})})};return{clearstate:n,mousedown:e=>{l.clear(t),d7(e.target,r).filter(d4).each(o.set)},mouseover:e=>{s(e)},mouseup:e=>{s(e),n()}}},d8={traverse:e2,gather:dc,relative:c_.before,retry:dV.tryDown,failure:db.failedDown},ue={traverse:e3,gather:dm,relative:c_.before,retry:dV.tryUp,failure:db.failedUp},ut=e=>t=>t===e,ur=ut(38),ul=ut(40),uo=e=>e>=37&&e<=40,un={isBackward:ut(37),isForward:ut(39)},us={isBackward:ut(39),isForward:ut(37)},ua=e=>{let t=void 0!==e?e.dom:document,r=t.body.scrollLeft||t.documentElement.scrollLeft,l=t.body.scrollTop||t.documentElement.scrollTop;return lH(r,l)},ui=(e,t,r)=>{let l=void 0!==r?r.dom:document,o=l.defaultView;o&&o.scrollBy(e,t)},um=il.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),uc=e=>e.match({domRange:e=>e$.fromDom(e.startContainer),relative:(e,t)=>c_.getStart(e),exact:(e,t,r,l)=>e}),ud=um.domRange,uu=um.relative,uf=um.exact,ug=cQ.create,uh={domRange:ud,relative:uu,exact:uf,exactFromRange:e=>um.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{let t=uc(e);return eZ(t)},range:ug},up=document.caretPositionFromPoint?(e,t,r)=>{var l,o;return k.from(null===(o=(l=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(l,t,r)).bind(t=>{if(null===t.offsetNode)return k.none();let r=e.dom.createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),k.some(r)})}:document.caretRangeFromPoint?(e,t,r)=>{var l,o;return k.from(null===(o=(l=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(l,t,r))}:k.none,ub=(e,t,r)=>{let l=e$.fromDom(e.document);return up(l,t,r).map(e=>cQ.create(e$.fromDom(e.startContainer),e.startOffset,e$.fromDom(e.endContainer),e.endOffset))},uw=(e,t)=>{let r=eS(e);return"input"===r?c_.after(e):z(["br","img"],r)?0===t?c_.before(e):c_.after(e):c_.on(e,t)},uv=(e,t)=>{let r=e.fold(c_.before,uw,c_.after),l=t.fold(c_.before,uw,c_.after);return uh.relative(r,l)},uy=(e,t,r,l)=>{let o=uw(e,t),n=uw(r,l);return uh.relative(o,n)},uC=(e,t,r,l)=>{let o=eJ(e),n=o.dom.createRange();return n.setStart(e.dom,t),n.setEnd(r.dom,l),n},uT=(e,t,r,l)=>{let o=uC(e,t,r,l),n=eK(e,r)&&t===l;return o.collapsed&&!n},ux=e=>k.from(e.getSelection()),uS=(e,t)=>{ux(e).each(e=>{e.removeAllRanges(),e.addRange(t)})},uR=(e,t,r,l,o)=>{let n=cH(e,t,r,l,o);uS(e,n)},uD=(e,t,r,l,o,n)=>{t.collapse(r.dom,l),t.extend(o.dom,n)},uO=(e,t)=>cY(e,t).match({ltr:(t,r,l,o)=>{uR(e,t,r,l,o)},rtl:(t,r,l,o)=>{ux(e).each(n=>{if(n.setBaseAndExtent)n.setBaseAndExtent(t.dom,r,l.dom,o);else if(n.extend)try{uD(e,n,t,r,l,o)}catch(n){uR(e,l,o,t,r)}else uR(e,l,o,t,r)})}}),uk=(e,t,r,l,o)=>{let n=uy(t,r,l,o);uO(e,n)},uE=(e,t,r)=>{let l=uv(t,r);uO(e,l)},uA=e=>{if(!(e.rangeCount>0))return k.none();{let t=e.getRangeAt(0),r=e.getRangeAt(e.rangeCount-1);return k.some(cQ.create(e$.fromDom(t.startContainer),t.startOffset,e$.fromDom(r.endContainer),r.endOffset))}},uB=e=>{if(null===e.anchorNode||null===e.focusNode)return uA(e);{let t=e$.fromDom(e.anchorNode),r=e$.fromDom(e.focusNode);return uT(t,e.anchorOffset,r,e.focusOffset)?k.some(cQ.create(t,e.anchorOffset,r,e.focusOffset)):uA(e)}},uN=(e,t,r=!0)=>{let l=(r?cL:cW)(e,t);uS(e,l)},uz=e=>ux(e).filter(e=>e.rangeCount>0).bind(uB),u_=e=>uz(e).map(e=>uh.exact(e.start,e.soffset,e.finish,e.foffset)),uj=(e,t)=>{let r=cJ(e,t);return cV(r)},uW=(e,t,r)=>ub(e,t,r),uL=e=>{ux(e).each(e=>e.removeAllRanges())},uM=e=>({elementFromPoint:(t,r)=>e$.fromPoint(e$.fromDom(e.document),t,r),getRect:e=>e.dom.getBoundingClientRect(),getRangedRect:(t,r,l,o)=>{let n=uh.exact(t,r,l,o);return uj(e,n)},getSelection:()=>u_(e).map(t=>cZ(e,t)),fromSitus:t=>{let r=uh.relative(t.start,t.finish);return cZ(e,r)},situsFromPoint:(t,r)=>uW(e,t,r).map(e=>cX.create(e.start,e.soffset,e.finish,e.foffset)),clearSelection:()=>{uL(e)},collapseSelection:(t=!1)=>{u_(e).each(r=>r.fold(e=>e.collapse(t),(r,l)=>{let o=t?r:l;uE(e,o,o)},(r,l,o,n)=>{let s=t?r:o,a=t?l:n;uk(e,s,a,s,a)}))},setSelection:t=>{uk(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,r)=>{uE(e,t,r)},selectNode:t=>{uN(e,t,!1)},selectContents:t=>{uN(e,t)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>{let t=ua(e$.fromDom(e.document));return t.top},scrollBy:(t,r)=>{ui(t,r,e$.fromDom(e.document))}}),uI=(e,t)=>({rows:e,cols:t}),uP=(e,t,r,l)=>{let o=uM(e),n=d6(o,t,r,l);return{clearstate:n.clearstate,mousedown:n.mousedown,mouseover:n.mouseover,mouseup:n.mouseup}},uF=e=>tK(e,ek).exists(n_),uH=(e,t)=>uF(e)||uF(t),u$=(e,t,r,l)=>{let o=uM(e),n=()=>(l.clear(t),k.none());return{keydown:(e,s,a,i,m,c)=>{let d=e.raw,u=d.which,f=!0===d.shiftKey,g=sm(t,l.selectedSelector).fold(()=>(uo(u)&&!f&&l.clearBeforeUpdate(t),uo(u)&&f&&!uH(s,i))?k.none:ul(u)&&f?T(d9,o,t,r,d8,i,s,l.selectRange):ur(u)&&f?T(d9,o,t,r,ue,i,s,l.selectRange):ul(u)?T(dZ,o,r,d8,i,s,d1):ur(u)?T(dZ,o,r,ue,i,s,d0):k.none,e=>{let r=r=>()=>{let n=et(r,r=>c3(r.rows,r.cols,t,e,l));return n.fold(()=>sd(t,l.firstSelectedSelector,l.lastSelectedSelector).map(e=>{let r=ul(u)||c.isForward(u)?c_.after:c_.before;return o.setRelativeSelection(c_.on(e.first,0),r(e.table)),l.clear(t),cj.create(k.none(),!0)}),e=>k.some(cj.create(k.none(),!0)))};return uo(u)&&f&&!uH(s,i)?k.none:ul(u)&&f?r([uI(1,0)]):ur(u)&&f?r([uI(-1,0)]):c.isBackward(u)&&f?r([uI(0,-1),uI(-1,0)]):c.isForward(u)&&f?r([uI(0,1),uI(1,0)]):uo(u)&&!f?n:k.none});return g()},keyup:(e,o,n,s,a)=>sm(t,l.selectedSelector).fold(()=>{let i=e.raw,m=i.which,c=!0===i.shiftKey;return c&&uo(m)&&uH(o,s)?c1(t,r,o,n,s,a,l.selectRange):k.none()},k.none)}},uV=(e,t,r,l)=>{let o=uM(e);return(e,n)=>{l.clearBeforeUpdate(t),si(e,n,r).each(e=>{let r=e.boxes.getOr([]);l.selectRange(t,r,e.start,e.finish),o.selectContents(n),o.collapseSelection()})}},uq=(e,t)=>{let r=eM(e,t);return void 0===r||""===r?[]:r.split(" ")},uU=(e,t,r)=>{let l=uq(e,t),o=l.concat([r]);return ej(e,t,o.join(" ")),!0},uG=(e,t,r)=>{let l=P(uq(e,t),e=>e!==r);return l.length>0?ej(e,t,l.join(" ")):eP(e,t),!1},uK=e=>void 0!==e.dom.classList,uY=e=>uq(e,"class"),uJ=(e,t)=>uU(e,"class",t),uQ=(e,t)=>uG(e,"class",t),uX=(e,t)=>{uK(e)?e.dom.classList.add(t):uJ(e,t)},uZ=e=>{let t=uK(e)?e.dom.classList:uY(e);0===t.length&&eP(e,"class")},u0=(e,t)=>{if(uK(e)){let r=e.dom.classList;r.remove(t)}else uQ(e,t);uZ(e)},u1=(e,t)=>uK(e)&&e.dom.classList.contains(t),u9=(e,t)=>{L(t,t=>{u0(e,t)})},u3=e=>t=>{uX(t,e)},u2=e=>t=>{u9(t,e)},u5={byClass:e=>{let t=u3(e.selected),r=u2([e.selected,e.lastSelected,e.firstSelected]),l=t=>{let l=tq(t,e.selectedSelector);L(l,r)};return{clearBeforeUpdate:l,clear:l,selectRange:(r,o,n,s)=>{l(r),L(o,t),uX(n,e.firstSelected),uX(s,e.lastSelected)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},byAttr:(e,t,r)=>{let l=t=>{eP(t,e.selected),eP(t,e.firstSelected),eP(t,e.lastSelected)},o=t=>{ej(t,e.selected,"1")},n=e=>{s(e),r()},s=t=>{let r=tq(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`);L(r,l)};return{clearBeforeUpdate:s,clear:n,selectRange:(r,l,s,a)=>{n(r),L(l,o),ej(s,e.firstSelected,"1"),ej(a,e.lastSelected,"1"),t(l,s,a)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}}},u7=(e,t,r,l)=>{switch(e.tag){case"none":return t();case"single":return l(e.element);case"multiple":return r(e.elements)}},u4=()=>({tag:"none"}),u6=e=>({tag:"multiple",elements:e}),u8=e=>({tag:"single",element:e}),fe=(e,t,r)=>({get:()=>sg(e(),r).fold(()=>t().fold(u4,u8),u6)}),ft=(e,t)=>{let r=e.slice(0,t[t.length-1].row+1),l=au(r);return G(l,e=>{let r=e.cells.slice(0,t[t.length-1].column+1);return W(r,e=>e.element)})},fr=(e,t)=>{let r=e.slice(t[0].row+t[0].rowspan-1,e.length),l=au(r);return G(l,e=>{let r=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return W(r,e=>e.element)})},fl=(e,t,r)=>{let l=lB.fromTable(e),o=av(l,t);return o.map(e=>{let t=ac(l,r,!1),{rows:o}=lT(t),n=ft(o,e),s=fr(o,e);return{upOrLeftCells:n,downOrRightCells:s}})},fo=(e,t,r,l,o,n,s)=>({target:e,x:t,y:r,stop:l,prevent:o,kill:n,raw:s}),fn=e=>{let t=e$.fromDom(tj(e).getOr(e.target)),r=()=>e.stopPropagation(),l=()=>e.preventDefault(),o=b(l,r);return fo(t,e.clientX,e.clientY,r,l,o,e)},fs=(e,t)=>r=>{e(r)&&t(fn(r))},fa=(e,t,r,l,o)=>{let n=fs(r,l);return e.dom.addEventListener(t,n,o),{unbind:T(fm,e,t,n,o)}},fi=(e,t,r,l)=>fa(e,t,r,l,!1),fm=(e,t,r,l)=>{e.dom.removeEventListener(t,r,l)},fc=(e,t,r)=>fi(e,t,O,r),fd=e=>!u1(e$.fromDom(e.target),"ephox-snooker-resizer-bar"),fu=(e,t)=>{let r=fe(()=>e$.fromDom(e.getBody()),()=>sE(nI(e),nL(e)),sT.selectedSelector),l=u5.byAttr(sT,(t,r,l)=>{let o=rR(r);o.each(o=>{let n=nb(e),s=na(p,e$.fromDom(e.getDoc()),n),a=sA(e),i=fl(o,{selection:a},s);mC(e,t,r,l,i)})},()=>mT(e));return e.on("init",r=>{let o=e.getWin(),n=nW(e),s=nL(e),a=uP(o,n,s,l),i=u$(o,n,s,l),m=uV(o,n,s,l),c=e=>!0===e.raw.shiftKey;e.on("TableSelectorChange",e=>m(e.start,e.finish));let d=(t,r)=>{c(t)&&(r.kill&&t.kill(),r.selection.each(t=>{let r=uh.relative(t.start,t.finish),l=cJ(o,r);e.selection.setRng(l)}))},u=e=>0===e.button,f=e=>void 0===e.buttons||(1&e.buttons)!=0,g=(()=>{let e=d3(e$.fromDom(n)),t=d3(0);return{touchEnd:r=>{let l=e$.fromDom(r.target);if(ez("td")(l)||ez("th")(l)){let o=e.get(),n=t.get();eK(o,l)&&r.timeStamp-n<300&&(r.preventDefault(),m(l,l))}e.set(l),t.set(r.timeStamp)}}})();e.on("dragstart",e=>{a.clearstate()}),e.on("mousedown",e=>{u(e)&&fd(e)&&a.mousedown(fn(e))}),e.on("mouseover",e=>{f(e)&&fd(e)&&a.mouseover(fn(e))}),e.on("mouseup",e=>{u(e)&&fd(e)&&a.mouseup(fn(e))}),e.on("touchend",g.touchEnd),e.on("keyup",t=>{let r=fn(t);if(r.raw.shiftKey&&uo(r.raw.which)){let t=e.selection.getRng(),l=e$.fromDom(t.startContainer),o=e$.fromDom(t.endContainer);i.keyup(r,l,t.startOffset,o,t.endOffset).each(e=>{d(r,e)})}}),e.on("keydown",r=>{let l=fn(r);t.hide();let o=e.selection.getRng(),n=e$.fromDom(o.startContainer),s=e$.fromDom(o.endContainer),a=lW(un,us)(e$.fromDom(e.selection.getStart()));i.keydown(l,n,o.startOffset,s,o.endOffset,a).each(e=>{d(l,e)}),t.show()}),e.on("NodeChange",()=>{let t=e.selection,r=e$.fromDom(t.getStart()),o=e$.fromDom(t.getEnd()),s=sn(rR,[r,o]);s.fold(()=>l.clear(n),p)})}),e.on("PreInit",()=>{e.serializer.addTempAttr(sT.firstSelected),e.serializer.addTempAttr(sT.lastSelected)}),{getSelectedCells:()=>u7(r.get(),v([]),e=>W(e,e=>e.dom),e=>[e.dom]),clearSelectedCells:e=>l.clear(e$.fromDom(e))}},ff=e=>{let t=[];return{bind:e=>{if(void 0===e)throw Error("Event bind error: undefined handler");t.push(e)},unbind:e=>{t=P(t,t=>t!==e)},trigger:(...r)=>{let l={};L(e,(e,t)=>{l[e]=r[t]}),L(t,e=>{e(l)})}}},fg=e=>{let t=en(e,e=>({bind:e.bind,unbind:e.unbind})),r=en(e,e=>e.trigger);return{registry:t,trigger:r}},fh=(e,t)=>{let r=null,l=()=>{m(r)||(clearTimeout(r),r=null)};return{cancel:l,throttle:(...o)=>{l(),r=setTimeout(()=>{r=null,e.apply(null,o)},t)}}},fp=e=>e.slice(0).sort(),fb=(e,t)=>{throw Error("All required keys ("+fp(e).join(", ")+") were not specified. Specified keys were: "+fp(t).join(", ")+".")},fw=e=>{throw Error("Unsupported keys for object: "+fp(e).join(", "))},fv=(e,t)=>{if(!i(t))throw Error("The "+e+" fields must be an array. Was: "+t+".");L(t,t=>{if(!s(t))throw Error("The value "+t+" in the "+e+" fields was not a string.")})},fy=(e,t)=>{throw Error("All values need to be of type: "+t+". Keys ("+fp(e).join(", ")+") were not.")},fC=e=>{let t=fp(e),r=V(t,(e,r)=>r<t.length-1&&e===t[r+1]);r.each(e=>{throw Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})},fT=(e,t)=>fx(e,t,{validate:g,label:"function"}),fx=(e,t,r)=>{if(0===t.length)throw Error("You must specify at least one required field.");return fv("required",t),fC(t),l=>{let o=er(l),n=K(t,e=>z(o,e));n||fb(t,o),e(t,o);let s=P(t,e=>!r.validate(l[e],e));return s.length>0&&fy(s,r.label),l}},fS=(e,t)=>{let r=P(t,t=>!z(e,t));r.length>0&&fw(r)},fR=e=>fT(fS,e),fD=fR(["compare","extract","mutate","sink"]),fO=fR(["element","start","stop","destroy"]),fk=fR(["forceDrop","drop","move","delayDrop"]),fE=()=>{let e=k.none(),t=(t,r)=>{let l=e.map(e=>t.compare(e,r));return e=k.some(r),l},r=fg({move:ff(["info"])});return{onEvent:(e,l)=>{let o=l.extract(e);o.each(e=>{let o=t(l,e);o.each(e=>{r.trigger.move(e)})})},reset:()=>{e=k.none()},events:r.registry}},fA=()=>{let e=fg({move:ff(["info"])});return{onEvent:p,reset:p,events:e.registry}},fB=()=>{let e=fA(),t=fE(),r=e;return{on:()=>{r.reset(),r=t},off:()=>{r.reset(),r=e},isOn:()=>r===t,onEvent:(e,t)=>{r.onEvent(e,t)},events:t.events}},fN=(e,t,r)=>{let l=!1,o=fg({start:ff([]),stop:ff([])}),n=fB(),s=()=>{m.stop(),n.isOn()&&(n.off(),o.trigger.stop())},a=fh(s,200);n.events.move.bind(r=>{t.mutate(e,r.info)});let i=e=>(...t)=>{l&&e.apply(null,t)},m=t.sink(fk({forceDrop:s,drop:i(s),move:i(e=>{a.cancel(),n.onEvent(e,t)}),delayDrop:i(a.throttle)}),r);return{element:m.element,go:e=>{m.start(e),n.on(),o.trigger.start()},on:()=>{l=!0},off:()=>{l=!1},isActive:()=>l,destroy:()=>{m.destroy()},events:o.registry}},fz=e=>{let t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},f_=fz("ephox-dragster"),fj=f_.resolve,fW=e=>{let t={layerClass:fj("blocker"),...e},r=e$.fromTag("div");ej(r,"role","presentation"),rs(r,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),uX(r,fj("blocker")),uX(r,t.layerClass);let l=v(r);return{element:l,destroy:()=>{ta(r)}}};var fL=fD({compare:(e,t)=>lH(t.left-e.left,t.top-e.top),extract:e=>k.some(lH(e.x,e.y)),sink:(e,t)=>{let r=fW(t),l=fc(r.element(),"mousedown",e.forceDrop),o=fc(r.element(),"mouseup",e.drop),n=fc(r.element(),"mousemove",e.move),s=fc(r.element(),"mouseout",e.delayDrop);return fO({element:r.element,start:e=>{tt(e,r.element())},stop:()=>{ta(r.element())},destroy:()=>{r.destroy(),o.unbind(),n.unbind(),s.unbind(),l.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});let fM=(e,t={})=>{var r;let l=null!==(r=t.mode)&&void 0!==r?r:fL;return fN(e,l,t)},fI=fz("ephox-snooker"),fP=fI.resolve,fF=()=>{let e=fg({drag:ff(["xDelta","yDelta"])});return{mutate:(t,r)=>{e.trigger.drag(t,r)},events:e.registry}},fH=()=>{let e=fg({drag:ff(["xDelta","yDelta","target"])}),t=k.none(),r=fF();return r.events.drag.bind(r=>{t.each(t=>{e.trigger.drag(r.xDelta,r.yDelta,t)})}),{assign:e=>{t=k.some(e)},get:()=>t,mutate:r.mutate,events:e.registry}},f$=(e,t,r,l,o)=>{let n=e$.fromTag("div");return rs(n,{position:"absolute",left:t-l/2+"px",top:r+"px",height:o+"px",width:l+"px"}),eW(n,{"data-column":e,role:"presentation"}),n},fV=(e,t,r,l,o)=>{let n=e$.fromTag("div");return rs(n,{position:"absolute",left:t+"px",top:r-o/2+"px",height:o+"px",width:l+"px"}),eW(n,{"data-row":e,role:"presentation"}),n},fq=fP("resizer-bar"),fU=fP("resizer-rows"),fG=fP("resizer-cols"),fK=(e,t)=>G(e.all,(e,r)=>t(e.element)?[r]:[]),fY=(e,t)=>{let r=[];return j(e.grid.columns,l=>{let o=lB.getColumnAt(e,l).map(e=>e.element);o.forall(t)&&r.push(l)}),P(r,r=>{let l=lB.filterItems(e,e=>e.column===r);return K(l,e=>t(e.element))})},fJ=e=>{let t=tq(e.parent(),"."+fq);L(t,ta)},fQ=(e,t,r)=>{let l=e.origin();L(t,t=>{t.each(t=>{let o=r(l,t);uX(o,fq),tt(e.parent(),o)})})},fX=(e,t,r,l)=>{fQ(e,t,(e,t)=>{let o=f$(t.col,t.x-e.left,r.top-e.top,7,l);return uX(o,fG),o})},fZ=(e,t,r,l)=>{fQ(e,t,(e,t)=>{let o=fV(t.row,r.left-e.left,t.y-e.top,l,7);return uX(o,fU),o})},f0=(e,t,r,l,o)=>{let n=lq(r),s=t.isResizable,a=l.length>0?l3.positions(l,r):[],i=a.length>0?fK(e,s):[],m=P(a,(e,t)=>_(i,e=>t===e));fZ(t,m,n,ld(r));let c=o.length>0?l5.positions(o,r):[],d=c.length>0?fY(e,s):[],u=P(c,(e,t)=>_(d,e=>t===e));fX(t,u,n,lP(r))},f1=(e,t)=>{if(fJ(e),e.isResizable(t)){let r=lB.fromTable(t),l=l_(r),o=lN(r);f0(r,e,t,l,o)}},f9=(e,t)=>{let r=tq(e.parent(),"."+fq);L(r,t)},f3=e=>{f9(e,e=>{rn(e,"display","none")})},f2=e=>{f9(e,e=>{rn(e,"display","block")})},f5=e=>u1(e,fU),f7=e=>u1(e,fG),f4=fP("resizer-bar-dragging"),f6=e=>{let t=fH(),r=fM(t,{}),l=k.none(),o=(e,t)=>k.from(eM(e,t));t.events.drag.bind(e=>{o(e.target,"data-row").each(t=>{let r=rp(e.target,"top");rn(e.target,"top",r+e.yDelta+"px")}),o(e.target,"data-column").each(t=>{let r=rp(e.target,"left");rn(e.target,"left",r+e.xDelta+"px")})});let n=(e,t)=>{let r=rp(e,t),l=ru(e,"data-initial-"+t,0);return r-l};r.events.stop.bind(()=>{t.get().each(t=>{l.each(r=>{o(t,"data-row").each(e=>{let l=n(t,"top");eP(t,"data-initial-top"),d.trigger.adjustHeight(r,l,parseInt(e,10))}),o(t,"data-column").each(e=>{let l=n(t,"left");eP(t,"data-initial-left"),d.trigger.adjustWidth(r,l,parseInt(e,10))}),f1(e,r)})})});let s=(l,o)=>{d.trigger.startAdjust(),t.assign(l),ej(l,"data-initial-"+o,rp(l,o)),uX(l,f4),rn(l,"opacity","0.2"),r.go(e.parent())},a=fc(e.parent(),"mousedown",e=>{f5(e.target)&&s(e.target,"top"),f7(e.target)&&s(e.target,"left")}),i=t=>eK(t,e.view()),m=e=>t0(e,"table",i).filter(n_),c=fc(e.view(),"mouseover",t=>{m(t.target).fold(()=>{tL(t.target)&&fJ(e)},t=>{r.isActive()&&(l=k.some(t),f1(e,t))})}),d=fg({adjustHeight:ff(["table","delta","row"]),adjustWidth:ff(["table","delta","column"]),startAdjust:ff([])});return{destroy:()=>{a.unbind(),c.unbind(),r.destroy(),fJ(e)},refresh:t=>{f1(e,t)},on:r.on,off:r.off,hideBars:T(f3,e),showBars:T(f2,e),events:d.registry}},f8={create:(e,t,r)=>{let l=f6(e),o=fg({beforeResize:ff(["table","type"]),afterResize:ff(["table","type"]),startDrag:ff([])});return l.events.adjustHeight.bind(e=>{let t=e.table;o.trigger.beforeResize(t,"row");let r=l3.delta(e.delta,t);iv(t,r,e.row,l3),o.trigger.afterResize(t,"row")}),l.events.startAdjust.bind(e=>{o.trigger.startDrag()}),l.events.adjustWidth.bind(e=>{let l=e.table;o.trigger.beforeResize(l,"col");let n=l5.delta(e.delta,l),s=r(l);iw(l,n,e.column,t,s),o.trigger.afterResize(l,"col")}),{on:l.on,off:l.off,refreshBars:l.refresh,hideBars:l.hideBars,showBars:l.showBars,destroy:l.destroy,events:o.registry}}},ge={only:(e,t)=>{let r=eB(e)?eX(e):e;return{parent:v(r),view:v(e),origin:v(lH(0,0)),isResizable:t}},detached:(e,t,r)=>({parent:v(t),view:v(e),origin:()=>lq(t),isResizable:r}),body:(e,t,r)=>({parent:v(t),view:v(e),origin:v(lH(0,0)),isResizable:r})},gt=()=>{let e=e$.fromTag("div");return rs(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),tt(tM(),e),e},gr=(e,t)=>e.inline?ge.body(e$.fromDom(e.getBody()),gt(),t):ge.only(e$.fromDom(e.getDoc()),t),gl=(e,t)=>{e.inline&&ta(t.parent())},go=e=>f(e)&&"TABLE"===e.nodeName,gn="bar-",gs=e=>"false"!==eM(e,"data-mce-resize"),ga=e=>{let t=lB.fromTable(e);lB.hasColumns(t)||L(rx(e),e=>{let t=ra(e,"width");rn(e,"width",t),eP(e,"width")})},gi=e=>{let t,r;let l=d5(),o=d5(),n=d5(),s=t=>mk(e,t),a=()=>nC(e)?sY():sK(),i=e=>sJ(e).columns,m=(l,o,n)=>{let m=t6(o,"e");if(""===r&&m2(l),n!==t&&""!==r){rn(l,"width",r);let o=a(),c=s(l),d=nC(e)||m?i(l)-1:0;iw(l,n-t,d,o,c)}else if(n$(r)){let e=parseFloat(r.replace("%","")),o=n*e/t;rn(l,"width",o+"%")}nV(r)&&ga(l)},c=()=>{o.on(e=>{e.destroy()}),n.on(t=>{gl(e,t)})};return e.on("init",()=>{let t=gr(e,gs);if(n.set(t),nw(e)&&nO(e)){let r=a(),n=f8.create(t,r,s);n.on(),n.events.startDrag.bind(t=>{l.set(e.selection.getRng())}),n.events.beforeResize.bind(t=>{let r=t.table.dom;mx(e,r,nP(r),nF(r),gn+t.type)}),n.events.afterResize.bind(t=>{let r=t.table,o=r.dom;nM(r),l.on(t=>{e.selection.setRng(t),e.focus()}),mS(e,o,nP(o),nF(o),gn+t.type),e.undoManager.add()}),o.set(n)}}),e.on("ObjectResizeStart",l=>{let o=l.target;if(go(o)){let n=e$.fromDom(o);L(e.dom.select(".mce-clonedresizable"),t=>{e.dom.addClass(t,"mce-"+ny(e)+"-columns")}),!m1(n)&&nR(e)?m5(n):!m0(n)&&nS(e)&&m2(n),m9(n)&&t4(l.origin,gn)&&m2(n),t=l.width,r=nD(e)?"":nH(e,o).getOr("")}}),e.on("ObjectResized",t=>{let r=t.target;if(go(r)){let l=e$.fromDom(r),o=t.origin;t4(o,"corner-")&&m(l,o,t.width),nM(l),my(e,l.dom,mR)}}),e.on("SwitchMode",()=>{o.on(t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()})}),e.on("dragstart dragend",e=>{o.on(t=>{"dragstart"===e.type?(t.hideBars(),t.off()):(t.on(),t.showBars())})}),e.on("remove",()=>{c()}),{refresh:e=>{o.on(t=>t.refreshBars(e$.fromDom(e)))},hide:()=>{o.on(e=>e.hideBars())},show:()=>{o.on(e=>e.showBars())}}},gm=e=>{np(e);let t=gi(e),r=fu(e,t),l=mE(e,t,r);return ck(e,l),cE(e,l),sj(e,l),{getSelectedCells:r.getSelectedCells,clearSelectedCells:r.clearSelectedCells}};e.add("dom",e=>{let t=gm(e);return{table:t}})}();