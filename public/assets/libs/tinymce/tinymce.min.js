!function(){"use strict";let et,er,ei,es;var ed,ec,eu,ef,ey,eC,eS,e_,eR,eI,e=function(et){if(null===et)return"null";if(void 0===et)return"undefined";var er=typeof et;return"object"===er&&(Array.prototype.isPrototypeOf(et)||et.constructor&&"Array"===et.constructor.name)?"array":"object"===er&&(String.prototype.isPrototypeOf(et)||et.constructor&&"String"===et.constructor.name)?"string":er},t=function(et){return{eq:et}},eL=t(function(et,er){return et===er}),o=function(et){return t(function(er,ei){if(er.length!==ei.length)return!1;for(var es=er.length,ed=0;ed<es;ed++)if(!et.eq(er[ed],ei[ed]))return!1;return!0})},r=function(et){return t(function(er,ei){var es,ed,ec=Object.keys(er),eu=Object.keys(ei);if(!(es=o(eL),ed=function(et){return Array.prototype.slice.call(et).sort(void 0)},t(function(et,er){return es.eq(ed(et),ed(er))})).eq(ec,eu))return!1;for(var ef=ec.length,ey=0;ey<ef;ey++){var eC=ec[ey];if(!et.eq(er[eC],ei[eC]))return!1}return!0})},eB=t(function(et,er){if(et===er)return!0;var ei=e(et);return ei===e(er)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(ei)?et===er:"array"===ei?o(eB).eq(et,er):"object"===ei&&r(eB).eq(et,er))});let eD=Object.getPrototypeOf,i=(et,er,ei)=>{var es;return!!ei(et,er.prototype)||(null===(es=et.constructor)||void 0===es?void 0:es.name)===er.name},l=et=>er=>(et=>{let er=typeof et;return null===et?"null":"object"===er&&Array.isArray(et)?"array":"object"===er&&i(et,String,(et,er)=>er.isPrototypeOf(et))?"string":er})(er)===et,d=et=>er=>typeof er===et,c=et=>er=>et===er,u=(et,er)=>eF(et)&&i(et,er,(et,er)=>eD(et)===er),eP=l("string"),eF=l("object"),g=et=>u(et,Object),eM=l("array"),ez=c(null),eV=d("boolean"),eU=c(void 0),y=et=>null==et,C=et=>!y(et),eH=d("function"),ej=d("number"),k=(et,er)=>{if(eM(et)){for(let ei=0,es=et.length;ei<es;++ei)if(!er(et[ei]))return!1;return!0}return!1},E=()=>{},S=(et,er)=>(...ei)=>et(er.apply(null,ei)),_=(et,er)=>ei=>et(er(ei)),N=et=>()=>et,R=et=>et,A=(et,er)=>et===er;function O(et,...er){return(...ei)=>{let es=er.concat(ei);return et.apply(null,es)}}let T=et=>er=>!et(er),B=et=>()=>{throw Error(et)},D=et=>et(),P=et=>{et()},e$=N(!1),eq=N(!0);let I=class I{constructor(et,er){this.tag=et,this.value=er}static some(et){return new I(!0,et)}static none(){return I.singletonNone}fold(et,er){return this.tag?er(this.value):et()}isSome(){return this.tag}isNone(){return!this.tag}map(et){return this.tag?I.some(et(this.value)):I.none()}bind(et){return this.tag?et(this.value):I.none()}exists(et){return this.tag&&et(this.value)}forall(et){return!this.tag||et(this.value)}filter(et){return!this.tag||et(this.value)?this:I.none()}getOr(et){return this.tag?this.value:et}or(et){return this.tag?this:et}getOrThunk(et){return this.tag?this.value:et()}orThunk(et){return this.tag?this:et()}getOrDie(et){if(this.tag)return this.value;throw Error(null!=et?et:"Called getOrDie on None")}static from(et){return C(et)?I.some(et):I.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(et){this.tag&&et(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};I.singletonNone=new I(!1);let eG=Array.prototype.slice,eW=Array.prototype.indexOf,eK=Array.prototype.push,j=(et,er)=>eW.call(et,er),H=(et,er)=>j(et,er)>-1,$=(et,er)=>{for(let ei=0,es=et.length;ei<es;ei++)if(er(et[ei],ei))return!0;return!1},q=(et,er)=>{let ei=et.length,es=Array(ei);for(let ed=0;ed<ei;ed++){let ei=et[ed];es[ed]=er(ei,ed)}return es},V=(et,er)=>{for(let ei=0,es=et.length;ei<es;ei++)er(et[ei],ei)},W=(et,er)=>{for(let ei=et.length-1;ei>=0;ei--)er(et[ei],ei)},K=(et,er)=>{let ei=[],es=[];for(let ed=0,ec=et.length;ed<ec;ed++){let ec=et[ed];(er(ec,ed)?ei:es).push(ec)}return{pass:ei,fail:es}},G=(et,er)=>{let ei=[];for(let es=0,ed=et.length;es<ed;es++){let ed=et[es];er(ed,es)&&ei.push(ed)}return ei},Y=(et,er,ei)=>(W(et,(et,es)=>{ei=er(ei,et,es)}),ei),X=(et,er,ei)=>(V(et,(et,es)=>{ei=er(ei,et,es)}),ei),Q=(et,er,ei)=>{for(let es=0,ed=et.length;es<ed;es++){let ed=et[es];if(er(ed,es))return I.some(ed);if(ei(ed,es))break}return I.none()},J=(et,er)=>Q(et,er,e$),Z=(et,er)=>{for(let ei=0,es=et.length;ei<es;ei++)if(er(et[ei],ei))return I.some(ei);return I.none()},ee=et=>{let er=[];for(let ei=0,es=et.length;ei<es;++ei){if(!eM(et[ei]))throw Error("Arr.flatten item "+ei+" was not an array, input: "+et);eK.apply(er,et[ei])}return er},te=(et,er)=>ee(q(et,er)),ne=(et,er)=>{for(let ei=0,es=et.length;ei<es;++ei)if(!0!==er(et[ei],ei))return!1;return!0},oe=et=>{let er=eG.call(et,0);return er.reverse(),er},re=(et,er)=>G(et,et=>!H(er,et)),se=(et,er)=>{let ei={};for(let es=0,ed=et.length;es<ed;es++){let ed=et[es];ei[String(ed)]=er(ed,es)}return ei},ae=(et,er)=>{let ei=eG.call(et,0);return ei.sort(er),ei},ie=(et,er)=>er>=0&&er<et.length?I.some(et[er]):I.none(),le=et=>ie(et,0),de=et=>ie(et,et.length-1),eY=eH(Array.from)?Array.from:et=>eG.call(et),ue=(et,er)=>{for(let ei=0;ei<et.length;ei++){let es=er(et[ei],ei);if(es.isSome())return es}return I.none()},eX=Object.keys,eJ=Object.hasOwnProperty,ge=(et,er)=>{let ei=eX(et);for(let es=0,ed=ei.length;es<ed;es++){let ed=ei[es];er(et[ed],ed)}},pe=(et,er)=>he(et,(et,ei)=>({k:ei,v:er(et,ei)})),he=(et,er)=>{let ei={};return ge(et,(et,es)=>{let ed=er(et,es);ei[ed.k]=ed.v}),ei},be=et=>(er,ei)=>{et[ei]=er},ve=(et,er,ei,es)=>{ge(et,(et,ed)=>{(er(et,ed)?ei:es)(et,ed)})},ye=(et,er)=>{let ei={};return ve(et,er,be(ei),E),ei},Ce=(et,er)=>{let ei=[];return ge(et,(et,es)=>{ei.push(er(et,es))}),ei},we=et=>Ce(et,R),xe=(et,er)=>ke(et,er)?I.from(et[er]):I.none(),ke=(et,er)=>eJ.call(et,er),Ee=(et,er)=>ke(et,er)&&void 0!==et[er]&&null!==et[er],Se=et=>{let er={};return V(et,et=>{er[et]={}}),eX(er)},_e=et=>void 0!==et.length,eQ=Array.isArray,Re=(et,er,ei)=>{if(!et)return!1;if(ei=ei||et,_e(et)){for(let es=0,ed=et.length;es<ed;es++)if(!1===er.call(ei,et[es],es,et))return!1}else for(let es in et)if(ke(et,es)&&!1===er.call(ei,et[es],es,et))return!1;return!0},Ae=(et,er)=>{let ei=[];return Re(et,(es,ed)=>{ei.push(er(es,ed,et))}),ei},Oe=(et,er)=>{let ei=[];return Re(et,(es,ed)=>{er&&!er(es,ed,et)||ei.push(es)}),ei},Te=(et,er,ei,es)=>{let ed=eU(ei)?et[0]:ei;for(let ei=0;ei<et.length;ei++)ed=er.call(es,ed,et[ei],ei);return ed},Be=(et,er,ei)=>{for(let es=0,ed=et.length;es<ed;es++)if(er.call(ei,et[es],es,et))return es;return -1},De=et=>et[et.length-1],Pe=et=>{let er,ei=!1;return(...es)=>(ei||(ei=!0,er=et.apply(null,es)),er)},Le=()=>Me(0,0),Me=(et,er)=>({major:et,minor:er}),eZ={nu:Me,detect:(et,er)=>{let ei=String(er).toLowerCase();return 0===et.length?Le():((et,er)=>{let ei=((et,er)=>{for(let ei=0;ei<et.length;ei++){let es=et[ei];if(es.test(er))return es}})(et,er);if(!ei)return{major:0,minor:0};let o=et=>Number(er.replace(ei,"$"+et));return Me(o(1),o(2))})(et,ei)},unknown:Le},Fe=(et,er)=>{let ei=String(er).toLowerCase();return J(et,et=>et.search(ei))},Ue=(et,er,ei)=>""===er||et.length>=er.length&&et.substr(ei,ei+er.length)===er,ze=(et,er)=>{var ei;return He(et,er)?(ei=er.length,et.substring(ei)):et},je=(et,er,ei=0,es)=>{let ed=et.indexOf(er,ei);return -1!==ed&&(!!eU(es)||ed+er.length<=es)},He=(et,er)=>Ue(et,er,0),$e=(et,er)=>Ue(et,er,et.length-er.length),qe=et=>er=>er.replace(et,""),e0=qe(/^\s+|\s+$/g),e1=qe(/^\s+/g),e2=qe(/\s+$/g),Ge=et=>et.length>0,Ye=et=>!Ge(et),Xe=(et,er=10)=>{let ei=parseInt(et,er);return isNaN(ei)?I.none():I.some(ei)},e3=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Je=et=>er=>je(er,et),e8=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:et=>je(et,"edge/")&&je(et,"chrome")&&je(et,"safari")&&je(et,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,e3],search:et=>je(et,"chrome")&&!je(et,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:et=>je(et,"msie")||je(et,"trident")},{name:"Opera",versionRegexes:[e3,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Je("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Je("firefox")},{name:"Safari",versionRegexes:[e3,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:et=>(je(et,"safari")||je(et,"mobile/"))&&je(et,"applewebkit")}],e5=[{name:"Windows",search:Je("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:et=>je(et,"iphone")||je(et,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Je("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Je("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Je("linux"),versionRegexes:[]},{name:"Solaris",search:Je("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Je("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Je("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],e6={browsers:N(e8),oses:N(e5)},e9="Edge",e4="Chromium",e7="Opera",tt="Firefox",tr="Safari",it=et=>{let er=et.current,ei=et.version,o=et=>()=>er===et;return{current:er,version:ei,isEdge:o(e9),isChromium:o(e4),isIE:o("IE"),isOpera:o(e7),isFirefox:o(tt),isSafari:o(tr)}},lt=()=>it({current:void 0,version:eZ.unknown()}),ts=(N(e9),N(e4),N("IE"),N(e7),N(tt),N(tr),"Windows"),td="Android",tc="Linux",tu="macOS",tf="Solaris",tv="FreeBSD",ty="ChromeOS",bt=et=>{let er=et.current,ei=et.version,o=et=>()=>er===et;return{current:er,version:ei,isWindows:o(ts),isiOS:o("iOS"),isAndroid:o(td),isMacOS:o(tu),isLinux:o(tc),isSolaris:o(tf),isFreeBSD:o(tv),isChromeOS:o(ty)}},vt=()=>bt({current:void 0,version:eZ.unknown()}),tC=(N(ts),N("iOS"),N(td),N(tc),N(tu),N(tf),N(tv),N(ty),et=>window.matchMedia(et).matches),tk=Pe(()=>((et,er,ei)=>{let es=e6.browsers(),ed=e6.oses(),ec=er.bind(et=>ue(et.brands,et=>{let er=et.brand.toLowerCase();return J(es,et=>{var ei;return er===(null===(ei=et.brand)||void 0===ei?void 0:ei.toLowerCase())}).map(er=>({current:er.name,version:eZ.nu(parseInt(et.version,10),0)}))})).orThunk(()=>Fe(es,et).map(er=>{let ei=eZ.detect(er.versionRegexes,et);return{current:er.name,version:ei}})).fold(lt,it),eu=Fe(ed,et).map(er=>{let ei=eZ.detect(er.versionRegexes,et);return{current:er.name,version:ei}}).fold(vt,bt),ef=((et,er,ei,es)=>{let ed=et.isiOS()&&!0===/ipad/i.test(ei),ec=et.isiOS()&&!ed,eu=et.isiOS()||et.isAndroid(),ef=eu||es("(pointer:coarse)"),ey=ed||!ec&&eu&&es("(min-device-width:768px)"),eC=ec||eu&&!ey,eS=er.isSafari()&&et.isiOS()&&!1===/safari/i.test(ei),e_=!eC&&!ey&&!eS;return{isiPad:N(ed),isiPhone:N(ec),isTablet:N(ey),isPhone:N(eC),isTouch:N(ef),isAndroid:et.isAndroid,isiOS:et.isiOS,isWebView:N(eS),isDesktop:N(e_)}})(eu,ec,et,ei);return{browser:ec,os:eu,deviceType:ef}})(navigator.userAgent,I.from(navigator.userAgentData),tC)),xt=()=>tk(),tR=navigator.userAgent,tI=xt(),tL=tI.browser,tB=tI.os,tD=tI.deviceType,tP=-1!==tR.indexOf("Windows Phone"),tF={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:tL.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!tL.isIE(),windowsPhone:tP,browser:{current:tL.current,version:tL.version,isChromium:tL.isChromium,isEdge:tL.isEdge,isFirefox:tL.isFirefox,isIE:tL.isIE,isOpera:tL.isOpera,isSafari:tL.isSafari},os:{current:tB.current,version:tB.version,isAndroid:tB.isAndroid,isChromeOS:tB.isChromeOS,isFreeBSD:tB.isFreeBSD,isiOS:tB.isiOS,isLinux:tB.isLinux,isMacOS:tB.isMacOS,isSolaris:tB.isSolaris,isWindows:tB.isWindows},deviceType:{isDesktop:tD.isDesktop,isiPad:tD.isiPad,isiPhone:tD.isiPhone,isPhone:tD.isPhone,isTablet:tD.isTablet,isTouch:tD.isTouch,isWebView:tD.isWebView}},tM=/^\s*|\s*$/g,Tt=et=>y(et)?"":(""+et).replace(tM,""),Bt=function(et,er,ei,es){es=es||this,et&&(ei&&(et=et[ei]),Re(et,(et,ed)=>!1!==er.call(es,et,ed,ei)&&(Bt(et,er,ei,es),!0)))},tz={trim:Tt,isArray:eQ,is:(et,er)=>er?!("array"!==er||!eQ(et))||typeof et===er:void 0!==et,toArray:et=>{if(eQ(et))return et;{let er=[];for(let ei=0,es=et.length;ei<es;ei++)er[ei]=et[ei];return er}},makeMap:(et,er,ei={})=>{let es=eP(et)?et.split(er||","):et||[],ed=es.length;for(;ed--;)ei[es[ed]]={};return ei},each:Re,map:Ae,grep:Oe,inArray:(et,er)=>{if(et){for(let ei=0,es=et.length;ei<es;ei++)if(et[ei]===er)return ei}return -1},hasOwn:ke,extend:(et,...er)=>{for(let ei=0;ei<er.length;ei++){let es=er[ei];for(let er in es)if(ke(es,er)){let ei=es[er];void 0!==ei&&(et[er]=ei)}}return et},walk:Bt,resolve:(et,er=window)=>{let ei=et.split(".");for(let et=0,es=ei.length;et<es&&(er=er[ei[et]]);et++);return er},explode:(et,er)=>eM(et)?et:""===et?[]:Ae(et.split(er||","),Tt),_addCacheSuffix:et=>{let er=tF.cacheSuffix;return er&&(et+=(-1===et.indexOf("?")?"?":"&")+er),et}},Pt=(et,er,ei=A)=>et.exists(et=>ei(et,er)),Lt=(et,er,ei=A)=>Mt(et,er,ei).getOr(et.isNone()&&er.isNone()),Mt=(et,er,ei)=>et.isSome()&&er.isSome()?I.some(ei(et.getOrDie(),er.getOrDie())):I.none(),It=(et,er)=>et?I.some(er):I.none(),tV="undefined"!=typeof window?window:Function("return this;")(),Ut=(et,er)=>((et,er)=>{let ei=null!=er?er:tV;for(let er=0;er<et.length&&null!=ei;++er)ei=ei[et[er]];return ei})(et.split("."),er),tU=Object.getPrototypeOf,jt=et=>{let er=Ut("ownerDocument.defaultView",et);return eF(et)&&(((et,er)=>{let ei=Ut(et,er);if(null==ei)throw Error(et+" not available on this browser");return ei})("HTMLElement",er).prototype.isPrototypeOf(et)||/^HTML\w*Element$/.test(tU(et).constructor.name))},Ht=et=>et.dom.nodeName.toLowerCase(),$t=et=>et.dom.nodeType,qt=et=>er=>$t(er)===et,Vt=et=>tH(et)&&jt(et.dom),tH=qt(1),tj=qt(3),t$=qt(9),tq=qt(11),Xt=et=>er=>tH(er)&&Ht(er)===et,Qt=(et,er,ei)=>{if(!(eP(ei)||eV(ei)||ej(ei)))throw console.error("Invalid call to Attribute.set. Key ",er,":: Value ",ei,":: Element ",et),Error("Attribute value was not simple");et.setAttribute(er,ei+"")},Jt=(et,er,ei)=>{Qt(et.dom,er,ei)},Zt=(et,er)=>{let ei=et.dom;ge(er,(et,er)=>{Qt(ei,er,et)})},en=(et,er)=>{let ei=et.dom.getAttribute(er);return null===ei?void 0:ei},tn=(et,er)=>I.from(en(et,er)),nn=(et,er)=>{let ei=et.dom;return!(!ei||!ei.hasAttribute)&&ei.hasAttribute(er)},on=(et,er)=>{et.dom.removeAttribute(er)},rn=et=>X(et.dom.attributes,(et,er)=>(et[er.name]=er.value,et),{}),sn=(et,er)=>{let ei=en(et,er);return void 0===ei||""===ei?[]:ei.split(" ")},an=et=>void 0!==et.dom.classList,ln=et=>sn(et,"class"),dn=(et,er)=>((et,er,ei)=>{let es=sn(et,er).concat([ei]);return Jt(et,er,es.join(" ")),!0})(et,"class",er),cn=(et,er)=>((et,er,ei)=>{let es=G(sn(et,er),et=>et!==ei);return es.length>0?Jt(et,er,es.join(" ")):on(et,er),!1})(et,"class",er),un=(et,er)=>{an(et)?et.dom.classList.add(er):dn(et,er)},mn=et=>{0===(an(et)?et.dom.classList:ln(et)).length&&on(et,"class")},fn=(et,er)=>{an(et)?et.dom.classList.remove(er):cn(et,er),mn(et)},gn=(et,er)=>an(et)&&et.dom.classList.contains(er),pn=et=>{if(null==et)throw Error("Node cannot be null or undefined");return{dom:et}},hn=(et,er)=>{let ei=(er||document).createElement("div");if(ei.innerHTML=et,!ei.hasChildNodes()||ei.childNodes.length>1){let er="HTML does not have a single root node";throw console.error(er,et),Error(er)}return pn(ei.childNodes[0])},bn=(et,er)=>{let ei=(er||document).createElement(et);return pn(ei)},vn=(et,er)=>{let ei=(er||document).createTextNode(et);return pn(ei)},Cn=(et,er,ei)=>I.from(et.dom.elementFromPoint(er,ei)).map(pn),wn=(et,er)=>{let ei=[],o=et=>(ei.push(et),er(et)),es=er(et);do es=es.bind(o);while(es.isSome());return ei},xn=(et,er)=>{let ei=et.dom;if(1!==ei.nodeType)return!1;if(void 0!==ei.matches)return ei.matches(er);if(void 0!==ei.msMatchesSelector)return ei.msMatchesSelector(er);if(void 0!==ei.webkitMatchesSelector)return ei.webkitMatchesSelector(er);if(void 0!==ei.mozMatchesSelector)return ei.mozMatchesSelector(er);throw Error("Browser lacks native selectors")},kn=et=>1!==et.nodeType&&9!==et.nodeType&&11!==et.nodeType||0===et.childElementCount,En=(et,er)=>et.dom===er.dom,Sn=(et,er)=>{let ei=et.dom,es=er.dom;return ei!==es&&ei.contains(es)},_n=et=>pn(et.dom.ownerDocument),Nn=et=>t$(et)?et:_n(et),Rn=et=>pn(Nn(et).dom.defaultView),An=et=>I.from(et.dom.parentNode).map(pn),On=et=>I.from(et.dom.parentElement).map(pn),Tn=(et,er)=>{let ei=eH(er)?er:e$,es=et.dom,ed=[];for(;null!==es.parentNode&&void 0!==es.parentNode;){let et=es.parentNode,er=pn(et);if(ed.push(er),!0===ei(er))break;es=et}return ed},Bn=et=>I.from(et.dom.previousSibling).map(pn),Dn=et=>I.from(et.dom.nextSibling).map(pn),Pn=et=>oe(wn(et,Bn)),Ln=et=>wn(et,Dn),Mn=et=>q(et.dom.childNodes,pn),In=(et,er)=>{let ei=et.dom.childNodes;return I.from(ei[er]).map(pn)},Fn=et=>In(et,0),Un=et=>In(et,et.dom.childNodes.length-1),zn=et=>et.dom.childNodes.length,jn=et=>tq(et)&&C(et.dom.host),tG=eH(Element.prototype.attachShadow)&&eH(Node.prototype.getRootNode),tW=N(tG),tK=tG?et=>pn(et.dom.getRootNode()):Nn,Vn=et=>jn(et)?et:(et=>{let er=et.dom.head;if(null==er)throw Error("Head is not available yet");return pn(er)})(Nn(et)),Wn=et=>pn(et.dom.host),Kn=et=>{if(tW()&&C(et.target)){let er=pn(et.target);if(tH(er)&&Gn(er)&&et.composed&&et.composedPath){let er=et.composedPath();if(er)return le(er)}}return I.from(et.target)},Gn=et=>C(et.dom.shadowRoot),Yn=et=>{let er=tj(et)?et.dom.parentNode:et.dom;if(null==er||null===er.ownerDocument)return!1;let ei=er.ownerDocument;return(et=>{let er=tK(et);return jn(er)?I.some(er):I.none()})(pn(er)).fold(()=>ei.body.contains(er),_(Yn,Wn))};var Xn=(et,er,ei,es,ed)=>et(ei,es)?I.some(ei):eH(ed)&&ed(ei)?I.none():er(ei,es,ed);let Qn=(et,er,ei)=>{let es=et.dom,ed=eH(ei)?ei:e$;for(;es.parentNode;){es=es.parentNode;let et=pn(es);if(er(et))return I.some(et);if(ed(et))break}return I.none()},Jn=(et,er,ei)=>Xn((et,er)=>er(et),Qn,et,er,ei),Zn=(et,er,ei)=>Qn(et,et=>xn(et,er),ei),eo=(et,er)=>((et,er)=>{let ei=void 0===er?document:er.dom;return kn(ei)?I.none():I.from(ei.querySelector(et)).map(pn)})(er,et),to=(et,er,ei)=>Xn((et,er)=>xn(et,er),Zn,et,er,ei),no=(et,er=!1)=>Yn(et)?et.dom.isContentEditable:to(et,"[contenteditable]").fold(N(er),et=>"true"===oo(et)),oo=et=>et.dom.contentEditable,ro=et=>void 0!==et.style&&eH(et.style.getPropertyValue),so=(et,er,ei)=>{if(!eP(ei))throw console.error("Invalid call to CSS.set. Property ",er,":: Value ",ei,":: Element ",et),Error("CSS value must be a string: "+ei);ro(et)&&et.style.setProperty(er,ei)},ao=(et,er,ei)=>{let es=et.dom;so(es,er,ei)},io=(et,er)=>{let ei=et.dom;ge(er,(et,er)=>{so(ei,er,et)})},lo=(et,er)=>{let ei=et.dom,es=window.getComputedStyle(ei).getPropertyValue(er);return""!==es||Yn(et)?es:co(ei,er)},co=(et,er)=>ro(et)?et.style.getPropertyValue(er):"",uo=(et,er)=>{let ei=et.dom,es=co(ei,er);return I.from(es).filter(et=>et.length>0)},mo=et=>{let er={},ei=et.dom;if(ro(ei))for(let et=0;et<ei.style.length;et++){let es=ei.style.item(et);er[es]=ei.style[es]}return er},fo=(et,er)=>{var ei;ro(ei=et.dom)&&ei.style.removeProperty(er),Pt(tn(et,"style").map(e0),"")&&on(et,"style")},go=(et,er)=>{An(et).each(ei=>{ei.dom.insertBefore(er.dom,et.dom)})},po=(et,er)=>{Dn(et).fold(()=>{An(et).each(et=>{bo(et,er)})},et=>{go(et,er)})},ho=(et,er)=>{Fn(et).fold(()=>{bo(et,er)},ei=>{et.dom.insertBefore(er.dom,ei.dom)})},bo=(et,er)=>{et.dom.appendChild(er.dom)},vo=(et,er)=>{go(et,er),bo(er,et)},yo=(et,er)=>{V(er,er=>{bo(et,er)})},Co=et=>{et.dom.textContent="",V(Mn(et),et=>{wo(et)})},wo=et=>{let er=et.dom;null!==er.parentNode&&er.parentNode.removeChild(er)},xo=et=>{let er=Mn(et);er.length>0&&V(er,(ei,es)=>{let ed=0===es?et:er[es-1];po(ed,ei)}),wo(et)},ko=et=>q(et,pn),Eo=et=>et.dom.innerHTML,So=(et,er)=>{let ei=_n(et).dom,es=pn(ei.createDocumentFragment()),ed=((et,er)=>{let ei=(er||document).createElement("div");return ei.innerHTML=et,Mn(pn(ei))})(er,ei);yo(es,ed),Co(et),bo(et,es)},_o=(et,er,ei,es)=>((et,er,ei,es,ed)=>{let s=et=>{ei(et)&&es((et=>{let er=pn(Kn(et).getOr(et.target)),n=()=>et.stopPropagation(),o=()=>et.preventDefault(),ei=S(o,n);return{target:er,x:et.clientX,y:et.clientY,stop:n,prevent:o,kill:ei,raw:et}})(et))};return et.dom.addEventListener(er,s,!1),{unbind:O(No,et,er,s,!1)}})(et,er,ei,es),No=(et,er,ei,es)=>{et.dom.removeEventListener(er,ei,es)},Ro=(et,er)=>({left:et,top:er,translate:(ei,es)=>Ro(et+ei,er+es)}),Oo=(et,er)=>void 0!==et?et:void 0!==er?er:0,To=et=>{let er=et.dom,ei=er.ownerDocument.body;return ei===er?Ro(ei.offsetLeft,ei.offsetTop):Yn(et)?(et=>{let er=et.getBoundingClientRect();return Ro(er.left,er.top)})(er):Ro(0,0)},Bo=et=>{let er=void 0!==et?et.dom:document,ei=er.body.scrollLeft||er.documentElement.scrollLeft,es=er.body.scrollTop||er.documentElement.scrollTop;return Ro(ei,es)},Do=(et,er,ei)=>{let es=(void 0!==ei?ei.dom:document).defaultView;es&&es.scrollTo(et,er)},Po=(et,er)=>{xt().browser.isSafari()&&eH(et.dom.scrollIntoViewIfNeeded)?et.dom.scrollIntoViewIfNeeded(!1):et.dom.scrollIntoView(er)},Lo=(et,er,ei,es)=>({x:et,y:er,width:ei,height:es,right:et+ei,bottom:er+es}),Mo=et=>{let er=void 0===et?window:et,ei=er.document,es=Bo(pn(ei));return(et=>{let er=void 0===et?window:et;return xt().browser.isFirefox()?I.none():I.from(er.visualViewport)})(er).fold(()=>{let et=er.document.documentElement,ei=et.clientWidth,ed=et.clientHeight;return Lo(es.left,es.top,ei,ed)},et=>Lo(Math.max(et.pageLeft,es.left),Math.max(et.pageTop,es.top),et.width,et.height))},Io=(et,er)=>{let ei=[];return V(Mn(et),et=>{er(et)&&(ei=ei.concat([et])),ei=ei.concat(Io(et,er))}),ei},Fo=(et,er)=>((et,er)=>{let ei=void 0===er?document:er.dom;return kn(ei)?[]:q(ei.querySelectorAll(et),pn)})(er,et),Uo=(et,er,ei)=>Zn(et,er,ei).isSome();let zo=class zo{constructor(et,er){this.node=et,this.rootNode=er,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(et){return this.node=this.findSibling(this.node,"firstChild","nextSibling",et),this.node}prev(et){return this.node=this.findSibling(this.node,"lastChild","previousSibling",et),this.node}prev2(et){return this.node=this.findPreviousNode(this.node,et),this.node}findSibling(et,er,ei,es){if(et){if(!es&&et[er])return et[er];if(et!==this.rootNode){let er=et[ei];if(er)return er;for(let es=et.parentNode;es&&es!==this.rootNode;es=es.parentNode)if(er=es[ei])return er}}}findPreviousNode(et,er){if(et){let ei=et.previousSibling;if(this.rootNode&&ei===this.rootNode)return;if(ei){if(!er){for(let et=ei.lastChild;et;et=et.lastChild)if(!et.lastChild)return et}return ei}let es=et.parentNode;if(es&&es!==this.rootNode)return es}}};let jo=et=>er=>!!er&&er.nodeType===et,Ho=et=>!!et&&!Object.getPrototypeOf(et),tY=jo(1),qo=et=>{let er=et.toLowerCase();return et=>C(et)&&et.nodeName.toLowerCase()===er},Vo=et=>{let er=et.map(et=>et.toLowerCase());return et=>{if(et&&et.nodeName){let ei=et.nodeName.toLowerCase();return H(er,ei)}return!1}},Wo=(et,er)=>{let ei=er.toLowerCase().split(" ");return er=>{if(tY(er)){let es=er.ownerDocument.defaultView;if(es)for(let ed=0;ed<ei.length;ed++){let ec=es.getComputedStyle(er,null);if((ec?ec.getPropertyValue(et):null)===ei[ed])return!0}}return!1}},Ko=et=>er=>tY(er)&&er.hasAttribute(et),Go=et=>tY(et)&&et.hasAttribute("data-mce-bogus"),Yo=et=>tY(et)&&"TABLE"===et.tagName,Xo=et=>er=>!!tY(er)&&(er.contentEditable===et||er.getAttribute("data-mce-contenteditable")===et),tX=Vo(["textarea","input"]),tJ=jo(3),tQ=jo(4),tZ=jo(7),t0=jo(8),t1=jo(9),t2=jo(11),t3=qo("br"),t8=qo("img"),t5=Xo("true"),t6=Xo("false"),t9=Vo(["td","th"]),t4=Vo(["td","th","caption"]),t7=Vo(["video","audio","object","embed"]),rt=qo("li"),rr=qo("details"),ra=qo("summary"),hr=et=>"\uFEFF"===et,rs=((et,er)=>{let n=er=>et(er)?I.from(er.dom.nodeValue):I.none();return{get:er=>{if(!et(er))throw Error("Can only get text value of a text node");return n(er).getOr("")},getOption:n,set:(er,ei)=>{if(!et(er))throw Error("Can only set raw text value of a text node");er.dom.nodeValue=ei}}})(tj),vr=et=>rs.get(et),yr=et=>rs.getOption(et),rd=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),wr=et=>{let er;return ei=>ke(er=er||se(et,eq),Ht(ei))},rc=wr(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),kr=et=>tH(et)&&!rc(et),Er=et=>tH(et)&&"br"===Ht(et),rf=wr(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),rv=wr(["ul","ol","dl"]),ry=wr(["li","dd","dt"]),rA=wr(["thead","tbody","tfoot"]),rR=wr(["td","th"]),rI=wr(["pre","script","textarea","style"]),rL=wr(rd),Br=et=>rL(et)||kr(et),Dr=()=>{let et=bn("br");return Jt(et,"data-mce-bogus","1"),et},Pr=et=>{Co(et),bo(et,Dr())},Lr=et=>{Un(et).each(er=>{Bn(er).each(ei=>{rc(et)&&Er(er)&&rc(ei)&&wo(er)})})},Fr=et=>et.replace(/\uFEFF/g,""),jr=et=>(tJ(et)&&(et=et.parentNode),tY(et)&&et.hasAttribute("data-mce-caret")),Hr=et=>tJ(et)&&hr(et.data),$r=et=>jr(et)||Hr(et),qr=et=>et.firstChild!==et.lastChild||!t3(et.firstChild),Vr=et=>{let er=et.container();return!!tJ(er)&&("\uFEFF"===er.data.charAt(et.offset())||et.isAtStart()&&Hr(er.previousSibling))},Wr=et=>{let er=et.container();return!!tJ(er)&&("\uFEFF"===er.data.charAt(et.offset()-1)||et.isAtEnd()&&Hr(er.nextSibling))},Kr=et=>tJ(et)&&"\uFEFF"===et.data[0],Gr=et=>tJ(et)&&"\uFEFF"===et.data[et.data.length-1],Yr=et=>et&&et.hasAttribute("data-mce-caret")?((et=>{var er;let ei=et.getElementsByTagName("br"),es=ei[ei.length-1];Go(es)&&(null===(er=es.parentNode)||void 0===er||er.removeChild(es))})(et),et.removeAttribute("data-mce-caret"),et.removeAttribute("data-mce-bogus"),et.removeAttribute("style"),et.removeAttribute("data-mce-style"),et.removeAttribute("_moz_abspos"),et):null,Xr=et=>jr(et.startContainer),rB=Vo(["script","style","textarea"]),rD=Vo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),rP=Vo(["table"]),ss=et=>!$r(et)&&(tJ(et)?!rB(et.parentNode):rD(et)||t3(et)||rP(et)||as(et)),as=et=>(!tY(et)||"true"!==et.getAttribute("unselectable"))&&t6(et),is=(et,er)=>ss(et)&&((et,er)=>{for(let ei=et.parentNode;ei&&ei!==er;ei=ei.parentNode){if(as(ei))return!1;if(t5(ei))break}return!0})(et,er),rF=/^[ \t\r\n]*$/,ds=et=>rF.test(et),cs=et=>{for(let er of et)if(!hr(er))return!1;return!0},us=et=>"\n"===et||"\r"===et,ms=(et,er=4,ei=!0,es=!0)=>{let ed=er<=0?"":Array(er+1).join(" "),ec=et.replace(/\t/g,ed),eu=X(ec,(et,er)=>{var ed;return -1!==" \f	\v".indexOf(er)||"\xa0"===er?et.pcIsSpace||""===et.str&&ei||et.str.length===ec.length-1&&es||(ed=et.str.length+1)<ec.length&&ed>=0&&us(ec[ed])?{pcIsSpace:!1,str:et.str+"\xa0"}:{pcIsSpace:!0,str:et.str+" "}:{pcIsSpace:us(er),str:et.str+er}},{pcIsSpace:!1,str:""});return eu.str},fs=(et,er)=>ss(et)&&(!(tJ(et)&&ds(et.data))||!!((et,er)=>{let ei=pn(er),es=pn(et);return Uo(es,"pre,code",O(En,ei))})(et,er))||tY(et)&&"A"===et.nodeName&&!et.hasAttribute("href")&&(et.hasAttribute("name")||et.hasAttribute("id"))||rM(et),rM=Ko("data-mce-bookmark"),rz=Ko("data-mce-bogus"),hs=et=>tY(et)&&"all"===et.getAttribute("data-mce-bogus"),bs=(et,er=!0)=>((et,er)=>{let ei=0;if(fs(et,et))return!1;{let es=et.firstChild;if(!es)return!0;let ed=new zo(es,et);do{if(er){if(hs(es)){es=ed.next(!0);continue}if(rz(es)){es=ed.next();continue}}if(t3(es))ei++,es=ed.next();else{if(fs(es,et))return!1;es=ed.next()}}while(es);return ei<=1}})(et.dom,er),rV="data-mce-block",ys=et=>G(eX(et),et=>!/[A-Z]/.test(et)).join(","),Cs=(et,er)=>C(er.querySelector(et))?(er.setAttribute(rV,"true"),"inline-boundary"===er.getAttribute("data-mce-selected")&&er.removeAttribute("data-mce-selected"),!0):(er.removeAttribute(rV),!1),ws=(et,er)=>{let ei=ys(et.getTransparentElements()),es=ys(et.getBlockElements());return G(er.querySelectorAll(ei),et=>Cs(es,et))},xs=(et,er)=>{var ei;let es=er?"lastChild":"firstChild";for(let er=et[es];er;er=er[es])if(bs(pn(er)))return void(null===(ei=er.parentNode)||void 0===ei||ei.removeChild(er))},ks=(et,er,ei)=>{let es=et.getBlockElements(),ed=pn(er),s=et=>Ht(et) in es,a=et=>En(et,ed);V(ko(ei),er=>{Qn(er,s,a).each(ei=>{let es=G(Mn(er),er=>s(er)&&!et.isValidChild(Ht(ei),Ht(er)));if(es.length>0){let er=On(ei);V(es,et=>{Qn(et,s,a).each(er=>{((et,er)=>{let ei=document.createRange(),es=et.parentNode;if(es){ei.setStartBefore(et),ei.setEndBefore(er);let ed=ei.extractContents();xs(ed,!0),ei.setStartAfter(er),ei.setEndAfter(et);let ec=ei.extractContents();xs(ec,!1),bs(pn(ed))||es.insertBefore(ed,et),bs(pn(er))||es.insertBefore(er,et),bs(pn(ec))||es.insertBefore(ec,et),es.removeChild(et)}})(er.dom,et.dom)})}),er.each(er=>ws(et,er.dom))}})})},Es=(et,er)=>{let ei=ws(et,er);ks(et,er,ei),V([...ei,...As(et,er)?[er]:[]],er=>V(Fo(pn(er),er.nodeName.toLowerCase()),er=>{Os(et,er.dom)&&xo(er)}))},Ss=(et,er)=>{if(Rs(et,er)){let ei=ys(et.getBlockElements());Cs(ei,er)}},_s=et=>et.hasAttribute(rV),Ns=(et,er)=>ke(et.getTransparentElements(),er),Rs=(et,er)=>tY(er)&&Ns(et,er.nodeName),As=(et,er)=>Rs(et,er)&&_s(er),Os=(et,er)=>Rs(et,er)&&!_s(er),Ts=(et,er)=>1===er.type&&Ns(et,er.name)&&eP(er.attr(rV)),rU=xt().browser,Ds=et=>J(et,tH),Ps=(et,er)=>et.children&&H(et.children,er),Ls=(et,er={})=>{let ei=0,es={},ed=pn(et),ec=Nn(ed),a=et=>new Promise((eu,ef)=>{let ey;let eC=tz._addCacheSuffix(et),eS=xe(es,eC).getOrThunk(()=>({id:"mce-u"+ei++,passed:[],failed:[],count:0}));es[eC]=eS,eS.count++;let u=(et,er)=>{V(et,P),eS.status=er,eS.passed=[],eS.failed=[],ey&&(ey.onload=null,ey.onerror=null,ey=null)},m=()=>u(eS.passed,2),f=()=>u(eS.failed,3);if(eu&&eS.passed.push(eu),ef&&eS.failed.push(ef),1===eS.status)return;if(2===eS.status)return void m();if(3===eS.status)return void f();eS.status=1;let e_=bn("link",ec.dom);Zt(e_,{rel:"stylesheet",type:"text/css",id:eS.id}),er.contentCssCors&&Jt(e_,"crossOrigin","anonymous"),er.referrerPolicy&&Jt(e_,"referrerpolicy",er.referrerPolicy),(ey=e_.dom).onload=m,ey.onerror=f,bo(Vn(ed),e_),Jt(e_,"href",eC)}),i=et=>{let er=tz._addCacheSuffix(et);xe(es,er).each(et=>{0==--et.count&&(delete es[er],(et=>{let er=Vn(ed);eo(er,"#"+et).each(wo)})(et.id))})};return{load:a,loadAll:et=>Promise.allSettled(q(et,et=>a(et).then(N(et)))).then(et=>{let er=K(et,et=>"fulfilled"===et.status);return er.fail.length>0?Promise.reject(q(er.fail,et=>et.reason)):q(er.pass,et=>et.value)}),unload:i,unloadAll:et=>{V(et,et=>{i(et)})},_setReferrerPolicy:et=>{er.referrerPolicy=et},_setContentCssCors:et=>{er.contentCssCors=et}}},rH=(()=>{let et=new WeakMap;return{forElement:(er,ei)=>{let es=tK(er).dom;return I.from(et.get(es)).getOrThunk(()=>{let er=Ls(es,ei);return et.set(es,er),er})}}})(),Is=(et,er)=>C(et)&&(fs(et,er)||kr(pn(et))),Fs=et=>"span"===et.nodeName.toLowerCase()&&"bookmark"===et.getAttribute("data-mce-type"),Us=(et,er,ei)=>{var es;let ed=ei||er;if(tY(er)&&Fs(er))return er;let ec=er.childNodes;for(let er=ec.length-1;er>=0;er--)Us(et,ec[er],ed);if(tY(er)){let et=er.childNodes;1===et.length&&Fs(et[0])&&(null===(es=er.parentNode)||void 0===es||es.insertBefore(et[0],er))}return t2(er)||t1(er)||fs(er,ed)||tY(er)&&er.childNodes.length>0||tJ(er)&&er.data.length>0&&((et,er)=>{let ei=new zo(et,er).prev(!1),es=new zo(et,er).next(!1),ed=eU(ei)||Is(ei,er),ec=eU(es)||Is(es,er);return ed&&ec})(er,ed)||et.remove(er),er},rj=tz.makeMap,r$=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rq=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rG=/[<>&\"\']/g,rW=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,rK={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},rY={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},rX={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Gs=(et,er)=>{let ei={};if(et){let es=et.split(",");er=er||10;for(let et=0;et<es.length;et+=2){let ed=String.fromCharCode(parseInt(es[et],er));if(!rY[ed]){let er="&"+es[et+1]+";";ei[ed]=er,ei[er]=ed}}return ei}},rJ=Gs("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Xs=(et,er)=>et.replace(er?r$:rq,et=>rY[et]||et),Qs=(et,er)=>et.replace(er?r$:rq,et=>et.length>1?"&#"+(1024*(et.charCodeAt(0)-55296)+(et.charCodeAt(1)-56320)+65536)+";":rY[et]||"&#"+et.charCodeAt(0)+";"),Js=(et,er,ei)=>{let es=ei||rJ;return et.replace(er?r$:rq,et=>rY[et]||es[et]||et)},rQ={encodeRaw:Xs,encodeAllRaw:et=>(""+et).replace(rG,et=>rY[et]||et),encodeNumeric:Qs,encodeNamed:Js,getEncodeFunc:(et,er)=>{let ei=Gs(er)||rJ,es=rj(et.replace(/\+/g,","));return es.named&&es.numeric?(et,er)=>et.replace(er?r$:rq,et=>void 0!==rY[et]?rY[et]:void 0!==ei[et]?ei[et]:et.length>1?"&#"+(1024*(et.charCodeAt(0)-55296)+(et.charCodeAt(1)-56320)+65536)+";":"&#"+et.charCodeAt(0)+";"):es.named?er?(et,er)=>Js(et,er,ei):Js:es.numeric?Qs:Xs},decode:et=>et.replace(rW,(et,er)=>er?(er="x"===er.charAt(0).toLowerCase()?parseInt(er.substr(1),16):parseInt(er,10))>65535?String.fromCharCode(55296+((er-=65536)>>10),56320+(1023&er)):rK[er]||String.fromCharCode(er):rX[et]||rJ[et]||(et=>{let er=bn("div").dom;return er.innerHTML=et,er.textContent||er.innerText||et})(et))},ea=(et,er)=>(et=tz.trim(et))?et.split(er||" "):[],ta=et=>RegExp("^"+et.replace(/([?+*])/g,".$1")+"$"),rZ={},r0=tz.makeMap,r1=tz.each,r2=tz.extend,r3=tz.explode,ia=(et,er={})=>{let ei=r0(et," ",r0(et.toUpperCase()," "));return r2(ei,er)},la=et=>ia("td th li dt dd figcaption caption details summary",et.getTextBlockElements()),da=(et,er)=>{if(et){let ei={};return eP(et)&&(et={"*":et}),r1(et,(et,es)=>{ei[es]=ei[es.toUpperCase()]="map"===er?r0(et,/[, ]/):r3(et,/[, ]/)}),ei}},ca=(et={})=>{var er;let ei={},es={},ed=[],ec={},eu={},i=(er,ei,es)=>{let ed=et[er];if(ed)return r0(ed,/[, ]/,r0(ed.toUpperCase(),/[, ]/));{let et=rZ[er];return et||(et=ia(ei,es),rZ[er]=et),et}},ef=null!==(er=et.schema)&&void 0!==er?er:"html5",ey=(et=>{let er,ei,es,ed;let{globalAttributes:ec,phrasingContent:eu,flowContent:ef}=(er="id accesskey class dir lang style tabindex title role",ei="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",es="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==et&&(er+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",ei+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",es+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==et&&(er+=" xml:lang",es=[es,"acronym applet basefont big font strike tt"].join(" "),ed=[ei=[ei,"center dir isindex noframes"].join(" "),es].join(" ")),ed=ed||[ei,es].join(" "),{globalAttributes:er,blockContent:ei,phrasingContent:es,flowContent:ed}),ey={},s=(et,er="",ei="")=>{let es=ea(ei),ed=ea(et),eu=ed.length;for(;eu--;){let et=ea([ec,er].join(" "));ey[ed[eu]]={attributes:se(et,N({})),attributesOrder:et,children:se(es,N({}))}}},a=(et,er)=>{let ei=ea(et),es=ea(er),ed=ei.length;for(;ed--;){let et=ey[ei[ed]];for(let er=0,ei=es.length;er<ei;er++)et.attributes[es[er]]={},et.attributesOrder.push(es[er])}};return"html5-strict"!==et&&(V(ea("acronym applet basefont big font strike tt"),et=>{s(et,"",eu)}),V(ea("center dir isindex noframes"),et=>{s(et,"",ef)})),s("html","manifest","head body"),s("head","","base command link meta noscript script style title"),s("title hr noscript br"),s("base","href target"),s("link","href rel media hreflang type sizes hreflang"),s("meta","name http-equiv content charset"),s("style","media type scoped"),s("script","src async defer type charset"),s("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",ef),s("dd div","",ef),s("address dt caption","","html4"===et?eu:ef),s("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",eu),s("blockquote","cite",ef),s("ol","reversed start type","li"),s("ul","","li"),s("li","value",ef),s("dl","","dt dd"),s("a","href target rel media hreflang type","html4"===et?eu:ef),s("q","cite",eu),s("ins del","cite datetime",ef),s("img","src sizes srcset alt usemap ismap width height"),s("iframe","src name width height",ef),s("embed","src type width height"),s("object","data type typemustmatch name usemap form width height",[ef,"param"].join(" ")),s("param","name value"),s("map","name",[ef,"area"].join(" ")),s("area","alt coords shape href target rel media hreflang type"),s("table","border","caption colgroup thead tfoot tbody tr"+("html4"===et?" col":"")),s("colgroup","span","col"),s("col","span"),s("tbody thead tfoot","","tr"),s("tr","","td th"),s("td","colspan rowspan headers",ef),s("th","colspan rowspan headers scope abbr",ef),s("form","accept-charset action autocomplete enctype method name novalidate target",ef),s("fieldset","disabled form name",[ef,"legend"].join(" ")),s("label","form for",eu),s("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),s("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===et?ef:eu),s("select","disabled form multiple name required size","option optgroup"),s("optgroup","disabled label","option"),s("option","disabled label selected value"),s("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),s("menu","type label",[ef,"li"].join(" ")),s("noscript","",ef),"html4"!==et&&(s("wbr"),s("ruby","",[eu,"rt rp"].join(" ")),s("figcaption","",ef),s("mark rt rp summary bdi","",eu),s("canvas","width height",ef),s("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[ef,"track source"].join(" ")),s("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[ef,"track source"].join(" ")),s("picture","","img source"),s("source","src srcset type media sizes"),s("track","kind src srclang label default"),s("datalist","",[eu,"option"].join(" ")),s("article section nav aside main header footer","",ef),s("hgroup","","h1 h2 h3 h4 h5 h6"),s("figure","",[ef,"figcaption"].join(" ")),s("time","datetime",eu),s("dialog","open",ef),s("command","type label icon disabled checked radiogroup command"),s("output","for form name",eu),s("progress","value max",eu),s("meter","value min max low high optimum",eu),s("details","open",[ef,"summary"].join(" ")),s("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==et&&(a("script","language xml:space"),a("style","xml:space"),a("object","declare classid code codebase codetype archive standby align border hspace vspace"),a("embed","align name hspace vspace"),a("param","valuetype type"),a("a","charset name rev shape coords"),a("br","clear"),a("applet","codebase archive code object alt name width height align hspace vspace"),a("img","name longdesc align border hspace vspace"),a("iframe","longdesc frameborder marginwidth marginheight scrolling align"),a("font basefont","size color face"),a("input","usemap align"),a("select"),a("textarea"),a("h1 h2 h3 h4 h5 h6 div p legend caption","align"),a("ul","type compact"),a("li","type"),a("ol dl menu dir","compact"),a("pre","width xml:space"),a("hr","align noshade size width"),a("isindex","prompt"),a("table","summary width frame rules cellspacing cellpadding align bgcolor"),a("col","width align char charoff valign"),a("colgroup","width align char charoff valign"),a("thead","align char charoff valign"),a("tr","align char charoff valign bgcolor"),a("th","axis align char charoff valign nowrap bgcolor width height"),a("form","accept"),a("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),a("tfoot","align char charoff valign"),a("tbody","align char charoff valign"),a("area","nohref"),a("body","background bgcolor text link vlink alink")),"html4"!==et&&(a("input button select textarea","autofocus"),a("input textarea","placeholder"),a("a","download"),a("link script img","crossorigin"),a("img","loading"),a("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==et&&V([ey.video,ey.audio],et=>{delete et.children.audio,delete et.children.video}),V(ea("a form meter progress dfn"),et=>{ey[et]&&delete ey[et].children[et]}),delete ey.caption.children.table,delete ey.script,ey})(ef);!1===et.verify_html&&(et.valid_elements="*[*]");let eC=da(et.valid_styles),eS=da(et.invalid_styles,"map"),e_=da(et.valid_classes,"map"),eR=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),eI=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),eL=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),eB=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),eD="td th iframe video audio object script code",eP=i("non_empty_elements",eD+" pre",eL),eF=i("move_caret_before_on_enter_elements",eD+" table",eL),eM=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),ez=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",eM),eV=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),eU=i("transparent_elements","a ins del canvas map");r1("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),et=>{eu[et]=RegExp("</"+et+"[^>]*>","gi")});let E=et=>{let er=I.from(ei["@"]),es=/[*?+]/;V(((et,er)=>{let ei=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return te(ea(er,","),er=>{let es=ei.exec(er);if(es){let er=es[1],ei=es[2],ed=es[3],ec=es[4],eu=es[5],ef={attributes:{},attributesOrder:[]};if(et.each(et=>{ge(et.attributes,(et,er)=>{ef.attributes[er]=et}),ef.attributesOrder.push(...et.attributesOrder)}),"#"===er?ef.paddEmpty=!0:"-"===er&&(ef.removeEmpty=!0),"!"===ec&&(ef.removeEmptyAttrs=!0),eu&&((et,er)=>{let ei=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,es=/[*?+]/,{attributes:ed,attributesOrder:ec}=er;V(ea(et,"|"),et=>{let eu=ei.exec(et);if(eu){let et={},ei=eu[1],ef=eu[2].replace(/[\\:]:/g,":"),ey=eu[3],eC=eu[4];if("!"===ei&&(er.attributesRequired=er.attributesRequired||[],er.attributesRequired.push(ef),et.required=!0),"-"===ei)return delete ed[ef],void ec.splice(tz.inArray(ec,ef),1);(ey&&("="===ey?(er.attributesDefault=er.attributesDefault||[],er.attributesDefault.push({name:ef,value:eC}),et.defaultValue=eC):"~"===ey?(er.attributesForced=er.attributesForced||[],er.attributesForced.push({name:ef,value:eC}),et.forcedValue=eC):"<"===ey&&(et.validValues=tz.makeMap(eC,"?"))),es.test(ef))?(er.attributePatterns=er.attributePatterns||[],et.pattern=ta(ef),er.attributePatterns.push(et)):(ed[ef]||ec.push(ef),ed[ef]=et)}})})(eu,ef),ed&&(ef.outputName=ei),"@"===ei){if(!et.isNone())return[];et=I.some(ef)}return[ed?{name:ei,element:ef,aliasName:ed}:{name:ei,element:ef}]}return[]})})(er,null!=et?et:""),({name:et,element:er,aliasName:ec})=>{(ec&&(ei[ec]=er),es.test(et))?(er.pattern=ta(et),ed.push(er)):ei[et]=er})},S=et=>{ed=[],V(eX(ei),et=>{delete ei[et]}),E(et)},_=et=>{delete rZ.text_block_elements,delete rZ.block_elements,V((et=>{let er=/^(~)?(.+)$/;return te(ea(et,","),et=>{let ei=er.exec(et);if(ei){let et="~"===ei[1];return[{inline:et,cloneName:et?"span":"div",name:ei[2]}]}return[]})})(null!=et?et:""),({inline:et,name:er,cloneName:ed})=>{if(es[er]=es[ed],ec[er]=ed,eP[er.toUpperCase()]={},eP[er]={},et||(ez[er.toUpperCase()]={},ez[er]={}),!ei[er]){let et=ei[ed];et=r2({},et),delete et.removeEmptyAttrs,delete et.removeEmpty,ei[er]=et}ge(es,(et,ei)=>{et[ed]&&(es[ei]=et=r2({},es[ei]),et[er]=et[ed])})})},R=et=>{V((et=>{let er=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return te(ea(et,","),et=>{let ei=er.exec(et);if(ei){let et=ei[1];return[{operation:et?"-"===et?"remove":"add":"replace",name:ei[2],validChildren:ea(ei[3],"|")}]}return[]})})(null!=et?et:""),({operation:et,name:er,validChildren:ei})=>{let ed="replace"===et?{"#comment":{}}:es[er];V(ei,er=>{"remove"===et?delete ed[er]:ed[er]={}}),es[er]=ed})},A=et=>{let er=ei[et];if(er)return er;let es=ed.length;for(;es--;){let er=ed[es];if(er.pattern.test(et))return er}};et.valid_elements?(S(et.valid_elements),r1(ey,(et,er)=>{es[er]=et.children})):(r1(ey,(et,er)=>{ei[er]={attributes:et.attributes,attributesOrder:et.attributesOrder},es[er]=et.children}),r1(ea("strong/b em/i"),et=>{let er=ea(et,"/");ei[er[1]].outputName=er[0]}),r1(eV,(er,es)=>{ei[es]&&(et.padd_empty_block_inline_children&&(ei[es].paddInEmptyBlock=!0),ei[es].removeEmpty=!0)}),r1(ea("ol ul blockquote a table tbody"),et=>{ei[et]&&(ei[et].removeEmpty=!0)}),r1(ea("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),et=>{ei[et]&&(ei[et].paddEmpty=!0)}),r1(ea("span"),et=>{ei[et].removeEmptyAttrs=!0})),_(et.custom_elements),R(et.valid_children),E(et.extended_valid_elements),R("+ol[ul|ol],+ul[ul|ol]"),r1({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(et,er)=>{ei[er]&&(ei[er].parentsRequired=ea(et))}),et.invalid_elements&&r1(r3(et.invalid_elements),et=>{ei[et]&&delete ei[et]}),A("span")||E("span[!data-mce-type|*]");let eH=N(eC),ej=N(eS),e$=N(e_),eq=N(eB),eG=N(ez),eW=N(eM),eK=N(eV),eY=N(Object.seal(eL)),eJ=N(eI),eQ=N(eP),eZ=N(eF),e0=N(eR),e1=N(eU),e2=N(Object.seal(eu)),e3=N(ec);return{type:ef,children:es,elements:ei,getValidStyles:eH,getValidClasses:e$,getBlockElements:eG,getInvalidStyles:ej,getVoidElements:eY,getTextBlockElements:eW,getTextInlineElements:eK,getBoolAttrs:eq,getElementRule:A,getSelfClosingElements:eJ,getNonEmptyElements:eQ,getMoveCaretBeforeOnEnterElements:eZ,getWhitespaceElements:e0,getTransparentElements:e1,getSpecialElements:e2,isValidChild:(et,er)=>{let ei=es[et.toLowerCase()];return!(!ei||!ei[er.toLowerCase()])},isValid:(et,er)=>{let ei=A(et);if(ei){if(!er)return!0;{if(ei.attributes[er])return!0;let et=ei.attributePatterns;if(et){let ei=et.length;for(;ei--;)if(et[ei].pattern.test(er))return!0}}}return!1},getCustomElements:e3,addValidElements:E,setValidElements:S,addCustomElements:_,addValidChildren:R}},ua=(et={},er)=>{let ei,es;let ed=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,ec=/\s*([^:]+):\s*([^;]+);?/g,eu=/\s+$/,ef={};er&&(ei=er.getValidStyles(),es=er.getInvalidStyles());let ey="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(let et=0;et<ey.length;et++)ef[ey[et]]="\uFEFF"+et,ef["\uFEFF"+et]=ey[et];let eC={parse:er=>{var ei,es,ey;let eS={},e_=!1,eR=et.url_converter,eI=et.url_converter_scope||eC,m=(et,er,ei)=>{let es=eS[et+"-top"+er];if(!es)return;let ed=eS[et+"-right"+er];if(!ed)return;let ec=eS[et+"-bottom"+er];if(!ec)return;let eu=eS[et+"-left"+er];if(!eu)return;let ef=[es,ed,ec,eu],ey=ef.length-1;for(;ey--&&ef[ey]===ef[ey+1];);ey>-1&&ei||(eS[et+er]=-1===ey?ef[0]:ef.join(" "),delete eS[et+"-top"+er],delete eS[et+"-right"+er],delete eS[et+"-bottom"+er],delete eS[et+"-left"+er])},f=et=>{let er=eS[et];if(!er)return;let ei=er.indexOf(",")>-1?[er]:er.split(" "),es=ei.length;for(;es--;)if(ei[es]!==ei[0])return!1;return eS[et]=ei[0],!0},g=et=>(e_=!0,ef[et]),p=(et,er)=>(e_&&(et=et.replace(/\uFEFF[0-9]/g,et=>ef[et])),er||(et=et.replace(/\\([\'\";:])/g,"$1")),et),h=et=>String.fromCharCode(parseInt(et.slice(1),16)),b=et=>et.replace(/\\[0-9a-f]+/gi,h),v=(er,ei,es,ed,ec,eu)=>{if(ec=ec||eu)return"'"+(ec=p(ec)).replace(/\'/g,"\\'")+"'";if(ei=p(ei||es||ed||""),!et.allow_script_urls){let er=ei.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(er)||!et.allow_svg_data_urls&&/^data:image\/svg/i.test(er))return""}return eR&&(ei=eR.call(eI,ei,"style")),"url('"+ei.replace(/\'/g,"\\'")+"')"};if(er){let ef;for(er=(er=er.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,g).replace(/\"[^\"]+\"|\'[^\']+\'/g,et=>et.replace(/[;:]/g,g));ef=ec.exec(er);){ec.lastIndex=ef.index+ef[0].length;let er=ef[1].replace(eu,"").toLowerCase(),ei=ef[2].replace(eu,"");if(er&&ei){if(er=b(er),ei=b(ei),-1!==er.indexOf("\uFEFF")||-1!==er.indexOf('"')||!et.allow_script_urls&&("behavior"===er||/expression\s*\(|\/\*|\*\//.test(ei)))continue;"font-weight"===er&&"700"===ei?ei="bold":"color"!==er&&"background-color"!==er||(ei=ei.toLowerCase()),ei=ei.replace(ed,v),eS[er]=e_?p(ei,!0):ei}}m("border","",!0),m("border","-width"),m("border","-color"),m("border","-style"),m("padding",""),m("margin",""),es="border-style",ey="border-color",f(ei="border-width")&&f(es)&&f(ey)&&(eS.border=eS[ei]+" "+eS[es]+" "+eS[ey],delete eS[ei],delete eS[es],delete eS[ey]),"medium none"===eS.border&&delete eS.border,"none"===eS["border-image"]&&delete eS["border-image"]}return eS},serialize:(et,er)=>{let ed="",o=(er,ei)=>{let es=ei[er];if(es)for(let er=0,ei=es.length;er<ei;er++){let ei=es[er],ec=et[ei];ec&&(ed+=(ed.length>0?" ":"")+ei+": "+ec+";")}};return er&&ei?(o("*",ei),o(er,ei)):ge(et,(et,ei)=>{et&&((et,er)=>{if(!es||!er)return!0;let ei=es["*"];return!(ei&&ei[et]||(ei=es[er])&&ei[et])})(ei,er)&&(ed+=(ed.length>0?" ":"")+ei+": "+et+";")}),ed}};return eC},r8={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},fa=(et,er)=>{let ei=null!=er?er:{};for(let er in et)ke(r8,er)||(ei[er]=et[er]);return C(et.composedPath)&&(ei.composedPath=()=>et.composedPath()),C(et.getModifierState)&&(ei.getModifierState=er=>et.getModifierState(er)),ei},ga=(et,er,ei,es)=>{var ed;let ec=fa(er,es);return ec.type=et,y(ec.target)&&(ec.target=null!==(ed=ec.srcElement)&&void 0!==ed?ed:ei),(y(er.preventDefault)||er instanceof Event||eH(er.initEvent))&&(ec.preventDefault=()=>{ec.defaultPrevented=!0,ec.isDefaultPrevented=eq,eH(er.preventDefault)&&er.preventDefault()},ec.stopPropagation=()=>{ec.cancelBubble=!0,ec.isPropagationStopped=eq,eH(er.stopPropagation)&&er.stopPropagation()},ec.stopImmediatePropagation=()=>{ec.isImmediatePropagationStopped=eq,ec.stopPropagation()},ec.isDefaultPrevented===eq||ec.isDefaultPrevented===e$||(ec.isDefaultPrevented=!0===ec.defaultPrevented?eq:e$,ec.isPropagationStopped=!0===ec.cancelBubble?eq:e$,ec.isImmediatePropagationStopped=e$)),ec},r5=/^(?:mouse|contextmenu)|click/,ha=(et,er,ei,es)=>{et.addEventListener(er,ei,es||!1)},ba=(et,er,ei,es)=>{et.removeEventListener(er,ei,es||!1)},va=(et,er)=>{let ei=ga(et.type,et,document,er);if(C(et)&&r5.test(et.type)&&eU(et.pageX)&&!eU(et.clientX)){let er=ei.target.ownerDocument||document,es=er.documentElement,ed=er.body;ei.pageX=et.clientX+(es&&es.scrollLeft||ed&&ed.scrollLeft||0)-(es&&es.clientLeft||ed&&ed.clientLeft||0),ei.pageY=et.clientY+(es&&es.scrollTop||ed&&ed.scrollTop||0)-(es&&es.clientTop||ed&&ed.clientTop||0)}return ei},ya=(et,er,ei)=>{let es=et.document,ed={type:"ready"};if(ei.domLoaded)return void er(ed);let s=()=>{ba(et,"DOMContentLoaded",s),ba(et,"load",s),ei.domLoaded||(ei.domLoaded=!0,er(ed)),et=null};"complete"===es.readyState||"interactive"===es.readyState&&es.body?s():ha(et,"DOMContentLoaded",s),ei.domLoaded||ha(et,"load",s)};let Ca=class Ca{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(et,er,ei,es){let ed,ec;let eu=this,ef=window,i=et=>{eu.executeHandlers(va(et||ef.event),ec)};if(!et||tJ(et)||t0(et))return ei;et[eu.expando]?ec=et[eu.expando]:(ec=eu.count++,et[eu.expando]=ec,eu.events[ec]={}),es=es||et;let ey=er.split(" "),eC=ey.length;for(;eC--;){let er=ey[eC],eS=i,e_=!1,eR=!1;"DOMContentLoaded"===er&&(er="ready"),eu.domLoaded&&"ready"===er&&"complete"===et.readyState?ei.call(es,va({type:er})):(eu.hasFocusIn||"focusin"!==er&&"focusout"!==er||(e_=!0,eR="focusin"===er?"focus":"blur",eS=et=>{let er=va(et||ef.event);er.type="focus"===er.type?"focusin":"focusout",eu.executeHandlers(er,ec)}),(ed=eu.events[ec][er])?"ready"===er&&eu.domLoaded?ei(va({type:er})):ed.push({func:ei,scope:es}):(eu.events[ec][er]=ed=[{func:ei,scope:es}],ed.fakeName=eR,ed.capture=e_,ed.nativeHandler=eS,"ready"===er?ya(et,eS,eu):ha(et,eR||er,eS,e_)))}return et=ed=null,ei}unbind(et,er,ei){if(!et||tJ(et)||t0(et))return this;let es=et[this.expando];if(es){let ed=this.events[es];if(er){let es=er.split(" "),ec=es.length;for(;ec--;){let er=es[ec],eu=ed[er];if(eu){if(ei){let et=eu.length;for(;et--;)if(eu[et].func===ei){let ei=eu.nativeHandler,es=eu.fakeName,ec=eu.capture,ef=eu.slice(0,et).concat(eu.slice(et+1));ef.nativeHandler=ei,ef.fakeName=es,ef.capture=ec,ed[er]=ef}}ei&&0!==eu.length||(delete ed[er],ba(et,eu.fakeName||er,eu.nativeHandler,eu.capture))}}}else ge(ed,(er,ei)=>{ba(et,er.fakeName||ei,er.nativeHandler,er.capture)}),ed={};for(let et in ed)if(ke(ed,et))return this;delete this.events[es];try{delete et[this.expando]}catch(er){et[this.expando]=null}}return this}fire(et,er,ei){return this.dispatch(et,er,ei)}dispatch(et,er,ei){if(!et||tJ(et)||t0(et))return this;let es=va({type:er,target:et},ei);do{let er=et[this.expando];er&&this.executeHandlers(es,er),et=et.parentNode||et.ownerDocument||et.defaultView||et.parentWindow}while(et&&!es.isPropagationStopped());return this}clean(et){if(!et||tJ(et)||t0(et))return this;if(et[this.expando]&&this.unbind(et),et.getElementsByTagName||(et=et.document),et&&et.getElementsByTagName){this.unbind(et);let er=et.getElementsByTagName("*"),ei=er.length;for(;ei--;)(et=er[ei])[this.expando]&&this.unbind(et)}return this}destroy(){this.events={}}cancel(et){return et&&(et.preventDefault(),et.stopImmediatePropagation()),!1}executeHandlers(et,er){let ei=this.events[er],es=ei&&ei[et.type];if(es)for(let er=0,ei=es.length;er<ei;er++){let ei=es[er];if(ei&&!1===ei.func.call(ei.scope,et)&&et.preventDefault(),et.isImmediatePropagationStopped())return}}};Ca.Event=new Ca;let r6=tz.each,r9=tz.grep,r4="data-mce-style",r7=tz.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Sa=(et,er,ei)=>{y(ei)||""===ei?on(et,er):Jt(et,er,ei)},_a=et=>et.replace(/[A-Z]/g,et=>"-"+et.toLowerCase()),Na=(et,er)=>{let ei=0;if(et)for(let es=et.nodeType,ed=et.previousSibling;ed;ed=ed.previousSibling){let et=ed.nodeType;er&&tJ(ed)&&(et===es||!ed.data.length)||(ei++,es=et)}return ei},Ra=(et,er)=>{let ei=en(er,"style"),es=et.serialize(et.parse(ei),Ht(er));Sa(er,r4,es)},Aa=(et,er,ei)=>{let es=_a(er);y(ei)||""===ei?fo(et,es):ao(et,es,ej(ei)?ke(r7,es)?ei+"":ei+"px":ei)},Oa=(et,er={})=>{let ei={},es=window,ed={},ec=0,eu=rH.forElement(pn(et),{contentCssCors:er.contentCssCors,referrerPolicy:er.referrerPolicy}),ef=[],ey=er.schema?er.schema:ca({}),eC=ua({url_converter:er.url_converter,url_converter_scope:er.url_converter_scope},er.schema),eS=er.ownEvents?new Ca:Ca.Event,e_=ey.getBlockElements(),f=er=>er&&et&&eP(er)?et.getElementById(er):er,g=et=>{let er=f(et);return C(er)?pn(er):null},h=(et,er,ei="")=>{let es;let ed=g(et);if(C(ed)&&tH(ed)){let et=eL[er];es=et&&et.get?et.get(ed.dom,er):en(ed,er)}return C(es)?es:ei},b=et=>{let er=f(et);return y(er)?[]:er.attributes},v=(et,ei,es)=>{T(et,et=>{if(tY(et)){let ed=pn(et),ec=""===es?null:es,eu=en(ed,ei),ef=eL[ei];ef&&ef.set?ef.set(ed.dom,ec,ei):Sa(ed,ei,ec),eu!==ec&&er.onSetAttrib&&er.onSetAttrib({attrElm:ed.dom,attrName:ei,attrValue:ec})}})},x=()=>er.root_element||et.body,k=(er,ei)=>((et,er,ei)=>{let es=0,ed=0,ec=et.ownerDocument;if(ei=ei||et,er){var eu;if(ei===et&&er.getBoundingClientRect&&"static"===lo(pn(et),"position")){let ei=er.getBoundingClientRect();return{x:es=ei.left+(ec.documentElement.scrollLeft||et.scrollLeft)-ec.documentElement.clientLeft,y:ed=ei.top+(ec.documentElement.scrollTop||et.scrollTop)-ec.documentElement.clientTop}}let ef=er;for(;ef&&ef!==ei&&ef.nodeType&&!Ps(ef,ei);){let et=ef;es+=et.offsetLeft||0,ed+=et.offsetTop||0,ef=et.offsetParent}for(ef=er.parentNode;ef&&ef!==ei&&ef.nodeType&&!Ps(ef,ei);)es-=ef.scrollLeft||0,ed-=ef.scrollTop||0,ef=ef.parentNode;ed+=(eu=pn(er),rU.isFirefox()&&"table"===Ht(eu)?Ds(Mn(eu)).filter(et=>"caption"===Ht(et)).bind(et=>Ds(Ln(et)).map(er=>{let ei=er.dom.offsetTop,es=et.dom.offsetTop,ed=et.dom.offsetHeight;return ei<=es?-ed:0})).getOr(0):0)}return{x:es,y:ed}})(et.body,f(er),ei),S=(et,er,ei)=>{let es=f(et);if(!y(es)&&tY(es))return ei?lo(pn(es),_a(er)):("float"===(er=er.replace(/-(\D)/g,(et,er)=>er.toUpperCase()))&&(er="cssFloat"),es.style?es.style[er]:void 0)},_=et=>{let er=f(et);if(!er)return{w:0,h:0};let ei=S(er,"width"),es=S(er,"height");return ei&&-1!==ei.indexOf("px")||(ei="0"),es&&-1!==es.indexOf("px")||(es="0"),{w:parseInt(ei,10)||er.offsetWidth||er.clientWidth,h:parseInt(es,10)||er.offsetHeight||er.clientHeight}},R=(et,er)=>{if(!et)return!1;let ei=eM(et)?et:[et];return $(ei,et=>xn(pn(et),er))},A=(et,er,ei,es)=>{let ed=[],ec=f(et);es=void 0===es;let eu=ei||("BODY"!==x().nodeName?x().parentNode:null);if(eP(er)){if("*"===er)er=tY;else{let et=er;er=er=>R(er,et)}}for(;ec&&!(ec===eu||y(ec.nodeType)||t1(ec)||t2(ec));){if(!er||er(ec)){if(!es)return[ec];ed.push(ec)}ec=ec.parentNode}return es?ed:null},O=(et,er,ei)=>{let es=er;if(et){eP(er)&&(es=et=>R(et,er));for(let er=et[ei];er;er=er[ei])if(eH(es)&&es(er))return er}return null},T=function(et,er,ei){let es=null!=ei?ei:this;if(eM(et)){let ei=[];return r6(et,(et,ed)=>{let ec=f(et);ec&&ei.push(er.call(es,ec,ed))}),ei}{let ei=f(et);return!!ei&&er.call(es,ei)}},B=(et,er)=>{T(et,et=>{ge(er,(er,ei)=>{v(et,ei,er)})})},D=(et,er)=>{T(et,et=>{let ei=pn(et);So(ei,er)})},P=(er,ei,es,ed,ec)=>T(er,er=>{let eu=eP(ei)?et.createElement(ei):ei;return C(es)&&B(eu,es),ed&&(!eP(ed)&&ed.nodeType?eu.appendChild(ed):eP(ed)&&D(eu,ed)),ec?eu:er.appendChild(eu)}),L=(er,ei,es)=>P(et.createElement(er),er,ei,es,!0),eR=rQ.encodeAllRaw,I=(et,er)=>T(et,et=>{let ei=pn(et);return er&&V(Mn(ei),et=>{tj(et)&&0===et.dom.length?wo(et):go(ei,et)}),wo(ei),ei.dom}),F=(et,er,ei)=>{T(et,et=>{if(tY(et)){let es=pn(et),ed=er.split(" ");V(ed,et=>{C(ei)?(ei?un:fn)(es,et):(an(es)?es.dom.classList.toggle(et):H(ln(es),et)?cn(es,et):dn(es,et),mn(es))})}})},U=(et,er,ei)=>T(er,es=>{var ed;let ec=eM(er)?et.cloneNode(!0):et;return ei&&r6(r9(es.childNodes),et=>{ec.appendChild(et)}),null===(ed=es.parentNode)||void 0===ed||ed.replaceChild(ec,es),es}),z=et=>{if(tY(et)){let er="a"===et.nodeName.toLowerCase()&&!h(et,"href")&&h(et,"id");if(h(et,"name")||h(et,"data-mce-bookmark")||er)return!0}return!1},j=()=>et.createRange(),q=(ei,ed,ec,eu)=>{if(eM(ei)){let et=ei.length,er=[];for(;et--;)er[et]=q(ei[et],ed,ec,eu);return er}return er.collect&&(ei===et||ei===es)&&ef.push([ei,ed,ec,eu]),eS.bind(ei,ed,ec,eu||eI)},W=(er,ei,ed)=>{if(eM(er)){let et=er.length,es=[];for(;et--;)es[et]=W(er[et],ei,ed);return es}if(ef.length>0&&(er===et||er===es)){let et=ef.length;for(;et--;){let[es,ec,eu]=ef[et];er!==es||ei&&ei!==ec||ed&&ed!==eu||eS.unbind(es,ec,eu)}}return eS.unbind(er,ei,ed)},K=et=>{if(et&&tY(et)){let er=et.getAttribute("data-mce-contenteditable");return er&&"inherit"!==er?er:"inherit"!==et.contentEditable?et.contentEditable:null}return null},eI={doc:et,settings:er,win:es,files:ed,stdMode:!0,boxModel:!0,styleSheetLoader:eu,boundEvents:ef,styles:eC,schema:ey,events:eS,isBlock:et=>eP(et)?ke(e_,et):tY(et)&&(ke(e_,et.nodeName)||As(ey,et)),root:null,clone:(et,er)=>et.cloneNode(er),getRoot:x,getViewPort:et=>{let er=Mo(et);return{x:er.x,y:er.y,w:er.width,h:er.height}},getRect:et=>{let er=f(et),ei=k(er),es=_(er);return{x:ei.x,y:ei.y,w:es.w,h:es.h}},getSize:_,getParent:(et,er,ei)=>{let es=A(et,er,ei,!1);return es&&es.length>0?es[0]:null},getParents:A,get:f,getNext:(et,er)=>O(et,er,"nextSibling"),getPrev:(et,er)=>O(et,er,"previousSibling"),select:(ei,es)=>{var ed,ec;let eu=null!==(ec=null!==(ed=f(es))&&void 0!==ed?ed:er.root_element)&&void 0!==ec?ec:et;return eH(eu.querySelectorAll)?eY(eu.querySelectorAll(ei)):[]},is:R,add:P,create:L,createHTML:(et,er,ei="")=>{let es="<"+et;for(let et in er)Ee(er,et)&&(es+=" "+et+'="'+eR(er[et])+'"');return Ye(ei)&&ke(ey.getVoidElements(),et)?es+" />":es+">"+ei+"</"+et+">"},createFragment:er=>{let ei;let es=et.createElement("div"),ed=et.createDocumentFragment();for(ed.appendChild(es),er&&(es.innerHTML=er);ei=es.firstChild;)ed.appendChild(ei);return ed.removeChild(es),ed},remove:I,setStyle:(et,ei,es)=>{T(et,et=>{let ed=pn(et);Aa(ed,ei,es),er.update_styles&&Ra(eC,ed)})},getStyle:S,setStyles:(et,ei)=>{T(et,et=>{let es=pn(et);ge(ei,(et,er)=>{Aa(es,er,et)}),er.update_styles&&Ra(eC,es)})},removeAllAttribs:et=>T(et,et=>{let er=et.attributes;for(let ei=er.length-1;ei>=0;ei--)et.removeAttributeNode(er.item(ei))}),setAttrib:v,setAttribs:B,getAttrib:h,getPos:k,parseStyle:et=>eC.parse(et),serializeStyle:(et,er)=>eC.serialize(et,er),addStyle:er=>{if(eI!==Oa.DOM&&et===document){if(ei[er])return;ei[er]=!0}let es=et.getElementById("mceDefaultStyles");if(!es){(es=et.createElement("style")).id="mceDefaultStyles",es.type="text/css";let er=et.head;er.firstChild?er.insertBefore(es,er.firstChild):er.appendChild(es)}es.styleSheet?es.styleSheet.cssText+=er:es.appendChild(et.createTextNode(er))},loadCSS:et=>{et||(et=""),V(et.split(","),et=>{ed[et]=!0,eu.load(et).catch(E)})},addClass:(et,er)=>{F(et,er,!0)},removeClass:(et,er)=>{F(et,er,!1)},hasClass:(et,er)=>{let ei=g(et),es=er.split(" ");return C(ei)&&ne(es,et=>gn(ei,et))},toggleClass:F,show:et=>{T(et,et=>fo(pn(et),"display"))},hide:et=>{T(et,et=>ao(pn(et),"display","none"))},isHidden:et=>{let er=g(et);return C(er)&&Pt(uo(er,"display"),"none")},uniqueId:et=>(et||"mce_")+ec++,setHTML:D,getOuterHTML:et=>{let er=g(et);return C(er)?tY(er.dom)?er.dom.outerHTML:(et=>{let er=bn("div"),ei=pn(et.dom.cloneNode(!0));return bo(er,ei),Eo(er)})(er):""},setOuterHTML:(et,er)=>{T(et,et=>{tY(et)&&(et.outerHTML=er)})},decode:rQ.decode,encode:eR,insertAfter:(et,er)=>{let ei=f(er);return T(et,et=>{let er=null==ei?void 0:ei.parentNode,es=null==ei?void 0:ei.nextSibling;return er&&(es?er.insertBefore(et,es):er.appendChild(et)),et})},replace:U,rename:(et,er)=>{if(et.nodeName!==er.toUpperCase()){let ei=L(er);return r6(b(et),er=>{v(ei,er.nodeName,h(et,er.nodeName))}),U(ei,et,!0),ei}return et},findCommonAncestor:(et,er)=>{let ei=et;for(;ei;){let et=er;for(;et&&ei!==et;)et=et.parentNode;if(ei===et)break;ei=ei.parentNode}return!ei&&et.ownerDocument?et.ownerDocument.documentElement:ei},run:T,getAttribs:b,isEmpty:(et,er,ei)=>{let es=0;if(z(et))return!1;let ed=et.firstChild;if(ed){let ec=new zo(ed,et),eu=ey?ey.getWhitespaceElements():{},ef=er||(ey?ey.getNonEmptyElements():null),eC=ed;do{if(tY(eC)){let et=eC.getAttribute("data-mce-bogus");if(et){eC=ec.next("all"===et);continue}let er=eC.nodeName.toLowerCase();if(ef&&ef[er]){if("br"===er){es++,eC=ec.next();continue}return!1}if(z(eC))return!1}if(t0(eC)||tJ(eC)&&!ds(eC.data)&&(!(null==ei?void 0:ei.includeZwsp)||!cs(eC.data))||tJ(eC)&&eC.parentNode&&eu[eC.parentNode.nodeName]&&ds(eC.data))return!1;eC=ec.next()}while(eC)}return es<=1},createRng:j,nodeIndex:Na,split:(et,er,ei)=>{let es,ed,ec=j();if(et&&er&&et.parentNode&&er.parentNode){let eu=et.parentNode;return ec.setStart(eu,Na(et)),ec.setEnd(er.parentNode,Na(er)),es=ec.extractContents(),(ec=j()).setStart(er.parentNode,Na(er)+1),ec.setEnd(eu,Na(et)+1),ed=ec.extractContents(),eu.insertBefore(Us(eI,es),et),ei?eu.insertBefore(ei,et):eu.insertBefore(er,et),eu.insertBefore(Us(eI,ed),et),I(et),ei||er}},bind:q,unbind:W,fire:(et,er,ei)=>eS.dispatch(et,er,ei),dispatch:(et,er,ei)=>eS.dispatch(et,er,ei),getContentEditable:K,getContentEditableParent:et=>{let er=x(),ei=null;for(let es=et;es&&es!==er&&null===(ei=K(es));es=es.parentNode);return ei},isEditable:et=>{if(C(et)){let er=tY(et)?et:et.parentElement;return C(er)&&no(pn(er))}return!1},destroy:()=>{if(ef.length>0){let et=ef.length;for(;et--;){let[er,ei,es]=ef[et];eS.unbind(er,ei,es)}}ge(ed,(et,er)=>{eu.unload(er),delete ed[er]})},isChildOf:(et,er)=>et===er||er.contains(et),dumpRng:et=>"startContainer: "+et.startContainer.nodeName+", startOffset: "+et.startOffset+", endContainer: "+et.endContainer.nodeName+", endOffset: "+et.endOffset},eL=((et,er,ei)=>{let es=er.keep_values,ed={set:(et,es,ed)=>{let ec=pn(et);eH(er.url_converter)&&C(es)&&(es=er.url_converter.call(er.url_converter_scope||ei(),String(es),ed,et)),Sa(ec,"data-mce-"+ed,es),Sa(ec,ed,es)},get:(et,er)=>{let ei=pn(et);return en(ei,"data-mce-"+er)||en(ei,er)}},ec={style:{set:(er,ei)=>{let ed=pn(er);es&&Sa(ed,r4,ei),on(ed,"style"),eP(ei)&&io(ed,et.parse(ei))},get:er=>{let ei=pn(er),es=en(ei,r4)||en(ei,"style");return et.serialize(et.parse(es),Ht(ei))}}};return es&&(ec.href=ec.src=ed),ec})(eC,er,N(eI));return eI};Oa.DOM=Oa(document),Oa.nodeIndex=Na;let nt=Oa.DOM;let Ba=class Ba{constructor(et={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=et}_setReferrerPolicy(et){this.settings.referrerPolicy=et}loadScript(et){return new Promise((er,ei)=>{let es;let s=()=>{nt.remove(ed),es&&(es.onerror=es.onload=es=null)},ed=nt.uniqueId();(es=document.createElement("script")).id=ed,es.type="text/javascript",es.src=tz._addCacheSuffix(et),this.settings.referrerPolicy&&nt.setAttrib(es,"referrerpolicy",this.settings.referrerPolicy),es.onload=()=>{s(),er()},es.onerror=()=>{s(),ei("Failed to load script: "+et)},(document.getElementsByTagName("head")[0]||document.body).appendChild(es)})}isDone(et){return 2===this.states[et]}markDone(et){this.states[et]=2}add(et){let er=this;return er.queue.push(et),void 0===er.states[et]&&(er.states[et]=0),new Promise((ei,es)=>{er.scriptLoadedCallbacks[et]||(er.scriptLoadedCallbacks[et]=[]),er.scriptLoadedCallbacks[et].push({resolve:ei,reject:es})})}load(et){return this.add(et)}remove(et){delete this.states[et],delete this.scriptLoadedCallbacks[et]}loadQueue(){let et=this.queue;return this.queue=[],this.loadScripts(et)}loadScripts(et){let er=this,n=(et,ei)=>{xe(er.scriptLoadedCallbacks,ei).each(er=>{V(er,er=>er[et](ei))}),delete er.scriptLoadedCallbacks[ei]},o=et=>{let er=G(et,et=>"rejected"===et.status);return er.length>0?Promise.reject(te(er,({reason:et})=>eM(et)?et:[et])):Promise.resolve()},r=et=>Promise.allSettled(q(et,et=>2===er.states[et]?(n("resolve",et),Promise.resolve()):3===er.states[et]?(n("reject",et),Promise.reject(et)):(er.states[et]=1,er.loadScript(et).then(()=>{er.states[et]=2,n("resolve",et);let ei=er.queue;return ei.length>0?(er.queue=[],r(ei).then(o)):Promise.resolve()},()=>(er.states[et]=3,n("reject",et),Promise.reject(et)))))),s=et=>(er.loading=!0,r(et).then(et=>{er.loading=!1;let ei=er.queueLoadedCallbacks.shift();return I.from(ei).each(P),o(et)})),ei=Se(et);return er.loading?new Promise((et,es)=>{er.queueLoadedCallbacks.push(()=>{s(ei).then(et,es)})}):s(ei)}};Ba.ScriptLoader=new Ba;let Da=et=>{let er=et;return{get:()=>er,set:et=>{er=et}}},nr={},na=Da("en"),Ma=()=>xe(nr,na.get()),nl={getData:()=>pe(nr,et=>({...et})),setCode:et=>{et&&na.set(et)},getCode:()=>na.get(),add:(et,er)=>{let ei=nr[et];ei||(nr[et]=ei={});let es=q(eX(er),et=>et.toLowerCase());ge(er,(et,ed)=>{let ec=ed.toLowerCase();ec!==ed&&((et,er)=>{let ei=et.indexOf(er);return -1!==ei&&et.indexOf(er,ei+1)>ei})(es,ec)?(ke(er,ec)||(ei[ec]=et),ei[ed]=et):ei[ec]=et})},translate:et=>{let er=Ma().getOr({}),n=et=>eH(et)?Object.prototype.toString.call(et):o(et)?"":""+et,o=et=>""===et||null==et,r=et=>{let ei=n(et);return ke(er,ei)?n(er[ei]):xe(er,ei.toLowerCase()).map(n).getOr(ei)},s=et=>et.replace(/{context:\w+}$/,"");if(o(et))return"";if(eF(et)&&ke(et,"raw"))return n(et.raw);if(eM(et)&&et.length>1){let er=et.slice(1);return s(r(et[0]).replace(/\{([0-9]+)\}/g,(et,ei)=>ke(er,ei)?n(er[ei]):et))}return s(r(et))},isRtl:()=>Ma().bind(et=>xe(et,"_dir")).exists(et=>"rtl"===et),hasCode:et=>ke(nr,et)},Fa=()=>{let et=[],er={},ei={},es=[],r=(et,er)=>{let ei=G(es,ei=>ei.name===et&&ei.state===er);V(ei,et=>et.resolve())},s=et=>ke(er,et),a=(et,ei)=>{let es=nl.getCode();!es||ei&&-1===(","+(ei||"")+",").indexOf(","+es+",")||Ba.ScriptLoader.add(er[et]+"/langs/"+es+".js")},i=(et,er="added")=>"added"===er&&ke(ei,et)||"loaded"===er&&s(et)?Promise.resolve():new Promise(ei=>{es.push({name:et,state:er,resolve:ei})});return{items:et,urls:er,lookup:ei,get:et=>{if(ei[et])return ei[et].instance},requireLangPack:(et,er)=>{!1!==Fa.languageLoad&&(s(et)?a(et,er):i(et,"loaded").then(()=>a(et,er)))},add:(er,es)=>(et.push(es),ei[er]={instance:es},r(er,"added"),es),remove:et=>{delete er[et],delete ei[et]},createUrl:(et,er)=>eP(er)?eP(et)?{prefix:"",resource:er,suffix:""}:{prefix:et.prefix,resource:er,suffix:et.suffix}:er,load:(et,es)=>{if(er[et])return Promise.resolve();let ed=eP(es)?es:es.prefix+es.resource+es.suffix;0!==ed.indexOf("/")&&-1===ed.indexOf("://")&&(ed=Fa.baseURL+"/"+ed),er[et]=ed.substring(0,ed.lastIndexOf("/"));let a=()=>(r(et,"loaded"),Promise.resolve());return ei[et]?a():Ba.ScriptLoader.add(ed).then(a)},waitFor:i}};Fa.languageLoad=!0,Fa.baseURL="",Fa.PluginManager=Fa(),Fa.ThemeManager=Fa(),Fa.ModelManager=Fa();let Ua=et=>{let er=Da(I.none()),n=()=>er.get().each(et=>clearInterval(et));return{clear:()=>{n(),er.set(I.none())},isSet:()=>er.get().isSome(),get:()=>er.get(),set:ei=>{n(),er.set(I.some(setInterval(ei,et)))}}},za=()=>{let et=(et=>{let er=Da(I.none()),n=()=>er.get().each(et);return{clear:()=>{n(),er.set(I.none())},isSet:()=>er.get().isSome(),get:()=>er.get(),set:et=>{n(),er.set(I.some(et))}}})(E);return{...et,on:er=>et.get().each(er)}},ja=(et,er)=>{let ei=null;return{cancel:()=>{ez(ei)||(clearTimeout(ei),ei=null)},throttle:(...es)=>{ez(ei)&&(ei=setTimeout(()=>{ei=null,et.apply(null,es)},er))}}},Ha=(et,er)=>{let ei=null,o=()=>{ez(ei)||(clearTimeout(ei),ei=null)};return{cancel:o,throttle:(...es)=>{o(),ei=setTimeout(()=>{ei=null,et.apply(null,es)},er)}}},ns=N("mce-annotation"),nd=N("data-mce-annotation"),nc=N("data-mce-annotation-uid"),nu=N("data-mce-annotation-active"),nf=N("data-mce-annotation-classes"),np=N("data-mce-annotation-attrs"),Ya=et=>er=>En(er,et),Xa=(et,er)=>{let ei=et.selection.getRng(),es=pn(ei.startContainer),ed=pn(et.getBody()),ec=er.fold(()=>"."+ns(),et=>`[${nd()}="${et}"]`),eu=In(es,ei.startOffset).getOr(es);return to(eu,ec,Ya(ed)).bind(er=>tn(er,`${nc()}`).bind(ei=>tn(er,`${nd()}`).map(er=>{let es=Ja(et,ei);return{uid:ei,name:er,elements:es}})))},Qa=(et,er)=>nn(et,"data-mce-bogus")||Uo(et,'[data-mce-bogus="all"]',Ya(er)),Ja=(et,er)=>{let ei=pn(et.getBody()),es=Fo(ei,`[${nc()}="${er}"]`);return G(es,et=>!Qa(et,ei))},Za=(et,er)=>{let ei=pn(et.getBody()),es=Fo(ei,`[${nd()}="${er}"]`),ed={};return V(es,et=>{if(!Qa(et,ei)){let er=en(et,nc()),ei=xe(ed,er).getOr([]);ed[er]=ei.concat([et])}}),ed},nv=0,ti=et=>{let er=(new Date).getTime();return et+"_"+Math.floor(1e9*Math.random())+ ++nv+String(er)},ni=(et,er)=>pn(et.dom.cloneNode(er)),oi=et=>ni(et,!1),ri=et=>ni(et,!0),si=(et,er,ei=e$)=>{let es=new zo(et,er),r=et=>{let er;do er=es[et]();while(er&&!tJ(er)&&!ei(er));return I.from(er).filter(tJ)};return{current:()=>I.from(es.current()).filter(tJ),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},ai=(et,er)=>{let ei=er||(er=>et.isBlock(er)||t3(er)||t6(er)),o=(et,er,ei,es)=>{if(tJ(et)){let ei=es(et,er,et.data);if(-1!==ei)return I.some({container:et,offset:ei})}return ei().bind(et=>o(et.container,et.offset,ei,es))};return{backwards:(er,es,ed,ec)=>{let eu=si(er,null!=ec?ec:et.getRoot(),ei);return o(er,es,()=>eu.prev().map(et=>({container:et,offset:et.length})),ed).getOrNull()},forwards:(er,es,ed,ec)=>{let eu=si(er,null!=ec?ec:et.getRoot(),ei);return o(er,es,()=>eu.next().map(et=>({container:et,offset:0})),ed).getOrNull()}}},ny=Math.round,li=et=>et?{left:ny(et.left),top:ny(et.top),bottom:ny(et.bottom),right:ny(et.right),width:ny(et.width),height:ny(et.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},di=(et,er)=>(et=li(et),er||(et.left=et.left+et.width),et.right=et.left,et.width=0,et),ci=(et,er,ei)=>et>=0&&et<=Math.min(er.height,ei.height)/2,ui=(et,er)=>{let ei=Math.min(er.height/2,et.height/2);return et.bottom-ei<er.top||!(et.top>er.bottom)&&ci(er.top-et.bottom,et,er)},mi=(et,er)=>et.top>er.bottom||!(et.bottom<er.top)&&ci(er.bottom-et.top,et,er),fi=(et,er,ei)=>{let es=Math.max(Math.min(er,et.left+et.width),et.left),ed=Math.max(Math.min(ei,et.top+et.height),et.top);return Math.sqrt((er-es)*(er-es)+(ei-ed)*(ei-ed))},gi=et=>{let er=et.startContainer,ei=et.startOffset;return er===et.endContainer&&er.hasChildNodes()&&et.endOffset===ei+1?er.childNodes[ei]:null},pi=(et,er)=>{if(tY(et)&&et.hasChildNodes()){let ei=et.childNodes,es=Math.min(Math.max(er,0),ei.length-1);return ei[es]}return et},nS=RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),bi=et=>eP(et)&&et.charCodeAt(0)>=768&&nS.test(et),nI=Wo("display","block table"),nL=Wo("float","left right"),nB=((...et)=>er=>{for(let ei=0;ei<et.length;ei++)if(!et[ei](er))return!1;return!0})(tY,ss,T(nL)),nD=T(Wo("white-space","pre pre-line pre-wrap")),nP=Oa.nodeIndex,Ni=(et,er)=>er<0&&tY(et)&&et.hasChildNodes()?void 0:pi(et,er),Ri=et=>et?et.createRange():Oa.DOM.createRng(),Ai=et=>eP(et)&&/[\r\n\t ]/.test(et),Oi=et=>!!et.setStart&&!!et.setEnd,Ti=et=>{let er=et.startContainer,ei=et.startOffset;if(Ai(et.toString())&&nD(er.parentNode)&&tJ(er)){let et=er.data;if(Ai(et[ei-1])||Ai(et[ei+1]))return!0}return!1},Bi=et=>0===et.left&&0===et.right&&0===et.top&&0===et.bottom,Di=et=>{var er;let ei;let es=et.getClientRects();return ei=es.length>0?li(es[0]):li(et.getBoundingClientRect()),!Oi(et)&&t3(et)&&Bi(ei)?(et=>{let er=et.ownerDocument,ei=Ri(er),es=er.createTextNode("\xa0"),ed=et.parentNode;ed.insertBefore(es,et),ei.setStart(es,0),ei.setEnd(es,1);let ec=li(ei.getBoundingClientRect());return ed.removeChild(es),ec})(et):Bi(ei)&&Oi(et)&&null!==(er=(et=>{let er=et.startContainer,ei=et.endContainer,es=et.startOffset,ed=et.endOffset;if(er===ei&&tJ(ei)&&0===es&&1===ed){let er=et.cloneRange();return er.setEndAfter(ei),Di(er)}return null})(et))&&void 0!==er?er:ei},Pi=(et,er)=>{let ei=di(et,er);return ei.width=1,ei.right=ei.left+1,ei},Li=(et,er,ei)=>{let o=()=>(ei||(ei=(et=>{let er=[],n=et=>{var ei;0!==et.height&&(er.length>0&&(ei=er[er.length-1],et.left===ei.left&&et.top===ei.top&&et.bottom===ei.bottom&&et.right===ei.right)||er.push(et))},o=(et,er)=>{let ei=Ri(et.ownerDocument);if(er<et.data.length){if(bi(et.data[er]))return;if(bi(et.data[er-1])&&(ei.setStart(et,er),ei.setEnd(et,er+1),!Ti(ei)))return void n(Pi(Di(ei),!1))}er>0&&(ei.setStart(et,er-1),ei.setEnd(et,er),Ti(ei)||n(Pi(Di(ei),!1))),er<et.data.length&&(ei.setStart(et,er),ei.setEnd(et,er+1),Ti(ei)||n(Pi(Di(ei),!0)))},ei=et.container(),es=et.offset();if(tJ(ei))return o(ei,es),er;if(tY(ei)){if(et.isAtEnd()){let et=Ni(ei,es);tJ(et)&&o(et,et.data.length),nB(et)&&!t3(et)&&n(Pi(Di(et),!1))}else{let ed=Ni(ei,es);if(tJ(ed)&&o(ed,0),nB(ed)&&et.isAtEnd())return n(Pi(Di(ed),!1)),er;let ec=Ni(et.container(),et.offset()-1);nB(ec)&&!t3(ec)&&(nI(ec)||nI(ed)||!nB(ed))&&n(Pi(Di(ec),!1)),nB(ed)&&n(Pi(Di(ed),!0))}}return er})(Li(et,er))),ei);return{container:N(et),offset:N(er),toRange:()=>{let ei=Ri(et.ownerDocument);return ei.setStart(et,er),ei.setEnd(et,er),ei},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(tJ(et),0===er),isAtEnd:()=>tJ(et)?er>=et.data.length:er>=et.childNodes.length,isEqual:ei=>ei&&et===ei.container()&&er===ei.offset(),getNode:ei=>Ni(et,ei?er-1:er)}};Li.fromRangeStart=et=>Li(et.startContainer,et.startOffset),Li.fromRangeEnd=et=>Li(et.endContainer,et.endOffset),Li.after=et=>Li(et.parentNode,nP(et)+1),Li.before=et=>Li(et.parentNode,nP(et)),Li.isAbove=(et,er)=>Mt(le(er.getClientRects()),de(et.getClientRects()),ui).getOr(!1),Li.isBelow=(et,er)=>Mt(de(er.getClientRects()),le(et.getClientRects()),mi).getOr(!1),Li.isAtStart=et=>!!et&&et.isAtStart(),Li.isAtEnd=et=>!!et&&et.isAtEnd(),Li.isTextPosition=et=>!!et&&tJ(et.container()),Li.isElementPosition=et=>!Li.isTextPosition(et);let Mi=(et,er)=>{tJ(er)&&0===er.data.length&&et.remove(er)},Ii=(et,er,ei)=>{t2(ei)?((et,er,ei)=>{let es=I.from(ei.firstChild),ed=I.from(ei.lastChild);er.insertNode(ei),es.each(er=>Mi(et,er.previousSibling)),ed.each(er=>Mi(et,er.nextSibling))})(et,er,ei):(er.insertNode(ei),Mi(et,ei.previousSibling),Mi(et,ei.nextSibling))},nF=Oa.nodeIndex,ji=et=>{let er=et.parentNode;return Go(er)?ji(er):er},Hi=et=>et?Te(et.childNodes,(et,er)=>(Go(er)&&"BR"!==er.nodeName?et=et.concat(Hi(er)):et.push(er),et),[]):[],$i=et=>er=>et===er,qi=et=>(tJ(et)?"text()":et.nodeName.toLowerCase())+"["+(et=>{let er,ei;ei=Be(er=Hi(ji(et)),$i(et),et),er=er.slice(0,ei+1);let es=Te(er,(et,ei,es)=>(tJ(ei)&&tJ(er[es-1])&&et++,et),0);return(ei=Be(er=Oe(er,Vo([et.nodeName])),$i(et),et))-es})(et)+"]",Vi=(et,er)=>{let ei,es=[],ed=er.container(),ec=er.offset();if(tJ(ed))ei=((et,er)=>{let ei=et;for(;(ei=ei.previousSibling)&&tJ(ei);)er+=ei.data.length;return er})(ed,ec);else{let et=ed.childNodes;ec>=et.length?(ei="after",ec=et.length-1):ei="before",ed=et[ec]}es.push(qi(ed));let eu=((et,er,ei)=>{let es=[];for(let ei=er.parentNode;ei&&ei!==et;ei=ei.parentNode)es.push(ei);return es})(et,ed);return eu=Oe(eu,T(Go)),(es=es.concat(Ae(eu,et=>qi(et)))).reverse().join("/")+","+ei},Wi=(et,er)=>{if(!er)return null;let ei=er.split(","),es=ei[0].split("/"),ed=ei.length>1?ei[1]:"before",ec=Te(es,(et,er)=>{var ei,es;let ed;let ec=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(er);return ec?("text()"===ec[1]&&(ec[1]="#text"),ei=ec[1],es=parseInt(ec[2],10),ed=Oe(ed=Hi(et),(et,er)=>!tJ(et)||!tJ(ed[er-1])),(ed=Oe(ed,Vo([ei])))[es]):null},et);if(!ec)return null;if(!tJ(ec)&&ec.parentNode){let et;return et="after"===ed?nF(ec)+1:nF(ec),Li(ec.parentNode,et)}return((et,er)=>{let ei=et,es=0;for(;tJ(ei);){let ed=ei.data.length;if(er>=es&&er<=es+ed){et=ei,er-=es;break}if(!tJ(ei.nextSibling)){et=ei,er=ed;break}es+=ed,ei=ei.nextSibling}return tJ(et)&&er>et.data.length&&(er=et.data.length),Li(et,er)})(ec,parseInt(ed,10))},Gi=(et,er,ei,es,ed)=>{let ec=ed?es.startContainer:es.endContainer,eu=ed?es.startOffset:es.endOffset,ef=[],ey=et.getRoot();if(tJ(ec))ef.push(ei?((et,er,ei)=>{let es=et(er.data.slice(0,ei)).length;for(let ei=er.previousSibling;ei&&tJ(ei);ei=ei.previousSibling)es+=et(ei.data).length;return es})(er,ec,eu):eu);else{let er=0,es=ec.childNodes;eu>=es.length&&es.length&&(er=1,eu=Math.max(0,es.length-1)),ef.push(et.nodeIndex(es[eu],ei)+er)}for(let er=ec;er&&er!==ey;er=er.parentNode)ef.push(et.nodeIndex(er,ei));return ef},Yi=(et,er,ei)=>{let es=0;return tz.each(et.select(er),et=>"all"===et.getAttribute("data-mce-bogus")?void 0:et!==ei&&void es++),es},Xi=(et,er)=>{let ei=er?et.startContainer:et.endContainer,es=er?et.startOffset:et.endOffset;if(tY(ei)&&"TR"===ei.nodeName){let ed=ei.childNodes;(ei=ed[Math.min(er?es:es-1,ed.length-1)])&&(es=er?0:ei.childNodes.length,er?et.setStart(ei,es):et.setEnd(ei,es))}},Qi=et=>(Xi(et,!0),Xi(et,!1),et),Ji=(et,er)=>{if(tY(et)&&t6(et=pi(et,er)))return et;if($r(et)){tJ(et)&&jr(et)&&(et=et.parentNode);let er=et.previousSibling;if(t6(er)||t6(er=et.nextSibling))return er}},Zi=(et,er,ei)=>{let es=ei.getNode(),ed=ei.getRng();if("IMG"===es.nodeName||t6(es)){let et=es.nodeName;return{name:et,index:Yi(ei.dom,et,es)}}let ec=Ji(ed.startContainer,ed.startOffset)||Ji(ed.endContainer,ed.endOffset);if(ec){let et=ec.tagName;return{name:et,index:Yi(ei.dom,et,ec)}}return((et,er,ei,es)=>{let ed=er.dom,ec=Gi(ed,et,ei,es,!0),eu=er.isForward(),ef=Xr(es)?{isFakeCaret:!0}:{};return er.isCollapsed()?{start:ec,forward:eu,...ef}:{start:ec,end:Gi(ed,et,ei,es,!1),forward:eu,...ef}})(et,ei,er,ed)},el=(et,er,ei)=>{let es={"data-mce-type":"bookmark",id:er,style:"overflow:hidden;line-height:0px"};return ei?et.create("span",es,"&#xFEFF;"):et.create("span",es)},tl=(et,er)=>{let ei=et.dom,es=et.getRng(),ed=ei.uniqueId(),ec=et.isCollapsed(),eu=et.getNode(),ef=eu.nodeName,ey=et.isForward();if("IMG"===ef)return{name:ef,index:Yi(ei,ef,eu)};let eC=Qi(es.cloneRange());if(!ec){eC.collapse(!1);let et=el(ei,ed+"_end",er);Ii(ei,eC,et)}(es=Qi(es)).collapse(!0);let eS=el(ei,ed+"_start",er);return Ii(ei,es,eS),et.moveToBookmark({id:ed,keep:!0,forward:ey}),{id:ed,forward:ey}},nM=O(Zi,R,!0),ol=et=>{let t=er=>er(et),er=N(et),o=()=>ei,ei={tag:!0,inner:et,fold:(er,ei)=>ei(et),isValue:eq,isError:e$,map:er=>nz.value(er(et)),mapError:o,bind:t,exists:t,forall:t,getOr:er,or:o,getOrThunk:er,orThunk:o,getOrDie:er,each:er=>{er(et)},toOptional:()=>I.some(et)};return ei},rl=et=>{let t=()=>er,er={tag:!1,inner:et,fold:(er,ei)=>er(et),isValue:e$,isError:eq,map:t,mapError:er=>nz.error(er(et)),bind:t,exists:e$,forall:eq,getOr:R,or:R,getOrThunk:D,orThunk:D,getOrDie:B(String(et)),each:E,toOptional:I.none};return er},nz={value:ol,error:rl,fromOption:(et,er)=>et.fold(()=>rl(er),ol)},al=et=>{if(!eM(et))throw Error("cases must be an array");if(0===et.length)throw Error("there must be at least one case");let er=[],ei={};return V(et,(es,ed)=>{let ec=eX(es);if(1!==ec.length)throw Error("one and only one name per case");let eu=ec[0],ef=es[eu];if(void 0!==ei[eu])throw Error("duplicate key detected:"+eu);if("cata"===eu)throw Error("cannot have a case named cata (sorry)");if(!eM(ef))throw Error("case arguments must be an array");er.push(eu),ei[eu]=(...ei)=>{let es=ei.length;if(es!==ef.length)throw Error("Wrong number of arguments to case "+eu+". Expected "+ef.length+" ("+ef+"), got "+es);return{fold:(...er)=>{if(er.length!==et.length)throw Error("Wrong number of arguments to fold. Expected "+et.length+", got "+er.length);return er[ed].apply(null,ei)},match:et=>{let es=eX(et);if(er.length!==es.length)throw Error("Wrong number of arguments to match. Expected: "+er.join(",")+"\nActual: "+es.join(","));if(!ne(er,et=>H(es,et)))throw Error("Not all branches were specified when using match. Specified: "+es.join(", ")+"\nRequired: "+er.join(", "));return et[eu].apply(null,ei)},log:et=>{console.log(et,{constructors:er,constructor:eu,params:ei})}}}}),ei};al([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);let il=et=>"inline-command"===et.type||"inline-format"===et.type,ll=et=>"block-command"===et.type||"block-format"===et.type,dl=et=>{let t=er=>nz.error({message:er,pattern:et}),n=(er,ei,es)=>{if(void 0!==et.format){let es;if(eM(et.format)){if(!ne(et.format,eP))return t(er+" pattern has non-string items in the `format` array");es=et.format}else{if(!eP(et.format))return t(er+" pattern has non-string `format` parameter");es=[et.format]}return nz.value(ei(es))}return void 0!==et.cmd?eP(et.cmd)?nz.value(es(et.cmd,et.value)):t(er+" pattern has non-string `cmd` parameter"):t(er+" pattern is missing both `format` and `cmd` parameters")};if(!eF(et))return t("Raw pattern is not an object");if(!eP(et.start))return t("Raw pattern is missing `start` parameter");if(void 0!==et.end){if(!eP(et.end))return t("Inline pattern has non-string `end` parameter");if(0===et.start.length&&0===et.end.length)return t("Inline pattern has empty `start` and `end` parameters");let er=et.start,ei=et.end;return 0===ei.length&&(ei=er,er=""),n("Inline",et=>({type:"inline-format",start:er,end:ei,format:et}),(et,es)=>({type:"inline-command",start:er,end:ei,cmd:et,value:es}))}return void 0!==et.replacement?eP(et.replacement)?0===et.start.length?t("Replacement pattern has empty `start` parameter"):nz.value({type:"inline-command",start:"",end:et.start,cmd:"mceInsertContent",value:et.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===et.start.length?t("Block pattern has empty `start` parameter"):n("Block",er=>({type:"block-format",start:et.start,format:er[0]}),(er,ei)=>({type:"block-command",start:et.start,cmd:er,value:ei}))},cl=et=>G(et,ll),ul=et=>G(et,il),ml=et=>{let er=(et=>{let er=[],ei=[];return V(et,et=>{et.fold(et=>{er.push(et)},et=>{ei.push(et)})}),{errors:er,values:ei}})(q(et,dl));return V(er.errors,et=>console.error(et.message,et.pattern)),er.values},nV=xt().deviceType,nU=nV.isTouch(),nH=Oa.DOM,hl=et=>u(et,RegExp),bl=et=>er=>er.options.get(et),vl=et=>eP(et)||eF(et),yl=(et,er="")=>ei=>{let es=eP(ei);if(es){if(-1!==ei.indexOf("=")){let ed=(et=>{let er=et.indexOf("=")>0?et.split(/[;,](?![^=;,]*(?:[;,]|$))/):et.split(",");return X(er,(et,er)=>{let ei=er.split("="),es=ei[0],ed=ei.length>1?ei[1]:es;return et[e0(es)]=e0(ed),et},{})})(ei);return{value:xe(ed,et.id).getOr(er),valid:es}}return{value:ei,valid:es}}return{valid:!1,message:"Must be a string."}},nj=bl("iframe_attrs"),n$=bl("doctype"),nq=bl("document_base_url"),nG=bl("body_id"),nW=bl("body_class"),nK=bl("content_security_policy"),nY=bl("br_in_pre"),nX=bl("forced_root_block"),nJ=bl("forced_root_block_attrs"),nQ=bl("newline_behavior"),nZ=bl("br_newline_selector"),n0=bl("no_newline_selector"),n1=bl("keep_styles"),n2=bl("end_container_on_empty_block"),n3=bl("automatic_uploads"),n8=bl("images_reuse_filename"),n5=bl("images_replace_blob_uris"),n6=bl("icons"),n9=bl("icons_url"),n4=bl("images_upload_url"),n7=bl("images_upload_base_path"),ot=bl("images_upload_credentials"),or=bl("images_upload_handler"),oa=bl("content_css_cors"),os=bl("referrer_policy"),od=bl("language"),oc=bl("language_url"),ou=bl("indent_use_margin"),of=bl("indentation"),op=bl("content_css"),ov=bl("content_style"),oy=bl("font_css"),oS=bl("directionality"),oA=bl("inline_boundaries_selector"),oR=bl("object_resizing"),oI=bl("resize_img_proportional"),oL=bl("placeholder"),oB=bl("event_root"),oD=bl("service_message"),oP=bl("theme"),oF=bl("theme_url"),oM=bl("model"),oz=bl("model_url"),oV=bl("inline_boundaries"),oU=bl("formats"),oH=bl("preview_styles"),oj=bl("format_empty_lines"),o$=bl("format_noneditable_selector"),oq=bl("custom_ui_selector"),oG=bl("inline"),oW=bl("hidden_input"),oK=bl("submit_patch"),oY=bl("add_form_submit_trigger"),oX=bl("add_unload_trigger"),oJ=bl("custom_undo_redo_levels"),oQ=bl("disable_nodechange"),oZ=bl("readonly"),o0=bl("editable_root"),o1=bl("content_css_cors"),o2=bl("plugins"),o3=bl("external_plugins"),o8=bl("block_unsupported_drop"),o5=bl("visual"),o6=bl("visual_table_class"),o9=bl("visual_anchor_class"),o4=bl("iframe_aria_text"),o7=bl("setup"),at=bl("init_instance_callback"),ar=bl("urlconverter_callback"),aa=bl("auto_focus"),ad=bl("browser_spellcheck"),ac=bl("protect"),ay=bl("paste_block_drop"),aw=bl("paste_data_images"),aI=bl("paste_preprocess"),aT=bl("paste_postprocess"),aL=bl("newdocument_content"),aB=bl("paste_webkit_styles"),aD=bl("paste_remove_styles_if_webkit"),aP=bl("paste_merge_formats"),aF=bl("smart_paste"),aM=bl("paste_as_text"),az=bl("paste_tab_spaces"),aV=bl("allow_html_data_urls"),aU=bl("text_patterns"),aH=bl("text_patterns_lookup"),aj=bl("noneditable_class"),a$=bl("editable_class"),aq=bl("noneditable_regexp"),aG=bl("preserve_cdata"),aW=bl("highlight_on_focus"),aK=bl("xss_sanitization"),aY=bl("init_content_sync"),sc=et=>tz.explode(et.options.get("images_file_types")),aX=bl("table_tab_navigation"),aJ=bl("details_initial_state"),aQ=bl("details_serialized_state"),uc=et=>{let er=et.parentNode;er&&er.removeChild(et)},mc=et=>{let er=Fr(et);return{count:et.length-er.length,text:er}},fc=et=>{let er;for(;-1!==(er=et.data.lastIndexOf("\uFEFF"));)et.deleteData(er,1)},gc=(et,er)=>(hc(et),er),pc=(et,er)=>Li.isTextPosition(er)?tJ(et)&&er.container()===et?((et,er)=>{let ei=mc(et.data.substr(0,er.offset())),es=mc(et.data.substr(er.offset()));return(ei.text+es.text).length>0?(fc(et),Li(et,er.offset()-ei.count)):er})(et,er):gc(et,er):er.container()===et.parentNode?((et,er)=>{let ei=er.container(),es=((et,er)=>{let ei=j(et,er);return -1===ei?I.none():I.some(ei)})(eY(ei.childNodes),et).map(et=>et<er.offset()?Li(ei,er.offset()-1):er).getOr(er);return hc(et),es})(et,er):gc(et,er),hc=et=>{tY(et)&&$r(et)&&(qr(et)?et.removeAttribute("data-mce-caret"):uc(et)),tJ(et)&&(fc(et),0===et.data.length&&uc(et))},Cc=(et,er,ei)=>{let es,ed;let ec=di(er.getBoundingClientRect(),ei);if("BODY"===et.tagName){let er=et.ownerDocument.documentElement;es=et.scrollLeft||er.scrollLeft,ed=et.scrollTop||er.scrollTop}else{let er=et.getBoundingClientRect();es=et.scrollLeft-er.left,ed=et.scrollTop-er.top}ec.left+=es,ec.right+=es,ec.top+=ed,ec.bottom+=ed,ec.width=1;let eu=er.offsetWidth-er.clientWidth;return eu>0&&(ei&&(eu*=-1),ec.left+=eu,ec.right+=eu),ec},wc=(et,er,ei,es)=>{let ed,ec;let eu=za(),ef=nX(et),ey=et.dom,d=()=>{(et=>{var er,ei;let es=Fo(pn(et),"*[contentEditable=false],video,audio,embed,object");for(let et=0;et<es.length;et++){let ed=es[et].dom,ec=ed.previousSibling;if(Gr(ec)){let et=ec.data;1===et.length?null===(er=ec.parentNode)||void 0===er||er.removeChild(ec):ec.deleteData(et.length-1,1)}Kr(ec=ed.nextSibling)&&(1===ec.data.length?null===(ei=ec.parentNode)||void 0===ei||ei.removeChild(ec):ec.deleteData(0,1))}})(er),ec&&(hc(ec),ec=null),eu.on(et=>{ey.remove(et.caret),eu.clear()}),ed&&(clearInterval(ed),ed=void 0)};return{show:(et,eC)=>{let eS;if(d(),t9(eC))return null;if(!ei(eC))return ec=((et,er)=>{var ei;let es=(null!==(ei=et.ownerDocument)&&void 0!==ei?ei:document).createTextNode("\uFEFF"),ed=et.parentNode;if(er){let er=et.previousSibling;if(tJ(er)){if($r(er))return er;if(Gr(er))return er.splitText(er.data.length-1)}null==ed||ed.insertBefore(es,et)}else{let er=et.nextSibling;if(tJ(er)){if($r(er))return er;if(Kr(er))return er.splitText(1),er}et.nextSibling?null==ed||ed.insertBefore(es,et.nextSibling):null==ed||ed.appendChild(es)}return es})(eC,et),eS=eC.ownerDocument.createRange(),kc(ec.nextSibling)?(eS.setStart(ec,0),eS.setEnd(ec,0)):(eS.setStart(ec,1),eS.setEnd(ec,1)),eS;{let ei=((et,er,ei)=>{var es;let ed=(null!==(es=er.ownerDocument)&&void 0!==es?es:document).createElement(et);ed.setAttribute("data-mce-caret",ei?"before":"after"),ed.setAttribute("data-mce-bogus","all"),ed.appendChild(Dr().dom);let ec=er.parentNode;return ei?null==ec||ec.insertBefore(ed,er):er.nextSibling?null==ec||ec.insertBefore(ed,er.nextSibling):null==ec||ec.appendChild(ed),ed})(ef,eC,et),e_=Cc(er,eC,et);ey.setStyle(ei,"top",e_.top),ec=ei;let eR=ey.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});ey.setStyles(eR,{...e_}),ey.add(er,eR),eu.set({caret:eR,element:eC,before:et}),et&&ey.addClass(eR,"mce-visual-caret-before"),ed=setInterval(()=>{eu.on(et=>{es()?ey.toggleClass(et.caret,"mce-visual-caret-hidden"):ey.addClass(et.caret,"mce-visual-caret-hidden")})},500),(eS=eC.ownerDocument.createRange()).setStart(ei,0),eS.setEnd(ei,0)}return eS},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{eu.on(et=>{let ei=Cc(er,et.element,et.before);ey.setStyles(et.caret,{...ei})})},destroy:()=>clearInterval(ed)}},xc=()=>tF.browser.isFirefox(),kc=et=>t6(et)||t7(et),Ec=et=>(kc(et)||Yo(et)&&xc())&&On(pn(et)).exists(no),aZ=Wo("display","block table table-cell table-caption list-item"),Pc=et=>et>0,Lc=et=>et<0,Mc=(et,er)=>{let ei;for(;ei=et(er);)if(!jr(ei))return ei;return null},Ic=(et,er,ei,es,ed)=>{let ec;let eu=new zo(et,es),ef=t6(et)||jr(et);if(Lc(er)){if(ef&&ei(ec=Mc(eu.prev.bind(eu),!0)))return ec;for(;ec=Mc(eu.prev.bind(eu),ed);)if(ei(ec))return ec}if(Pc(er)){if(ef&&ei(ec=Mc(eu.next.bind(eu),!0)))return ec;for(;ec=Mc(eu.next.bind(eu),ed);)if(ei(ec))return ec}return null},Fc=(et,er)=>{for(;et&&et!==er;){if(aZ(et))return et;et=et.parentNode}return null},Uc=(et,er,ei)=>Fc(et.container(),ei)===Fc(er.container(),ei),zc=(et,er)=>{if(!er)return I.none();let ei=er.container(),es=er.offset();return tY(ei)?I.from(ei.childNodes[es+et]):I.none()},jc=(et,er)=>{var ei;let es=(null!==(ei=er.ownerDocument)&&void 0!==ei?ei:document).createRange();return et?(es.setStartBefore(er),es.setEndBefore(er)):(es.setStartAfter(er),es.setEndAfter(er)),es},Hc=(et,er,ei)=>Fc(er,et)===Fc(ei,et),$c=(et,er,ei)=>{let es=et?"previousSibling":"nextSibling",ed=ei;for(;ed&&ed!==er;){let et=ed[es];if(et&&$r(et)&&(et=et[es]),t6(et)||t7(et)){if(Hc(er,et,ed))return et;break}if(ss(et))break;ed=ed.parentNode}return null},a0=O(jc,!0),a1=O(jc,!1),Wc=(et,er,ei)=>{let es;let ed=O($c,!0,er),ec=O($c,!1,er),eu=ei.startContainer,ef=ei.startOffset;if(jr(eu)){let et=tJ(eu)?eu.parentNode:eu,er=et.getAttribute("data-mce-caret");if("before"===er&&Ec(es=et.nextSibling))return a0(es);if("after"===er&&Ec(es=et.previousSibling))return a1(es)}if(!ei.collapsed)return ei;if(tJ(eu)){if($r(eu)){if(1===et){if(es=ec(eu))return a0(es);if(es=ed(eu))return a1(es)}if(-1===et){if(es=ed(eu))return a1(es);if(es=ec(eu))return a0(es)}return ei}if(Gr(eu)&&ef>=eu.data.length-1)return 1===et&&(es=ec(eu))?a0(es):ei;if(Kr(eu)&&ef<=1)return -1===et&&(es=ed(eu))?a1(es):ei;if(ef===eu.data.length)return(es=ec(eu))?a0(es):ei;if(0===ef)return(es=ed(eu))?a1(es):ei}return ei},Kc=(et,er)=>zc(et?0:-1,er).filter(t6),Gc=(et,er,ei)=>{let es=Wc(et,er,ei);return -1===et?Li.fromRangeStart(es):Li.fromRangeEnd(es)},Yc=et=>I.from(et.getNode()).map(pn),Xc=(et,er)=>{let ei=er;for(;(ei=et(ei))&&!ei.isVisible(););return ei},Qc=(et,er)=>{let ei=Uc(et,er);return!(ei||!t3(et.getNode()))||ei};(iZ=i0||(i0={}))[iZ.Backwards=-1]="Backwards",iZ[iZ.Forwards=1]="Forwards";let ru=et=>rD(et)||!!as(et)&&!X(eY(et.getElementsByTagName("*")),(et,er)=>et||t5(er),!1),au=(et,er)=>et.hasChildNodes()&&er<et.childNodes.length?et.childNodes[er]:null,iu=(et,er)=>{if(Pc(et)){if(ss(er.previousSibling)&&!tJ(er.previousSibling))return Li.before(er);if(tJ(er))return Li(er,0)}if(Lc(et)){if(ss(er.nextSibling)&&!tJ(er.nextSibling))return Li.after(er);if(tJ(er))return Li(er,er.data.length)}return Lc(et)?t3(er)?Li.before(er):Li.after(er):Li.before(er)},lu=(et,er,ei)=>{let es,ed,ec,eu;if(!tY(ei)||!er)return null;if(er.isEqual(Li.after(ei))&&ei.lastChild){if(eu=Li.after(ei.lastChild),Lc(et)&&ss(ei.lastChild)&&tY(ei.lastChild))return t3(ei.lastChild)?Li.before(ei.lastChild):eu}else eu=er;let ef=eu.container(),ey=eu.offset();if(tJ(ef)){if(Lc(et)&&ey>0)return Li(ef,--ey);if(Pc(et)&&ey<ef.length)return Li(ef,++ey);es=ef}else{if(Lc(et)&&ey>0&&ss(ed=au(ef,ey-1)))return!ru(ed)&&(ec=Ic(ed,et,is,ed))?tJ(ec)?Li(ec,ec.data.length):Li.after(ec):tJ(ed)?Li(ed,ed.data.length):Li.before(ed);if(Pc(et)&&ey<ef.childNodes.length&&ss(ed=au(ef,ey)))return t3(ed)?((et,er)=>{let ei=er.nextSibling;return ei&&ss(ei)?tJ(ei)?Li(ei,0):Li.before(ei):lu(i0.Forwards,Li.after(er),et)})(ei,ed):!ru(ed)&&(ec=Ic(ed,et,is,ed))?tJ(ec)?Li(ec,0):Li.before(ec):tJ(ed)?Li(ed,0):Li.after(ed);es=ed||eu.getNode()}if(es&&(Pc(et)&&eu.isAtEnd()||Lc(et)&&eu.isAtStart())&&is(es=Ic(es,et,eq,ei,!0),ei))return iu(et,es);ed=es?Ic(es,et,is,ei):es;let eC=De(G(((et,er)=>{let ei=[],es=et;for(;es&&es!==er;)ei.push(es),es=es.parentNode;return ei})(ef,ei),t6));return!eC||ed&&eC.contains(ed)?ed?iu(et,ed):null:eu=Pc(et)?Li.after(eC):Li.before(eC)},du=et=>({next:er=>lu(i0.Forwards,er,et),prev:er=>lu(i0.Backwards,er,et)}),cu=et=>Li.isTextPosition(et)?0===et.offset():ss(et.getNode()),uu=et=>{if(Li.isTextPosition(et)){let er=et.container();return et.offset()===er.data.length}return ss(et.getNode(!0))},mu=(et,er)=>!Li.isTextPosition(et)&&!Li.isTextPosition(er)&&et.getNode()===er.getNode(!0),fu=(et,er,ei)=>{let es=du(er);return I.from(et?es.next(ei):es.prev(ei))},gu=(et,er,ei)=>fu(et,er,ei).bind(es=>Uc(ei,es,er)&&(et?!mu(ei,es)&&!(!Li.isTextPosition(ei)&&t3(ei.getNode()))&&uu(ei)&&cu(es):!mu(es,ei)&&cu(ei)&&uu(es))?fu(et,er,es):I.some(es)),pu=(et,er,ei,es)=>gu(et,er,ei).bind(ei=>es(ei)?pu(et,er,ei,es):I.some(ei)),hu=(et,er)=>{let ei=et?er.firstChild:er.lastChild;return tJ(ei)?I.some(Li(ei,et?0:ei.data.length)):ei?ss(ei)?I.some(et?Li.before(ei):t3(ei)?Li.before(ei):Li.after(ei)):((et,er,ei)=>{let es=et?Li.before(ei):Li.after(ei);return fu(et,er,es)})(et,er,ei):I.none()},a2=O(fu,!0),a3=O(fu,!1),a8=O(hu,!0),a5=O(hu,!1),a6="_mce_caret",xu=et=>tY(et)&&et.id===a6,ku=(et,er)=>{let ei=er;for(;ei&&ei!==et;){if(xu(ei))return ei;ei=ei.parentNode}return null},Eu=et=>ke(et,"name"),Su=et=>tz.isArray(et.start),_u=et=>!(!Eu(et)&&eV(et.forward))||et.forward,Nu=(et,er)=>(tY(er)&&et.isBlock(er)&&!er.innerHTML&&(er.innerHTML='<br data-mce-bogus="1" />'),er),Ru=(et,er)=>a5(et).fold(e$,et=>(er.setStart(et.container(),et.offset()),er.setEnd(et.container(),et.offset()),!0)),Au=(et,er,ei)=>!er.hasChildNodes()&&!!ku(et,er)&&(((et,er)=>{var ei;let es=(null!==(ei=et.ownerDocument)&&void 0!==ei?ei:document).createTextNode("\uFEFF");et.appendChild(es),er.setStart(es,0),er.setEnd(es,0)})(er,ei),!0),Ou=(et,er,ei,es)=>{let ed=ei[er?"start":"end"],ec=et.getRoot();if(ed){let et=ec,ei=ed[0];for(let er=ed.length-1;et&&er>=1;er--){let ei=et.childNodes;if(Au(ec,et,es))return!0;if(ed[er]>ei.length-1)return!!Au(ec,et,es)||Ru(et,es);et=ei[ed[er]]}tJ(et)&&(ei=Math.min(ed[0],et.data.length)),tY(et)&&(ei=Math.min(ed[0],et.childNodes.length)),er?es.setStart(et,ei):es.setEnd(et,ei)}return!0},Tu=et=>tJ(et)&&et.data.length>0,Bu=(et,er,ei)=>{let es=et.get(ei.id+"_"+er),ed=null==es?void 0:es.parentNode,ec=ei.keep;if(es&&ed){let eu,ef;if("start"===er?ec?es.hasChildNodes()?(eu=es.firstChild,ef=1):Tu(es.nextSibling)?(eu=es.nextSibling,ef=0):Tu(es.previousSibling)?(eu=es.previousSibling,ef=es.previousSibling.data.length):(eu=ed,ef=et.nodeIndex(es)+1):(eu=ed,ef=et.nodeIndex(es)):ec?es.hasChildNodes()?(eu=es.firstChild,ef=1):Tu(es.previousSibling)?(eu=es.previousSibling,ef=es.previousSibling.data.length):(eu=ed,ef=et.nodeIndex(es)):(eu=ed,ef=et.nodeIndex(es)),!ec){let ed;let ec=es.previousSibling,ey=es.nextSibling;for(tz.each(tz.grep(es.childNodes),et=>{tJ(et)&&(et.data=et.data.replace(/\uFEFF/g,""))});ed=et.get(ei.id+"_"+er);)et.remove(ed,!0);if(tJ(ey)&&tJ(ec)&&!tF.browser.isOpera()){let er=ec.data.length;ec.appendData(ey.data),et.remove(ey),eu=ec,ef=er}}return I.some(Li(eu,ef))}return I.none()},Du=(et,er,ei)=>((et,er,ei=!1)=>2===er?Zi(Fr,ei,et):3===er?(et=>{let er=et.getRng();return{start:Vi(et.dom.getRoot(),Li.fromRangeStart(er)),end:Vi(et.dom.getRoot(),Li.fromRangeEnd(er)),forward:et.isForward()}})(et):er?{rng:et.getRng(),forward:et.isForward()}:tl(et,!1))(et,er,ei),Pu=(et,er)=>{((et,er)=>{let ei=et.dom;if(er){if(Su(er))return((et,er)=>{let ei=et.createRng();return Ou(et,!0,er,ei)&&Ou(et,!1,er,ei)?I.some({range:ei,forward:_u(er)}):I.none()})(ei,er);if(eP(er.start))return((et,er)=>{let ei=I.from(Wi(et.getRoot(),er.start)),es=I.from(Wi(et.getRoot(),er.end));return Mt(ei,es,(ei,es)=>{let ed=et.createRng();return ed.setStart(ei.container(),ei.offset()),ed.setEnd(es.container(),es.offset()),{range:ed,forward:_u(er)}})})(ei,er);if(ke(er,"id"))return((et,er)=>{let ei=Bu(et,"start",er),es=Bu(et,"end",er);return Mt(ei,es.or(ei),(ei,es)=>{let ed=et.createRng();return ed.setStart(Nu(et,ei.container()),ei.offset()),ed.setEnd(Nu(et,es.container()),es.offset()),{range:ed,forward:_u(er)}})})(ei,er);if(Eu(er))return I.from(ei.select(er.name)[er.index]).map(et=>{let er=ei.createRng();return er.selectNode(et),{range:er,forward:!0}});if(ke(er,"rng"))return I.some({range:er.rng,forward:_u(er)})}return I.none()})(et,er).each(({range:er,forward:ei})=>{et.setRng(er,ei)})},Lu=et=>tY(et)&&"SPAN"===et.tagName&&"bookmark"===et.getAttribute("data-mce-type"),Mu=et=>"\xa0"===et,Fu=et=>""!==et&&-1!==" \f\n\r	\v".indexOf(et),Uu=et=>!Fu(et)&&!Mu(et)&&!hr(et),zu=et=>{let er=et.toString(16);return(1===er.length?"0"+er:er).toUpperCase()},ju=et=>({value:ze(zu(et.red)+zu(et.green)+zu(et.blue),"#").toUpperCase()}),a9=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,a4=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,qu=(et,er,ei,es)=>({red:et,green:er,blue:ei,alpha:es}),Vu=(et,er,ei,es)=>{let ed=parseInt(et,10),ec=parseInt(er,10),eu=parseInt(ei,10),ef=parseFloat(es);return qu(ed,ec,eu,ef)},Wu=et=>(et=>{if("transparent"===et)return I.some(qu(0,0,0,0));let er=a9.exec(et);if(null!==er)return I.some(Vu(er[1],er[2],er[3],"1"));let ei=a4.exec(et);return null!==ei?I.some(Vu(ei[1],ei[2],ei[3],ei[4])):I.none()})(et).map(ju).map(et=>"#"+et.value).getOr(et),Ku=et=>{let er=[];if(et)for(let ei=0;ei<et.rangeCount;ei++)er.push(et.getRangeAt(ei));return er},Gu=(et,er)=>{let ei=Fo(er,"td[data-mce-selected],th[data-mce-selected]");return ei.length>0?ei:G(te(et,et=>{let er=gi(et);return er?[pn(er)]:[]}),rR)},Yu=et=>Gu(Ku(et.selection.getSel()),pn(et.getBody())),Xu=(et,er)=>Zn(et,"table",er),Qu=et=>Fn(et).fold(N([et]),er=>[et].concat(Qu(er))),Ju=et=>Un(et).fold(N([et]),er=>"br"===Ht(er)?Bn(er).map(er=>[et].concat(Ju(er))).getOr([]):[et].concat(Ju(er))),Zu=(et,er)=>Mt((et=>{let er=et.startContainer,ei=et.startOffset;return tJ(er)?0===ei?I.some(pn(er)):I.none():I.from(er.childNodes[ei]).map(pn)})(er),(et=>{let er=et.endContainer,ei=et.endOffset;return tJ(er)?ei===er.data.length?I.some(pn(er)):I.none():I.from(er.childNodes[ei-1]).map(pn)})(er),(er,ei)=>{let es=J(Qu(et),O(En,er)),ed=J(Ju(et),O(En,ei));return es.isSome()&&ed.isSome()}).getOr(!1),em=(et,er,ei,es)=>{let ed=new zo(ei,ei),ec=ye(et.schema.getMoveCaretBeforeOnEnterElements(),(et,er)=>!H(["td","th","table"],er.toLowerCase())),eu=ei;do{if(tJ(eu)&&0!==tz.trim(eu.data).length)return void(es?er.setStart(eu,0):er.setEnd(eu,eu.data.length));if(ec[eu.nodeName])return void(es?er.setStartBefore(eu):"BR"===eu.nodeName?er.setEndBefore(eu):er.setEndAfter(eu))}while(eu=es?ed.next():ed.prev());"BODY"===ei.nodeName&&(es?er.setStart(ei,0):er.setEnd(ei,ei.childNodes.length))},tm=et=>{let er=et.selection.getSel();return C(er)&&er.rangeCount>0},nm=(et,er)=>{let ei=Yu(et);ei.length>0?V(ei,ei=>{let es=ei.dom,ed=et.dom.createRng();ed.setStartBefore(es),ed.setEndAfter(es),er(ed,!0)}):er(et.selection.getRng(),!1)},om=(et,er,ei)=>{let es=tl(et,er);ei(es),et.moveToBookmark(es)},rm=et=>ej(null==et?void 0:et.nodeType),sm=et=>tY(et)&&!Lu(et)&&!xu(et)&&!Go(et),am=et=>!0===et.isContentEditable,im=(et,er,ei)=>{let{selection:es,dom:ed}=et,ec=es.getNode(),eu=t6(ec);om(es,!0,()=>{er()}),eu&&t6(ec)&&ed.isChildOf(ec,et.getBody())?et.selection.select(ec):ei(es.getStart())&&lm(ed,es)},lm=(et,er)=>{var ei,es;let ed=er.getRng(),{startContainer:ec,startOffset:eu}=ed;if(!((et,er)=>{if(sm(er)&&!/^(TD|TH)$/.test(er.nodeName)){let ei=et.getAttrib(er,"data-mce-selected"),es=parseInt(ei,10);return!isNaN(es)&&es>0}return!1})(et,er.getNode())&&tY(ec)){let ef;let ey=ec.childNodes,eC=et.getRoot();if(eu<ey.length){let er=ey[eu];ef=new zo(er,null!==(ei=et.getParent(er,et.isBlock))&&void 0!==ei?ei:eC)}else{let er=ey[ey.length-1];(ef=new zo(er,null!==(es=et.getParent(er,et.isBlock))&&void 0!==es?es:eC)).next(!0)}for(let ei=ef.current();ei;ei=ef.next()){if("false"===et.getContentEditable(ei))return;if(tJ(ei)&&!mm(ei))return ed.setStart(ei,0),void er.setRng(ed)}}},dm=(et,er,ei)=>{if(et){let es=er?"nextSibling":"previousSibling";for(et=ei?et:et[es];et;et=et[es])if(tY(et)||!mm(et))return et}},cm=(et,er)=>!!et.getTextBlockElements()[er.nodeName.toLowerCase()]||As(et,er),um=(et,er,ei)=>et.schema.isValidChild(er,ei),mm=(et,er=!1)=>{if(C(et)&&tJ(et)){let ei=er?et.data.replace(/ /g,"\xa0"):et.data;return ds(ei)}return!1},fm=(et,er)=>{let ei=et.dom;return sm(er)&&"false"===ei.getContentEditable(er)&&((et,er)=>{let ei="[data-mce-cef-wrappable]",es=o$(et),ed=Ye(es)?ei:`${ei},${es}`;return xn(pn(er),ed)})(et,er)&&0===ei.select('[contenteditable="true"]',er).length},gm=(et,er)=>eH(et)?et(er):(C(er)&&(et=et.replace(/%(\w+)/g,(et,ei)=>er[ei]||et)),et),pm=(et,er)=>(er=er||"",et=""+((et=et||"").nodeName||et),er=""+(er.nodeName||er),et.toLowerCase()===er.toLowerCase()),hm=(et,er)=>{if(y(et))return null;{let ei=String(et);return"color"!==er&&"backgroundColor"!==er||(ei=Wu(ei)),"fontWeight"===er&&700===et&&(ei="bold"),"fontFamily"===er&&(ei=ei.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),ei}},bm=(et,er,ei)=>{let es=et.getStyle(er,ei);return hm(es,ei)},vm=(et,er)=>{let ei;return et.getParent(er,er=>!!tY(er)&&!!(ei=et.getStyle(er,"text-decoration"))&&"none"!==ei),ei},ym=(et,er,ei)=>et.getParents(er,ei,et.getRoot()),Cm=(et,er,ei)=>{let es=et.formatter.get(er);return C(es)&&$(es,ei)},wm=et=>Ee(et,"block"),xm=et=>Ee(et,"selector"),km=et=>Ee(et,"inline"),Em=et=>xm(et)&&!1!==et.expand&&!km(et),Am=(et,er)=>{let ei=er;for(;ei;){if(tY(ei)&&et.getContentEditable(ei))return"false"===et.getContentEditable(ei)?ei:er;ei=ei.parentNode}return er},Om=(et,er,ei,es)=>{let ed=er.data;if(et){for(let et=ei;et>0;et--)if(es(ed.charAt(et-1)))return et}else for(let et=ei;et<ed.length;et++)if(es(ed.charAt(et)))return et;return -1},Tm=(et,er,ei)=>Om(et,er,ei,et=>Mu(et)||Fu(et)),Bm=(et,er,ei)=>Om(et,er,ei,Uu),Dm=(et,er,ei,es,ed,ec)=>{let eu;let ef=et.getParent(ei,et.isBlock)||er,l=(er,ei,es)=>{let ec=ai(et),ey=ed?ec.backwards:ec.forwards;return I.from(ey(er,ei,(et,er)=>Lu(et.parentNode)?-1:(eu=et,es(ed,et,er)),ef))};return l(ei,es,Tm).bind(et=>ec?l(et.container,et.offset+(ed?-1:0),Bm):I.some(et)).orThunk(()=>eu?I.some({container:eu,offset:ed?0:eu.length}):I.none())},Pm=(et,er,ei,es,ed)=>{let ec=es[ed];tJ(es)&&Ye(es.data)&&ec&&(es=ec);let eu=ym(et,es);for(let es=0;es<eu.length;es++)for(let ed=0;ed<er.length;ed++){let ec=er[ed];if((!C(ec.collapsed)||ec.collapsed===ei.collapsed)&&xm(ec)&&et.is(eu[es],ec.selector))return eu[es]}return es},Lm=(et,er,ei,es)=>{var ed;let ec=ei,eu=et.getRoot(),ef=er[0];if(wm(ef)&&(ec=ef.wrapper?null:et.getParent(ei,ef.block,eu)),!ec){let er=null!==(ed=et.getParent(ei,"LI,TD,TH"))&&void 0!==ed?ed:eu;ec=et.getParent(tJ(ei)?ei.parentNode:ei,er=>er!==eu&&cm(et.schema,er),er)}if(ec&&wm(ef)&&ef.wrapper&&(ec=ym(et,ec,"ul,ol").reverse()[0]||ec),!ec)for(ec=ei;ec&&ec[es]&&!et.isBlock(ec[es])&&!pm(ec=ec[es],"br"););return ec||ei},Mm=(et,er,ei,es)=>{let ed=ei.parentNode;return!C(ei[es])&&(!(ed!==er&&!y(ed)&&!et.isBlock(ed))||Mm(et,er,ed,es))},Im=(et,er,ei,es,ed)=>{var ec;let eu=ei,ef=ed?"previousSibling":"nextSibling",ey=et.getRoot();if(tJ(ei)&&!mm(ei)&&(ed?es>0:es<ei.data.length))return ei;for(;eu;){if(!er[0].block_expand&&et.isBlock(eu))return eu;for(let er=eu[ef];er;er=er[ef]){let ei=tJ(er)&&!Mm(et,ey,er,ef);if(!Lu(er)&&(!t3(ec=er)||!ec.getAttribute("data-mce-bogus")||ec.nextSibling)&&!mm(er,ei))return eu}if(eu===ey||eu.parentNode===ey){ei=eu;break}eu=eu.parentNode}return ei},Fm=et=>Lu(et.parentNode)||Lu(et),Um=(et,er,ei,es=!1)=>{let{startContainer:ed,startOffset:ec,endContainer:eu,endOffset:ef}=er,ey=ei[0];return tY(ed)&&ed.hasChildNodes()&&tJ(ed=pi(ed,ec))&&(ec=0),tY(eu)&&eu.hasChildNodes()&&tJ(eu=pi(eu,er.collapsed?ef:ef-1))&&(ef=eu.data.length),ed=Am(et,ed),eu=Am(et,eu),Fm(ed)&&(ed=Lu(ed)?ed:ed.parentNode,tJ(ed=er.collapsed?ed.previousSibling||ed:ed.nextSibling||ed)&&(ec=er.collapsed?ed.length:0)),Fm(eu)&&(eu=Lu(eu)?eu:eu.parentNode,tJ(eu=er.collapsed?eu.nextSibling||eu:eu.previousSibling||eu)&&(ef=er.collapsed?0:eu.length)),er.collapsed&&(Dm(et,et.getRoot(),ed,ec,!0,es).each(({container:et,offset:er})=>{ed=et,ec=er}),Dm(et,et.getRoot(),eu,ef,!1,es).each(({container:et,offset:er})=>{eu=et,ef=er})),(km(ey)||ey.block_expand)&&(km(ey)&&tJ(ed)&&0!==ec||(ed=Im(et,ei,ed,ec,!0)),km(ey)&&tJ(eu)&&ef!==eu.data.length||(eu=Im(et,ei,eu,ef,!1))),Em(ey)&&(ed=Pm(et,ei,er,ed,"previousSibling"),eu=Pm(et,ei,er,eu,"nextSibling")),(wm(ey)||xm(ey))&&(ed=Lm(et,ei,ed,"previousSibling"),eu=Lm(et,ei,eu,"nextSibling"),wm(ey)&&(et.isBlock(ed)||(ed=Im(et,ei,ed,ec,!0)),et.isBlock(eu)||(eu=Im(et,ei,eu,ef,!1)))),tY(ed)&&ed.parentNode&&(ec=et.nodeIndex(ed),ed=ed.parentNode),tY(eu)&&eu.parentNode&&(ef=et.nodeIndex(eu)+1,eu=eu.parentNode),{startContainer:ed,startOffset:ec,endContainer:eu,endOffset:ef}},zm=(et,er,ei)=>{var es;let ed=er.startOffset,ec=pi(er.startContainer,ed),eu=er.endOffset,ef=pi(er.endContainer,eu-1),l=et=>{let er=et[0];tJ(er)&&er===ec&&ed>=er.data.length&&et.splice(0,1);let ei=et[et.length-1];return 0===eu&&et.length>0&&ei===ef&&tJ(ei)&&et.splice(et.length-1,1),et},d=(et,er,ei)=>{let es=[];for(;et&&et!==ei;et=et[er])es.push(et);return es},c=(er,ei)=>et.getParent(er,et=>et.parentNode===ei,ei),u=(et,er,es)=>{let ed=es?"nextSibling":"previousSibling";for(let ec=et,eu=ec.parentNode;ec&&ec!==er;ec=eu){eu=ec.parentNode;let er=d(ec===et?ec:ec[ed],ed);er.length&&(es||er.reverse(),ei(l(er)))}};if(ec===ef)return ei(l([ec]));let ey=null!==(es=et.findCommonAncestor(ec,ef))&&void 0!==es?es:et.getRoot();if(et.isChildOf(ec,ef))return u(ec,ey,!0);if(et.isChildOf(ef,ec))return u(ef,ey);let eC=c(ec,ey)||ec,eS=c(ef,ey)||ef;u(ec,eC,!0);let e_=d(eC===ec?eC:eC.nextSibling,"nextSibling",eS===ef?eS.nextSibling:eS);e_.length&&ei(l(e_)),u(ef,eS)},a7=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Hm=(et,er,ei,es,ed,ec)=>{let{uid:eu=er,...ef}=ei;un(et,ns()),Jt(et,`${nc()}`,eu),Jt(et,`${nd()}`,es);let{attributes:ey={},classes:eC=[]}=ed(eu,ef);if(Zt(et,ey),V(eC,er=>{un(et,er)}),ec){eC.length>0&&Jt(et,`${nf()}`,eC.join(","));let er=eX(ey);er.length>0&&Jt(et,`${np()}`,er.join(","))}},$m=(et,er,ei,es,ed)=>{let ec=bn("span",et);return Hm(ec,er,ei,es,ed,!1),ec},qm=(et,er,ei,es,ed,ec)=>{let eu=[],ef=$m(et.getDoc(),ei,ec,es,ed),ey=za(),d=()=>{ey.clear()},c=et=>{V(et,u)},u=er=>{var eC,eS;switch(eC="span",eS=Ht(er),An(er).fold(()=>"skipping",ei=>"br"===eS||tj(er)&&"\uFEFF"===vr(er)?"valid":tH(er)&&gn(er,ns())?"existing":xu(er.dom)?"caret":$(a7,et=>xn(er,et))?"valid-block":um(et,eC,eS)&&um(et,Ht(ei),eC)?"valid":"invalid-child")){case"invalid-child":{d();let et=Mn(er);c(et),d();break}case"valid-block":d(),Hm(er,ei,ec,es,ed,!0);break;case"valid":{let et=ey.get().getOrThunk(()=>{let et=oi(ef);return eu.push(et),ey.set(et),et});vo(er,et)}}};return zm(et.dom,er,et=>{d(),(et=>{let er=q(et,pn);c(er)})(et)}),eu},Vm=et=>{let er=(()=>{let et={};return{register:(er,ei)=>{et[er]={name:er,settings:ei}},lookup:er=>xe(et,er).map(et=>et.settings),getNames:()=>eX(et)}})();((et,er)=>{let ei=nd(),o=et=>I.from(et.attr(ei)).bind(er.lookup),r=et=>{var er,ei;et.attr(nc(),null),et.attr(nd(),null),et.attr(nu(),null);let es=I.from(et.attr(np())).map(et=>et.split(",")).getOr([]),ed=I.from(et.attr(nf())).map(et=>et.split(",")).getOr([]);V(es,er=>et.attr(er,null));let ec=null!==(ei=null===(er=et.attr("class"))||void 0===er?void 0:er.split(" "))&&void 0!==ei?ei:[],eu=re(ec,[ns()].concat(ed));et.attr("class",eu.length>0?eu.join(" "):null),et.attr(nf(),null),et.attr(np(),null)};et.serializer.addTempAttr(nu()),et.serializer.addAttributeFilter(ei,et=>{for(let er of et)o(er).each(et=>{!1===et.persistent&&("span"===er.name?er.unwrap():r(er))})})})(et,er);let ei=((et,er)=>{let ei=Da({}),o=()=>({listeners:[],previous:za()}),r=(et,er)=>{s(et,et=>(er(et),et))},s=(et,er)=>{let es=ei.get(),ed=er(xe(es,et).getOrThunk(o));es[et]=ed,ei.set(es)},a=(er,ei)=>{V(Ja(et,er),et=>{ei?Jt(et,nu(),"true"):on(et,nu())})},es=Ha(()=>{let ei=ae(er.getNames());V(ei,er=>{s(er,ei=>{let es=ei.previous.get();return Xa(et,I.some(er)).fold(()=>{es.each(et=>{r(er,et=>{V(et.listeners,et=>et(!1,er))}),ei.previous.clear(),a(et,!1)})},({uid:et,name:er,elements:ed})=>{Pt(es,et)||(es.each(et=>a(et,!1)),r(er,ei=>{V(ei.listeners,ei=>ei(!0,er,{uid:et,nodes:q(ed,et=>et.dom)}))}),ei.previous.set(et),a(et,!0))}),{previous:ei.previous,listeners:ei.listeners}})})},30);return et.on("remove",()=>{es.cancel()}),et.on("NodeChange",()=>{es.throttle()}),{addListener:(et,er)=>{s(et,et=>({previous:et.previous,listeners:et.listeners.concat([er])}))}}})(et,er),es=Xt("span"),r=et=>{V(et,et=>{es(et)?xo(et):(et=>{fn(et,ns()),on(et,`${nc()}`),on(et,`${nd()}`),on(et,`${nu()}`);let er=tn(et,`${np()}`).map(et=>et.split(",")).getOr([]),ei=tn(et,`${nf()}`).map(et=>et.split(",")).getOr([]);V(er,er=>on(et,er)),V(ei,er=>{fn(et,er)}),on(et,`${nf()}`),on(et,`${np()}`)})(et)})};return{register:(et,ei)=>{er.register(et,ei)},annotate:(ei,es)=>{er.lookup(ei).each(er=>{((et,er,ei,es)=>{et.undoManager.transact(()=>{let ed=et.selection,ec=ed.getRng(),eu=Yu(et).length>0,ef=ti("mce-annotation");if(ec.collapsed&&!eu&&((et,er)=>{let ei=Um(et.dom,er,[{inline:"span"}]);er.setStart(ei.startContainer,ei.startOffset),er.setEnd(ei.endContainer,ei.endOffset),et.selection.setRng(er)})(et,ec),ed.getRng().collapsed&&!eu){let ec=$m(et.getDoc(),ef,es,er,ei.decorate);So(ec,"\xa0"),ed.getRng().insertNode(ec.dom),ed.select(ec.dom)}else om(ed,!1,()=>{nm(et,ed=>{qm(et,ed,ef,er,ei.decorate,es)})})})})(et,ei,er,es)})},annotationChanged:(et,er)=>{ei.addListener(et,er)},remove:er=>{Xa(et,I.some(er)).each(({elements:er})=>{let ei=et.selection.getBookmark();r(er),et.selection.moveToBookmark(ei)})},removeAll:er=>{let ei=et.selection.getBookmark();ge(Za(et,er),(et,er)=>{r(et)}),et.selection.moveToBookmark(ei)},getAll:er=>{let ei=Za(et,er);return pe(ei,et=>q(et,et=>et.dom))}}},Wm=et=>({getBookmark:O(Du,et),moveToBookmark:O(Pu,et)});Wm.isBookmarkNode=Lu;let Km=(et,er,ei)=>!ei.collapsed&&$(ei.getClientRects(),ei=>et>=ei.left&&et<=ei.right&&er>=ei.top&&er<=ei.bottom),Gm=(et,er,ei)=>{et.dispatch(er,ei)},Ym=(et,er,ei,es)=>{et.dispatch("FormatApply",{format:er,node:ei,vars:es})},Xm=(et,er,ei,es)=>{et.dispatch("FormatRemove",{format:er,node:ei,vars:es})},Qm=(et,er)=>et.dispatch("SetContent",er),Jm=(et,er)=>et.dispatch("GetContent",er),Zm=(et,er)=>et.dispatch("PastePlainTextToggle",{state:er}),lr={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:et=>et.shiftKey||et.ctrlKey||et.altKey||lr.metaKeyPressed(et),metaKeyPressed:et=>tF.os.isMacOS()||tF.os.isiOS()?et.metaKey:et.ctrlKey&&!et.altKey},ls="data-mce-selected",ld=Math.abs,lc=Math.round,lp={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},sf=(et,er)=>{let ei,es,ed,ec,eu,ef,ey,eC,eS,e_,eR,eI,eL,eB,eD;let eP=er.dom,eF=er.getDoc(),eM=document,ez=er.getBody(),x=et=>C(et)&&(t8(et)||eP.is(et,"figure.image")),k=et=>t7(et)||eP.hasClass(et,"mce-preview-object"),E=et=>{let ei=et.target;((et,er)=>{if("longpress"===et.type||0===et.type.indexOf("touch")){let ei=et.touches[0];return x(et.target)&&!Km(ei.clientX,ei.clientY,er)}return x(et.target)&&!Km(et.clientX,et.clientY,er)})(et,er.selection.getRng())&&!et.isDefaultPrevented()&&er.selection.select(ei)},S=et=>eP.hasClass(et,"mce-preview-object")&&C(et.firstElementChild)?[et,et.firstElementChild]:eP.is(et,"figure.image")?[et.querySelector("img")]:[et],_=et=>{let ei=oR(er);return!!ei&&"false"!==et.getAttribute("data-mce-resize")&&et!==er.getBody()&&(eP.hasClass(et,"mce-preview-object")&&C(et.firstElementChild)?xn(pn(et.firstElementChild),ei):xn(pn(et),ei))},N=(et,ei,es)=>{if(C(es)){let ed=S(et);V(ed,et=>{et.style[ei]||!er.schema.isValid(et.nodeName.toLowerCase(),ei)?eP.setStyle(et,ei,es):eP.setAttrib(et,ei,""+es)})}},R=(et,er,ei)=>{N(et,"width",er),N(et,"height",ei)},A=et=>{let eu,eF,eM,eV;eu=et.screenX-ef,eF=et.screenY-ey,eI=eu*ec[2]+eC,eL=eF*ec[3]+eS,eI=eI<5?5:eI,eL=eL<5?5:eL,((x(ei)||k(ei))&&!1!==oI(er)?!lr.modifierPressed(et):lr.modifierPressed(et))&&(ld(eu)>ld(eF)?(eL=lc(eI*e_),eI=lc(eL/e_)):(eI=lc(eL/e_),eL=lc(eI*e_))),R(es,eI,eL),eM=ec.startPos.x+eu,eV=ec.startPos.y+eF,eM=eM>0?eM:0,eV=eV>0?eV:0,eP.setStyles(ed,{left:eM,top:eV,display:"block"}),ed.innerHTML=eI+" &times; "+eL,ec[2]<0&&es.clientWidth<=eI&&eP.setStyle(es,"left",(void 0)+(eC-eI)),ec[3]<0&&es.clientHeight<=eL&&eP.setStyle(es,"top",(void 0)+(eS-eL)),(eu=ez.scrollWidth-eB)+(eF=ez.scrollHeight-eD)!=0&&eP.setStyles(ed,{left:eM-eu,top:eV-eF}),eR||(((et,er,ei,es,ed)=>{et.dispatch("ObjectResizeStart",{target:er,width:ei,height:es,origin:ed})})(er,ei,eC,eS,"corner-"+ec.name),eR=!0)},O=()=>{let et=eR;eR=!1,et&&(N(ei,"width",eI),N(ei,"height",eL)),eP.unbind(eF,"mousemove",A),eP.unbind(eF,"mouseup",O),eM!==eF&&(eP.unbind(eM,"mousemove",A),eP.unbind(eM,"mouseup",O)),eP.remove(es),eP.remove(ed),eP.remove(eu),T(ei),et&&(((et,er,ei,es,ed)=>{et.dispatch("ObjectResized",{target:er,width:ei,height:es,origin:ed})})(er,ei,eI,eL,"corner-"+ec.name),eP.setAttrib(ei,"style",eP.getAttrib(ei,"style"))),er.nodeChanged()},T=et=>{M();let eR=eP.getPos(et,ez),eV=eR.x,eU=eR.y,eH=et.getBoundingClientRect(),ej=eH.width||eH.right-eH.left,e$=eH.height||eH.bottom-eH.top;ei!==et&&(D(),ei=et,eI=eL=0);let eq=er.dispatch("ObjectSelected",{target:et});_(et)&&!eq.isDefaultPrevented()?ge(lp,(et,er)=>{let eR=eP.get("mceResizeHandle"+er);eR&&eP.remove(eR),eR=eP.add(ez,"div",{id:"mceResizeHandle"+er,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+er+"-resize; margin:0; padding:0"}),eP.bind(eR,"mousedown",eR=>{eR.stopImmediatePropagation(),eR.preventDefault(),(eR=>{var eI;let eL=S(ei)[0];ef=eR.screenX,ey=eR.screenY,eC=eL.clientWidth,e_=(eS=eL.clientHeight)/eC,(ec=et).name=er,ec.startPos={x:ej*et[0]+eV,y:e$*et[1]+eU},eB=ez.scrollWidth,eD=ez.scrollHeight,eu=eP.add(ez,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),eP.setStyles(eu,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),es=k(eI=ei)?eP.create("img",{src:tF.transparentSrc}):eI.cloneNode(!0),eP.addClass(es,"mce-clonedresizable"),eP.setAttrib(es,"data-mce-bogus","all"),es.contentEditable="false",eP.setStyles(es,{left:eV,top:eU,margin:0}),R(es,ej,e$),es.removeAttribute(ls),ez.appendChild(es),eP.bind(eF,"mousemove",A),eP.bind(eF,"mouseup",O),eM!==eF&&(eP.bind(eM,"mousemove",A),eP.bind(eM,"mouseup",O)),ed=eP.add(ez,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},eC+" &times; "+eS)})(eR)}),et.elm=eR,eP.setStyles(eR,{left:ej*et[0]+eV-eR.offsetWidth/2,top:e$*et[1]+eU-eR.offsetHeight/2})}):D(!1)},eV=ja(T,0),D=(et=!0)=>{eV.cancel(),M(),ei&&et&&ei.removeAttribute(ls),ge(lp,(et,er)=>{let ei=eP.get("mceResizeHandle"+er);ei&&(eP.unbind(ei),eP.remove(ei))})},P=(et,er)=>eP.isChildOf(et,er),L=ei=>{if(eR||er.removed||er.composing)return;let es="mousedown"===ei.type?ei.target:et.getNode(),ed=to(pn(es),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(et=>et.dom).filter(et=>eP.isEditable(et.parentElement)).getOrUndefined(),ec=C(ed)?eP.getAttrib(ed,ls,"1"):"1";if(V(eP.select(`img[${ls}],hr[${ls}]`),et=>{et.removeAttribute(ls)}),C(ed)&&P(ed,ez)&&er.hasFocus()){I();let er=et.getStart(!0);if(P(er,ed)&&P(et.getEnd(!0),ed))return eP.setAttrib(ed,ls,ec),void eV.throttle(ed)}D()},M=()=>{ge(lp,et=>{et.elm&&(eP.unbind(et.elm),delete et.elm)})},I=()=>{try{er.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(et){}};return er.on("init",()=>{I(),er.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",L),er.on("keyup compositionend",et=>{ei&&"TABLE"===ei.nodeName&&L(et)}),er.on("hide blur",D),er.on("contextmenu longpress",E,!0)}),er.on("remove",M),{isResizable:_,showResizeRect:T,hideResizeRect:D,updateResizeRect:L,destroy:()=>{eV.cancel(),ei=es=eu=null}}},af=(et,er,ei)=>{let es=et.document.createRange();return er.fold(et=>{es.setStartBefore(et.dom)},(et,er)=>{es.setStart(et.dom,er)},et=>{es.setStartAfter(et.dom)}),((et,er)=>{er.fold(er=>{et.setEndBefore(er.dom)},(er,ei)=>{et.setEnd(er.dom,ei)},er=>{et.setEndAfter(er.dom)})})(es,ei),es},lf=(et,er,ei,es,ed)=>{let ec=et.document.createRange();return ec.setStart(er.dom,ei),ec.setEnd(es.dom,ed),ec},ly=al([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),cf=(et,er,ei)=>er(pn(ei.startContainer),ei.startOffset,pn(ei.endContainer),ei.endOffset);ly.ltr,ly.rtl;let uf=(et,er,ei,es)=>({start:et,soffset:er,finish:ei,foffset:es}),lw=document.caretPositionFromPoint?(et,er,ei)=>{var es,ed;return I.from(null===(ed=(es=et.dom).caretPositionFromPoint)||void 0===ed?void 0:ed.call(es,er,ei)).bind(er=>{if(null===er.offsetNode)return I.none();let ei=et.dom.createRange();return ei.setStart(er.offsetNode,er.offset),ei.collapse(),I.some(ei)})}:document.caretRangeFromPoint?(et,er,ei)=>{var es,ed;return I.from(null===(ed=(es=et.dom).caretRangeFromPoint)||void 0===ed?void 0:ed.call(es,er,ei))}:I.none,lO=al([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),lI={before:lO.before,on:lO.on,after:lO.after,cata:(et,er,ei,es)=>et.fold(er,ei,es),getStart:et=>et.fold(R,R,R)},lL=al([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),lB={domRange:lL.domRange,relative:lL.relative,exact:lL.exact,exactFromRange:et=>lL.exact(et.start,et.soffset,et.finish,et.foffset),getWin:et=>{let er=et.match({domRange:et=>pn(et.startContainer),relative:(et,er)=>lI.getStart(et),exact:(et,er,ei,es)=>et});return Rn(er)},range:uf},bf=(et,er)=>{let ei=Ht(et);return"input"===ei?lI.after(et):H(["br","img"],ei)?0===er?lI.before(et):lI.after(et):lI.on(et,er)},vf=(et,er)=>{let ei=et.fold(lI.before,bf,lI.after),es=er.fold(lI.before,bf,lI.after);return lB.relative(ei,es)},yf=(et,er,ei,es)=>{let ed=bf(et,er),ec=bf(ei,es);return lB.relative(ed,ec)},Cf=(et,er)=>{let ei=(er||document).createDocumentFragment();return V(et,et=>{ei.appendChild(et.dom)}),pn(ei)},wf=et=>{let er=lB.getWin(et).dom,n=(et,ei,es,ed)=>lf(er,et,ei,es,ed),ei=et.match({domRange:et=>{let er=pn(et.startContainer),ei=pn(et.endContainer);return yf(er,et.startOffset,ei,et.endOffset)},relative:vf,exact:yf});return((et,er)=>{let ei=er.match({domRange:et=>({ltr:N(et),rtl:I.none}),relative:(er,ei)=>({ltr:Pe(()=>af(et,er,ei)),rtl:Pe(()=>I.some(af(et,ei,er)))}),exact:(er,ei,es,ed)=>({ltr:Pe(()=>lf(et,er,ei,es,ed)),rtl:Pe(()=>I.some(lf(et,es,ed,er,ei)))})});return((et,er)=>{let ei=er.ltr();return ei.collapsed?er.rtl().filter(et=>!1===et.collapsed).map(et=>ly.rtl(pn(et.endContainer),et.endOffset,pn(et.startContainer),et.startOffset)).getOrThunk(()=>cf(0,ly.ltr,ei)):cf(0,ly.ltr,ei)})(0,ei)})(er,ei).match({ltr:n,rtl:n})},xf=(et,er,ei)=>((et,er,ei)=>{let es=pn(et.document);return lw(es,er,ei).map(et=>uf(pn(et.startContainer),et.startOffset,pn(et.endContainer),et.endOffset))})(Rn(pn(ei)).dom,et,er).map(et=>{let er=ei.createRange();return er.setStart(et.start.dom,et.soffset),er.setEnd(et.finish.dom,et.foffset),er}).getOrUndefined(),kf=(et,er)=>C(et)&&C(er)&&et.startContainer===er.startContainer&&et.startOffset===er.startOffset&&et.endContainer===er.endContainer&&et.endOffset===er.endOffset,Ef=(et,er,ei)=>null!==((et,er,ei)=>{let es=et;for(;es&&es!==er;){if(ei(es))return es;es=es.parentNode}return null})(et,er,ei),Sf=(et,er,ei)=>Ef(et,er,et=>et.nodeName===ei),_f=(et,er)=>$r(et)&&!Ef(et,er,xu),Nf=(et,er,ei)=>{let es=er.parentNode;if(es){let ed;let ec=new zo(er,et.getParent(es,et.isBlock)||et.getRoot());for(;ed=ec[ei?"prev":"next"]();)if(t3(ed))return!0}return!1},Rf=(et,er,ei,es,ed)=>{let ec,eu;let ef=et.getRoot(),ey=et.schema.getNonEmptyElements(),eC=ed.parentNode;if(!eC)return I.none();let eS=et.getParent(eC,et.isBlock)||ef;if(es&&t3(ed)&&er&&et.isEmpty(eS))return I.some(Li(eC,et.nodeIndex(ed)));let e_=new zo(ed,eS);for(;eu=e_[es?"prev":"next"]();){if("false"===et.getContentEditableParent(eu)||_f(eu,ef))return I.none();if(tJ(eu)&&eu.data.length>0)return Sf(eu,ef,"A")?I.none():I.some(Li(eu,es?eu.data.length:0));if(et.isBlock(eu)||ey[eu.nodeName.toLowerCase()])return I.none();ec=eu}return t0(ec)?I.none():ei&&ec?I.some(Li(ec,0)):I.none()},Af=(et,er,ei,es)=>{var ed;let ec=et.getRoot(),eu,ef=!1,ey=ei?es.startContainer:es.endContainer,eC=ei?es.startOffset:es.endOffset,eS=tY(ey)&&eC===ey.childNodes.length,e_=et.schema.getNonEmptyElements(),eR=ei;if($r(ey))return I.none();if(tY(ey)&&eC>ey.childNodes.length-1&&(eR=!1),t1(ey)&&(ey=ec,eC=0),ey===ec){if(eR&&(eu=ey.childNodes[eC>0?eC-1:0])&&($r(eu)||e_[eu.nodeName]||Yo(eu)))return I.none();if(ey.hasChildNodes()){if(eC=Math.min(!eR&&eC>0?eC-1:eC,ey.childNodes.length-1),eC=tJ(ey=ey.childNodes[eC])&&eS?ey.data.length:0,!er&&ey===ec.lastChild&&Yo(ey)||((et,er)=>{let ei=er;for(;ei&&ei!==et;){if(t6(ei))return!0;ei=ei.parentNode}return!1})(ec,ey)||$r(ey))return I.none();if(ey.hasChildNodes()&&!Yo(ey)){eu=ey;let er=new zo(ey,ec);do{if(t6(eu)||$r(eu)){ef=!1;break}if(tJ(eu)&&eu.data.length>0){eC=eR?0:eu.data.length,ey=eu,ef=!0;break}if(e_[eu.nodeName.toLowerCase()]&&!t4(eu)){eC=et.nodeIndex(eu),ey=eu.parentNode,eR||eC++,ef=!0;break}}while(eu=eR?er.next():er.prev())}}}return er&&(tJ(ey)&&0===eC&&Rf(et,eS,er,!0,ey).each(et=>{ey=et.container(),eC=et.offset(),ef=!0}),tY(ey)&&((eu=ey.childNodes[eC])||(eu=ey.childNodes[eC-1]),!eu||!t3(eu)||"A"===(null===(ed=eu.previousSibling)||void 0===ed?void 0:ed.nodeName)||Nf(et,eu,!1)||Nf(et,eu,!0)||Rf(et,eS,er,!0,eu).each(et=>{ey=et.container(),eC=et.offset(),ef=!0}))),eR&&!er&&tJ(ey)&&eC===ey.data.length&&Rf(et,eS,er,!1,ey).each(et=>{ey=et.container(),eC=et.offset(),ef=!0}),ef&&ey?I.some(Li(ey,eC)):I.none()},Of=(et,er)=>{let ei=er.collapsed,es=er.cloneRange(),ed=Li.fromRangeStart(er);return Af(et,ei,!0,es).each(et=>{ei&&Li.isAbove(ed,et)||es.setStart(et.container(),et.offset())}),ei||Af(et,ei,!1,es).each(et=>{es.setEnd(et.container(),et.offset())}),ei&&es.collapse(!0),kf(er,es)?I.none():I.some(es)},Tf=(et,er)=>et.splitText(er),Bf=et=>{let er=et.startContainer,ei=et.startOffset,es=et.endContainer,ed=et.endOffset;if(er===es&&tJ(er)){if(ei>0&&ei<er.data.length){if(er=(es=Tf(er,ei)).previousSibling,ed>ei){ed-=ei;let et=Tf(es,ed).previousSibling;er=es=et,ed=et.data.length,ei=0}else ed=0}}else if(tJ(er)&&ei>0&&ei<er.data.length&&(er=Tf(er,ei),ei=0),tJ(es)&&ed>0&&ed<es.data.length){let et=Tf(es,ed).previousSibling;es=et,ed=et.data.length}return{startContainer:er,startOffset:ei,endContainer:es,endOffset:ed}},Df=et=>({walk:(er,ei)=>zm(et,er,ei),split:Bf,expand:(er,ei={type:"word"})=>{if("word"===ei.type){let ei=Um(et,er,[{inline:"span"}]),es=et.createRng();return es.setStart(ei.startContainer,ei.startOffset),es.setEnd(ei.endContainer,ei.endOffset),es}return er},normalize:er=>Of(et,er).fold(e$,et=>(er.setStart(et.startContainer,et.startOffset),er.setEnd(et.endContainer,et.endOffset),!0))});Df.compareRanges=kf,Df.getCaretRangeFromPoint=xf,Df.getSelectedNode=gi,Df.getNode=pi;let lD=((et,er)=>{let n=er=>{let ei=(et=>{let er=et.dom;return Yn(et)?er.getBoundingClientRect().height:er.offsetHeight})(er);if(ei<=0||null===ei){let ei=lo(er,et);return parseFloat(ei)||0}return ei},o=(et,er)=>X(er,(er,ei)=>{let es=lo(et,ei),ed=void 0===es?0:parseInt(es,10);return isNaN(ed)?er:er+ed},0);return{set:(er,ei)=>{if(!ej(ei)&&!ei.match(/^[0-9]+$/))throw Error(et+".set accepts only positive integer values. Value was "+ei);let es=er.dom;ro(es)&&(es.style[et]=ei+"px")},get:n,getOuter:n,aggregate:o,max:(et,er,ei)=>{let es=o(et,ei);return er>es?er-es:0}}})("height"),Lf=()=>pn(document),Mf=(et,er)=>et.view(er).fold(N([]),er=>{let ei=et.owner(er),es=Mf(et,ei);return[er].concat(es)});var lP=Object.freeze({__proto__:null,view:et=>{var er;return(et.dom===document?I.none():I.from(null===(er=et.dom.defaultView)||void 0===er?void 0:er.frameElement)).map(pn)},owner:et=>Nn(et)});let Ff=et=>"textarea"===Ht(et),Uf=(et,er)=>{let ei=(et=>{let er=et.dom.ownerDocument,ei=er.body,es=er.defaultView,ed=er.documentElement;if(ei===et.dom)return Ro(ei.offsetLeft,ei.offsetTop);let ec=Oo(null==es?void 0:es.pageYOffset,ed.scrollTop),eu=Oo(null==es?void 0:es.pageXOffset,ed.scrollLeft),ef=Oo(ed.clientTop,ei.clientTop),ey=Oo(ed.clientLeft,ei.clientLeft);return To(et).translate(eu-ey,ec-ef)})(et),es=lD.get(et);return{element:et,bottom:ei.top+es,height:es,pos:ei,cleanup:er}},zf=(et,er,ei,es)=>{qf(et,(ed,ec)=>Hf(et,er,ei,es),ei)},jf=(et,er,ei,es,ed)=>{let ec={elm:es.element.dom,alignToTop:ed};et.dispatch("ScrollIntoView",ec).isDefaultPrevented()||(ei(et,er,Bo(er).top,es,ed),((et,er)=>{et.dispatch("AfterScrollIntoView",er)})(et,ec))},Hf=(et,er,ei,es)=>{let ed=pn(et.getBody()),ec=pn(et.getDoc());ed.dom.offsetWidth;let eu=((et,er)=>{let ei=((et,er)=>{let ei=Mn(et);if(0===ei.length||Ff(et))return{element:et,offset:er};if(er<ei.length&&!Ff(ei[er]))return{element:ei[er],offset:0};{let es=ei[ei.length-1];return Ff(es)?{element:et,offset:er}:"img"===Ht(es)?{element:es,offset:1}:tj(es)?{element:es,offset:vr(es).length}:{element:es,offset:Mn(es).length}}})(et,er),es=hn('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return go(ei.element,es),Uf(es,()=>wo(es))})(pn(ei.startContainer),ei.startOffset);jf(et,ec,er,eu,es),eu.cleanup()},$f=(et,er,ei,es)=>{let ed=pn(et.getDoc());jf(et,ed,ei,Uf(pn(er),E),es)},qf=(et,er,ei)=>{let es=ei.startContainer,ed=ei.startOffset,ec=ei.endContainer,eu=ei.endOffset;er(pn(es),pn(ec));let ef=et.dom.createRng();ef.setStart(es,ed),ef.setEnd(ec,eu),et.selection.setRng(ei)},Vf=(et,er,ei,es,ed)=>{let ec=er.pos;if(es)Do(ec.left,ec.top,ed);else{let es=ec.top-ei+er.height;Do(-et.getBody().getBoundingClientRect().left,es,ed)}},Wf=(et,er,ei,es,ed,ec)=>{let eu=es+ei,ef=ed.pos.top,ey=ed.bottom,eC=ey-ef>=es;ef<ei?Vf(et,ed,es,!1!==ec,er):ef>eu?Vf(et,ed,es,eC?!1!==ec:!0===ec,er):ey>eu&&!eC&&Vf(et,ed,es,!0===ec,er)},Kf=(et,er,ei,es,ed)=>{let ec=Rn(er).dom.innerHeight;Wf(et,er,ei,ec,es,ed)},Gf=(et,er,ei,es,ed)=>{let ec=Rn(er).dom.innerHeight;Wf(et,er,ei,ec,es,ed);let eu=(et=>{let er=Lf(),ei=Bo(er),es=((et,er)=>{let ei=er.owner(et);return Mf(er,ei)})(et,lP),ed=To(et),ec=Y(es,(et,er)=>{let ei=To(er);return{left:et.left+ei.left,top:et.top+ei.top}},{left:0,top:0});return Ro(ec.left+ed.left+ei.left,ec.top+ed.top+ei.top)})(es.element),ef=Mo(window);eu.top<ef.y?Po(es.element,!1!==ed):eu.top>ef.bottom&&Po(es.element,!0===ed)},Yf=(et,er,ei)=>zf(et,Kf,er,ei),Xf=(et,er,ei)=>$f(et,er,Kf,ei),Qf=(et,er,ei)=>zf(et,Gf,er,ei),Jf=(et,er,ei)=>$f(et,er,Gf,ei),Zf=(et,er,ei)=>{(et.inline?Yf:Qf)(et,er,ei)},eg=et=>et.dom.focus(),tg=et=>{let er=tK(et).dom;return et.dom===er.activeElement},ng=(et=Lf())=>I.from(et.dom.activeElement).map(pn),og=(et,er)=>{let ei=tj(er)?vr(er).length:Mn(er).length+1;return et>ei?ei:et<0?0:et},rg=et=>lB.range(et.start,og(et.soffset,et.start),et.finish,og(et.foffset,et.finish)),sg=(et,er)=>!Ho(er.dom)&&(Sn(et,er)||En(et,er)),ag=et=>er=>sg(et,er.start)&&sg(et,er.finish),ig=et=>lB.range(pn(et.startContainer),et.startOffset,pn(et.endContainer),et.endOffset),lg=et=>{let er=document.createRange();try{return er.setStart(et.start.dom,et.soffset),er.setEnd(et.finish.dom,et.foffset),I.some(er)}catch(et){return I.none()}},dg=et=>{var er;let ei=et.inline||tF.browser.isFirefox()?(et=>{let er=et.getSelection();return(er&&0!==er.rangeCount?I.from(er.getRangeAt(0)):I.none()).map(ig)})(Rn(er=pn(et.getBody())).dom).filter(ag(er)):I.none();et.bookmark=ei.isSome()?ei:et.bookmark},cg=et=>(et.bookmark?et.bookmark:I.none()).bind(er=>{var ei;return ei=pn(et.getBody()),I.from(er).filter(ag(ei)).map(rg)}).bind(lg),lF={isEditorUIElement:et=>{let er=et.className.toString();return -1!==er.indexOf("tox-")||-1!==er.indexOf("mce-")}},lM={setEditorTimeout:(et,er,ei)=>{var es;return ej(es=ei)||(es=0),setTimeout(()=>{et.removed||er()},es)},setEditorInterval:(et,er,ei)=>{var es;let ed=(ej(es=ei)||(es=0),setInterval(()=>{et.removed?clearInterval(ed):er()},es));return ed}},lz=Oa.DOM,pg=et=>{let er=et.classList;return void 0!==er&&(er.contains("tox-edit-area")||er.contains("tox-edit-area__iframe")||er.contains("mce-content-body"))},hg=(et,er)=>{let ei=oq(et),es=lz.getParent(er,er=>tY(er)&&lF.isEditorUIElement(er)||!!ei&&et.dom.is(er,ei));return null!==es},bg=et=>{try{let er=tK(pn(et.getElement()));return ng(er).fold(()=>document.body,et=>et.dom)}catch(et){return document.body}},vg=(er,ei)=>{let es=ei.editor;(et=>{let er=ja(()=>{dg(et)},0);et.on("init",()=>{et.inline&&((et,er)=>{let n=()=>{er.throttle()};Oa.DOM.bind(document,"mouseup",n),et.on("remove",()=>{Oa.DOM.unbind(document,"mouseup",n)})})(et,er),((et,er)=>{et.on("mouseup touchend",et=>{er.throttle()})})(et,er),et.on("keyup NodeChange AfterSetSelectionRange",er=>{"nodechange"===er.type&&er.selectionChange||dg(et)})}),et.on("remove",()=>{er.cancel()})})(es);let o=(et,er)=>{aW(et)&&!0!==et.inline&&er(pn(et.getContainer()),"tox-edit-focus")};es.on("focusin",()=>{let et=er.focusedEditor;pg(bg(es))&&o(es,un),et!==es&&(et&&et.dispatch("blur",{focusedEditor:es}),er.setActive(es),er.focusedEditor=es,es.dispatch("focus",{blurredEditor:et}),es.focus(!0))}),es.on("focusout",()=>{lM.setEditorTimeout(es,()=>{let et=er.focusedEditor;pg(bg(es))&&et===es||o(es,fn),hg(es,bg(es))||et!==es||(es.dispatch("blur",{focusedEditor:null}),er.focusedEditor=null)})}),et||(et=et=>{let ei=er.activeEditor;ei&&Kn(et).each(et=>{et.ownerDocument===document&&(et===document.body||hg(ei,et)||er.focusedEditor!==ei||(ei.dispatch("blur",{focusedEditor:null}),er.focusedEditor=null))})},lz.bind(document,"focusin",et))},yg=(er,ei)=>{er.focusedEditor===ei.editor&&(er.focusedEditor=null),!er.activeEditor&&et&&(lz.unbind(document,"focusin",et),et=null)},Cg=(et,er)=>{var ei;(ei=pn(et.getBody()),(er.collapsed?I.from(pi(er.startContainer,er.startOffset)).map(pn):I.none()).bind(et=>rA(et)?I.some(et):Sn(ei,et)?I.none():I.some(ei))).bind(et=>a8(et.dom)).fold(()=>{et.selection.normalize()},er=>et.selection.setRng(er.toRange()))},wg=et=>{if(et.setActive)try{et.setActive()}catch(er){et.focus()}else et.focus()},xg=et=>et.inline?(et=>{var er;let ei=et.getBody();return ei&&(tg(er=pn(ei))||ng(tK(er)).filter(et=>er.dom.contains(et.dom)).isSome())})(et):C(et.iframeElement)&&tg(pn(et.iframeElement)),kg=et=>et.editorManager.setActive(et),Eg=(et,er,ei,es,ed)=>{let ec=ei?er.startContainer:er.endContainer,eu=ei?er.startOffset:er.endOffset;return I.from(ec).map(pn).map(et=>es&&er.collapsed?et:In(et,ed(et,eu)).getOr(et)).bind(et=>tH(et)?I.some(et):An(et).filter(tH)).map(et=>et.dom).getOr(et)},Sg=(et,er,ei=!1)=>Eg(et,er,!0,ei,(et,er)=>Math.min(zn(et),er)),_g=(et,er,ei=!1)=>Eg(et,er,!1,ei,(et,er)=>er>0?er-1:er),Ng=(et,er)=>{let ei=et;for(;et&&tJ(et)&&0===et.length;)et=er?et.nextSibling:et.previousSibling;return et||ei},Rg=(et,er)=>q(er,er=>{let ei=et.dispatch("GetSelectionRange",{range:er});return ei.range!==er?ei.range:er}),lV=["img","br"],Og=et=>{let er=yr(et).filter(et=>0!==et.trim().length||et.indexOf("\xa0")>-1).isSome();return er||H(lV,Ht(et))||Vt(et)&&"false"===en(et,"contenteditable")},lU="[data-mce-autocompleter]",Bg=(et,er)=>{if(Dg(pn(et.getBody())).isNone()){let ei=hn('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',et.getDoc());bo(ei,pn(er.extractContents())),er.insertNode(ei.dom),An(ei).each(et=>et.dom.normalize()),((et,er)=>{let n=et=>{let ei=Mn(et);for(let et=ei.length-1;et>=0;et--){let es=ei[et];if(er(es))return I.some(es);let ed=n(es);if(ed.isSome())return ed}return I.none()};return n(et)})(ei,Og).map(er=>{et.selection.setCursorLocation(er.dom,"img"===Ht(er)?1:yr(er).fold(()=>Mn(er).length,et=>et.length))})}},Dg=et=>eo(et,lU),lH={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Lg=(et,er,ei)=>{let es=ei?"lastChild":"firstChild",ed=ei?"prev":"next";if(et[es])return et[es];if(et!==er){let ei=et[ed];if(ei)return ei;for(let es=et.parent;es&&es!==er;es=es.parent)if(ei=es[ed])return ei}},Mg=et=>{var er;let ei=null!==(er=et.value)&&void 0!==er?er:"";if(!ds(ei))return!1;let es=et.parent;return!es||"span"===es.name&&!es.attr("style")||!/^[ ]+$/.test(ei)},Ig=et=>{let er="a"===et.name&&!et.attr("href")&&et.attr("id");return et.attr("name")||et.attr("id")&&!et.firstChild||et.attr("data-mce-bookmark")||er};let Fg=class Fg{static create(et,er){let ei=new Fg(et,lH[et]||1);return er&&ge(er,(et,er)=>{ei.attr(er,et)}),ei}constructor(et,er){this.name=et,this.type=er,1===er&&(this.attributes=[],this.attributes.map={})}replace(et){return et.parent&&et.remove(),this.insert(et,this),this.remove(),this}attr(et,er){let ei=this;if(!eP(et))return C(et)&&ge(et,(et,er)=>{ei.attr(er,et)}),ei;let es=ei.attributes;if(es){if(void 0!==er){if(null===er){if(et in es.map){delete es.map[et];let er=es.length;for(;er--;)if(es[er].name===et)return es.splice(er,1),ei}return ei}if(et in es.map){let ei=es.length;for(;ei--;)if(es[ei].name===et){es[ei].value=er;break}}else es.push({name:et,value:er});return es.map[et]=er,ei}return es.map[et]}}clone(){let et=new Fg(this.name,this.type),er=this.attributes;if(er){let ei=[];ei.map={};for(let et=0,es=er.length;et<es;et++){let es=er[et];"id"!==es.name&&(ei[ei.length]={name:es.name,value:es.value},ei.map[es.name]=es.value)}et.attributes=ei}return et.value=this.value,et}wrap(et){return this.parent&&(this.parent.insert(et,this),et.append(this)),this}unwrap(){for(let et=this.firstChild;et;){let er=et.next;this.insert(et,this,!0),et=er}this.remove()}remove(){let et=this.parent,er=this.next,ei=this.prev;return et&&(et.firstChild===this?(et.firstChild=er,er&&(er.prev=null)):ei&&(ei.next=er),et.lastChild===this?(et.lastChild=ei,ei&&(ei.next=null)):er&&(er.prev=ei),this.parent=this.next=this.prev=null),this}append(et){et.parent&&et.remove();let er=this.lastChild;return er?(er.next=et,et.prev=er,this.lastChild=et):this.lastChild=this.firstChild=et,et.parent=this,et}insert(et,er,ei){et.parent&&et.remove();let es=er.parent||this;return ei?(er===es.firstChild?es.firstChild=et:er.prev&&(er.prev.next=et),et.prev=er.prev,et.next=er,er.prev=et):(er===es.lastChild?es.lastChild=et:er.next&&(er.next.prev=et),et.next=er.next,et.prev=er,er.next=et),et.parent=es,et}getAll(et){let er=[];for(let ei=this.firstChild;ei;ei=Lg(ei,this))ei.name===et&&er.push(ei);return er}children(){let et=[];for(let er=this.firstChild;er;er=er.next)et.push(er);return et}empty(){if(this.firstChild){let et=[];for(let er=this.firstChild;er;er=Lg(er,this))et.push(er);let er=et.length;for(;er--;){let ei=et[er];ei.parent=ei.firstChild=ei.lastChild=ei.next=ei.prev=null}}return this.firstChild=this.lastChild=null,this}isEmpty(et,er={},ei){var es;let ed=this.firstChild;if(Ig(this))return!1;if(ed)do{if(1===ed.type){if(ed.attr("data-mce-bogus"))continue;if(et[ed.name]||Ig(ed))return!1}if(8===ed.type||3===ed.type&&!Mg(ed)||3===ed.type&&ed.parent&&er[ed.parent.name]&&ds(null!==(es=ed.value)&&void 0!==es?es:"")||ei&&ei(ed))return!1}while(ed=Lg(ed,this));return!0}walk(et){return Lg(this,null,et)}};let Ug=et=>(0===et.length?"":`${q(et,et=>`[${et}]`).join(",")},`)+'[data-mce-bogus="all"]',zg=et=>document.createTreeWalker(et,NodeFilter.SHOW_COMMENT,null),jg=(et,er)=>null!==et.querySelector(Ug(er)),Hg=(et,er)=>{V(et.querySelectorAll(Ug(er)),et=>{let ei=pn(et);"all"===en(ei,"data-mce-bogus")?wo(ei):V(er,et=>{nn(ei,et)&&on(ei,et)})})},$g=et=>et.cloneNode(!0),qg=(et,er)=>{let ei=et;return null!==zg(et).nextNode()?((et=>{let er=zg(et),ei=er.nextNode();for(;null!==ei;){let et=er.currentNode;ei=er.nextNode(),eP(et.nodeValue)&&et.nodeValue.includes("\uFEFF")&&wo(pn(et))}})(ei=$g(et)),jg(ei,er)&&Hg(ei,er)):jg(et,er)&&Hg(ei=$g(et),er),ei},Vg=et=>{let er=Fo(et,"[data-mce-bogus]");V(er,et=>{"all"===en(et,"data-mce-bogus")?wo(et):Er(et)?(go(et,vn("\uFEFF")),wo(et)):xo(et)})},Wg=et=>{let er=Fo(et,"input");V(er,et=>{on(et,"name")})},Kg=(et,er,ei)=>{let es;return es="raw"===er.format?tz.trim(Fr(qg(ei,et.serializer.getTempAttrs()).innerHTML)):"text"===er.format?((et,er)=>{let ei=et.getDoc(),es=tK(pn(et.getBody())),ed=bn("div",ei);Jt(ed,"data-mce-bogus","all"),io(ed,{position:"fixed",left:"-9999999px",top:"0"}),So(ed,er.innerHTML),Vg(ed),Wg(ed);let ec=jn(es)?es:pn(Nn(es).dom.body);bo(ec,ed);let eu=Fr(ed.dom.innerText);return wo(ed),eu})(et,ei):"tree"===er.format?et.serializer.serialize(ei,er):((et,er)=>{let ei=nX(et),es=RegExp(`^(<${ei}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${ei}>[\r
]*|<br \\/>[\r
]*)$`);return er.replace(es,"")})(et,et.serializer.serialize(ei,er)),"text"!==er.format&&!rI(pn(ei))&&eP(es)?tz.trim(es):es},lj=tz.makeMap,Yg=et=>{let er=[],ei=(et=et||{}).indent,es=lj(et.indent_before||""),ed=lj(et.indent_after||""),ec=rQ.getEncodeFunc(et.entity_encoding||"raw",et.entities),eu="xhtml"!==et.element_format;return{start:(et,ef,ey)=>{if(ei&&es[et]&&er.length>0){let et=er[er.length-1];et.length>0&&"\n"!==et&&er.push("\n")}if(er.push("<",et),ef)for(let et=0,ei=ef.length;et<ei;et++){let ei=ef[et];er.push(" ",ei.name,'="',ec(ei.value,!0),'"')}if(er[er.length]=!ey||eu?">":" />",ey&&ei&&ed[et]&&er.length>0){let et=er[er.length-1];et.length>0&&"\n"!==et&&er.push("\n")}},end:et=>{let es;er.push("</",et,">"),ei&&ed[et]&&er.length>0&&(es=er[er.length-1]).length>0&&"\n"!==es&&er.push("\n")},text:(et,ei)=>{et.length>0&&(er[er.length]=ei?et:ec(et))},cdata:et=>{er.push("<![CDATA[",et,"]]>")},comment:et=>{er.push("<!--",et,"-->")},pi:(et,es)=>{es?er.push("<?",et," ",ec(es),"?>"):er.push("<?",et,"?>"),ei&&er.push("\n")},doctype:et=>{er.push("<!DOCTYPE",et,">",ei?"\n":"")},reset:()=>{er.length=0},getContent:()=>er.join("").replace(/\n$/,"")}},Xg=(et={},er=ca())=>{let ei=Yg(et);return et.validate=!("validate"in et)||et.validate,{serialize:es=>{let ed=et.validate,ec={3:et=>{var er;ei.text(null!==(er=et.value)&&void 0!==er?er:"",et.raw)},8:et=>{var er;ei.comment(null!==(er=et.value)&&void 0!==er?er:"")},7:et=>{ei.pi(et.name,et.value)},10:et=>{var er;ei.doctype(null!==(er=et.value)&&void 0!==er?er:"")},4:et=>{var er;ei.cdata(null!==(er=et.value)&&void 0!==er?er:"")},11:et=>{let er=et;if(er=er.firstChild)do a(er);while(er=er.next)}};ei.reset();let a=et=>{var es;let eu=ec[et.type];if(eu)eu(et);else{let ec=et.name,eu=ec in er.getVoidElements(),ef=et.attributes;if(ed&&ef&&ef.length>1){let ei=[];ei.map={};let es=er.getElementRule(et.name);if(es){for(let et=0,er=es.attributesOrder.length;et<er;et++){let er=es.attributesOrder[et];if(er in ef.map){let et=ef.map[er];ei.map[er]=et,ei.push({name:er,value:et})}}for(let et=0,er=ef.length;et<er;et++){let er=ef[et].name;if(!(er in ei.map)){let et=ef.map[er];ei.map[er]=et,ei.push({name:er,value:et})}}ef=ei}}if(ei.start(ec,ef,eu),!eu){let er=et.firstChild;if(er){"pre"!==ec&&"textarea"!==ec||3!==er.type||"\n"!==(null===(es=er.value)||void 0===es?void 0:es[0])||ei.text("\n",!0);do a(er);while(er=er.next)}ei.end(ec)}}};return 1!==es.type||et.inner?3===es.type?ec[3](es):ec[11](es):a(es),ei.getContent()}}},l$=new Set;V(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],et=>{l$.add(et)});let lq=["font","text-decoration","text-emphasis"],Zg=(et,er)=>eX(et.parseStyle(et.getAttrib(er,"style"))),ep=(et,er,ei)=>{let es=Zg(et,er),ed=Zg(et,ei),s=es=>{var ed,ec;let eu=null!==(ed=et.getStyle(er,es))&&void 0!==ed?ed:"",ef=null!==(ec=et.getStyle(ei,es))&&void 0!==ec?ec:"";return Ge(eu)&&Ge(ef)&&eu!==ef};return $(es,et=>{let t=er=>$(er,er=>er===et);if(!t(ed)&&t(lq)){let et=G(ed,et=>$(lq,er=>He(et,er)));return $(et,s)}return s(et)})},tp=(et,er,ei)=>I.from(ei.container()).filter(tJ).exists(es=>er(es.data.charAt(ei.offset()+(et?0:-1)))),lG=O(tp,!0,Fu),lW=O(tp,!1,Fu),rp=et=>{let er=et.container();return tJ(er)&&(0===er.data.length||hr(er.data)&&Wm.isBookmarkNode(er.parentNode))},sp=(et,er)=>ei=>zc(et?0:-1,ei).filter(er).isSome(),ap=et=>t8(et)&&"block"===lo(pn(et),"display"),ip=et=>t6(et)&&(!tY(et)||"all"!==et.getAttribute("data-mce-bogus")),lK=sp(!0,ap),lY=sp(!1,ap),lX=sp(!0,t7),lJ=sp(!1,t7),lQ=sp(!0,Yo),lZ=sp(!1,Yo),l0=sp(!0,ip),l1=sp(!1,ip),hp=(et,er)=>Sn(er,et)?Tn(et,et=>e$(et)||En(et,er)).slice(0,-1):[],bp=(et,er)=>[et].concat(hp(et,er)),vp=(et,er,ei)=>pu(et,er,ei,rp),yp=(et,er)=>J(bp(pn(er.container()),et),rc),Cp=(et,er,ei)=>vp(et,er.dom,ei).forall(et=>yp(er,ei).fold(()=>!Uc(et,ei,er.dom),es=>!Uc(et,ei,er.dom)&&Sn(es,pn(et.container())))),wp=(et,er,ei)=>yp(er,ei).fold(()=>vp(et,er.dom,ei).forall(et=>!Uc(et,ei,er.dom)),er=>vp(et,er.dom,ei).isNone()),l2=O(wp,!1),l3=O(wp,!0),l8=O(Cp,!1),l5=O(Cp,!0),_p=et=>Yc(et).exists(Er),Np=(et,er,ei)=>{let es=G(bp(pn(ei.container()),er),rc),ed=le(es).getOr(er);return fu(et,ed.dom,ei).filter(_p)},Rp=(et,er)=>Yc(er).exists(Er)||Np(!0,et,er).isSome(),Ap=(et,er)=>I.from(er.getNode(!0)).map(pn).exists(Er)||Np(!1,et,er).isSome(),l6=O(Np,!1),l9=O(Np,!0),Bp=et=>Li.isTextPosition(et)&&!et.isAtStart()&&!et.isAtEnd(),Dp=(et,er)=>{let ei=G(bp(pn(er.container()),et),rc);return le(ei).getOr(et)},Pp=(et,er)=>Bp(er)?lW(er):lW(er)||a3(Dp(et,er).dom,er).exists(lW),Lp=(et,er)=>Bp(er)?lG(er):lG(er)||a2(Dp(et,er).dom,er).exists(lG),Mp=et=>Yc(et).bind(et=>Jn(et,tH)).exists(et=>H(["pre","pre-wrap"],lo(et,"white-space"))),Ip=(et,er)=>ei=>{var es;return C(es=new zo(ei,et)[er]())&&t6(es)&&aZ(es)},Fp=(et,er)=>!Mp(er)&&(a3(et.dom,er).isNone()||a2(et.dom,er).isNone()||l2(et,er)||l3(et,er)||Ap(et,er)||Rp(et,er)||Pp(et,er)||Lp(et,er)),Up=(et,er)=>!Mp(er)&&(l2(et,er)||l8(et,er)||Ap(et,er)||Pp(et,er)||((et,er)=>{let ei=a3(et.dom,er).getOr(er),es=Ip(et.dom,"prev");return er.isAtStart()&&(es(er.container())||es(ei.container()))})(et,er)),zp=(et,er)=>!Mp(er)&&(l3(et,er)||l5(et,er)||Rp(et,er)||Lp(et,er)||((et,er)=>{let ei=a2(et.dom,er).getOr(er),es=Ip(et.dom,"next");return er.isAtEnd()&&(es(er.container())||es(ei.container()))})(et,er)),jp=(et,er)=>Up(et,er)||zp(et,(et=>{let er=et.container(),ei=et.offset();return tJ(er)&&ei<er.data.length?Li(er,ei+1):et})(er)),Hp=(et,er)=>Mu(et.charAt(er)),$p=(et,er)=>Fu(et.charAt(er)),qp=(et,er,ei)=>{let es=er.data,ed=Li(er,0);return ei||!Hp(es,0)||jp(et,ed)?!!(ei&&$p(es,0)&&Up(et,ed))&&(er.data="\xa0"+es.slice(1),!0):(er.data=" "+es.slice(1),!0)},Vp=(et,er,ei)=>{let es=er.data,ed=Li(er,es.length-1);return ei||!Hp(es,es.length-1)||jp(et,ed)?!!(ei&&$p(es,es.length-1)&&zp(et,ed))&&(er.data=es.slice(0,-1)+"\xa0",!0):(er.data=es.slice(0,-1)+" ",!0)},Wp=(et,er)=>{let ei=er.container();if(!tJ(ei))return I.none();if((et=>{let er=et.container();return tJ(er)&&je(er.data,"\xa0")})(er)){let es=qp(et,ei,!1)||(et=>{let er=et.data,ei=(et=>{let er=et.split("");return q(er,(et,ei)=>Mu(et)&&ei>0&&ei<er.length-1&&Uu(er[ei-1])&&Uu(er[ei+1])?" ":et).join("")})(er);return ei!==er&&(et.data=ei,!0)})(ei)||Vp(et,ei,!1);return It(es,er)}if(jp(et,er)){let es=qp(et,ei,!0)||Vp(et,ei,!0);return It(es,er)}return I.none()},Kp=(et,er,ei)=>{if(0===ei)return;let es=pn(et),ed=Qn(es,rc).getOr(es),ec=et.data.slice(er,er+ei),eu=er+ei>=et.data.length&&zp(ed,Li(et,et.data.length)),ef=0===er&&Up(ed,Li(et,0));et.replaceData(er,ei,ms(ec,4,ef,eu))},Gp=(et,er)=>{let ei=et.data.slice(er),es=ei.length-e1(ei).length;Kp(et,er,es)},Yp=(et,er)=>{let ei=et.data.slice(0,er),es=ei.length-e2(ei).length;Kp(et,er-es,es)},Xp=(et,er,ei,es=!0)=>{let ed=e2(et.data).length,ec=es?et:er,eu=es?er:et;return es?ec.appendData(eu.data):ec.insertData(0,eu.data),wo(pn(eu)),ei&&Gp(ec,ed),ec},Qp=(et,er)=>((et,er)=>{let ei=et.container(),es=et.offset();return!Li.isTextPosition(et)&&ei===er.parentNode&&es>Li.before(er).offset()})(er,et)?Li(er.container(),er.offset()-1):er,Jp=et=>{var er;return ss(et.previousSibling)?I.some(tJ(er=et.previousSibling)?Li(er,er.data.length):Li.after(er)):et.previousSibling?a5(et.previousSibling):I.none()},Zp=et=>{var er;return ss(et.nextSibling)?I.some(tJ(er=et.nextSibling)?Li(er,0):Li.before(er)):et.nextSibling?a8(et.nextSibling):I.none()},eh=(et,er,ei)=>(et?Zp(ei).orThunk(()=>Jp(ei)).orThunk(()=>a2(er,Li.after(ei)).orThunk(()=>a3(er,Li.before(ei)))):Jp(ei).orThunk(()=>Zp(ei)).orThunk(()=>I.from(ei.previousSibling?ei.previousSibling:ei.parentNode).bind(et=>a3(er,Li.before(et))).orThunk(()=>a2(er,Li.after(ei))))).map(O(Qp,ei)),th=(et,er,ei)=>{ei.fold(()=>{et.focus()},ei=>{et.selection.setRng(ei.toRange(),er)})},nh=(et,er)=>er&&ke(et.schema.getBlockElements(),Ht(er)),oh=et=>{if(bs(et)){let er=hn('<br data-mce-bogus="1">');return Co(et),bo(et,er),I.some(Li.before(er.dom))}return I.none()},rh=(et,er,ei,es=!0)=>{var ed;let ec=eh(er,et.getBody(),ei.dom),eu=Qn(ei,O(nh,et),(ed=et.getBody(),et=>et.dom===ed)),ef=((et,er,ei)=>{let es=Bn(et).filter(tj),ed=Dn(et).filter(tj);return wo(et),(es.isSome()&&ed.isSome()&&er.isSome()?I.some(((et,er,es)=>{let ed=et.dom,ec=er.dom,eu=ed.data.length;return Xp(ed,ec,ei),es.container()===ec?Li(ed,eu):es})(es.getOrDie(),ed.getOrDie(),er.getOrDie())):I.none()).orThunk(()=>(ei&&(es.each(et=>Yp(et.dom,et.dom.length)),ed.each(et=>Gp(et.dom,0))),er))})(ei,ec,ke(et.schema.getTextInlineElements(),Ht(ei)));et.dom.isEmpty(et.getBody())?(et.setContent(""),et.selection.setCursorLocation()):eu.bind(oh).fold(()=>{es&&th(et,er,ef)},ei=>{es&&th(et,er,I.some(ei))})},l4=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ah=(et,er)=>xn(pn(er),oA(et))&&!As(et.schema,er)&&et.dom.isEditable(er),ih=et=>{var er,ei;return"rtl"===Oa.DOM.getStyle(et,"direction",!0)||(ei=null!==(er=et.textContent)&&void 0!==er?er:"",l4.test(ei))},lh=(et,er,ei)=>{let es=G(Oa.DOM.getParents(ei.container(),"*",er),et);return I.from(es[es.length-1])},dh=(et,er)=>{let ei=er.container(),es=er.offset();return et?Hr(ei)?tJ(ei.nextSibling)?Li(ei.nextSibling,0):Li.after(ei):Vr(er)?Li(ei,es+1):er:Hr(ei)?tJ(ei.previousSibling)?Li(ei.previousSibling,ei.previousSibling.data.length):Li.before(ei):Wr(er)?Li(ei,es-1):er},l7=O(dh,!0),ir=O(dh,!1),mh=(et,er)=>{let n=et=>et.stopImmediatePropagation();et.on("beforeinput input",n,!0),et.getDoc().execCommand(er),et.off("beforeinput input",n)},fh=et=>mh(et,"Delete"),gh=et=>rf(et)||ry(et),ph=(et,er)=>Sn(et,er)?Jn(er,gh,er=>Pt(An(er),et,En)):I.none(),hh=(et,er=!0)=>{et.dom.isEmpty(et.getBody())&&et.setContent("",{no_selection:!er})},bh=(et,er,ei)=>Mt(a8(ei),a5(ei),(es,ed)=>{let ec=dh(!0,es),eu=dh(!1,ed),ef=dh(!1,er);return et?a2(ei,ef).exists(et=>et.isEqual(eu)&&er.isEqual(ec)):a3(ei,ef).exists(et=>et.isEqual(ec)&&er.isEqual(eu))}).getOr(!0),vh=et=>(8===$t(et)||"#comment"===Ht(et)?Bn(et):Un(et)).bind(vh).orThunk(()=>I.some(et)),yh=(et,er,ei,es=!0)=>{var ed;er.deleteContents();let ec=vh(ei).getOr(ei),eu=pn(null!==(ed=et.dom.getParent(ec.dom,et.dom.isBlock))&&void 0!==ed?ed:ei.dom);if(eu.dom===et.getBody()?hh(et,es):bs(eu)&&(Pr(eu),es&&et.selection.setCursorLocation(eu.dom,0)),!En(ei,eu)){let et=Pt(An(eu),ei)?[]:An(eu).map(Mn).map(et=>G(et,et=>!En(eu,et))).getOr([]);V(et.concat(Mn(ei)),et=>{En(et,eu)||Sn(et,eu)||!bs(et)||wo(et)})}},Ch=et=>Fo(et,"td,th"),wh=(et,er)=>({start:et,end:er}),ii=al([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),kh=(et,er)=>to(pn(et),"td,th",er),Eh=et=>!En(et.start,et.end),Sh=(et,er)=>Xu(et.start,er).bind(ei=>Xu(et.end,er).bind(et=>It(En(ei,et),ei))),_h=et=>er=>Sh(er,et).map(et=>{var ei;return ei=Ch(et),{rng:er,table:et,cells:ei}}),Nh=(et,er,ei,es)=>{if(ei.collapsed||!et.forall(Eh))return I.none();if(er.isSameTable){let er=et.bind(_h(es));return I.some({start:er,end:er})}{let et=kh(ei.startContainer,es),er=kh(ei.endContainer,es),ed=et.bind(et=>Xu(et,es).bind(er=>de(Ch(er)).map(er=>wh(et,er)))).bind(_h(es)),ec=er.bind(et=>Xu(et,es).bind(er=>le(Ch(er)).map(er=>wh(er,et)))).bind(_h(es));return I.some({start:ed,end:ec})}},Rh=(et,er)=>Z(et,et=>En(et,er)),Ah=et=>Mt(Rh(et.cells,et.rng.start),Rh(et.cells,et.rng.end),(er,ei)=>et.cells.slice(er,ei+1)),Oh=(et,er)=>{let{startTable:ei,endTable:es}=er,ed=et.cloneRange();return ei.each(et=>ed.setStartAfter(et.dom)),es.each(et=>ed.setEndBefore(et.dom)),ed},Th=(et,er)=>{let n=er=>En(et,er),ei=((et,er)=>{let ei=kh(et.startContainer,er),es=kh(et.endContainer,er);return Mt(ei,es,wh)})(er,n),es=((et,er)=>{let n=et=>Xu(pn(et),er),ei=n(et.startContainer),es=n(et.endContainer),ed=ei.isSome(),ec=es.isSome(),eu=Mt(ei,es,En).getOr(!1);return{startTable:ei,endTable:es,isStartInTable:ed,isEndInTable:ec,isSameTable:eu,isMultiTable:!eu&&ed&&ec}})(er,n);return ei.exists(et=>!Eh(et)&&Sh(et,n).exists(et=>{let er=et.dom.rows;return 1===er.length&&1===er[0].cells.length})&&Zu(et.start,er))?ei.map(et=>ii.singleCellTable(er,et.start)):es.isMultiTable?Nh(ei,es,er,n).bind(({start:et,end:ei})=>{let ed=et.bind(Ah).getOr([]),ec=ei.bind(Ah).getOr([]);if(ed.length>0&&ec.length>0){let et=Oh(er,es);return I.some(ii.multiTable(ed,ec,et))}return I.none()}):Nh(ei,es,er,n).bind(({start:et,end:er})=>et.or(er)).bind(et=>{let{isSameTable:ei}=es,ed=Ah(et).getOr([]);if(ei&&et.cells.length===ed.length)return I.some(ii.fullTable(et.table));if(ed.length>0){if(ei)return I.some(ii.partialTable(ed,I.none()));{let et=Oh(er,es);return I.some(ii.partialTable(ed,I.some({...es,rng:et})))}}return I.none()})},Bh=et=>V(et,et=>{on(et,"contenteditable"),Pr(et)}),Dh=(et,er,ei,es)=>{let ed=ei.cloneRange();es?(ed.setStart(ei.startContainer,ei.startOffset),ed.setEndAfter(er.dom.lastChild)):(ed.setStartBefore(er.dom.firstChild),ed.setEnd(ei.endContainer,ei.endOffset)),Ih(et,ed,er,!1).each(et=>et())},Ph=et=>{let er=Yu(et),ei=pn(et.selection.getNode());t9(ei.dom)&&bs(ei)?et.selection.setCursorLocation(ei.dom,0):et.selection.collapse(!0),er.length>1&&$(er,et=>En(et,ei))&&Jt(ei,"data-mce-selected","1")},Lh=(et,er,ei)=>I.some(()=>{let es=et.selection.getRng(),ed=ei.bind(({rng:ei,isStartInTable:ed})=>{var ec;let eu=(ec=ed?ei.endContainer:ei.startContainer,I.from(et.dom.getParent(ec,et.dom.isBlock)).map(pn));ei.deleteContents(),((et,er,ei)=>{ei.each(ei=>{er?wo(ei):(Pr(ei),et.selection.setCursorLocation(ei.dom,0))})})(et,ed,eu.filter(bs));let ef=ed?er[0]:er[er.length-1];return Dh(et,ef,es,ed),bs(ef)?I.none():I.some(ed?er.slice(1):er.slice(0,-1))}).getOr(er);Bh(ed),Ph(et)}),Mh=(et,er,ei,es)=>I.some(()=>{let ed=et.selection.getRng(),ec=er[0],eu=ei[ei.length-1];Dh(et,ec,ed,!0),Dh(et,eu,ed,!1);let ef=bs(ec)?er:er.slice(1),ey=bs(eu)?ei:ei.slice(0,-1);Bh(ef.concat(ey)),es.deleteContents(),Ph(et)}),Ih=(et,er,ei,es=!0)=>I.some(()=>{yh(et,er,ei,es)}),Fh=(et,er)=>I.some(()=>rh(et,!1,er)),Uh=(et,er)=>J(bp(er,et),rR),zh=(et,er)=>J(bp(er,et),Xt("caption")),jh=(et,er)=>I.some(()=>{Pr(er),et.selection.setCursorLocation(er.dom,0)}),Hh=(et,er)=>et?lQ(er):lZ(er),$h=(et,er,ei)=>{let es=pn(et.getBody());return zh(es,ei).fold(()=>((et,er,ei,es)=>{let ed=Li.fromRangeStart(et.selection.getRng());return Uh(ei,es).bind(es=>bs(es)?jh(et,es):gu(er,et.getBody(),ed).bind(et=>Uh(ei,pn(et.getNode())).bind(et=>En(et,es)?I.none():I.some(E))))})(et,er,es,ei).orThunk(()=>It(((et,er)=>{let ei=Li.fromRangeStart(et.selection.getRng());return Hh(er,ei)||fu(er,et.getBody(),ei).exists(et=>Hh(er,et))})(et,er),E)),ei=>((et,er,ei,es)=>{let ed=Li.fromRangeStart(et.selection.getRng());return bs(es)?jh(et,es):gu(er,et.getBody(),ed).fold(()=>I.some(E),ec=>a8(es.dom).bind(et=>a5(es.dom).map(ei=>er?ed.isEqual(et)&&ec.isEqual(ei):ed.isEqual(ei)&&ec.isEqual(et))).getOr(!0)?jh(et,es):zh(ei,pn(ec.getNode())).fold(()=>I.some(E),et=>It(!En(et,es),E)))})(et,er,es,ei))},qh=(et,er)=>{let ei=pn(et.selection.getStart(!0)),es=Yu(et);return et.selection.isCollapsed()&&0===es.length?$h(et,er,ei):((et,er,ei)=>{let es=pn(et.getBody()),ed=et.selection.getRng();return 0!==ei.length?Lh(et,ei,I.none()):zh(es,er).fold(()=>Th(es,ed).bind(er=>er.fold(O(Ih,et),O(Fh,et),O(Lh,et),O(Mh,et))),er=>jh(et,er))})(et,ei,es)},Vh=(et,er)=>{let ei=er;for(;ei&&ei!==et;){if(t5(ei)||t6(ei))return ei;ei=ei.parentNode}return null},id=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],ic=tz.each,Gh=et=>{let er=et.dom,ei=new Set(et.serializer.getTempAttrs()),o=et=>$(id,er=>He(et,er))||ei.has(et);return{compare:(et,ei)=>{if(et.nodeName!==ei.nodeName||et.nodeType!==ei.nodeType)return!1;let r=et=>{let ei={};return ic(er.getAttribs(et),es=>{let ed=es.nodeName.toLowerCase();"style"===ed||o(ed)||(ei[ed]=er.getAttrib(et,ed))}),ei},s=(et,er)=>{for(let ei in et)if(ke(et,ei)){let es=er[ei];if(eU(es)||et[ei]!==es)return!1;delete er[ei]}for(let et in er)if(ke(er,et))return!1;return!0};return(!(tY(et)&&tY(ei))||!!s(r(et),r(ei))&&!!s(er.parseStyle(er.getAttrib(et,"style")),er.parseStyle(er.getAttrib(ei,"style"))))&&!Lu(et)&&!Lu(ei)},isAttributeInternal:o}},Yh=(et,er,ei,es)=>{let ed=ei.name;for(let er=0,ec=et.length;er<ec;er++){let ec=et[er];if(ec.name===ed){let et=es.nodes[ed];et?et.nodes.push(ei):es.nodes[ed]={filter:ec,nodes:[ei]}}}if(ei.attributes)for(let et=0,ed=er.length;et<ed;et++){let ed=er[et],ec=ed.name;if(ec in ei.attributes.map){let et=es.attributes[ec];et?et.nodes.push(ei):es.attributes[ec]={filter:ed,nodes:[ei]}}}},Xh=(et,er)=>{let n=(et,ei)=>{ge(et,et=>{let es=eY(et.nodes);V(et.filter.callbacks,ed=>{for(let er=es.length-1;er>=0;er--){let ed=es[er];((ei?void 0===ed.attr(et.filter.name):ed.name!==et.filter.name)||y(ed.parent))&&es.splice(er,1)}es.length>0&&ed(es,et.filter.name,er)})})};n(et.nodes,!1),n(et.attributes,!0)},Qh=(et,er,ei,es={})=>{let ed=((et,er,ei)=>{let es={nodes:{},attributes:{}};return ei.firstChild&&((ei,ed)=>{let ec=ei;for(;ec=ec.walk();)Yh(et,er,ec,es)})(ei),es})(et,er,ei);Xh(ed,es)},Jh=(et,er,ei,es)=>{if((et.pad_empty_with_br||er.insert)&&ei(es)){let et=new Fg("br",1);er.insert&&et.attr("data-mce-bogus","1"),es.empty().append(et)}else es.empty().append(new Fg("#text",3)).value="\xa0"},Zh=(et,er)=>{let ei=null==et?void 0:et.firstChild;return C(ei)&&ei===et.lastChild&&ei.name===er},eb=(et,er,ei,es)=>es.isEmpty(er,ei,er=>((et,er)=>{let ei=et.getElementRule(er.name);return!0===(null==ei?void 0:ei.paddEmpty)})(et,er)),tb=et=>{let er;for(let ei=et;ei;ei=ei.parent){let et=ei.attr("contenteditable");if("false"===et)break;"true"===et&&(er=ei)}return I.from(er)},nb=(et,er,ei=et.parent)=>{if(er.getSpecialElements()[et.name])et.empty().remove();else{let es=et.children();for(let et of es)ei&&!er.isValidChild(ei.name,et.name)&&nb(et,er,ei);et.unwrap()}},ob=(et,er,ei,es=E)=>{let ed=er.getTextBlockElements(),ec=er.getNonEmptyElements(),eu=er.getWhitespaceElements(),ef=tz.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),ey=new Set,d=et=>et!==ei&&!ef[et.name];for(let ei=0;ei<et.length;ei++){let ef,eC,eS;let e_=et[ei];if(!e_.parent||ey.has(e_))continue;if(ed[e_.name]&&"li"===e_.parent.name){let et=e_.next;for(;et&&ed[et.name];)et.name="li",ey.add(et),e_.parent.insert(et,e_.parent),et=et.next;e_.unwrap();continue}let eR=[e_];for(ef=e_.parent;ef&&!er.isValidChild(ef.name,e_.name)&&d(ef);ef=ef.parent)eR.push(ef);if(ef&&eR.length>1){if(er.isValidChild(ef.name,e_.name)){eR.reverse(),es(eC=eR[0].clone());let et=eC;for(let ei=0;ei<eR.length-1;ei++){er.isValidChild(et.name,eR[ei].name)&&ei>0?(es(eS=eR[ei].clone()),et.append(eS)):eS=et;for(let et=eR[ei].firstChild;et&&et!==eR[ei+1];){let er=et.next;eS.append(et),et=er}et=eS}eb(er,ec,eu,eC)?ef.insert(e_,eR[0],!0):(ef.insert(eC,eR[0],!0),ef.insert(e_,eC)),(eb(er,ec,eu,ef=eR[0])||Zh(ef,"br"))&&ef.empty().remove()}else nb(e_,er)}else if(e_.parent){if("li"===e_.name){let et=e_.prev;if(et&&("ul"===et.name||"ol"===et.name)){et.append(e_);continue}if((et=e_.next)&&("ul"===et.name||"ol"===et.name)&&et.firstChild){et.insert(e_,et.firstChild,!0);continue}let er=new Fg("ul",1);es(er),e_.wrap(er);continue}if(er.isValidChild(e_.parent.name,"div")&&er.isValidChild("div",e_.name)){let et=new Fg("div",1);es(et),e_.wrap(et)}else nb(e_,er)}}},rb=(et,er,ei=er.parent)=>!(!ei||!et.children[er.name]||et.isValidChild(ei.name,er.name))||!(!ei||"a"!==er.name||!((et,er)=>{let ei=et;for(;ei;){if("a"===ei.name)return!0;ei=ei.parent}return!1})(ei)),sb=et=>et.collapsed?et:(et=>{let er=Li.fromRangeStart(et),ei=Li.fromRangeEnd(et),es=et.commonAncestorContainer;return fu(!1,es,ei).map(ed=>!Uc(er,ei,es)&&Uc(er,ed,es)?((et,er,ei,es)=>{let ed=document.createRange();return ed.setStart(et,er),ed.setEnd(ei,es),ed})(er.container(),er.offset(),ed.container(),ed.offset()):et).getOr(et)})(et),ab=(et,er)=>{let ei=er.firstChild,es=er.lastChild;return ei&&"meta"===ei.name&&(ei=ei.next),es&&"mce_marker"===es.attr("id")&&(es=es.prev),((et,er)=>{var ei;let es=et.getNonEmptyElements();return C(er)&&(er.isEmpty(es)||et.getBlockElements()[er.name]&&C(er.firstChild)&&er.firstChild===er.lastChild&&("br"===(ei=er.firstChild).name||"\xa0"===ei.value))})(et,es)&&(es=null==es?void 0:es.prev),!(!ei||ei!==es||"ul"!==ei.name&&"ol"!==ei.name)},ib=et=>{var er,ei;return et.length>0&&(!(er=et[et.length-1]).firstChild||C(null==er?void 0:er.firstChild)&&er.firstChild===er.lastChild&&("\xa0"===(ei=er.firstChild).data||t3(ei)))?et.slice(0,-1):et},lb=(et,er)=>{let ei=et.getParent(er,et.isBlock);return ei&&"LI"===ei.nodeName?ei:null},db=(et,er)=>{let ei=Li.after(et),es=du(er).prev(ei);return es?es.toRange():null},cb=(et,er,ei,es)=>{var ed,ec;let eu=((et,er,ei)=>{let es=er.serialize(ei);return(et=>{var er,ei;let es=et.firstChild,ed=et.lastChild;return es&&"META"===es.nodeName&&(null===(er=es.parentNode)||void 0===er||er.removeChild(es)),ed&&"mce_marker"===ed.id&&(null===(ei=ed.parentNode)||void 0===ei||ei.removeChild(ed)),et})(et.createFragment(es))})(er,et,es),ef=lb(er,ei.startContainer),ey=ib(G(null!==(ec=null==(ed=eu.firstChild)?void 0:ed.childNodes)&&void 0!==ec?ec:[],et=>"LI"===et.nodeName)),eC=er.getRoot(),c=et=>{let es=Li.fromRangeStart(ei),ed=du(er.getRoot()),ec=1===et?ed.prev(es):ed.next(es),eu=null==ec?void 0:ec.getNode();return!eu||lb(er,eu)!==ef};return ef?c(1)?((et,er,ei)=>{let es=et.parentNode;return es&&tz.each(er,er=>{es.insertBefore(er,et)}),((et,er)=>{let ei=Li.before(et),es=du(er).next(ei);return es?es.toRange():null})(et,ei)})(ef,ey,eC):c(2)?(er.insertAfter(ey.reverse(),ef),db(ey[0],eC)):((et,er,ei,es)=>{let ed=((et,er)=>{let ei=er.cloneRange(),es=er.cloneRange();return ei.setStartBefore(et),es.setEndAfter(et),[ei.cloneContents(),es.cloneContents()]})(et,es),ec=et.parentNode;return ec&&(ec.insertBefore(ed[0],et),tz.each(er,er=>{ec.insertBefore(er,et)}),ec.insertBefore(ed[1],et),ec.removeChild(et)),db(er[er.length-1],ei)})(ef,ey,eC,ei):null},iy=["pre"],fb=(et,er,ei)=>{var es,ed,ec,eu;let ef=et.selection,ey=et.dom,eC=et.parser,eS=ei.merge,e_=Xg({validate:!0},et.schema),eR='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===er.indexOf("{$caret}")&&(er+="{$caret}"),er=er.replace(/\{\$caret\}/,eR);let eI=ef.getRng(),eL=eI.startContainer,eB=et.getBody();eL===eB&&ef.isCollapsed()&&ey.isBlock(eB.firstChild)&&C(eu=eB.firstChild)&&!et.schema.getVoidElements()[eu.nodeName]&&ey.isEmpty(eB.firstChild)&&((eI=ey.createRng()).setStart(eB.firstChild,0),eI.setEnd(eB.firstChild,0),ef.setRng(eI)),ef.isCollapsed()||(et=>{let er=et.dom,ei=sb(et.selection.getRng());et.selection.setRng(ei);let es=er.getParent(ei.startContainer,t9);C(es)&&es===er.getParent(ei.endContainer,t9)&&Zu(pn(es),ei)?Ih(et,ei,pn(es)):ei.startContainer===ei.endContainer&&ei.endOffset-ei.startOffset==1&&tJ(ei.startContainer.childNodes[ei.startOffset])?ei.deleteContents():et.getDoc().execCommand("Delete",!1)})(et);let eD=ef.getNode(),eP={context:eD.nodeName.toLowerCase(),data:ei.data,insert:!0},eF=eC.parse(er,eP);if(!0===ei.paste&&ab(et.schema,eF)&&lb(ey,eD))return(eI=cb(e_,ey,ef.getRng(),eF))&&ef.setRng(eI),er;!0===ei.paste&&((et,er,ei,es)=>{var ed;let ec=er.firstChild,eu=er.lastChild,ef=ec===("bookmark"===eu.attr("data-mce-type")?eu.prev:eu),ey=H(iy,ec.name);if(ef&&ey){let er="false"!==ec.attr("contenteditable"),eu=(null===(ed=et.getParent(ei,et.isBlock))||void 0===ed?void 0:ed.nodeName.toLowerCase())===ec.name,ef=I.from(Vh(es,ei)).forall(t5);return er&&eu&&ef}return!1})(ey,eF,eD,et.getBody())&&(null===(es=eF.firstChild)||void 0===es||es.unwrap()),(et=>{let er=et;for(;er=er.walk();)1===er.type&&er.attr("data-mce-fragment","1")})(eF);let eM=eF.lastChild;if(eM&&"mce_marker"===eM.attr("id")){let er=eM;for(eM=eM.prev;eM;eM=eM.walk(!0))if(3===eM.type||!ey.isBlock(eM.name)){eM.parent&&et.schema.isValidChild(eM.parent.name,"span")&&eM.parent.insert(er,eM,"br"===eM.name);break}}if(et._selectionOverrides.showBlockCaretContainer(eD),eP.invalid){et.selection.setContent(eR);let ei,es=ef.getNode(),ec=et.getBody();for(t1(es)?es=ei=ec:ei=es;ei&&ei!==ec;)es=ei,ei=ei.parentNode;er=es===ec?ec.innerHTML:ey.getOuterHTML(es);let eu=eC.parse(er),eS=(et=>{for(let er=et;er;er=er.walk())if("mce_marker"===er.attr("id"))return I.some(er);return I.none()})(eu),eI=eS.bind(tb).getOr(eu);eS.each(et=>et.replace(eF));let eL=eF.children(),eB=null!==(ed=eF.parent)&&void 0!==ed?ed:eu;eF.unwrap();let eD=G(eL,er=>rb(et.schema,er,eB));ob(eD,et.schema,eI),Qh(eC.getNodeFilters(),eC.getAttributeFilters(),eu),er=e_.serialize(eu),es===ec?ey.setHTML(ec,er):ey.setOuterHTML(es,er)}else((et,er,ei)=>{var es;if("all"===ei.getAttribute("data-mce-bogus"))null===(es=ei.parentNode)||void 0===es||es.insertBefore(et.dom.createFragment(er),ei);else{let es=ei.firstChild,ed=ei.lastChild;es&&(es!==ed||"BR"!==es.nodeName)?et.selection.setContent(er,{no_events:!0}):et.dom.setHTML(ei,er)}})(et,er=e_.serialize(eF),eD);return((et,er)=>{let ei=et.schema.getTextInlineElements(),es=et.dom;if(er){let er=et.getBody(),ed=Gh(et);tz.each(es.select("*[data-mce-fragment]"),et=>{if(C(ei[et.nodeName.toLowerCase()])&&ne(Zg(es,et),et=>!l$.has(et))){for(let ei=et.parentElement;C(ei)&&ei!==er&&!ep(es,et,ei);ei=ei.parentElement)if(ed.compare(ei,et)){es.remove(et,!0);break}}})}})(et,eS),((et,er)=>{var ei,es,ed,ec;let eu;let ef=et.dom,ey=et.selection;if(!er)return;ey.scrollIntoView(er);let eC=Vh(et.getBody(),er);if(eC&&"false"===ef.getContentEditable(eC))return ef.remove(er),void ey.select(eC);let eS=ef.createRng(),e_=er.previousSibling;if(tJ(e_)){eS.setStart(e_,null!==(es=null===(ei=e_.nodeValue)||void 0===ei?void 0:ei.length)&&void 0!==es?es:0);let et=er.nextSibling;tJ(et)&&(e_.appendData(et.data),null===(ed=et.parentNode)||void 0===ed||ed.removeChild(et))}else eS.setStartBefore(er),eS.setEndBefore(er);let eR=ef.getParent(er,ef.isBlock);if(ef.remove(er),eR&&ef.isEmpty(eR)){let er;let ei=t9(eR);Co(pn(eR)),eS.setStart(eR,0),eS.setEnd(eR,0),ei||eR.getAttribute("data-mce-fragment")||(ec=eS,er=Li.fromRangeStart(ec),!(eu=null==(er=du(et.getBody()).next(er))?void 0:er.toRange()))?ef.add(eR,ef.create("br",ei?{}:{"data-mce-bogus":"1"})):(eS=eu,ef.remove(eR))}ey.setRng(eS)})(et,ey.get("mce_marker")),ec=et.getBody(),tz.each(ec.getElementsByTagName("*"),et=>{et.removeAttribute("data-mce-fragment")}),((et,er)=>{I.from(et.getParent(er,"td,th")).map(pn).each(Lr)})(ey,ef.getStart()),((et,er,ei)=>{let es=Tn(pn(ei),et=>En(et,pn(er)));ie(es,es.length-2).filter(tH).fold(()=>Es(et,er),er=>Es(et,er.dom))})(et.schema,et.getBody(),ef.getStart()),er},gb=et=>et instanceof Fg,pb=(et,er,ei)=>{et.dom.setHTML(et.getBody(),er),!0!==ei&&xg(et)&&a8(et.getBody()).each(er=>{let ei=er.getNode(),es=Yo(ei)?a8(ei).getOr(er):er;et.selection.setRng(es.toRange())})},hb=(et,er)=>((et,er)=>{var ei,es;let ed=et.dom;return ed.parentNode?(ei=pn(ed.parentNode),es=ei=>!En(et,ei)&&er(ei),J(ei.dom.childNodes,et=>es(pn(et))).map(pn)):I.none()})(et,er).isSome(),bb=et=>eH(et)?et:e$,vb=(et,er,ei)=>{let es=er(et),ed=bb(ei);return es.orThunk(()=>ed(et)?I.none():((et,er,ei)=>{let es=et.dom,ed=bb(ei);for(;es.parentNode;){es=es.parentNode;let et=pn(es),ei=er(et);if(ei.isSome())return ei;if(ed(et))break}return I.none()})(et,er,ed))},Cb=(et,er,ei)=>{let es=et.formatter.get(ei);if(es)for(let ei=0;ei<es.length;ei++){let ed=es[ei];if(xm(ed)&&!1===ed.inherit&&et.dom.is(er,ed.selector))return!0}return!1},wb=(et,er,ei,es,ed)=>{let ec=et.dom.getRoot();if(er===ec)return!1;let eu=et.dom.getParent(er,er=>!!Cb(et,er,ei)||er.parentNode===ec||!!Eb(et,er,ei,es,!0));return!!Eb(et,eu,ei,es,ed)},xb=(et,er,ei)=>!(!km(ei)||!pm(er,ei.inline))||!(!wm(ei)||!pm(er,ei.block))||!!xm(ei)&&tY(er)&&et.is(er,ei.selector),kb=(et,er,ei,es,ed,ec)=>{let eu=ei[es],ef="attributes"===es;if(eH(ei.onmatch))return ei.onmatch(er,ei,es);if(eu){if(_e(eu))for(let ei=0;ei<eu.length&&(ef?!et.getAttrib(er,eu[ei]):!bm(et,er,eu[ei]));ei++);else for(let es in eu)if(ke(eu,es)){let ey=ef?et.getAttrib(er,es):bm(et,er,es),eC=gm(eu[es],ec),eS=y(ey)||Ye(ey);if(eS&&y(eC))continue;if(ed&&eS&&!ei.exact||(!ed||ei.exact)&&!pm(ey,hm(eC,es)))return!1}}return!0},Eb=(et,er,ei,es,ed)=>{let ec=et.formatter.get(ei),eu=et.dom;if(ec&&tY(er))for(let ei=0;ei<ec.length;ei++){let ef=ec[ei];if(xb(et.dom,er,ef)&&kb(eu,er,ef,"attributes",ed,es)&&kb(eu,er,ef,"styles",ed,es)){let ei=ef.classes;if(ei){for(let ed=0;ed<ei.length;ed++)if(!et.dom.hasClass(er,gm(ei[ed],es)))return}return ef}}},Sb=(et,er,ei,es,ed)=>{if(es)return wb(et,es,er,ei,ed);if(es=et.selection.getNode(),wb(et,es,er,ei,ed))return!0;let ec=et.selection.getStart();return!(ec===es||!wb(et,ec,er,ei,ed))},Nb=et=>(et=>{let er=[],ei=et;for(;ei;){if(tJ(ei)&&"\uFEFF"!==ei.data||ei.childNodes.length>1)return[];tY(ei)&&er.push(ei),ei=ei.firstChild}return er})(et).length>0,Rb=et=>{if(et){let er=new zo(et,et);for(let et=er.current();et;et=er.next())if(tJ(et))return et}return null},Ab=et=>{let er=bn("span");return Zt(er,{id:a6,"data-mce-bogus":"1","data-mce-type":"format-caret"}),et&&bo(er,vn("\uFEFF")),er},Ob=(et,er,ei=!0)=>{let es=et.dom,ed=et.selection;if(Nb(er))rh(et,!1,pn(er),ei);else{let et=ed.getRng(),ei=es.getParent(er,es.isBlock),ec=et.startContainer,eu=et.startOffset,ef=et.endContainer,ey=et.endOffset,eC=(et=>{let er=Rb(et);return er&&"\uFEFF"===er.data.charAt(0)&&er.deleteData(0,1),er})(er);es.remove(er,!0),ec===eC&&eu>0&&et.setStart(eC,eu-1),ef===eC&&ey>0&&et.setEnd(eC,ey-1),ei&&es.isEmpty(ei)&&Pr(pn(ei)),ed.setRng(et)}},Tb=(et,er,ei=!0)=>{let es=et.dom,ed=et.selection;if(er)Ob(et,er,ei);else if(!(er=ku(et.getBody(),ed.getStart())))for(;er=es.get(a6);)Ob(et,er,ei)},Bb=(et,er)=>(et.appendChild(er),er),Db=(et,er)=>{var ei;let es=Y(et,(et,er)=>Bb(et,er.cloneNode(!1)),er),ed=null!==(ei=es.ownerDocument)&&void 0!==ei?ei:document;return Bb(es,ed.createTextNode("\uFEFF"))},Pb=(et,er,ei,es)=>{let ed;let ec=et.dom,eu=et.selection,ef=!1,ey=et.formatter.get(er);if(!ey)return;let eC=eu.getRng(),eS=eC.startContainer,e_=eC.startOffset,eR=eS;tJ(eS)&&(e_!==eS.data.length&&(ef=!0),eR=eR.parentNode);let eI=[];for(;eR;){if(Eb(et,eR,er,ei,es)){ed=eR;break}eR.nextSibling&&(ef=!0),eI.push(eR),eR=eR.parentNode}if(ed){if(ef){let ed=eu.getBookmark();eC.collapse(!0);let ef=Um(ec,eC,ey,!0);ef=Bf(ef),et.formatter.remove(er,ei,ef,es),eu.moveToBookmark(ed)}else{let ef=ku(et.getBody(),ed),ey=Ab(!1).dom;((et,er,ei)=>{var es,ed;let ec=et.dom,eu=ec.getParent(ei,O(cm,et.schema));eu&&ec.isEmpty(eu)?null===(es=ei.parentNode)||void 0===es||es.replaceChild(er,ei):((et=>{let er=Fo(et,"br"),ei=G((et=>{let er=[],ei=et.dom;for(;ei;)er.push(pn(ei)),ei=ei.lastChild;return er})(et).slice(-1),Er);er.length===ei.length&&V(ei,wo)})(pn(ei)),ec.isEmpty(ei)?null===(ed=ei.parentNode)||void 0===ed||ed.replaceChild(er,ei):ec.insertAfter(er,ei))})(et,ey,null!=ef?ef:ed);let eC=((et,er,ei,es,ed,ec)=>{let eu=et.formatter,ef=et.dom,ey=G(eX(eu.get()),et=>et!==es&&!je(et,"removeformat")),eC=X(ey,(er,es)=>{let ed=Cm(et,es,et=>{let t=et=>eH(et)||et.length>1&&"%"===et.charAt(0);return $(["styles","attributes"],er=>xe(et,er).exists(et=>{let er=eM(et)?et:we(et);return $(er,t)}))});return et.formatter.matchNode(ei,es,{},ed)?er.concat([es]):er},[]);if(G(eC,er=>!((et,er,ei)=>{let es=["inline","block","selector","attributes","styles","classes"],a=et=>ye(et,(et,er)=>$(es,et=>et===er));return Cm(et,er,er=>{let es=a(er);return Cm(et,ei,et=>{let er=a(et);return((et,er,ei=eB)=>r(ei).eq(et,er))(es,er)})})})(et,er,es)).length>0){let et=ei.cloneNode(!1);return ef.add(er,et),eu.remove(es,ed,et,ec),ef.remove(et),I.some(et)}return I.none()})(et,ey,ed,er,ei,es),eS=Db(eI.concat(eC.toArray()),ey);ef&&Ob(et,ef,!1),eu.setCursorLocation(eS,1),ec.isEmpty(ed)&&ec.remove(ed)}}},Lb=et=>{let er=Ab(!1),ei=Db(et,er.dom);return{caretContainer:er,caretPosition:Li(ei,0)}},Mb=(et,er)=>{let{caretContainer:ei,caretPosition:es}=Lb(er);return go(pn(et),ei),wo(pn(et)),es},Ib=(et,er)=>{let ei=et.schema.getTextInlineElements();return ke(ei,Ht(er))&&!xu(er.dom)&&!Go(er.dom)},Fb=et=>xu(et.dom)&&Nb(et.dom),iR={},iI=Vo(["pre"]);iR.pre||(iR.pre=[]),iR.pre.push(et=>{if(!et.selection.getRng().collapsed){let er=et.selection.getSelectedBlocks(),ei=G(G(er,iI),et=>{let ei=et.previousSibling;return iI(ei)&&H(er,ei)});V(ei,et=>{((et,er)=>{let ei=pn(er),es=Nn(ei).dom;wo(ei),yo(pn(et),[bn("br",es),bn("br",es),...Mn(ei)])})(et.previousSibling,et)})}});let iL=["fontWeight","fontStyle","color","fontSize","fontFamily"],Hb=(et,er)=>{let ei=et.get(er);return eM(ei)?J(ei,et=>km(et)&&"span"===et.inline&&eF(et.styles)&&$(eX(et.styles),et=>H(iL,et))):I.none()},$b=(et,er)=>a3(er,Li.fromRangeStart(et)).isNone(),qb=(et,er)=>!1===a2(er,Li.fromRangeEnd(et)).exists(et=>!t3(et.getNode())||a2(er,et).isSome()),Vb=et=>er=>rt(er)&&et.isEditable(er),Wb=et=>G(et.getSelectedBlocks(),Vb(et.dom)),iB=tz.each,Gb=et=>tY(et)&&!Lu(et)&&!xu(et)&&!Go(et),Yb=(et,er)=>{for(let ei=et;ei&&!(tJ(ei)&&Ge(ei.data));ei=ei[er])if(tY(ei)&&!Lu(ei))return ei;return et},Xb=(et,er,ei)=>{let es=Gh(et),ed=tY(er)&&am(er),ec=tY(ei)&&am(ei);if(ed&&ec){let ed=Yb(er,"previousSibling"),ec=Yb(ei,"nextSibling");if(es.compare(ed,ec)){for(let et=ed.nextSibling;et&&et!==ec;){let er=et;et=et.nextSibling,ed.appendChild(er)}return et.dom.remove(ec),tz.each(tz.grep(ec.childNodes),et=>{ed.appendChild(et)}),ed}}return ei},Qb=(et,er,ei,es)=>{var ed;if(es&&!1!==er.merge_siblings){let er=null!==(ed=Xb(et,dm(es),es))&&void 0!==ed?ed:es;Xb(et,er,dm(er,!0))}},Jb=(et,er,ei)=>{iB(et.childNodes,et=>{Gb(et)&&(er(et)&&ei(et),et.hasChildNodes()&&Jb(et,er,ei))})},Zb=(et,er)=>ei=>!(!ei||!bm(et,ei,er)),ev=(et,er,ei)=>es=>{et.setStyle(es,er,ei),""===es.getAttribute("style")&&es.removeAttribute("style"),"SPAN"===es.nodeName&&0===et.getAttribs(es).length&&et.remove(es,!0)},iD=al([{keep:[]},{rename:["name"]},{removed:[]}]),iP=/^(src|href|style)$/,iF=tz.each,sv=(et,er,ei)=>et.isChildOf(er,ei)&&er!==ei&&!et.isBlock(ei),av=(et,er,ei)=>{let es=er[ei?"startContainer":"endContainer"],ed=er[ei?"startOffset":"endOffset"];if(tY(es)){let et=es.childNodes.length-1;!ei&&ed&&ed--,es=es.childNodes[ed>et?et:ed]}return tJ(es)&&ei&&ed>=es.data.length&&(es=new zo(es,et.getBody()).next()||es),tJ(es)&&!ei&&0===ed&&(es=new zo(es,et.getBody()).prev()||es),es},iv=(et,er)=>{let ei=er?"firstChild":"lastChild",es=et[ei];return/^(TR|TH|TD)$/.test(et.nodeName)&&es?"TR"===et.nodeName&&es[ei]||es:et},lv=(et,er,ei,es)=>{var ed;let ec=et.create(ei,es);return null===(ed=er.parentNode)||void 0===ed||ed.insertBefore(ec,er),ec.appendChild(er),ec},dv=(et,er,ei,es,ed)=>{let ec=pn(er),eu=pn(et.create(es,ed)),ef=ei?Ln(ec):Pn(ec);return yo(eu,ef),ei?(go(ec,eu),ho(eu,ec)):(po(ec,eu),bo(eu,ec)),eu.dom},cv=(et,er,ei)=>{let es;let ed=er.parentNode,ec=et.dom,eu=nX(et);wm(ei)&&ed===ec.getRoot()&&(ei.list_block&&pm(er,ei.list_block)||V(eY(er.childNodes),er=>{um(et,eu,er.nodeName.toLowerCase())?es?es.appendChild(er):(es=lv(ec,er,eu),ec.setAttribs(es,nJ(et))):es=null})),xm(ei)&&km(ei)&&Pt(xe(ei,"mixed"),!0)&&!pm(ei.inline,er)||ec.remove(er,!0)},uv=(et,er,ei)=>ej(et)?{name:er,value:null}:{name:et,value:gm(er,ei)},mv=(et,er)=>{""===et.getAttrib(er,"style")&&(er.removeAttribute("style"),er.removeAttribute("data-mce-style"))},fv=(et,er,ei,es,ed)=>{let ec=!1;iF(ei.styles,(eu,ef)=>{let{name:ey,value:eC}=uv(ef,eu,es),eS=hm(eC,ey);(ei.remove_similar||ez(eC)||!tY(ed)||pm(bm(et,ed,ey),eS))&&et.setStyle(er,ey,""),ec=!0}),ec&&mv(et,er)},gv=(et,er,ei,es,ed)=>{let ec=et.dom,eu=Gh(et),ef=et.schema;if(km(er)&&Ns(ef,er.inline)&&As(ef,es)&&es.parentElement===et.getBody())return cv(et,es,er),iD.removed();if(!er.ceFalseOverride&&es&&"false"===ec.getContentEditableParent(es)||es&&!xb(ec,es,er)&&(!er.links||"A"!==es.nodeName))return iD.keep();let ey=er.preserve_attributes;if(km(er)&&"all"===er.remove&&eM(ey)){let et=G(ec.getAttribs(es),et=>H(ey,et.name.toLowerCase()));if(ec.removeAllAttribs(es),V(et,et=>ec.setAttrib(es,et.name,et.value)),et.length>0)return iD.rename("span")}if("all"!==er.remove){fv(ec,es,er,ei,ed),iF(er.attributes,(et,eu)=>{let{name:ef,value:ey}=uv(eu,et,ei);if(er.remove_similar||ez(ey)||!tY(ed)||pm(ec.getAttrib(ed,ef),ey)){if("class"===ef){let et=ec.getAttrib(es,ef);if(et){let er="";if(V(et.split(/\s+/),et=>{/mce\-\w+/.test(et)&&(er+=(er?" ":"")+et)}),er)return void ec.setAttrib(es,ef,er)}}if(iP.test(ef)&&es.removeAttribute("data-mce-"+ef),"style"===ef&&Vo(["li"])(es)&&"none"===ec.getStyle(es,"list-style-type"))return es.removeAttribute(ef),void ec.setStyle(es,"list-style-type","none");"class"===ef&&es.removeAttribute("className"),es.removeAttribute(ef)}}),iF(er.classes,et=>{et=gm(et,ei),tY(ed)&&!ec.hasClass(ed,et)||ec.removeClass(es,et)});let et=ec.getAttribs(es);for(let er=0;er<et.length;er++){let ei=et[er].nodeName;if(!eu.isAttributeInternal(ei))return iD.keep()}}return"none"!==er.remove?(cv(et,es,er),iD.removed()):iD.keep()},pv=(et,er,ei,es)=>gv(et,er,ei,es,es).fold(N(es),er=>(et.dom.createFragment().appendChild(es),et.dom.rename(es,er)),N(null)),hv=(et,er,ei,es,ed)=>{(es||et.selection.isEditable())&&((et,er,ei,es,ed)=>{let ec=et.formatter.get(er),eu=ec[0],ef=et.dom,ey=et.selection,d=es=>{let ef;let ey=(es.parentNode&&V(ym(et.dom,es.parentNode).reverse(),es=>{if(!ef&&tY(es)&&"_start"!==es.id&&"_end"!==es.id){let ec=Eb(et,es,er,ei,ed);ec&&!1!==ec.split&&(ef=es)}}),ef);return((et,er,ei,es,ed,ec,eu,ef)=>{var ey,eC;let eS,e_;let eR=et.dom;if(ei){let ec=ei.parentNode;for(let ei=es.parentNode;ei&&ei!==ec;ei=ei.parentNode){let es=eR.clone(ei,!1);for(let ei=0;ei<er.length&&null!==(es=pv(et,er[ei],ef,es));ei++);es&&(eS&&es.appendChild(eS),e_||(e_=es),eS=es)}eu.mixed&&eR.isBlock(ei)||(es=null!==(ey=eR.split(ei,es))&&void 0!==ey?ey:es),eS&&e_&&(null===(eC=ed.parentNode)||void 0===eC||eC.insertBefore(eS,ed),e_.appendChild(ed),km(eu)&&Qb(et,eu,0,eS))}return es})(et,ec,ey,es,es,0,eu,ei)},c=er=>$(ec,es=>bv(et,es,ei,er,er)),u=er=>{let ei=eY(er.childNodes),es=c(er)||$(ec,et=>xb(ef,er,et)),ed=er.parentNode;if(!es&&C(ed)&&Em(eu)&&c(ed),eu.deep&&ei.length)for(let et=0;et<ei.length;et++)u(ei[et]);V(["underline","line-through","overline"],ei=>{tY(er)&&et.dom.getStyle(er,"text-decoration")===ei&&er.parentNode&&vm(ef,er.parentNode)===ei&&bv(et,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ei}},void 0,er)})},m=et=>{let er=ef.get(et?"_start":"_end");if(er){var ei;let es=er[et?"firstChild":"lastChild"];return Lu(ei=es)&&tY(ei)&&("_start"===ei.id||"_end"===ei.id)&&(es=es[et?"firstChild":"lastChild"]),tJ(es)&&0===es.data.length&&(es=et?er.previousSibling||er.nextSibling:er.nextSibling||er.previousSibling),ef.remove(er,!0),es}return null},f=er=>{let ei,es,ed=Um(ef,er,ec,er.collapsed);if(eu.split){if((ei=av(et,ed=Bf(ed),!0))!==(es=av(et,ed))){if(sv(ef,ei=iv(ei,!0),es=iv(es,!1))){let et=I.from(ei.firstChild).getOr(ei);return d(dv(ef,et,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void m(!0)}if(sv(ef,es,ei)){let et=I.from(es.lastChild).getOr(es);return d(dv(ef,et,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void m(!1)}ei=lv(ef,ei,"span",{id:"_start","data-mce-type":"bookmark"}),es=lv(ef,es,"span",{id:"_end","data-mce-type":"bookmark"});let et=ef.createRng();et.setStartAfter(ei),et.setEndBefore(es),zm(ef,et,et=>{V(et,et=>{Lu(et)||Lu(et.parentNode)||d(et)})}),d(ei),d(es),ei=m(!0),es=m()}else ei=es=d(ei);ed.startContainer=ei.parentNode?ei.parentNode:ei,ed.startOffset=ef.nodeIndex(ei),ed.endContainer=es.parentNode?es.parentNode:es,ed.endOffset=ef.nodeIndex(es)+1}zm(ef,ed,et=>{V(et,u)})};if(es){if(rm(es)){let et=ef.createRng();et.setStartBefore(es),et.setEndAfter(es),f(et)}else f(es);Xm(et,er,es,ei)}else ey.isCollapsed()&&km(eu)&&!Yu(et).length?Pb(et,er,ei,ed):(im(et,()=>nm(et,f),es=>km(eu)&&Sb(et,er,ei,es)),et.nodeChanged()),"removeformat"===er?V(Wb(et.selection),er=>{V(iL,ei=>et.dom.setStyle(er,ei,"")),mv(et.dom,er)}):Hb(et.formatter,er).each(er=>{V(Wb(et.selection),es=>fv(et.dom,es,er,ei,null))}),Xm(et,er,es,ei)})(et,er,ei,es,ed)},bv=(et,er,ei,es,ed)=>gv(et,er,ei,es,ed).fold(e$,er=>(et.dom.rename(es,er),!0),eq),iM=tz.each,iz=tz.each,Cv=(et,er,ei,es)=>{if(iz(ei.styles,(ei,ed)=>{et.setStyle(er,ed,gm(ei,es))}),ei.styles){let ei=et.getAttrib(er,"style");ei&&et.setAttrib(er,"data-mce-style",ei)}},wv=(et,er,ei,es)=>{let ed=et.formatter.get(er),ec=ed[0],eu=!es&&et.selection.isCollapsed(),ef=et.dom,ey=et.selection,d=(et,er=ec)=>{eH(er.onformat)&&er.onformat(et,er,ei,es),Cv(ef,et,er,ei),iz(er.attributes,(er,es)=>{ef.setAttrib(et,es,gm(er,ei))}),iz(er.classes,er=>{let es=gm(er,ei);ef.hasClass(et,es)||ef.addClass(et,es)})},c=(et,er)=>{let ei=!1;return iz(et,et=>!(!xm(et)||("false"!==ef.getContentEditable(er)||et.ceFalseOverride)&&(!C(et.collapsed)||et.collapsed===eu)&&ef.is(er,et.selector)&&!xu(er)&&(d(er,et),ei=!0,1))),ei},u=et=>{if(eP(et)){let er=ef.create(et);return d(er),er}return null},f=(es,eu,ef)=>{let ey=[],eC=!0,eS=ec.inline||ec.block,e_=u(eS);zm(es,eu,eu=>{let eR;let p=eu=>{let eI=!1,eL=eC,eB=!1,eD=eu.parentNode,eP=eD.nodeName.toLowerCase(),eF=es.getContentEditable(eu);C(eF)&&(eL=eC,eC="true"===eF,eI=!0,eB=fm(et,eu));let eM=eC&&!eI;if(t3(eu)&&!((et,er,ei,es)=>{if(oj(et)&&km(er)&&ei.parentNode){let er=la(et.schema),ed=hb(pn(ei),et=>xu(et.dom));return Ee(er,es)&&bs(pn(ei.parentNode),!1)&&!ed}return!1})(et,ec,eu,eP))return eR=null,void(wm(ec)&&es.remove(eu));if(wm(ec)&&!0===ec.wrapper&&Eb(et,eu,er,ei))eR=null;else{if(((er,ei,es)=>{let ed=wm(ec)&&!0!==ec.wrapper&&cm(et.schema,er)&&um(et,ei,eS);return es&&ed})(eu,eP,eM)){let et=es.rename(eu,eS);return d(et),ey.push(et),void(eR=null)}if(xm(ec)){let et=c(ed,eu);if(!et&&C(eD)&&Em(ec)&&(et=c(ed,eD)),!km(ec)||et)return void(eR=null)}C(e_)&&((er,ei,ed,eu)=>{let ey=er.nodeName.toLowerCase(),eC=um(et,eS,ey)&&um(et,ei,eS),e_=!ef&&tJ(er)&&hr(er.data),eR=xu(er),eI=!km(ec)||!es.isBlock(er);return(ed||eu)&&eC&&!e_&&!eR&&eI})(eu,eP,eM,eB)?(eR||(eR=es.clone(e_,!1),eD.insertBefore(eR,eu),ey.push(eR)),eB&&eI&&(eC=eL),eR.appendChild(eu)):(eR=null,V(eY(eu.childNodes),p),eI&&(eC=eL),eR=null)}};V(eu,p)}),!0===ec.links&&V(ey,et=>{let t=et=>{"A"===et.nodeName&&d(et,ec),V(eY(et.childNodes),t)};t(et)}),V(ey,eu=>{var ef;let eC;let eS=(eC=0,V(eu.childNodes,et=>{C(et)&&tJ(et)&&0===et.length||Lu(et)||eC++}),eC);!(ey.length>1)&&es.isBlock(eu)||0!==eS?(km(ec)||wm(ec)&&ec.wrapper)&&(ec.exact||1!==eS||(eu=(et=>{let er=J(et.childNodes,sm).filter(et=>"false"!==es.getContentEditable(et)&&xb(es,et,ec));return er.map(er=>{let ei=es.clone(er,!1);return d(ei),es.replace(ei,et,!0),es.remove(er,!0),ei}).getOr(et)})(eu)),ef=eu,iM(ed,er=>{km(er)&&iM(et.dom.select(er.inline,ef),es=>{Gb(es)&&bv(et,er,ei,es,er.exact?es:null)}),((et,er,ei)=>{if(er.clear_child_styles){let es=er.links?"*:not(a)":"*";iB(et.select(es,ei),ei=>{Gb(ei)&&am(ei)&&iB(er.styles,(er,es)=>{et.setStyle(ei,es,"")})})}})(et.dom,er,ef)}),((et,er,ei,es,ed)=>{let ec=ed.parentNode;Eb(et,ec,ei,es)&&bv(et,er,es,ed)||er.merge_with_parents&&ec&&et.dom.getParent(ec,ec=>!!Eb(et,ec,ei,es)&&(bv(et,er,es,ed),!0))})(et,ec,er,ei,eu),((et,er,ei,es)=>{if(er.styles&&er.styles.backgroundColor){let ed=Zb(et,"fontSize");Jb(es,et=>ed(et)&&am(et),ev(et,"backgroundColor",gm(er.styles.backgroundColor,ei)))}})(es,ec,ei,eu),((et,er,ei,es)=>{let r=er=>{if(tY(er)&&tY(er.parentNode)&&am(er)){let ei=vm(et,er.parentNode);et.getStyle(er,"color")&&ei?et.setStyle(er,"text-decoration",ei):et.getStyle(er,"text-decoration")===ei&&et.setStyle(er,"text-decoration",null)}};er.styles&&(er.styles.color||er.styles.textDecoration)&&(tz.walk(es,r,"childNodes"),r(es))})(es,ec,0,eu),((et,er,ei,es)=>{if(km(er)&&("sub"===er.inline||"sup"===er.inline)){let ei=Zb(et,"fontSize");Jb(es,et=>ei(et)&&am(et),ev(et,"fontSize",""));let ed=G(et.select("sup"===er.inline?"sub":"sup",es),am);et.remove(ed,!0)}})(es,ec,0,eu),Qb(et,ec,0,eu)):es.remove(eu,!0)})},eC=rm(es)?es:ey.getNode();if("false"===ef.getContentEditable(eC)&&!fm(et,eC))return c(ed,es=eC),void Ym(et,er,es,ei);if(ec){if(es){if(rm(es)){if(!c(ed,es)){let et=ef.createRng();et.setStartBefore(es),et.setEndAfter(es),f(ef,Um(ef,et,ed),!0)}}else f(ef,es,!0)}else eu&&km(ec)&&!Yu(et).length?((et,er,ei)=>{var es,ed;let ec;let eu=et.selection,ef=et.formatter.get(er);if(!ef)return;let ey=eu.getRng(),eC=ey.startOffset,eS=ey.startContainer.nodeValue;ec=ku(et.getBody(),eu.getStart());let e_=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(eS&&eC>0&&eC<eS.length&&e_.test(eS.charAt(eC))&&e_.test(eS.charAt(eC-1))){let es=eu.getBookmark();ey.collapse(!0);let ed=Um(et.dom,ey,ef);ed=Bf(ed),et.formatter.apply(er,ei,ed),eu.moveToBookmark(es)}else{let ef=ec?Rb(ec):null;ec&&(null==ef?void 0:ef.data)==="\uFEFF"||(es=et.getDoc(),ed=Ab(!0).dom,ef=(ec=es.importNode(ed,!0)).firstChild,ey.insertNode(ec),eC=1),et.formatter.apply(er,ei,ec),eu.setCursorLocation(ef,eC)}})(et,er,ei):(ey.setRng(sb(ey.getRng())),im(et,()=>{nm(et,(et,er)=>{let ei=er?et:Um(ef,et,ed);f(ef,ei,!1)})},eq),et.nodeChanged()),Hb(et.formatter,er).each(er=>{var es;V(G((et=>{let er=et.getSelectedBlocks(),ei=et.getRng();if(et.isCollapsed())return[];if(1===er.length)return $b(ei,er[0])&&qb(ei,er[0])?er:[];{let et=le(er).filter(et=>$b(ei,et)).toArray(),es=de(er).filter(et=>qb(ei,et)).toArray(),ed=er.slice(1,-1);return et.concat(ed).concat(es)}})(es=et.selection),Vb(es.dom)),et=>Cv(ef,et,er,ei))});ke(iR,er)&&V(iR[er],er=>{er(et)})}Ym(et,er,es,ei)},xv=(et,er,ei,es)=>{(es||et.selection.isEditable())&&wv(et,er,ei,es)},kv=et=>ke(et,"vars"),Ev=et=>et.selection.getStart(),Sv=(et,er,ei,es,ed)=>Q(er,er=>{let ec=et.formatter.matchNode(er,ei,null!=ed?ed:{},es);return!eU(ec)},er=>!!Cb(et,er,ei)||!es&&C(et.formatter.matchNode(er,ei,ed,!0))),_v=(et,er)=>{let ei=null!=er?er:Ev(et);return G(ym(et.dom,ei),et=>tY(et)&&!Go(et))},Nv=(et,er,ei)=>{let es=_v(et,er);ge(ei,(ei,ed)=>{let s=ei=>{let ec=Sv(et,es,ed,ei.similar,kv(ei)?ei.vars:void 0),eu=ec.isSome();if(ei.state.get()!==eu){ei.state.set(eu);let et=ec.getOr(er);kv(ei)?ei.callback(eu,{node:et,format:ed,parents:es}):V(ei.callbacks,er=>er(eu,{node:et,format:ed,parents:es}))}};V([ei.withSimilar,ei.withoutSimilar],s),V(ei.withVars,s)})},iV=tz.explode,Av=()=>{let et={};return{addFilter:(er,ei)=>{V(iV(er),er=>{ke(et,er)||(et[er]={name:er,callbacks:[]}),et[er].callbacks.push(ei)})},getFilters:()=>we(et),removeFilter:(er,ei)=>{V(iV(er),er=>{if(ke(et,er)){if(C(ei)){let es=et[er],ed=G(es.callbacks,et=>et!==ei);ed.length>0?es.callbacks=ed:delete et[er]}else delete et[er]}})}}},Ov=(et,er,ei)=>{var es;let ed=ua();er.convert_fonts_to_spans&&((et,er,ei)=>{et.addNodeFilter("font",et=>{V(et,et=>{let es=er.parse(et.attr("style")),ed=et.attr("color"),ec=et.attr("face"),eu=et.attr("size");ed&&(es.color=ed),ec&&(es["font-family"]=ec),eu&&Xe(eu).each(et=>{es["font-size"]=ei[et-1]}),et.name="span",et.attr("style",er.serialize(es)),V(["color","face","size"],er=>{et.attr(er,null)})})})})(et,ed,tz.explode(null!==(es=er.font_size_legacy_values)&&void 0!==es?es:"")),((et,er,ei)=>{et.addNodeFilter("strike",et=>{let es="html4"!==er.type;V(et,et=>{if(es)et.name="s";else{let er=ei.parse(et.attr("style"));er["text-decoration"]="line-through",et.name="span",et.attr("style",ei.serialize(er))}})})})(et,ei,ed)},Tv=(et,er,ei)=>{er.addNodeFilter("br",(er,es,ed)=>{let ec=tz.extend({},ei.getBlockElements()),eu=ei.getNonEmptyElements(),ef=ei.getWhitespaceElements();ec.body=1;let l=et=>et.name in ec||Ts(ei,et);for(let es=0,ey=er.length;es<ey;es++){let ey=er[es],eC=ey.parent;if(eC&&l(eC)&&ey===eC.lastChild){let er=ey.prev;for(;er;){let et=er.name;if("span"!==et||"bookmark"!==er.attr("data-mce-type")){"br"===et&&(ey=null);break}er=er.prev}if(ey&&(ey.remove(),eb(ei,eu,ef,eC))){let er=ei.getElementRule(eC.name);er&&(er.removeEmpty?eC.remove():er.paddEmpty&&Jh(et,ed,l,eC))}}else{let et=ey;for(;eC&&eC.firstChild===et&&eC.lastChild===et&&(et=eC,!ec[eC.name]);)eC=eC.parent;if(et===eC){let et=new Fg("#text",3);et.value="\xa0",ey.replace(et)}}}})},Bv=et=>{let[er,...ei]=et.split(","),es=ei.join(","),ed=/data:([^/]+\/[^;]+)(;.+)?/.exec(er);if(ed){let et=";base64"===ed[2],er=et?(et=>{let er=/([a-z0-9+\/=\s]+)/i.exec(et);return er?er[1]:""})(es):decodeURIComponent(es);return I.some({type:ed[1],data:er,base64Encoded:et})}return I.none()},Dv=(et,er,ei=!0)=>{let es=er;if(ei)try{es=atob(er)}catch(et){return I.none()}let ed=new Uint8Array(es.length);for(let et=0;et<ed.length;et++)ed[et]=es.charCodeAt(et);return I.some(new Blob([ed],{type:et}))},Pv=et=>new Promise((er,ei)=>{let es=new FileReader;es.onloadend=()=>{er(es.result)},es.onerror=()=>{var et;ei(null===(et=es.error)||void 0===et?void 0:et.message)},es.readAsDataURL(et)}),iU=0,Mv=(et,er,ei)=>Bv(et).bind(({data:et,type:es,base64Encoded:ed})=>{if(er&&!ed)return I.none();{let er=ed?et:btoa(et);return ei(er,es)}}),Iv=(et,er,ei)=>{let es=et.create("blobid"+iU++,er,ei);return et.add(es),es},Fv=(et,er,ei=!1)=>Mv(er,ei,(er,ei)=>I.from(et.getByData(er,ei)).orThunk(()=>Dv(ei,er).map(ei=>Iv(et,ei,er)))),Uv=(et,er)=>{let ei=et.schema;er.remove_trailing_brs&&Tv(er,et,ei),et.addAttributeFilter("href",et=>{let ei=et.length,o=et=>{let er=et?tz.trim(et):"";return/\b(noopener)\b/g.test(er)?er:er.split(" ").filter(et=>et.length>0).concat(["noopener"]).sort().join(" ")};if(!er.allow_unsafe_link_target)for(;ei--;){let er=et[ei];"a"===er.name&&"_blank"===er.attr("target")&&er.attr("rel",o(er.attr("rel")))}}),er.allow_html_in_named_anchor||et.addAttributeFilter("id,name",et=>{let er,ei,es,ed,ec=et.length;for(;ec--;)if("a"===(ed=et[ec]).name&&ed.firstChild&&!ed.attr("href"))for(es=ed.parent,er=ed.lastChild;er&&es;)ei=er.prev,es.insert(er,ed),er=ei}),er.fix_list_elements&&et.addNodeFilter("ul,ol",et=>{let er,ei,es=et.length;for(;es--;)if((ei=(er=et[es]).parent)&&("ul"===ei.name||"ol"===ei.name)){if(er.prev&&"li"===er.prev.name)er.prev.append(er);else{let et=new Fg("li",1);et.attr("style","list-style-type: none"),er.wrap(et)}}});let es=ei.getValidClasses();er.validate&&es&&et.addAttributeFilter("class",et=>{var er;let ei=et.length;for(;ei--;){let ed=et[ei],ec=null!==(er=ed.attr("class"))&&void 0!==er?er:"",eu=tz.explode(ec," "),ef="";for(let et=0;et<eu.length;et++){let er=eu[et],ei=!1,ec=es["*"];ec&&ec[er]&&(ei=!0),ec=es[ed.name],!ei&&ec&&ec[er]&&(ei=!0),ei&&(ef&&(ef+=" "),ef+=er)}ef.length||(ef=null),ed.attr("class",ef)}}),((et,er)=>{let{blob_cache:ei}=er;if(ei){let t=et=>{let er=et.attr("src");et.attr("src")===tF.transparentSrc||C(et.attr("data-mce-placeholder"))||C(et.attr("data-mce-bogus"))||y(er)||Fv(ei,er,!0).each(er=>{et.attr("src",er.blobUri())})};et.addAttributeFilter("src",et=>V(et,t))}})(et,er)};function zv(et){return(zv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(et){return typeof et}:function(et){return et&&"function"==typeof Symbol&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et})(et)}function jv(et,er){return(jv=Object.setPrototypeOf||function(et,er){return et.__proto__=er,et})(et,er)}function Hv(et,er,ei){return(Hv=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(et){return!1}}()?function(et,er,ei){var es=[null];es.push.apply(es,er);var ed=new(Function.bind.apply(et,es));return ei&&jv(ed,ei.prototype),ed}:Reflect.construct).apply(null,arguments)}function $v(et){return function(et){if(Array.isArray(et))return qv(et)}(et)||function(et){if("undefined"!=typeof Symbol&&null!=et[Symbol.iterator]||null!=et["@@iterator"])return Array.from(et)}(et)||function(et,er){if(et){if("string"==typeof et)return qv(et,er);var ei=Object.prototype.toString.call(et).slice(8,-1);return"Object"===ei&&et.constructor&&(ei=et.constructor.name),"Map"===ei||"Set"===ei?Array.from(et):"Arguments"===ei||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ei)?qv(et,er):void 0}}(et)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qv(et,er){(null==er||er>et.length)&&(er=et.length);for(var ei=0,es=Array(er);ei<er;ei++)es[ei]=et[ei];return es}var iH=Object.hasOwnProperty,ij=Object.setPrototypeOf,i$=Object.isFrozen,iq=Object.getPrototypeOf,iG=Object.getOwnPropertyDescriptor,iW=Object.freeze,iK=Object.seal,iY=Object.create,iX="undefined"!=typeof Reflect&&Reflect,iJ=iX.apply,iQ=iX.construct;iJ||(iJ=function(et,er,ei){return et.apply(er,ei)}),iW||(iW=function(et){return et}),iK||(iK=function(et){return et}),iQ||(iQ=function(et,er){return Hv(et,$v(er))});var iZ,i0,i1,i2=fy(Array.prototype.forEach),i3=fy(Array.prototype.pop),i8=fy(Array.prototype.push),i5=fy(String.prototype.toLowerCase),i6=fy(String.prototype.match),i9=fy(String.prototype.replace),i4=fy(String.prototype.indexOf),i7=fy(String.prototype.trim),st=fy(RegExp.prototype.test),sr=(i1=TypeError,function(){for(var et=arguments.length,er=Array(et),ei=0;ei<et;ei++)er[ei]=arguments[ei];return iQ(i1,er)});function fy(et){return function(er){for(var ei=arguments.length,es=Array(ei>1?ei-1:0),ed=1;ed<ei;ed++)es[ed-1]=arguments[ed];return iJ(et,er,es)}}function gy(et,er){ij&&ij(et,null);for(var ei=er.length;ei--;){var es=er[ei];if("string"==typeof es){var ed=i5(es);ed!==es&&(i$(er)||(er[ei]=ed),es=ed)}et[es]=!0}return et}function py(et){var er,ei=iY(null);for(er in et)iJ(iH,et,[er])&&(ei[er]=et[er]);return ei}function hy(et,er){for(;null!==et;){var ei=iG(et,er);if(ei){if(ei.get)return fy(ei.get);if("function"==typeof ei.value)return fy(ei.value)}et=iq(et)}return function(et){return console.warn("fallback value for",et),null}}var sa=iW(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),sl=iW(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),sd=iW(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),su=iW(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),sh=iW(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),sy=iW(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),sR=iW(["#text"]),sI=iW(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),sT=iW(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),sL=iW(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),sB=iW(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),sD=iK(/\{\{[\w\W]*|[\w\W]*\}\}/gm),sP=iK(/<%[\w\W]*|[\w\W]*%>/gm),sF=iK(/^data-[\-\w.\u00B7-\uFFFF]/),sM=iK(/^aria-[\-\w]+$/),sz=iK(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),sV=iK(/^(?:\w+script|data):/i),sU=iK(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),sH=iK(/^html$/i),sj=function e(){var et=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,n=function(et){return e(et)};if(n.version="2.3.8",n.removed=[],!et||!et.document||9!==et.document.nodeType)return n.isSupported=!1,n;var er=et.document,ei=et.document,es=et.DocumentFragment,ed=et.HTMLTemplateElement,ec=et.Node,eu=et.Element,ef=et.NodeFilter,ey=et.NamedNodeMap,eC=void 0===ey?et.NamedNodeMap||et.MozNamedAttrMap:ey,eS=et.HTMLFormElement,e_=et.DOMParser,eR=et.trustedTypes,eI=eu.prototype,eL=hy(eI,"cloneNode"),eB=hy(eI,"nextSibling"),eD=hy(eI,"childNodes"),eP=hy(eI,"parentNode");if("function"==typeof ed){var eF=ei.createElement("template");eF.content&&eF.content.ownerDocument&&(ei=eF.content.ownerDocument)}var eM=function(et,er){if("object"!==zv(et)||"function"!=typeof et.createPolicy)return null;var ei=null,es="data-tt-policy-suffix";er.currentScript&&er.currentScript.hasAttribute(es)&&(ei=er.currentScript.getAttribute(es));var ed="dompurify"+(ei?"#"+ei:"");try{return et.createPolicy(ed,{createHTML:function(et){return et}})}catch(et){return console.warn("TrustedTypes policy "+ed+" could not be created."),null}}(eR,er),ez=eM?eM.createHTML(""):"",eV=ei,eU=eV.implementation,eH=eV.createNodeIterator,ej=eV.createDocumentFragment,e$=eV.getElementsByTagName,eq=er.importNode,eG={};try{eG=py(ei).documentMode?ei.documentMode:{}}catch(et){}var eW={};n.isSupported="function"==typeof eP&&eU&&void 0!==eU.createHTMLDocument&&9!==eG;var eK,eY,eX=sz,eJ=null,eQ=gy({},[].concat($v(sa),$v(sl),$v(sd),$v(sh),$v(sR))),eZ=null,e0=gy({},[].concat($v(sI),$v(sT),$v(sL),$v(sB))),e1=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),e2=null,e3=null,e8=!0,e5=!0,e6=!1,e9=!1,e4=!1,e7=!1,tt=!1,tr=!1,ts=!1,td=!1,tc=!0,tu=!0,tf=!1,tv={},ty=null,tC=gy({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),tk=null,tR=gy({},["audio","video","img","source","image","track"]),tI=null,tL=gy({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tB="http://www.w3.org/1998/Math/MathML",tD="http://www.w3.org/2000/svg",tP="http://www.w3.org/1999/xhtml",tF=tP,tM=!1,tz=["application/xhtml+xml","text/html"],tV=null,tU=ei.createElement("form"),we=function(et){return et instanceof RegExp||et instanceof Function},xe=function(et){tV&&tV===et||(et&&"object"===zv(et)||(et={}),eJ="ALLOWED_TAGS"in(et=py(et))?gy({},et.ALLOWED_TAGS):eQ,eZ="ALLOWED_ATTR"in et?gy({},et.ALLOWED_ATTR):e0,tI="ADD_URI_SAFE_ATTR"in et?gy(py(tL),et.ADD_URI_SAFE_ATTR):tL,tk="ADD_DATA_URI_TAGS"in et?gy(py(tR),et.ADD_DATA_URI_TAGS):tR,ty="FORBID_CONTENTS"in et?gy({},et.FORBID_CONTENTS):tC,e2="FORBID_TAGS"in et?gy({},et.FORBID_TAGS):{},e3="FORBID_ATTR"in et?gy({},et.FORBID_ATTR):{},tv="USE_PROFILES"in et&&et.USE_PROFILES,e8=!1!==et.ALLOW_ARIA_ATTR,e5=!1!==et.ALLOW_DATA_ATTR,e6=et.ALLOW_UNKNOWN_PROTOCOLS||!1,e9=et.SAFE_FOR_TEMPLATES||!1,e4=et.WHOLE_DOCUMENT||!1,tr=et.RETURN_DOM||!1,ts=et.RETURN_DOM_FRAGMENT||!1,td=et.RETURN_TRUSTED_TYPE||!1,tt=et.FORCE_BODY||!1,tc=!1!==et.SANITIZE_DOM,tu=!1!==et.KEEP_CONTENT,tf=et.IN_PLACE||!1,eX=et.ALLOWED_URI_REGEXP||eX,tF=et.NAMESPACE||tP,et.CUSTOM_ELEMENT_HANDLING&&we(et.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(e1.tagNameCheck=et.CUSTOM_ELEMENT_HANDLING.tagNameCheck),et.CUSTOM_ELEMENT_HANDLING&&we(et.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(e1.attributeNameCheck=et.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),et.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof et.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(e1.allowCustomizedBuiltInElements=et.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),eY="application/xhtml+xml"===(eK=eK=-1===tz.indexOf(et.PARSER_MEDIA_TYPE)?"text/html":et.PARSER_MEDIA_TYPE)?function(et){return et}:i5,e9&&(e5=!1),ts&&(tr=!0),tv&&(eJ=gy({},$v(sR)),eZ=[],!0===tv.html&&(gy(eJ,sa),gy(eZ,sI)),!0===tv.svg&&(gy(eJ,sl),gy(eZ,sT),gy(eZ,sB)),!0===tv.svgFilters&&(gy(eJ,sd),gy(eZ,sT),gy(eZ,sB)),!0===tv.mathMl&&(gy(eJ,sh),gy(eZ,sL),gy(eZ,sB))),et.ADD_TAGS&&(eJ===eQ&&(eJ=py(eJ)),gy(eJ,et.ADD_TAGS)),et.ADD_ATTR&&(eZ===e0&&(eZ=py(eZ)),gy(eZ,et.ADD_ATTR)),et.ADD_URI_SAFE_ATTR&&gy(tI,et.ADD_URI_SAFE_ATTR),et.FORBID_CONTENTS&&(ty===tC&&(ty=py(ty)),gy(ty,et.FORBID_CONTENTS)),tu&&(eJ["#text"]=!0),e4&&gy(eJ,["html","head","body"]),eJ.table&&(gy(eJ,["tbody"]),delete e2.tbody),iW&&iW(et),tV=et)},tH=gy({},["mi","mo","mn","ms","mtext"]),tj=gy({},["foreignobject","desc","title","annotation-xml"]),t$=gy({},["title","style","font","a","script"]),tq=gy({},sl);gy(tq,sd),gy(tq,su);var tG=gy({},sh);gy(tG,sy);var Re=function(et){i8(n.removed,{element:et});try{et.parentNode.removeChild(et)}catch(er){try{et.outerHTML=ez}catch(er){et.remove()}}},Ae=function(et,er){try{i8(n.removed,{attribute:er.getAttributeNode(et),from:er})}catch(et){i8(n.removed,{attribute:null,from:er})}if(er.removeAttribute(et),"is"===et&&!eZ[et]){if(tr||ts)try{Re(er)}catch(et){}else try{er.setAttribute(et,"")}catch(et){}}},Oe=function(et){if(tt)et="<remove></remove>"+et;else{var er,es,ed=i6(et,/^[\r\n\t ]+/);es=ed&&ed[0]}"application/xhtml+xml"===eK&&(et='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+et+"</body></html>");var ec=eM?eM.createHTML(et):et;if(tF===tP)try{er=(new e_).parseFromString(ec,eK)}catch(et){}if(!er||!er.documentElement){er=eU.createDocument(tF,"template",null);try{er.documentElement.innerHTML=tM?"":ec}catch(et){}}var eu=er.body||er.documentElement;return et&&es&&eu.insertBefore(ei.createTextNode(es),eu.childNodes[0]||null),tF===tP?e$.call(er,e4?"html":"body")[0]:e4?er.documentElement:eu},Te=function(et){return eH.call(et.ownerDocument||et,et,ef.SHOW_ELEMENT|ef.SHOW_COMMENT|ef.SHOW_TEXT,null,!1)},Be=function(et){return"object"===zv(ec)?et instanceof ec:et&&"object"===zv(et)&&"number"==typeof et.nodeType&&"string"==typeof et.nodeName},De=function(et,er,ei){eW[et]&&i2(eW[et],function(et){et.call(n,er,ei,tV)})},Pe=function(et){if(De("beforeSanitizeElements",et,null),et instanceof eS&&("string"!=typeof et.nodeName||"string"!=typeof et.textContent||"function"!=typeof et.removeChild||!(et.attributes instanceof eC)||"function"!=typeof et.removeAttribute||"function"!=typeof et.setAttribute||"string"!=typeof et.namespaceURI||"function"!=typeof et.insertBefore)||st(/[\u0080-\uFFFF]/,et.nodeName))return Re(et),!0;var er,ei,es,ed,ec=eY(et.nodeName);if(De("uponSanitizeElement",et,{tagName:ec,allowedTags:eJ}),et.hasChildNodes()&&!Be(et.firstElementChild)&&(!Be(et.content)||!Be(et.content.firstElementChild))&&st(/<[/\w]/g,et.innerHTML)&&st(/<[/\w]/g,et.textContent)||"select"===ec&&st(/<template/i,et.innerHTML))return Re(et),!0;if(!eJ[ec]||e2[ec]){if(!e2[ec]&&Me(ec)&&(e1.tagNameCheck instanceof RegExp&&st(e1.tagNameCheck,ec)||e1.tagNameCheck instanceof Function&&e1.tagNameCheck(ec)))return!1;if(tu&&!ty[ec]){var ef=eP(et)||et.parentNode,ey=eD(et)||et.childNodes;if(ey&&ef)for(var e_=ey.length-1;e_>=0;--e_)ef.insertBefore(eL(ey[e_],!0),eB(et))}return Re(et),!0}return!(et instanceof eu)||((er=eP(et))&&er.tagName||(er={namespaceURI:tP,tagName:"template"}),ei=i5(et.tagName),es=i5(er.tagName),et.namespaceURI===tD?er.namespaceURI===tP?"svg"===ei:er.namespaceURI===tB?"svg"===ei&&("annotation-xml"===es||tH[es]):tq[ei]:et.namespaceURI===tB?er.namespaceURI===tP?"math"===ei:er.namespaceURI===tD?"math"===ei&&tj[es]:tG[ei]:et.namespaceURI===tP&&(er.namespaceURI!==tD||tj[es])&&(er.namespaceURI!==tB||tH[es])&&!tG[ei]&&(t$[ei]||!tq[ei]))?("noscript"===ec||"noembed"===ec)&&st(/<\/no(script|embed)/i,et.innerHTML)?(Re(et),!0):(e9&&3===et.nodeType&&(ed=i9(ed=et.textContent,sD," "),ed=i9(ed,sP," "),et.textContent!==ed&&(i8(n.removed,{element:et.cloneNode()}),et.textContent=ed)),De("afterSanitizeElements",et,null),!1):(Re(et),!0)},Le=function(et,er,es){if(tc&&("id"===er||"name"===er)&&(es in ei||es in tU))return!1;if(e5&&!e3[er]&&st(sF,er));else if(e8&&st(sM,er));else if(!eZ[er]||e3[er]){if(!(Me(et)&&(e1.tagNameCheck instanceof RegExp&&st(e1.tagNameCheck,et)||e1.tagNameCheck instanceof Function&&e1.tagNameCheck(et))&&(e1.attributeNameCheck instanceof RegExp&&st(e1.attributeNameCheck,er)||e1.attributeNameCheck instanceof Function&&e1.attributeNameCheck(er))||"is"===er&&e1.allowCustomizedBuiltInElements&&(e1.tagNameCheck instanceof RegExp&&st(e1.tagNameCheck,es)||e1.tagNameCheck instanceof Function&&e1.tagNameCheck(es))))return!1}else if(tI[er]);else if(st(eX,i9(es,sU,"")));else if("src"!==er&&"xlink:href"!==er&&"href"!==er||"script"===et||0!==i4(es,"data:")||!tk[et]){if(e6&&!st(sV,i9(es,sU,"")));else if(es)return!1}return!0},Me=function(et){return et.indexOf("-")>0},Ie=function(et){De("beforeSanitizeAttributes",et,null);var er,ei,es,ed,ec=et.attributes;if(ec){var eu={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:eZ};for(ed=ec.length;ed--;){var ef=er=ec[ed],ey=ef.name,eC=ef.namespaceURI;ei="value"===ey?er.value:i7(er.value),es=eY(ey);var eS=ei;if(eu.attrName=es,eu.attrValue=ei,eu.keepAttr=!0,eu.forceKeepAttr=void 0,De("uponSanitizeAttribute",et,eu),ei=eu.attrValue,!eu.forceKeepAttr){if(eu.keepAttr){if(st(/\/>/i,ei))Ae(ey,et);else if(e9&&(ei=i9(ei,sD," "),ei=i9(ei,sP," ")),Le(eY(et.nodeName),es,ei)){if(ei!==eS)try{eC?et.setAttributeNS(eC,ey,ei):et.setAttribute(ey,ei)}catch(er){Ae(ey,et)}}else Ae(ey,et)}else Ae(ey,et)}}De("afterSanitizeAttributes",et,null)}},Fe=function e(et){var er,ei=Te(et);for(De("beforeSanitizeShadowDOM",et,null);er=ei.nextNode();)De("uponSanitizeShadowNode",er,null),Pe(er)||(er.content instanceof es&&e(er.content),Ie(er));De("afterSanitizeShadowDOM",et,null)};return n.sanitize=function(ei,ed){if((tM=!ei)&&(ei="<!-->"),"string"!=typeof ei&&!Be(ei)){if("function"!=typeof ei.toString)throw sr("toString is not a function");if("string"!=typeof(ei=ei.toString()))throw sr("dirty is not a string, aborting")}if(!n.isSupported){if("object"===zv(et.toStaticHTML)||"function"==typeof et.toStaticHTML){if("string"==typeof ei)return et.toStaticHTML(ei);if(Be(ei))return et.toStaticHTML(ei.outerHTML)}return ei}if(e7||xe(ed),n.removed=[],"string"==typeof ei&&(tf=!1),tf){if(ei.nodeName){var eu,ef,ey,eC,eS,e_=eY(ei.nodeName);if(!eJ[e_]||e2[e_])throw sr("root node is forbidden and cannot be sanitized in-place")}}else if(ei instanceof ec)1===(ef=(eu=Oe("<!---->")).ownerDocument.importNode(ei,!0)).nodeType&&"BODY"===ef.nodeName||"HTML"===ef.nodeName?eu=ef:eu.appendChild(ef);else{if(!tr&&!e9&&!e4&&-1===ei.indexOf("<"))return eM&&td?eM.createHTML(ei):ei;if(!(eu=Oe(ei)))return tr?null:td?ez:""}eu&&tt&&Re(eu.firstChild);for(var eR=Te(tf?ei:eu);ey=eR.nextNode();)3===ey.nodeType&&ey===eC||Pe(ey)||(ey.content instanceof es&&Fe(ey.content),Ie(ey),eC=ey);if(eC=null,tf)return ei;if(tr){if(ts)for(eS=ej.call(eu.ownerDocument);eu.firstChild;)eS.appendChild(eu.firstChild);else eS=eu;return eZ.shadowroot&&(eS=eq.call(er,eS,!0)),eS}var eI=e4?eu.outerHTML:eu.innerHTML;return e4&&eJ["!doctype"]&&eu.ownerDocument&&eu.ownerDocument.doctype&&eu.ownerDocument.doctype.name&&st(sH,eu.ownerDocument.doctype.name)&&(eI="<!DOCTYPE "+eu.ownerDocument.doctype.name+">\n"+eI),e9&&(eI=i9(eI,sD," "),eI=i9(eI,sP," ")),eM&&td?eM.createHTML(eI):eI},n.setConfig=function(et){xe(et),e7=!0},n.clearConfig=function(){tV=null,e7=!1},n.isValidAttribute=function(et,er,ei){return tV||xe({}),Le(eY(et),eY(er),ei)},n.addHook=function(et,er){"function"==typeof er&&(eW[et]=eW[et]||[],i8(eW[et],er))},n.removeHook=function(et){if(eW[et])return i3(eW[et])},n.removeHooks=function(et){eW[et]&&(eW[et]=[])},n.removeAllHooks=function(){eW={}},n}();let s$=tz.each,sq=tz.trim,sG=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],sW={ftp:21,http:80,https:443,mailto:25},sK=["img","video"],$y=(et,er,ei)=>{var es;let ed=(et=>{try{return decodeURIComponent(et)}catch(er){return unescape(et)}})(er).replace(/\s/g,"");return!et.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(ed)||!et.allow_html_data_urls&&(/^data:image\//i.test(ed)?(C(es=et.allow_svg_data_urls)?!es:!C(ei)||!H(sK,ei))&&/^data:image\/svg\+xml/i.test(ed):/^data:/i.test(ed)))};let qy=class qy{static parseDataUri(et){let er;let ei=decodeURIComponent(et).split(","),es=/data:([^;]+)/.exec(ei[0]);return es&&(er=es[1]),{type:er,data:ei[1]}}static isDomSafe(et,er,ei={}){if(ei.allow_script_urls)return!0;{let es=rQ.decode(et).replace(/[\s\u0000-\u001F]+/g,"");return!$y(ei,es,er)}}static getDocumentBaseUrl(et){var er;let ei;return ei=0!==et.protocol.indexOf("http")&&"file:"!==et.protocol?null!==(er=et.href)&&void 0!==er?er:"":et.protocol+"//"+et.host+et.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(ei)&&(ei=ei.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(ei)||(ei+="/")),ei}constructor(et,er={}){this.path="",this.directory="",et=sq(et),this.settings=er;let ei=er.base_uri,es=this;if(/^([\w\-]+):([^\/]{2})/i.test(et)||/^\s*#/.test(et))return void(es.source=et);let ed=0===et.indexOf("//");if(0!==et.indexOf("/")||ed||(et=(ei&&ei.protocol||"http")+"://mce_host"+et),!/^[\w\-]*:?\/\//.test(et)){let er=ei?ei.path:new qy(document.location.href).directory;if(""===(null==ei?void 0:ei.protocol))et="//mce_host"+es.toAbsPath(er,et);else{let ed=/([^#?]*)([#?]?.*)/.exec(et);ed&&(et=(ei&&ei.protocol||"http")+"://mce_host"+es.toAbsPath(er,ed[1])+ed[2])}}et=et.replace(/@@/g,"(mce_at)");let ec=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(et);ec&&s$(sG,(et,er)=>{let ei=ec[er];ei&&(ei=ei.replace(/\(mce_at\)/g,"@@")),es[et]=ei}),ei&&(es.protocol||(es.protocol=ei.protocol),es.userInfo||(es.userInfo=ei.userInfo),es.port||"mce_host"!==es.host||(es.port=ei.port),es.host&&"mce_host"!==es.host||(es.host=ei.host),es.source=""),ed&&(es.protocol="")}setPath(et){let er=/^(.*?)\/?(\w+)?$/.exec(et);er&&(this.path=er[0],this.directory=er[1],this.file=er[2]),this.source="",this.getURI()}toRelative(et){if("./"===et)return et;let er=new qy(et,{base_uri:this});if("mce_host"!==er.host&&this.host!==er.host&&er.host||this.port!==er.port||this.protocol!==er.protocol&&""!==er.protocol)return er.getURI();let ei=this.getURI(),es=er.getURI();if(ei===es||"/"===ei.charAt(ei.length-1)&&ei.substr(0,ei.length-1)===es)return ei;let ed=this.toRelPath(this.path,er.path);return er.query&&(ed+="?"+er.query),er.anchor&&(ed+="#"+er.anchor),ed}toAbsolute(et,er){let ei=new qy(et,{base_uri:this});return ei.getURI(er&&this.isSameOrigin(ei))}isSameOrigin(et){if(this.host==et.host&&this.protocol==et.protocol){if(this.port==et.port)return!0;let er=this.protocol?sW[this.protocol]:null;if(er&&(this.port||er)==(et.port||er))return!0}return!1}toRelPath(et,er){let ei,es,ed=0,ec="",eu=et.substring(0,et.lastIndexOf("/")).split("/"),ef=er.split("/");if(eu.length>=ef.length){for(ei=0,es=eu.length;ei<es;ei++)if(ei>=ef.length||eu[ei]!==ef[ei]){ed=ei+1;break}}if(eu.length<ef.length){for(ei=0,es=ef.length;ei<es;ei++)if(ei>=eu.length||eu[ei]!==ef[ei]){ed=ei+1;break}}if(1===ed)return er;for(ei=0,es=eu.length-(ed-1);ei<es;ei++)ec+="../";for(ei=ed-1,es=ef.length;ei<es;ei++)ec+=ei!==ed-1?"/"+ef[ei]:ef[ei];return ec}toAbsPath(et,er){let ei,es=0,ed=/\/$/.test(er)?"/":"",ec=et.split("/"),eu=er.split("/"),ef=[];s$(ec,et=>{et&&ef.push(et)});let ey=[];for(let et=eu.length-1;et>=0;et--)0!==eu[et].length&&"."!==eu[et]&&(".."!==eu[et]?es>0?es--:ey.push(eu[et]):es++);let eC=ef.length-es;return 0!==(ei=eC<=0?oe(ey).join("/"):ef.slice(0,eC).join("/")+"/"+oe(ey).join("/")).indexOf("/")&&(ei="/"+ei),ed&&ei.lastIndexOf("/")!==ei.length-1&&(ei+=ed),ei}getURI(et=!1){let er;return this.source&&!et||(er="",et||(this.protocol?er+=this.protocol+"://":er+="//",this.userInfo&&(er+=this.userInfo+"@"),this.host&&(er+=this.host),this.port&&(er+=":"+this.port)),this.path&&(er+=this.path),this.query&&(er+="?"+this.query),this.anchor&&(er+="#"+this.anchor),this.source=er),this.source}};let sY=tz.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),sX="data-mce-type",sJ=0,Gy=(et,er,ei,es)=>{var ed,ec,eu,ef;let ey=er.validate,eC=ei.getSpecialElements();8===et.nodeType&&!er.allow_conditional_comments&&/^\[if/i.test(null!==(ed=et.nodeValue)&&void 0!==ed?ed:"")&&(et.nodeValue=" "+et.nodeValue);let eS=null!==(ec=null==es?void 0:es.tagName)&&void 0!==ec?ec:et.nodeName.toLowerCase();if(1!==et.nodeType||"body"===eS)return;let e_=pn(et),eR=nn(e_,sX),eI=en(e_,"data-mce-bogus");if(!eR&&eP(eI))return void("all"===eI?wo(e_):xo(e_));let eL=ei.getElementRule(eS);if(!ey||eL){if(C(es)&&(es.allowedTags[eS]=!0),ey&&eL&&!eR){if(V(null!==(eu=eL.attributesForced)&&void 0!==eu?eu:[],et=>{Jt(e_,et.name,"{$uid}"===et.value?"mce_"+sJ++:et.value)}),V(null!==(ef=eL.attributesDefault)&&void 0!==ef?ef:[],et=>{nn(e_,et.name)||Jt(e_,et.name,"{$uid}"===et.value?"mce_"+sJ++:et.value)}),eL.attributesRequired&&!$(eL.attributesRequired,et=>nn(e_,et))||eL.removeEmptyAttrs&&(et=>{let er=et.dom.attributes;return null==er||0===er.length})(e_))return void xo(e_);eL.outputName&&eL.outputName!==eS&&((et,er)=>{let ei=((et,er)=>{let ei=bn(er),es=rn(et);return Zt(ei,es),ei})(et,er);po(et,ei);let es=Mn(et);yo(ei,es),wo(et)})(e_,eL.outputName)}}else ke(eC,eS)?wo(e_):xo(e_)},Yy=(et,er,ei,es,ed)=>!(es in sY&&$y(et,ed,ei))&&(!et.validate||er.isValid(ei,es)||He(es,"data-")||He(es,"aria-")),Xy=(et,er)=>et.hasAttribute(sX)&&("id"===er||"class"===er||"style"===er),Qy=(et,er)=>et in er.getBoolAttrs(),Jy=(et,er,ei)=>{let{attributes:es}=et;for(let ed=es.length-1;ed>=0;ed--){let ec=es[ed],eu=ec.name,ef=ec.value;Yy(er,ei,et.tagName.toLowerCase(),eu,ef)||Xy(et,eu)?Qy(eu,ei)&&et.setAttribute(eu,eu):et.removeAttribute(eu)}},Zy=(et,er)=>{let ei=sj();return ei.addHook("uponSanitizeElement",(ei,es)=>{Gy(ei,et,er,es)}),ei.addHook("uponSanitizeAttribute",(ei,es)=>{let ed=ei.tagName.toLowerCase(),{attrName:ec,attrValue:eu}=es;es.keepAttr=Yy(et,er,ed,ec,eu),es.keepAttr?(es.allowedAttributes[ec]=!0,Qy(ec,er)&&(es.attrValue=ec),et.allow_svg_data_urls&&He(eu,"data:image/svg+xml")&&(es.forceKeepAttr=!0)):Xy(ei,ec)&&(es.forceKeepAttr=!0)}),ei},sQ=tz.makeMap,sZ=tz.extend,nC=(et,er,ei)=>{let es=et.name,ed=es in ei&&"title"!==es&&"textarea"!==es,ec=er.childNodes;for(let er=0,es=ec.length;er<es;er++){let es=ec[er],eu=new Fg(es.nodeName.toLowerCase(),es.nodeType);if(tY(es)){let et=es.attributes;for(let er=0,ei=et.length;er<ei;er++){let ei=et[er];eu.attr(ei.name,ei.value)}}else tJ(es)?(eu.value=es.data,ed&&(eu.raw=!0)):(t0(es)||tQ(es)||tZ(es))&&(eu.value=es.data);nC(eu,es,ei),et.append(eu)}},oC=(et={},er=ca())=>{let ei=Av(),es=Av(),ed={validate:!0,root_name:"body",sanitize:!0,...et},ec=new DOMParser,eu=((et,er)=>{if(et.sanitize){let ei=Zy(et,er);return(er,es)=>{ei.sanitize(er,((et,er)=>{let ei={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return ei.PARSER_MEDIA_TYPE=er,et.allow_script_urls?ei.ALLOWED_URI_REGEXP=/.*/:et.allow_html_data_urls&&(ei.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),ei})(et,es)),ei.removed=[]}}return(ei,es)=>{let ed;let ec=document.createNodeIterator(ei,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);for(;ed=ec.nextNode();)Gy(ed,et,er),tY(ed)&&Jy(ed,et,er)}})(ed,er),ef=ei.addFilter,ey=ei.getFilters,eC=ei.removeFilter,eS=es.addFilter,e_=es.getFilters,eR=es.removeFilter,g=(et,ei)=>{let es=eP(ei.attr(sX)),ed=1===ei.type&&!ke(et,ei.name)&&!Ts(er,ei);return 3===ei.type||ed&&!es},eI={schema:er,addAttributeFilter:eS,getAttributeFilters:e_,removeAttributeFilter:eR,addNodeFilter:ef,getNodeFilters:ey,removeNodeFilter:eC,parse:(et,ei={})=>{var es;let ef=ed.validate,eC=null!==(es=ei.context)&&void 0!==es?es:ed.root_name,eS=((et,ei,es="html")=>{let ed="xhtml"===es?"application/xhtml+xml":"text/html",ef=ke(er.getSpecialElements(),ei.toLowerCase()),ey=ef?`<${ei}>${et}</${ei}>`:et,eC="xhtml"===es?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${ey}</body></html>`:`<body>${ey}</body>`,eS=ec.parseFromString(eC,ed).body;return eu(eS,ed),ef?eS.firstChild:eS})(et,eC,ei.format);Es(er,eS);let eR=new Fg(eC,11);nC(eR,eS,er.getSpecialElements()),eS.innerHTML="";let[eI,eL]=((et,er,ei,es)=>{let ed=ei.validate,ec=er.getNonEmptyElements(),eu=er.getWhitespaceElements(),ef=sZ(sQ("script,style,head,html,body,title,meta,param"),er.getBlockElements()),ey=la(er),eC=/[ \t\r\n]+/g,eS=/^[ \t\r\n]+/,e_=/[ \t\r\n]+$/,m=et=>{let er=et.parent;for(;C(er);){if(er.name in eu)return!0;er=er.parent}return!1},f=et=>et.name in ef||Ts(er,et),g=(er,ei)=>{let ed=ei?er.prev:er.next;return!C(ed)&&!y(er.parent)&&f(er.parent)&&(er.parent!==et||!0===es.isRootContent)};return[et=>{var er,ei;if(3===et.type&&!m(et)){let es=null!==(er=et.value)&&void 0!==er?er:"";es=es.replace(eC," "),(C(ei=et.prev)&&(f(ei)||"br"===ei.name)||g(et,!0))&&(es=es.replace(eS,"")),0===es.length?et.remove():et.value=es}},et=>{var ef,eC;if(1===et.type){let ef=er.getElementRule(et.name);if(ed&&ef){let ed=eb(er,ec,eu,et);ef.paddInEmptyBlock&&ed&&(et=>{let ei=et;for(;C(ei);){if(ei.name in ey)return eb(er,ec,eu,ei);ei=ei.parent}return!1})(et)?Jh(ei,es,f,et):ef.removeEmpty&&ed?f(et)?et.remove():et.unwrap():ef.paddEmpty&&(ed||Zh(et,"#text")&&(null===(eC=null==et?void 0:et.firstChild)||void 0===eC?void 0:eC.value)==="\xa0")&&Jh(ei,es,f,et)}}else if(3===et.type&&!m(et)){let er=null!==(ef=et.value)&&void 0!==ef?ef:"";(et.next&&f(et.next)||g(et,!1))&&(er=er.replace(e_,"")),0===er.length?et.remove():et.value=er}}]})(eR,er,ed,ei),eB=[],eD=ef?et=>{rb(er,et)&&eB.push(et)}:E,eP={nodes:{},attributes:{}},w=et=>Yh(ey(),e_(),et,eP);if(((et,er,ei)=>{let es=[];for(let ei=et,ed=ei;ei;ed=ei,ei=ei.walk()){let ec=ei;V(er,et=>et(ec)),y(ec.parent)&&ec!==et?ei=ed:es.push(ec)}for(let et=es.length-1;et>=0;et--){let er=es[et];V(ei,et=>et(er))}})(eR,[eI,w],[eL,eD]),eB.reverse(),ef&&eB.length>0){if(ei.context){let{pass:et,fail:es}=K(eB,et=>et.parent===eR);ob(es,er,eR,w),ei.invalid=et.length>0}else ob(eB,er,eR,w)}let eF=((et,er)=>{var ei;let es=null!==(ei=er.forced_root_block)&&void 0!==ei?ei:et.forced_root_block;return!1===es?"":!0===es?"p":es})(ed,ei);return eF&&("body"===eR.name||ei.isRootContent)&&((et,ei)=>{let es=sZ(sQ("script,style,head,html,body,title,meta,param"),er.getBlockElements()),ec=/^[ \t\r\n]+/,eu=/[ \t\r\n]+$/,ef=et.firstChild,ey=null,d=et=>{var er,ei;et&&((ef=et.firstChild)&&3===ef.type&&(ef.value=null===(er=ef.value)||void 0===er?void 0:er.replace(ec,"")),(ef=et.lastChild)&&3===ef.type&&(ef.value=null===(ei=ef.value)||void 0===ei?void 0:ei.replace(eu,"")))};if(er.isValidChild(et.name,ei.toLowerCase())){for(;ef;){let er=ef.next;g(es,ef)?(ey||((ey=new Fg(ei,1)).attr(ed.forced_root_block_attrs),et.insert(ey,ef)),ey.append(ef)):(d(ey),ey=null),ef=er}d(ey)}})(eR,eF),ei.invalid||Xh(eP,ei),eR}};return Uv(eI,ed),ed.inline_styles&&Ov(eI,ed,er),eI},rC=(et,er,ei)=>{let es=gb(et)?Xg({validate:!1}).serialize(et):et,ed=er(es);if(ed.isDefaultPrevented())return ed;if(gb(et)){if(ed.content!==es){let er=oC({validate:!1,forced_root_block:!1,sanitize:ei}).parse(ed.content,{context:et.name});return{...ed,content:er}}return{...ed,content:et}}return ed},sC=(et,er)=>{if(er.no_events)return nz.value(er);{let ei=et.dispatch("BeforeGetContent",er);return ei.isDefaultPrevented()?nz.error(Jm(et,{content:"",...ei}).content):nz.value(ei)}},aC=(et,er,ei)=>{if(ei.no_events)return er;{let es=rC(er,er=>Jm(et,{...ei,content:er}),aK(et));return es.content}},iC=(et,er)=>{if(er.no_events)return nz.value(er);{let ei=rC(er.content,ei=>{var es;return es={...er,content:ei},et.dispatch("BeforeSetContent",es)},aK(et));return ei.isDefaultPrevented()?(Qm(et,ei),nz.error(void 0)):nz.value(ei)}},lC=(et,er,ei)=>{ei.no_events||Qm(et,{...ei,content:er})},dC=(et,er,ei)=>({element:et,width:er,rows:ei}),cC=(et,er)=>({element:et,cells:er}),uC=(et,er)=>({x:et,y:er}),mC=(et,er)=>tn(et,er).bind(Xe).getOr(1),fC=(et,er,ei)=>{let es=et.rows;return!!(es[ei]?es[ei].cells:[])[er]},gC=et=>X(et,(et,er)=>er.cells.length>et?er.cells.length:et,0),pC=(et,er)=>{let ei=et.rows;for(let et=0;et<ei.length;et++){let es=ei[et].cells;for(let ei=0;ei<es.length;ei++)if(En(es[ei],er))return I.some(uC(ei,et))}return I.none()},hC=(et,er,ei,es,ed)=>{let ec=[],eu=et.rows;for(let et=ei;et<=ed;et++){let ei=eu[et].cells,ed=er<es?ei.slice(er,es+1):ei.slice(es,er+1);ec.push(cC(eu[et].element,ed))}return ec},bC=et=>((et,er)=>{let ei=oi(et.element),es=bn("tbody");return yo(es,er),bo(ei,es),ei})(et,q(et.rows,et=>{let er=q(et.cells,et=>{let er=ri(et);return on(er,"colspan"),on(er,"rowspan"),er}),ei=oi(et.element);return yo(ei,er),ei})),vC=(et,er)=>{let ei=pn(er.commonAncestorContainer),es=bp(ei,et),ed=G(es,Br),ec=J(es,et=>"li"===Ht(et)&&Zu(et,er)).fold(N([]),et=>J(es,et=>"ul"===Ht(et)||"ol"===Ht(et)).map(et=>{let er=bn(Ht(et)),ei=ye(mo(et),(et,er)=>He(er,"list-style"));return io(er,ei),[bn("li"),er]}).getOr([])),eu=ed.concat(ec.length?ec:ry(ei)?An(ei).filter(rv).fold(N([]),et=>[ei,et]):rv(ei)?[ei]:[]);return q(eu,oi)},yC=()=>Cf([]),CC=(et,er)=>Zn(er[0],"table",O(En,et)).bind(et=>{let ei=er[0],es=er[er.length-1],ed=(et=>{let er=dC(oi(et),0,[]);return V(Fo(et,"tr"),(et,ei)=>{V(Fo(et,"td,th"),(es,ed)=>{((et,er,ei,es,ed)=>{let ec=mC(ed,"rowspan"),eu=mC(ed,"colspan"),ef=et.rows;for(let et=ei;et<ei+ec;et++){ef[et]||(ef[et]=cC(ri(es),[]));for(let es=er;es<er+eu;es++)ef[et].cells[es]=et===ei&&es===er?ed:oi(ed)}})(er,((et,er,ei)=>{for(;fC(et,er,ei);)er++;return er})(er,ed,ei),ei,et,es)})}),dC(er.element,gC(er.rows),er.rows)})(et);return pC(ed,ei).bind(et=>pC(ed,es).map(er=>((et,er,ei)=>{let es=er.x,ed=er.y,ec=ei.x,eu=ei.y,ef=ed<eu?hC(et,es,ed,ec,eu):hC(et,es,eu,ec,ed);return dC(et.element,gC(ef),ef)})(ed,et,er))).map(et=>Cf([bC(et)]))}).getOrThunk(yC),wC=(et,er)=>{var ei;let es=Gu(er,et);return es.length>0?CC(et,es):er.length>0&&er[0].collapsed?yC():((et,er)=>{let ei=X(er,(et,er)=>(bo(er,et),er),et);return er.length>0?Cf([ei]):ei})(pn((ei=er[0]).cloneContents()),vC(et,ei))},xC=(et,er)=>er>=0&&er<et.length&&Fu(et.charAt(er)),kC=et=>Fr(et.innerText),EC=et=>tY(et)?et.outerHTML:tJ(et)?rQ.encodeRaw(et.data,!1):t0(et)?"<!--"+et.data+"-->":"",SC=(et,er)=>{var ei;let es;return ei=((et,er)=>{let ei=et.length+er.length+2,es=Array(ei),ed=Array(ei),s=(ei,es,ed,ec,eu)=>{let ef=i(ei,es,ed,ec);if(null===ef||ef.start===es&&ef.diag===es-ec||ef.end===ei&&ef.diag===ei-ed){let ef=ei,ey=ed;for(;ef<es||ey<ec;)ef<es&&ey<ec&&et[ef]===er[ey]?(eu.push([0,et[ef]]),++ef,++ey):es-ei>ec-ed?(eu.push([2,et[ef]]),++ef):(eu.push([1,er[ey]]),++ey)}else{s(ei,ef.start,ed,ef.start-ef.diag,eu);for(let er=ef.start;er<ef.end;++er)eu.push([0,et[er]]);s(ef.end,es,ef.end-ef.diag,ec,eu)}},a=(ei,es,ed,ec)=>{let eu=ei;for(;eu-es<ec&&eu<ed&&et[eu]===er[eu-es];)++eu;return{start:ei,end:eu,diag:es}},i=(ei,ec,eu,ef)=>{let ey,eC,eS,e_,eR;let eI=ec-ei,eL=ef-eu;if(0===eI||0===eL)return null;let eB=eI-eL,eD=eL+eI,eP=(eD%2==0?eD:eD+1)/2;for(es[1+eP]=ei,ed[1+eP]=ec+1,ey=0;ey<=eP;++ey){for(eC=-ey;eC<=ey;eC+=2){for(eS=eC+eP,eC===-ey||eC!==ey&&es[eS-1]<es[eS+1]?es[eS]=es[eS+1]:es[eS]=es[eS-1]+1,eR=(e_=es[eS])-ei+eu-eC;e_<ec&&eR<ef&&et[e_]===er[eR];)es[eS]=++e_,++eR;if(eB%2!=0&&eB-ey<=eC&&eC<=eB+ey&&ed[eS-eB]<=es[eS])return a(ed[eS-eB],eC+ei-eu,ec,ef)}for(eC=eB-ey;eC<=eB+ey;eC+=2){for(eS=eC+eP-eB,eC===eB-ey||eC!==eB+ey&&ed[eS+1]<=ed[eS-1]?ed[eS]=ed[eS+1]-1:ed[eS]=ed[eS-1],eR=(e_=ed[eS]-1)-ei+eu-eC;e_>=ei&&eR>=eu&&et[e_]===er[eR];)ed[eS]=e_--,eR--;if(eB%2==0&&-ey<=eC&&eC<=ey&&ed[eS]<=es[eS+eB])return a(ed[eS],eC+ei-eu,ec,ef)}}return null},ec=[];return s(0,et.length,0,er.length,ec),ec})(q(eY(er.childNodes),EC),et),es=0,V(ei,et=>{0===et[0]?es++:1===et[0]?(((et,er,ei)=>{let es=(et=>{let er;let ei=document.createElement("div"),es=document.createDocumentFragment();for(et&&(ei.innerHTML=et);er=ei.firstChild;)es.appendChild(er);return es})(er);if(et.hasChildNodes()&&ei<et.childNodes.length){let er=et.childNodes[ei];et.insertBefore(es,er)}else et.appendChild(es)})(er,et[1],es),es++):2===et[0]&&((et,er)=>{if(et.hasChildNodes()&&er<et.childNodes.length){let ei=et.childNodes[er];et.removeChild(ei)}})(er,es)}),er},s0=Pe(()=>document.implementation.createHTMLDocument("undo")),NC=et=>{let er=et.serializer.getTempAttrs(),ei=qg(et.getBody(),er);return null!==ei.querySelector("iframe")?{type:"fragmented",fragments:G(q(eY(ei.childNodes),S(Fr,EC)),et=>et.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:Fr(ei.innerHTML),bookmark:null,beforeBookmark:null}},RC=(et,er,ei)=>{let es=ei?er.beforeBookmark:er.bookmark;"fragmented"===er.type?SC(er.fragments,et.getBody()):et.setContent(er.content,{format:"raw",no_selection:!C(es)||!Su(es)||!es.isFakeCaret}),es&&(et.selection.moveToBookmark(es),et.selection.scrollIntoView())},AC=et=>"fragmented"===et.type?et.fragments.join(""):et.content,OC=et=>{let er=bn("body",s0());return So(er,AC(et)),V(Fo(er,"*[data-mce-bogus]"),xo),Eo(er)},TC=(et,er)=>!(!et||!er)&&(AC(et)===AC(er)||OC(et)===OC(er)),BC=et=>0===et.get(),DC=(et,er,ei)=>{BC(ei)&&(et.typing=er)},PC=(et,er)=>{et.typing&&(DC(et,!1,er),et.add())},LC=et=>({init:{bindEvents:E},undoManager:{beforeChange:(er,ei)=>{BC(er)&&ei.set(nM(et.selection))},add:(er,ei,es,ed,ec,eu)=>((et,er,ei,es,ed,ec,eu)=>{let ef=NC(et),ey=tz.extend(ec||{},ef);if(!BC(es)||et.removed)return null;let eC=er.data[ei.get()];if(et.dispatch("BeforeAddUndo",{level:ey,lastLevel:eC,originalEvent:eu}).isDefaultPrevented()||eC&&TC(eC,ey))return null;er.data[ei.get()]&&ed.get().each(et=>{er.data[ei.get()].beforeBookmark=et});let eS=oJ(et);if(eS&&er.data.length>eS){for(let et=0;et<er.data.length-1;et++)er.data[et]=er.data[et+1];er.data.length--,ei.set(er.data.length)}ey.bookmark=nM(et.selection),ei.get()<er.data.length-1&&(er.data.length=ei.get()+1),er.data.push(ey),ei.set(er.data.length-1);let e_={level:ey,lastLevel:eC,originalEvent:eu};return ei.get()>0?(et.setDirty(!0),et.dispatch("AddUndo",e_),et.dispatch("change",e_)):et.dispatch("AddUndo",e_),ey})(et,er,ei,es,ed,ec,eu),undo:(er,ei,es)=>{let ed;return er.typing&&(er.add(),er.typing=!1,DC(er,!1,ei)),es.get()>0&&(es.set(es.get()-1),RC(et,ed=er.data[es.get()],!0),et.setDirty(!0),et.dispatch("Undo",{level:ed})),ed},redo:(er,ei)=>{let es;return er.get()<ei.length-1&&(er.set(er.get()+1),RC(et,es=ei[er.get()],!1),et.setDirty(!0),et.dispatch("Redo",{level:es})),es},clear:(er,ei)=>{er.data=[],ei.set(0),er.typing=!1,et.dispatch("ClearUndos")},reset:et=>{et.clear(),et.add()},hasUndo:(er,ei)=>ei.get()>0||er.typing&&er.data[0]&&!TC(NC(et),er.data[0]),hasRedo:(et,er)=>er.get()<et.data.length-1&&!et.typing,transact:(et,er,ei)=>(PC(et,er),et.beforeChange(),et.ignore(ei),et.add()),ignore:(et,er)=>((et,er)=>{try{et.set(et.get()+1),er()}finally{et.set(et.get()-1)}})(et,er),extra:(er,ei,es,ed)=>((et,er,ei,es,ed)=>{if(er.transact(es)){let es=er.data[ei.get()].bookmark,ec=er.data[ei.get()-1];RC(et,ec,!0),er.transact(ed)&&(er.data[ei.get()-1].beforeBookmark=es)}})(et,er,ei,es,ed)},formatter:{match:(er,ei,es,ed)=>Sb(et,er,ei,es,ed),matchAll:(er,ei)=>((et,er,ei)=>{let es=[],ed={},ec=et.selection.getStart();return et.dom.getParent(ec,ec=>{for(let eu=0;eu<er.length;eu++){let ef=er[eu];!ed[ef]&&Eb(et,ec,ef,ei)&&(ed[ef]=!0,es.push(ef))}},et.dom.getRoot()),es})(et,er,ei),matchNode:(er,ei,es,ed)=>Eb(et,er,ei,es,ed),canApply:er=>((et,er)=>{let ei=et.formatter.get(er),es=et.dom;if(ei&&et.selection.isEditable()){let er=et.selection.getStart(),ed=ym(es,er);for(let et=ei.length-1;et>=0;et--){let er=ei[et];if(!xm(er))return!0;for(let et=ed.length-1;et>=0;et--)if(es.is(ed[et],er.selector))return!0}}return!1})(et,er),closest:er=>((et,er)=>{let n=er=>En(er,pn(et.getBody()));return I.from(et.selection.getStart(!0)).bind(ei=>vb(pn(ei),ei=>ue(er,er=>Eb(et,ei.dom,er)?I.some(er):I.none()),n)).getOrNull()})(et,er),apply:(er,ei,es)=>xv(et,er,ei,es),remove:(er,ei,es,ed)=>hv(et,er,ei,es,ed),toggle:(er,ei,es)=>((et,er,ei,es)=>{let ed=et.formatter.get(er);ed&&(!Sb(et,er,ei,es)||"toggle"in ed[0]&&!ed[0].toggle?xv(et,er,ei,es):hv(et,er,ei,es))})(et,er,ei,es),formatChanged:(er,ei,es,ed,ec)=>(((et,er,ei,es,ed,ec)=>{let eu=er.get();V(ei.split(","),er=>{let ei=xe(eu,er).getOrThunk(()=>{let et={withSimilar:{state:Da(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Da(!1),similar:!1,callbacks:[]},withVars:[]};return eu[er]=et,et}),i=()=>{let ei=_v(et);return Sv(et,ei,er,ed,ec).isSome()};if(eU(ec)){let et=ed?ei.withSimilar:ei.withoutSimilar;et.callbacks.push(es),1===et.callbacks.length&&et.state.set(i())}else ei.withVars.push({state:Da(i()),similar:ed,vars:ec,callback:es})}),er.set(eu)})(et,er,ei,es,ed,ec),{unbind:()=>((et,er,ei)=>{let es=et.get();V(er.split(","),et=>xe(es,et).each(er=>{es[et]={withSimilar:{...er.withSimilar,callbacks:G(er.withSimilar.callbacks,et=>et!==ei)},withoutSimilar:{...er.withoutSimilar,callbacks:G(er.withoutSimilar.callbacks,et=>et!==ei)},withVars:G(er.withVars,et=>et.callback!==ei)}})),et.set(es)})(er,ei,es)})},editor:{getContent:er=>I.from(et.getBody()).fold(N("tree"===er.format?new Fg("body",11):""),ei=>Kg(et,er,ei)),setContent:(er,ei)=>I.from(et.getBody()).map(es=>gb(er)?((et,er,ei,es)=>{Qh(et.parser.getNodeFilters(),et.parser.getAttributeFilters(),ei);let ed=Xg({validate:!1},et.schema).serialize(ei),ec=rI(pn(er))?ed:tz.trim(ed);return pb(et,ec,es.no_selection),{content:ei,html:ec}})(et,es,er,ei):((et,er,ei,es)=>{if(0===ei.length||/^\s+$/.test(ei)){let ed='<br data-mce-bogus="1">';"TABLE"===er.nodeName?ei="<tr><td>"+ed+"</td></tr>":/^(UL|OL)$/.test(er.nodeName)&&(ei="<li>"+ed+"</li>");let ec=nX(et);return et.schema.isValidChild(er.nodeName.toLowerCase(),ec.toLowerCase())?(ei=ed,ei=et.dom.createHTML(ec,nJ(et),ei)):ei||(ei=ed),pb(et,ei,es.no_selection),{content:ei,html:ei}}{"raw"!==es.format&&(ei=Xg({validate:!1},et.schema).serialize(et.parser.parse(ei,{isRootContent:!0,insert:!0})));let ed=rI(pn(er))?ei:tz.trim(ei);return pb(et,ed,es.no_selection),{content:ed,html:ed}}})(et,es,er,ei)).getOr({content:er,html:gb(ei.content)?"":ei.content}),insertContent:(er,ei)=>fb(et,er,ei),addVisual:er=>((et,er)=>{let ei=et.dom,es=C(er)?er:et.getBody();V(ei.select("table,a",es),er=>{switch(er.nodeName){case"TABLE":let es=o6(et),ed=ei.getAttrib(er,"border");ed&&"0"!==ed||!et.hasVisual?ei.removeClass(er,es):ei.addClass(er,es);break;case"A":if(!ei.getAttrib(er,"href")){let es=ei.getAttrib(er,"name")||er.id,ed=o9(et);es&&et.hasVisual?ei.addClass(er,ed):ei.removeClass(er,ed)}}}),et.dispatch("VisualAid",{element:er,hasVisual:et.hasVisual})})(et,er)},selection:{getContent:(er,ei)=>((et,er,ei={})=>{let es={...ei,format:er,get:!0,selection:!0,getInner:!0};return sC(et,es).fold(R,er=>{let ei=((et,er)=>{if("text"===er.format)return I.from(et.selection.getRng()).map(er=>{var ei;let es=I.from(et.dom.getParent(er.commonAncestorContainer,et.dom.isBlock)),ed=et.getBody(),ec=es.map(et=>et.nodeName).getOr("div").toLowerCase(),eu=pn(er.cloneContents());Vg(eu),Wg(eu);let ef=et.dom.add(ed,ec,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},eu.dom),ey=kC(ef),eC=Fr(null!==(ei=ef.textContent)&&void 0!==ei?ei:"");if(et.dom.remove(ef),xC(eC,0)||xC(eC,eC.length-1)){let et=es.getOr(ed),er=kC(et),ei=er.indexOf(ey);return -1===ei?ey:(xC(er,ei-1)?" ":"")+ey+(xC(er,ei+ey.length)?" ":"")}return ey}).getOr("");{let ei=((et,er)=>{let ei=et.selection.getRng(),es=et.dom.create("body"),ed=et.selection.getSel(),ec=Rg(et,Ku(ed)),eu=er.contextual?wC(pn(et.getBody()),ec).dom:ei.cloneContents();return eu&&es.appendChild(eu),et.selection.serializer.serialize(es,er)})(et,er);return"tree"===er.format?ei:et.selection.isCollapsed()?"":ei}})(et,er);return aC(et,ei,er)})})(et,er,ei)},autocompleter:{addDecoration:er=>Bg(et,er),removeDecoration:()=>Dg(pn(et.getBody())).each(er=>{let ei=et.selection.getBookmark();xo(er),et.selection.moveToBookmark(ei)})},raw:{getModel:()=>I.none()}}),MC=et=>ke(et.plugins,"rtc"),IC=et=>et.rtcInstance?et.rtcInstance:LC(et),FC=et=>{let er=et.rtcInstance;if(er)return er;throw Error("Failed to get RTC instance not yet initialized.")},UC=et=>FC(et).init.bindEvents(),zC=et=>0===et.dom.length?(wo(et),I.none()):I.some(et),jC=(et,er,ei,es)=>{et.bind(et=>((es?Yp:Gp)(et.dom,es?et.dom.length:0),er.filter(tj).map(er=>((et,er,ei,es)=>{let ed=et.dom,ec=er.dom,eu=es?ed.length:ec.length;es?(Xp(ed,ec,!1,!es),ei.setStart(ec,eu)):(Xp(ec,ed,!1,!es),ei.setEnd(ec,eu))})(et,er,ei,es)))).orThunk(()=>{let et=er.filter(et=>Wm.isBookmarkNode(et.dom)).bind(es?Dn:Bn).or(er).filter(tj);return et.map(et=>((et,er)=>{An(et).each(ei=>{let es=et.dom;er&&Up(ei,Li(es,0))?Gp(es,0):!er&&zp(ei,Li(es,es.length))&&Yp(es,es.length)})})(et,es))})},HC=(et,er,ei)=>{if(ke(et,er)){let es=G(et[er],et=>et!==ei);0===es.length?delete et[er]:et[er]=es}},$C=et=>!(!et||!et.ownerDocument)&&Sn(pn(et.ownerDocument),pn(et)),qC=(et,er,ei,es)=>{let ed,ec;let{selectorChangedWithUnbind:eu}=((et,er)=>{let ei,es;let r=(er,ei)=>J(ei,ei=>et.is(ei,er)),s=er=>et.getParents(er,void 0,et.getRoot());return{selectorChangedWithUnbind:(et,ed)=>(ei||(ei={},es={},er.on("NodeChange",et=>{let er=et.element,ed=s(er),ec={};ge(ei,(et,er)=>{r(er,ed).each(ei=>{es[er]||(V(et,et=>{et(!0,{node:ei,selector:er,parents:ed})}),es[er]=et),ec[er]=et})}),ge(es,(et,ei)=>{ec[ei]||(delete es[ei],V(et,et=>{et(!1,{node:er,selector:ei,parents:ed})}))})})),ei[et]||(ei[et]=[]),ei[et].push(ed),r(et,s(er.selection.getStart())).each(()=>{es[et]=ei[et]}),{unbind:()=>{HC(ei,et,ed),HC(es,et,ed)}})}})(et,es),i=(et,er)=>((et,er,ei={})=>{let es={format:"html",...ei,set:!0,selection:!0,content:er};iC(et,es).each(er=>{let ei=((et,er)=>{if("raw"!==er.format){let ei=et.selection.getRng(),es=et.dom.getParent(ei.commonAncestorContainer,et.dom.isBlock),ed=es?{context:es.nodeName.toLowerCase()}:{},ec=et.parser.parse(er.content,{forced_root_block:!1,...ed,...er});return Xg({validate:!1},et.schema).serialize(ec)}return er.content})(et,er),es=et.selection.getRng();((et,er)=>{let ei=I.from(er.firstChild).map(pn),es=I.from(er.lastChild).map(pn);et.deleteContents(),et.insertNode(er);let ed=ei.bind(Bn).filter(tj).bind(zC),ec=es.bind(Dn).filter(tj).bind(zC);jC(ed,ei,et,!0),jC(ec,es,et,!1),et.collapse(!1)})(es,es.createContextualFragment(ei)),et.selection.setRng(es),Zf(et,es),lC(et,ei,er)})})(es,et,er),l=et=>{let er=c();er.collapse(!!et),u(er)},d=()=>er.getSelection?er.getSelection():er.document.selection,c=()=>{let ei;let a=(et,er,ei)=>{try{return er.compareBoundaryPoints(et,ei)}catch(et){return -1}},eu=er.document;if(C(es.bookmark)&&!xg(es)){let et=cg(es);if(et.isSome())return et.map(et=>Rg(es,[et])[0]).getOr(eu.createRange())}try{let et=d();et&&!Ho(et.anchorNode)&&(ei=et.rangeCount>0?et.getRangeAt(0):eu.createRange(),ei=Rg(es,[ei])[0])}catch(et){}if(ei||(ei=eu.createRange()),t1(ei.startContainer)&&ei.collapsed){let er=et.getRoot();ei.setStart(er,0),ei.setEnd(er,0)}return ed&&ec&&(0===a(ei.START_TO_START,ei,ed)&&0===a(ei.END_TO_END,ei,ed)?ei=ec:(ed=null,ec=null)),ei},u=(et,er)=>{var ei;if(!((ei=et)&&$C(ei.startContainer)&&$C(ei.endContainer)))return;let eu=d();if(et=es.dispatch("SetSelectionRange",{range:et,forward:er}).range,eu){ec=et;try{eu.removeAllRanges(),eu.addRange(et)}catch(et){}!1===er&&eu.extend&&(eu.collapse(et.endContainer,et.endOffset),eu.extend(et.startContainer,et.startOffset)),ed=eu.rangeCount>0?eu.getRangeAt(0):null}if(!et.collapsed&&et.startContainer===et.endContainer&&(null==eu?void 0:eu.setBaseAndExtent)&&et.endOffset-et.startOffset<2&&et.startContainer.hasChildNodes()){let er=et.startContainer.childNodes[et.startOffset];er&&"IMG"===er.nodeName&&(eu.setBaseAndExtent(et.startContainer,et.startOffset,et.endContainer,et.endOffset),eu.anchorNode===et.startContainer&&eu.focusNode===et.endContainer||eu.setBaseAndExtent(er,0,er,1))}es.dispatch("AfterSetSelectionRange",{range:et,forward:er})},m=()=>{let er=d(),ei=null==er?void 0:er.anchorNode,es=null==er?void 0:er.focusNode;if(!er||!ei||!es||Ho(ei)||Ho(es))return!0;let ed=et.createRng(),ec=et.createRng();try{ed.setStart(ei,er.anchorOffset),ed.collapse(!0),ec.setStart(es,er.focusOffset),ec.collapse(!0)}catch(et){return!0}return 0>=ed.compareBoundaryPoints(ed.START_TO_START,ec)},ef={dom:et,win:er,serializer:ei,editor:es,expand:(er={type:"word"})=>u(Df(et).expand(c(),er)),collapse:l,setCursorLocation:(er,ei)=>{let ed=et.createRng();C(er)&&C(ei)?(ed.setStart(er,ei),ed.setEnd(er,ei),u(ed),l(!1)):(em(et,ed,es.getBody(),!0),u(ed))},getContent:et=>((et,er={})=>{var ei;return ei=er.format?er.format:"html",FC(et).selection.getContent(ei,er)})(es,et),setContent:i,getBookmark:(et,er)=>ey.getBookmark(et,er),moveToBookmark:et=>ey.moveToBookmark(et),select:(er,ei)=>(I.from(er).bind(er=>I.from(er.parentNode).map(es=>{let ed=et.nodeIndex(er),ec=et.createRng();return ec.setStart(es,ed),ec.setEnd(es,ed+1),ei&&(em(et,ec,er,!0),em(et,ec,er,!1)),ec})).each(u),er),isCollapsed:()=>{let et=c(),er=d();return!(!et||et.item)&&(et.compareEndPoints?0===et.compareEndPoints("StartToEnd",et):!er||et.collapsed)},isEditable:()=>{let er=c(),ei=es.getBody().querySelectorAll('[data-mce-selected="1"]');return ei.length>0?ne(ei,er=>et.isEditable(er.parentElement)):er.startContainer===er.endContainer?et.isEditable(er.startContainer):et.isEditable(er.startContainer)&&et.isEditable(er.endContainer)},isForward:m,setNode:er=>(i(et.getOuterHTML(er)),er),getNode:()=>((et,er)=>{if(!er)return et;let ei=er.startContainer,es=er.endContainer,ed=er.startOffset,ec=er.endOffset,eu=er.commonAncestorContainer;er.collapsed||(ei===es&&ec-ed<2&&ei.hasChildNodes()&&(eu=ei.childNodes[ed]),tJ(ei)&&tJ(es)&&(ei=ei.length===ed?Ng(ei.nextSibling,!0):ei.parentNode,es=0===ec?Ng(es.previousSibling,!1):es.parentNode,ei&&ei===es&&(eu=ei)));let ef=tJ(eu)?eu.parentNode:eu;return tY(ef)?ef:et})(es.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:et=>Sg(es.getBody(),c(),et),getEnd:et=>_g(es.getBody(),c(),et),getSelectedBlocks:(er,ei)=>((et,er,ei,es)=>{let ed=[],ec=et.getRoot(),eu=et.getParent(ei||Sg(ec,er,er.collapsed),et.isBlock),ef=et.getParent(es||_g(ec,er,er.collapsed),et.isBlock);if(eu&&eu!==ec&&ed.push(eu),eu&&ef&&eu!==ef){let er;let ei=new zo(eu,ec);for(;(er=ei.next())&&er!==ef;)et.isBlock(er)&&ed.push(er)}return ef&&eu!==ef&&ef!==ec&&ed.push(ef),ed})(et,c(),er,ei),normalize:()=>{let er=c(),ei=d();if(!(Ku(ei).length>1)&&tm(es)){let ei=Of(et,er);return ei.each(et=>{u(et,m())}),ei.getOr(er)}return er},selectorChanged:(et,er)=>(eu(et,er),ef),selectorChangedWithUnbind:eu,getScrollContainer:()=>{let er,ei=et.getRoot();for(;ei&&"BODY"!==ei.nodeName;){if(ei.scrollHeight>ei.clientHeight){er=ei;break}ei=ei.parentNode}return er},scrollIntoView:(et,er)=>{C(et)?((et,er,ei)=>{(et.inline?Xf:Jf)(et,er,ei)})(es,et,er):Zf(es,c(),er)},placeCaretAt:(et,er)=>u(xf(et,er,es.getDoc())),getBoundingClientRect:()=>{let et=c();return et.collapsed?Li.fromRangeStart(et).getClientRects()[0]:et.getBoundingClientRect()},destroy:()=>{er=ed=ec=null,eC.destroy()}},ey=Wm(ef),eC=sf(ef,es);return ef.bookmarkManager=ey,ef.controlSelection=eC,ef},VC=(et,er,ei)=>{-1===tz.inArray(er,ei)&&(et.addAttributeFilter(ei,(et,er)=>{let ei=et.length;for(;ei--;)et[ei].attr(er,null)}),er.push(ei))},WC=(et,er)=>{let ei=["data-mce-selected"],es={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...et},ed=er&&er.dom?er.dom:Oa.DOM,ec=er&&er.schema?er.schema:ca(es),eu=oC(es,ec);return eu.addAttributeFilter("data-mce-tabindex",(et,er)=>{let ei=et.length;for(;ei--;){let es=et[ei];es.attr("tabindex",es.attr("data-mce-tabindex")),es.attr(er,null)}}),eu.addAttributeFilter("src,href,style",(et,er)=>{let ei="data-mce-"+er,ec=es.url_converter,eu=es.url_converter_scope,ef=et.length;for(;ef--;){let es=et[ef],ey=es.attr(ei);void 0!==ey?(es.attr(er,ey.length>0?ey:null),es.attr(ei,null)):(ey=es.attr(er),"style"===er?ey=ed.serializeStyle(ed.parseStyle(ey),es.name):ec&&(ey=ec.call(eu,ey,er,es.name)),es.attr(er,ey.length>0?ey:null))}}),eu.addAttributeFilter("class",et=>{let er=et.length;for(;er--;){let ei=et[er],es=ei.attr("class");es&&(es=es.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),ei.attr("class",es.length>0?es:null))}}),eu.addAttributeFilter("data-mce-type",(et,er,ei)=>{let es=et.length;for(;es--;){let er=et[es];if("bookmark"===er.attr("data-mce-type")&&!ei.cleanup){let et=I.from(er.firstChild).exists(et=>{var er;return!hr(null!==(er=et.value)&&void 0!==er?er:"")});et?er.unwrap():er.remove()}}}),eu.addNodeFilter("noscript",et=>{var er;let ei=et.length;for(;ei--;){let es=et[ei].firstChild;es&&(es.value=rQ.decode(null!==(er=es.value)&&void 0!==er?er:""))}}),eu.addNodeFilter("script,style",(et,er)=>{var ei;let r=et=>et.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,""),ed=et.length;for(;ed--;){let ec=et[ed],eu=ec.firstChild,ef=null!==(ei=null==eu?void 0:eu.value)&&void 0!==ei?ei:"";if("script"===er){let et=ec.attr("type");et&&ec.attr("type","mce-no/type"===et?null:et.replace(/^mce\-/,"")),"xhtml"===es.element_format&&eu&&ef.length>0&&(eu.value="// <![CDATA[\n"+r(ef)+"\n// ]]>")}else"xhtml"===es.element_format&&eu&&ef.length>0&&(eu.value="<!--\n"+r(ef)+"\n-->")}}),eu.addNodeFilter("#comment",et=>{let er=et.length;for(;er--;){let ei=et[er],ec=ei.value;es.preserve_cdata&&0===(null==ec?void 0:ec.indexOf("[CDATA["))?(ei.name="#cdata",ei.type=4,ei.value=ed.decode(ec.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==ec?void 0:ec.indexOf("mce:protected "))&&(ei.name="#text",ei.type=3,ei.raw=!0,ei.value=unescape(ec).substr(14))}}),eu.addNodeFilter("xml:namespace,input",(et,er)=>{let ei=et.length;for(;ei--;){let es=et[ei];7===es.type?es.remove():1===es.type&&("input"!==er||es.attr("type")||es.attr("type","text"))}}),eu.addAttributeFilter("data-mce-type",et=>{V(et,et=>{"format-caret"===et.attr("data-mce-type")&&(et.isEmpty(eu.schema.getNonEmptyElements())?et.remove():et.unwrap())})}),eu.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(et,er)=>{let ei=et.length;for(;ei--;)et[ei].attr(er,null)}),es.remove_trailing_brs&&Tv(es,eu,eu.schema),{schema:ec,addNodeFilter:eu.addNodeFilter,addAttributeFilter:eu.addAttributeFilter,serialize:(et,ei={})=>{let ef={format:"html",...ei},ey=C(er)&&er.hasEventListeners("PreProcess")&&!ef.no_events?((et,er,ei)=>{let es;let ed=et.dom,ec=er.cloneNode(!0),eu=document.implementation;if(eu.createHTMLDocument){let et=eu.createHTMLDocument("");tz.each("BODY"===ec.nodeName?ec.childNodes:[ec],er=>{et.body.appendChild(et.importNode(er,!0))}),ec="BODY"!==ec.nodeName?et.body.firstChild:et.body,es=ed.doc,ed.doc=et}return((et,er)=>{et.dispatch("PreProcess",er)})(et,{...ei,node:ec}),es&&(ed.doc=es),ec})(er,et,ef):et,eC=((et,er,ei)=>{let es=Fr(ei.getInner?er.innerHTML:et.getOuterHTML(er));return ei.selection||rI(pn(er))?es:tz.trim(es)})(ed,ey,ef),eS=((et,er,ei)=>{let es=ei.selection?{forced_root_block:!1,...ei}:ei,ed=et.parse(er,es);return(et=>{let t=et=>"br"===(null==et?void 0:et.name),er=et.lastChild;if(t(er)){let et=er.prev;t(et)&&(er.remove(),et.remove())}})(ed),ed})(eu,eC,ef);return"tree"===ef.format?eS:((et,er,ei,es,ed)=>{let ec=Xg(er,ei).serialize(es);return((et,er,ei)=>{if(!er.no_events&&et){var es;let ed=(es={...er,content:ei},et.dispatch("PostProcess",es));return ed.content}return ei})(et,ed,ec)})(er,es,ec,eS,ef)},addRules:ec.addValidElements,setRules:ec.setValidElements,addTempAttr:O(VC,eu,ei),getTempAttrs:N(ei),getNodeFilters:eu.getNodeFilters,getAttributeFilters:eu.getAttributeFilters,removeNodeFilter:eu.removeNodeFilter,removeAttributeFilter:eu.removeAttributeFilter}},KC=(et,er)=>{let ei=WC(et,er);return{schema:ei.schema,addNodeFilter:ei.addNodeFilter,addAttributeFilter:ei.addAttributeFilter,serialize:ei.serialize,addRules:ei.addRules,setRules:ei.setRules,addTempAttr:ei.addTempAttr,getTempAttrs:ei.getTempAttrs,getNodeFilters:ei.getNodeFilters,getAttributeFilters:ei.getAttributeFilters,removeNodeFilter:ei.removeNodeFilter,removeAttributeFilter:ei.removeAttributeFilter}},GC=(et,er,ei={})=>{let es={format:"html",...ei,set:!0,content:er};return iC(et,es).map(er=>{var ei;let es=(ei=er.content,IC(et).editor.setContent(ei,er));return lC(et,es.html,er),es.content}).getOr(er)},s1="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),s2="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),s3="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),s8=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],ZC=(et,er)=>{let ei=G(er,er=>ke(et,er));return ae(ei)},ew=et=>{let er=ZC(et,s1),ei=et.forced_root_block;return!1!==ei&&""!==ei||er.push("forced_root_block (false only)"),ae(er)},tw=et=>ZC(et,s2),nw=(et,er)=>{let ei=tz.makeMap(et.plugins," "),es=G(er,et=>ke(ei,et));return ae(es)},ow=et=>nw(et,s3),rw=et=>nw(et,s8.map(et=>et.name)),sw=et=>J(s8,er=>er.name===et).fold(()=>et,er=>er.replacedWith?`${et}, replaced by ${er.replacedWith}`:et),s5=Oa.DOM,iw=et=>I.from(et).each(et=>et.destroy()),s6=(()=>{let et={};return{add:(er,ei)=>{et[er]=ei},get:er=>et[er]?et[er]:{icons:{}},has:er=>ke(et,er)}})(),s9=Fa.ModelManager,cw=(et,er)=>er.dom[et],uw=(et,er)=>parseInt(lo(er,et),10),s4=O(cw,"clientWidth"),s7=O(cw,"clientHeight"),dt=O(uw,"margin-top"),dr=O(uw,"margin-left"),hw=et=>{let er=[],n=()=>{let er=et.theme;return er&&er.getNotificationManagerImpl?er.getNotificationManagerImpl():(()=>{let e=()=>{throw Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}})()},o=()=>I.from(er[0]),r=()=>{V(er,et=>{et.reposition()})},s=et=>{Z(er,er=>er===et).each(et=>{er.splice(et,1)})},a=(ei,es=!0)=>{var ed;return et.removed||!(ed=et.inline?et.getBody():et.getContentAreaContainer(),I.from(ed).map(pn)).map(Yn).getOr(!1)?{}:(es&&et.dispatch("BeforeOpenNotification",{notification:ei}),J(er,et=>{var er;return!((er=n().getArgs(et)).type!==ei.type||er.text!==ei.text||er.progressBar||er.timeout||ei.progressBar||ei.timeout)}).getOrThunk(()=>{et.editorManager.setActive(et);let es=n().open(ei,()=>{s(es),r(),o().fold(()=>et.focus(),et=>eg(pn(et.getEl())))});return er.push(es),r(),et.dispatch("OpenNotification",{notification:{...es}}),es}))},ei=N(er);return et.on("SkinLoaded",()=>{let er=oD(et);er&&a({text:er,type:"warning",timeout:0},!1),r()}),et.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),et.on("remove",()=>{V(er.slice(),et=>{n().close(et)})}),{open:a,close:()=>{o().each(et=>{n().close(et),s(et),r()})},getNotifications:ei}},dd=Fa.PluginManager,dc=Fa.ThemeManager,yw=et=>{let er=[],n=()=>{let er=et.theme;return er&&er.getWindowManagerImpl?er.getWindowManagerImpl():(()=>{let e=()=>{throw Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}})()},o=(et,er)=>(...ei)=>er?er.apply(et,ei):void 0,r=ei=>{et.dispatch("CloseWindow",{dialog:ei}),0===(er=G(er,et=>et!==ei)).length&&et.focus()},s=ei=>{et.editorManager.setActive(et),dg(et),et.ui.show();let es=ei();return er.push(es),et.dispatch("OpenWindow",{dialog:es}),es};return et.on("remove",()=>{V(er,et=>{n().close(et)})}),{open:(et,er)=>s(()=>n().open(et,er,r)),openUrl:et=>s(()=>n().openUrl(et,r)),alert:(et,er,ei)=>{let es=n();es.alert(et,o(ei||es,er))},confirm:(et,er,ei)=>{let es=n();es.confirm(et,o(ei||es,er))},close:()=>{I.from(er[er.length-1]).each(et=>{n().close(et),r(et)})}}},Cw=(et,er)=>{et.notificationManager.open({type:"error",text:er})},ww=(et,er)=>{et._skinLoaded?Cw(et,er):et.on("SkinLoaded",()=>{Cw(et,er)})},xw=(et,er,ei)=>{Gm(et,er,{message:ei}),console.error(ei)},kw=(et,er,ei)=>ei?`Failed to load ${et}: ${ei} from url ${er}`:`Failed to load ${et} url: ${er}`,Ew=(et,...er)=>{let ei=window.console;ei&&(ei.error?ei.error(et,...er):ei.log(et,...er))},Sw=(et,er)=>{let ei=et.editorManager.baseURL+"/skins/content",es=`content${et.editorManager.suffix}.css`;return q(er,er=>/^[a-z0-9\-]+$/i.test(er)&&!et.inline?`${ei}/${er}/${es}`:et.documentBaseURI.toAbsolute(er))},_w=(et,er)=>{let ei={};return{findAll:(es,ed=eq)=>{let ec=G(es?eY(es.getElementsByTagName("img")):[],er=>{let ei=er.src;return!er.hasAttribute("data-mce-bogus")&&!er.hasAttribute("data-mce-placeholder")&&!(!ei||ei===tF.transparentSrc)&&(He(ei,"blob:")?!et.isUploaded(ei)&&ed(er):!!He(ei,"data:")&&ed(er))}),eu=q(ec,et=>{let es=et.src;if(ke(ei,es))return ei[es].then(er=>eP(er)?er:{image:et,blobInfo:er.blobInfo});{let ed=((et,er)=>{let n=()=>Promise.reject("Invalid data URI");if(He(er,"blob:")){let ei=et.getByUri(er);return C(ei)?Promise.resolve(ei):(He(er,"blob:")?fetch(er).then(et=>et.ok?et.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${er} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})):He(er,"data:")?new Promise((et,ei)=>{Bv(er).bind(({type:et,data:er,base64Encoded:ei})=>Dv(et,er,ei)).fold(()=>ei("Invalid data URI"),et)}):Promise.reject("Unknown URI format")).then(er=>Pv(er).then(ei=>Mv(ei,!1,ei=>I.some(Iv(et,er,ei))).getOrThunk(n)))}return He(er,"data:")?Fv(et,er).fold(n,et=>Promise.resolve(et)):Promise.reject("Unknown image data format")})(er,es).then(er=>(delete ei[es],{image:et,blobInfo:er})).catch(et=>(delete ei[es],et));return ei[es]=ed,ed}});return Promise.all(eu)}}},Nw=()=>{let et={},t=(et,er)=>({status:et,resultUri:er}),n=er=>er in et;return{hasBlobUri:n,getResultUri:er=>{let ei=et[er];return ei?ei.resultUri:null},isPending:er=>!!n(er)&&1===et[er].status,isUploaded:er=>!!n(er)&&2===et[er].status,markPending:er=>{et[er]=t(1,null)},markUploaded:(er,ei)=>{et[er]=t(2,ei)},removeFailed:er=>{delete et[er]},destroy:()=>{et={}}}},df=0,Aw=(et,er)=>{let ei={},o=(et,ei)=>new Promise((es,ed)=>{let ec=new XMLHttpRequest;ec.open("POST",er.url),ec.withCredentials=er.credentials,ec.upload.onprogress=et=>{ei(et.loaded/et.total*100)},ec.onerror=()=>{ed("Image upload failed due to a XHR Transport error. Code: "+ec.status)},ec.onload=()=>{var et,ei;if(ec.status<200||ec.status>=300)return void ed("HTTP Error: "+ec.status);let eu=JSON.parse(ec.responseText);eu&&eP(eu.location)?es((et=er.basePath,ei=eu.location,et?et.replace(/\/$/,"")+"/"+ei.replace(/^\//,""):ei)):ed("Invalid JSON: "+ec.responseText)};let eu=new FormData;eu.append("file",et.blob(),et.filename()),ec.send(eu)}),es=eH(er.handler)?er.handler:o,s=(et,er)=>({url:er,blobInfo:et,status:!0}),a=(et,er)=>({url:"",blobInfo:et,status:!1,error:er}),i=(et,er)=>{tz.each(ei[et],et=>{et(er)}),delete ei[et]};return{upload:(ed,ec)=>{var eu;return er.url||es!==o?(eu=ed,eu=tz.grep(eu,er=>!et.isUploaded(er.blobUri())),Promise.all(tz.map(eu,er=>et.isPending(er.blobUri())?(et=>{let er=et.blobUri();return new Promise(et=>{ei[er]=ei[er]||[],ei[er].push(et)})})(er):(et.markPending(er.blobUri()),new Promise(ei=>{let ed,eu;try{let c=()=>{ed&&(ed.close(),eu=E)},f=es=>{c(),et.removeFailed(er.blobUri()),i(er.blobUri(),a(er,es)),ei(a(er,es))};eu=et=>{et<0||et>100||I.from(ed).orThunk(()=>I.from(ec).map(D)).each(er=>{ed=er,er.progressBar.value(et)})},es(er,eu).then(es=>{c(),et.markUploaded(er.blobUri(),es),i(er.blobUri(),s(er,es)),ei(s(er,es))},et=>{f(eP(et)?{message:et}:et)})}catch(et){ei(a(er,et))}}))))):new Promise(et=>{et([])})}}},Ow=et=>()=>et.notificationManager.open({text:et.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Tw=(et,er)=>Aw(er,{url:n4(et),basePath:n7(et),credentials:ot(et),handler:or(et)}),Bw=et=>{let er,ei;let es=(()=>{let et=[],t=et=>{if(!et.blob||!et.base64)throw Error("blob and base64 representations of the image are required for BlobInfo to be created");let er=et.id||"blobid"+df+++(()=>{let e=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+e()+e()+e()})(),ei=et.name||er,es=et.blob;return{id:N(er),name:N(ei),filename:N(et.filename||ei+"."+(({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[es.type.toLowerCase()]||"dat")),blob:N(es),base64:N(et.base64),blobUri:N(et.blobUri||URL.createObjectURL(es)),uri:N(et.uri)}},n=er=>J(et,er).getOrUndefined(),o=et=>n(er=>er.id()===et);return{create:(et,er,ei,es,ed)=>{if(eP(et))return t({id:et,name:es,filename:ed,blob:er,base64:ei});if(eF(et))return t(et);throw Error("Unknown input type")},add:er=>{o(er.id())||et.push(er)},get:o,getByUri:et=>n(er=>er.blobUri()===et),getByData:(et,er)=>n(ei=>ei.base64()===et&&ei.blob().type===er),findFirst:n,removeByUri:er=>{et=G(et,et=>et.blobUri()!==er||(URL.revokeObjectURL(et.blobUri()),!1))},destroy:()=>{V(et,et=>{URL.revokeObjectURL(et.blobUri())}),et=[]}}})(),ed=Nw(),ec=[],a=er=>ei=>et.selection?er(ei):[],i=(et,er,ei)=>{let es=0;do -1!==(es=et.indexOf(er,es))&&(et=et.substring(0,es)+ei+et.substr(es+er.length),es+=ei.length-er.length+1);while(-1!==es);return et},l=(et,er,ei)=>{let es=`src="${ei}"${ei===tF.transparentSrc?' data-mce-placeholder="1"':""}`;return et=i(et,`src="${er}"`,es),i(et,'data-mce-src="'+er+'"','data-mce-src="'+ei+'"')},d=(er,ei)=>{V(et.undoManager.data,et=>{"fragmented"===et.type?et.fragments=q(et.fragments,et=>l(et,er,ei)):et.content=l(et.content,er,ei)})},c=()=>(er||(er=Tw(et,ed)),p().then(a(ei=>{let ed=q(ei,et=>et.blobInfo);return er.upload(ed,Ow(et)).then(a(er=>{let ed=[],ec=!1,eu=q(er,(er,eu)=>{var ef;let{blobInfo:ey,image:eC}=ei[eu],eS=!1;return er.status&&n5(et)?(er.url&&!je(eC.src,er.url)&&(ec=!0),es.removeByUri(eC.src),MC(et)||((er,ei)=>{let es=et.convertURL(ei,"src");d(er.src,ei),Zt(pn(er),{src:n8(et)?ei+(-1===ei.indexOf("?")?"?":"&")+(new Date).getTime():ei,"data-mce-src":es})})(eC,er.url)):er.error&&(er.error.remove&&(d(eC.src,tF.transparentSrc),ed.push(eC),eS=!0),ef=er.error.message,ww(et,nl.translate(["Failed to upload image: {0}",ef]))),{element:eC,status:er.status,uploadUri:er.url,blobInfo:ey,removed:eS}});return ed.length>0&&!MC(et)?et.undoManager.transact(()=>{V(ko(ed),er=>{let ei=An(er);wo(er),ei.each(er=>{et.dom.isEmpty(er.dom)&&C(et.schema.getTextBlockElements()[Ht(er)])&&bo(er,hn('<br data-mce-bogus="1" />'))}),es.removeByUri(er.dom.src)})}):ec&&et.undoManager.dispatchChange(),eu}))}))),u=()=>n3(et)?c():Promise.resolve([]),g=et=>ne(ec,er=>er(et)),p=()=>(ei||(ei=_w(ed,es)),ei.findAll(et.getBody(),g).then(a(er=>{let ei=G(er,er=>eP(er)?(ww(et,er),!1):"blob"!==er.uriType);return MC(et)||V(ei,et=>{d(et.image.src,et.blobInfo.blobUri()),et.image.src=et.blobInfo.blobUri(),et.image.removeAttribute("data-mce-src")}),ei}))),h=er=>er.replace(/src="(blob:[^"]+)"/g,(er,ei)=>{let ec=ed.getResultUri(ei);if(ec)return'src="'+ec+'"';let eu=es.getByUri(ei);return eu||(eu=X(et.editorManager.get(),(et,er)=>et||er.editorUpload&&er.editorUpload.blobCache.getByUri(ei),void 0)),eu?'src="data:'+eu.blob().type+";base64,"+eu.base64()+'"':er});return et.on("SetContent",()=>{n3(et)?u():p()}),et.on("RawSaveContent",et=>{et.content=h(et.content)}),et.on("GetContent",et=>{et.source_view||"raw"===et.format||"tree"===et.format||(et.content=h(et.content))}),et.on("PostRender",()=>{et.parser.addNodeFilter("img",et=>{V(et,et=>{let er=et.attr("src");if(!er||es.getByUri(er))return;let ei=ed.getResultUri(er);ei&&et.attr("src",ei)})})}),{blobCache:es,addFilter:et=>{ec.push(et)},uploadImages:c,uploadImagesAuto:u,scanForImages:p,destroy:()=>{es.destroy(),ed.destroy(),ei=er=null}}},dp={remove_similar:!0,inherit:!1},dy={selector:"td,th",...dp},dk={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...dy},tablecellverticalalign:{styles:{"vertical-align":"%value"},...dy},tablecellbordercolor:{styles:{borderColor:"%value"},...dy},tablecellclass:{classes:["%value"],...dy},tableclass:{selector:"table",classes:["%value"],...dp},tablecellborderstyle:{styles:{borderStyle:"%value"},...dy},tablecellborderwidth:{styles:{borderWidth:"%value"},...dy}},dw=N(dk),dI=tz.each,dT=Oa.DOM,Uw=et=>C(et)&&eF(et),zw=(et,er)=>{let ei=er&&er.schema||ca({}),o=et=>{let er=eP(et)?{name:et,classes:[],attrs:{}}:et,ei=dT.create(er.name);return er.classes.length>0&&dT.addClass(ei,er.classes.join(" ")),dT.setAttribs(ei,er.attrs),ei},r=(et,er,es)=>{let ed;let ec=er[0],eu=Uw(ec)?ec.name:void 0,ef=((et,er)=>{let es=ei.getElementRule(et.nodeName.toLowerCase()),ed=null==es?void 0:es.parentsRequired;return!(!ed||!ed.length)&&(er&&H(ed,er)?er:ed[0])})(et,eu);if(ef)eu===ef?(ed=ec,er=er.slice(1)):ed=ef;else if(ec)ed=ec,er=er.slice(1);else if(!es)return et;let ey=ed?o(ed):dT.create("div");ey.appendChild(et),es&&tz.each(es,er=>{let ei=o(er);ey.insertBefore(ei,et)});let eC=Uw(ed)?ed.siblings:void 0;return r(ey,er,eC)},es=dT.create("div");if(et.length>0){let er=et[0],ei=o(er),ed=Uw(er)?er.siblings:void 0;es.appendChild(r(ei,et.slice(1),ed))}return es},jw=et=>{let er="div",ei={name:er,classes:[],attrs:{},selector:et=tz.trim(et)};return"*"!==et&&(er=et.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(et,er,es,ed,ec)=>{switch(er){case"#":ei.attrs.id=es;break;case".":ei.classes.push(es);break;case":":-1!==tz.inArray("checked disabled enabled read-only required".split(" "),es)&&(ei.attrs[es]=es)}if("["===ed){let et=ec.match(/([\w\-]+)(?:\=\"([^\"]+))?/);et&&(ei.attrs[et[1]]=et[2])}return""})),ei.name=er||"div",ei},Hw=(et,er)=>{var ei;let es="",ed=oH(et);if(""===ed)return"";let r=et=>eP(et)?et.replace(/%(\w+)/g,""):"",s=(er,ei)=>dT.getStyle(null!=ei?ei:et.getBody(),er,!0);if(eP(er)){let ei=et.formatter.get(er);if(!ei)return"";er=ei[0]}if("preview"in er){let et=er.preview;if(!1===et)return"";ed=et||ed}let ec,eu=er.block||er.inline||"span",ef=eP(ei=er.selector)?(ei=(ei=ei.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),tz.map(ei.split(/(?:>|\s+(?![^\[\]]+\]))/),et=>{let er=tz.map(et.split(/(?:~\+|~|\+)/),jw),ei=er.pop();return er.length&&(ei.siblings=er),ei}).reverse()):[];ef.length>0?(ef[0].name||(ef[0].name=eu),eu=er.selector,ec=zw(ef,et)):ec=zw([eu],et);let ey=dT.select(eu,ec)[0]||ec.firstChild;dI(er.styles,(et,er)=>{let ei=r(et);ei&&dT.setStyle(ey,er,ei)}),dI(er.attributes,(et,er)=>{let ei=r(et);ei&&dT.setAttrib(ey,er,ei)}),dI(er.classes,et=>{let er=r(et);dT.hasClass(ey,er)||dT.addClass(ey,er)}),et.dispatch("PreviewFormats"),dT.setStyles(ec,{position:"absolute",left:-65535}),et.getBody().appendChild(ec);let eC=s("fontSize"),eS=/px$/.test(eC)?parseInt(eC,10):0;return dI(ed.split(" "),et=>{let er=s(et,ey);if(!("background-color"===et&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(er)&&"#ffffff"===Wu(er=s(et)).toLowerCase()||"color"===et&&"#000000"===Wu(er).toLowerCase())){if("font-size"===et&&/em|%$/.test(er)){if(0===eS)return;er=parseFloat(er)/(/%$/.test(er)?100:1)*eS+"px"}"border"===et&&er&&(es+="padding:0 2px;"),es+=et+":"+er+";"}}),et.dispatch("AfterPreviewFormats"),dT.remove(ec),es},$w=et=>{let er=(et=>{let er={},n=(et,ei)=>{et&&(eP(et)?(eM(ei)||(ei=[ei]),V(ei,et=>{eU(et.deep)&&(et.deep=!xm(et)),eU(et.split)&&(et.split=!xm(et)||km(et)),eU(et.remove)&&xm(et)&&!km(et)&&(et.remove="none"),xm(et)&&km(et)&&(et.mixed=!0,et.block_expand=!0),eP(et.classes)&&(et.classes=et.classes.split(/\s+/))}),er[et]=ei):ge(et,(et,er)=>{n(er,et)}))};return n((et=>{let er=et.dom,ei=et.schema.type,es={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:et=>{er.setStyle(et,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:et=>{er.setStyle(et,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{let et={inline:"span",styles:{textDecoration:"line-through"},exact:!0},er={inline:"strike",remove:"all",preserve_attributes:["class","style"]},es={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==ei?[es,et,er]:[et,es,er]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(et,er,ei)=>tY(et)&&et.hasAttribute("href"),onformat:(et,ei,es)=>{tz.each(es,(ei,es)=>{er.setAttrib(et,es,ei)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":et=>{var er;return null!==(er=null==et?void 0:et.customValue)&&void 0!==er?er:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return tz.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),et=>{es[et]={block:et,remove:"all"}}),es})(et)),n(dw()),n(oU(et)),{get:et=>C(et)?er[et]:er,has:et=>ke(er,et),register:n,unregister:et=>(et&&er[et]&&delete er[et],er)}})(et),ei=Da({});return(et=>{et.addShortcut("meta+b","","Bold"),et.addShortcut("meta+i","","Italic"),et.addShortcut("meta+u","","Underline");for(let er=1;er<=6;er++)et.addShortcut("access+"+er,"",["FormatBlock",!1,"h"+er]);et.addShortcut("access+7","",["FormatBlock",!1,"p"]),et.addShortcut("access+8","",["FormatBlock",!1,"div"]),et.addShortcut("access+9","",["FormatBlock",!1,"address"])})(et),(et=>{et.on("mouseup keydown",er=>{var ei;((et,er,ei)=>{let es=et.selection,ed=et.getBody();Tb(et,null,ei),(8===er||46===er)&&es.isCollapsed()&&"\uFEFF"===es.getStart().innerHTML&&Tb(et,ku(ed,es.getStart())),37!==er&&39!==er||Tb(et,ku(ed,es.getStart()))})(et,er.keyCode,tJ(ei=et.selection.getRng().endContainer)&&$e(ei.data,"\xa0"))})})(et),MC(et)||(ei.set({}),et.on("NodeChange",er=>{Nv(et,er.element,ei.get())}),et.on("FormatApply FormatRemove",er=>{let es=I.from(er.node).map(et=>rm(et)?et:et.startContainer).bind(et=>tY(et)?I.some(et):I.from(et.parentElement)).getOrThunk(()=>Ev(et));Nv(et,es,ei.get())})),{get:er.get,has:er.has,register:er.register,unregister:er.unregister,apply:(er,ei,es)=>{((et,er,ei,es)=>{FC(et).formatter.apply(er,ei,es)})(et,er,ei,es)},remove:(er,ei,es,ed)=>{((et,er,ei,es,ed)=>{FC(et).formatter.remove(er,ei,es,ed)})(et,er,ei,es,ed)},toggle:(er,ei,es)=>{((et,er,ei,es)=>{FC(et).formatter.toggle(er,ei,es)})(et,er,ei,es)},match:(er,ei,es,ed)=>FC(et).formatter.match(er,ei,es,ed),closest:er=>FC(et).formatter.closest(er),matchAll:(er,ei)=>FC(et).formatter.matchAll(er,ei),matchNode:(er,ei,es,ed)=>FC(et).formatter.matchNode(er,ei,es,ed),canApply:er=>FC(et).formatter.canApply(er),formatChanged:(er,es,ed,ec)=>FC(et).formatter.formatChanged(ei,er,es,ed,ec),getCssText:O(Hw,et)}},qw=et=>{switch(et.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Vw=et=>{let er=za(),ei=Da(0),es=Da(0),ed={data:[],typing:!1,beforeChange:()=>{((et,er,ei)=>{FC(et).undoManager.beforeChange(er,ei)})(et,ei,er)},add:(ec,eu)=>FC(et).undoManager.add(ed,es,ei,er,ec,eu),dispatchChange:()=>{et.setDirty(!0);let er=NC(et);er.bookmark=nM(et.selection),et.dispatch("change",{level:er,lastLevel:ie(ed.data,es.get()).getOrUndefined()})},undo:()=>FC(et).undoManager.undo(ed,ei,es),redo:()=>{var er;return er=ed.data,FC(et).undoManager.redo(es,er)},clear:()=>{((et,er,ei)=>{FC(et).undoManager.clear(er,ei)})(et,ed,es)},reset:()=>{((et,er)=>{FC(et).undoManager.reset(er)})(et,ed)},hasUndo:()=>FC(et).undoManager.hasUndo(ed,es),hasRedo:()=>FC(et).undoManager.hasRedo(ed,es),transact:er=>FC(et).undoManager.transact(ed,ei,er),ignore:er=>{((et,er,ei)=>{FC(et).undoManager.ignore(er,ei)})(et,ei,er)},extra:(er,ei)=>{((et,er,ei,es,ed)=>{FC(et).undoManager.extra(er,ei,es,ed)})(et,ed,es,er,ei)}};return MC(et)||((et,er,ei)=>{let es=Da(!1),r=et=>{DC(er,!1,ei),er.add({},et)};et.on("init",()=>{er.add()}),et.on("BeforeExecCommand",et=>{let es=et.command;qw(es)||(PC(er,ei),er.beforeChange())}),et.on("ExecCommand",et=>{let er=et.command;qw(er)||r(et)}),et.on("ObjectResizeStart cut",()=>{er.beforeChange()}),et.on("SaveContent ObjectResized blur",r),et.on("dragend",r),et.on("keyup",ei=>{let ed=ei.keyCode;if(ei.isDefaultPrevented())return;let ec=tF.os.isMacOS()&&"Meta"===ei.key;(ed>=33&&ed<=36||ed>=37&&ed<=40||45===ed||ei.ctrlKey||ec)&&(r(),et.nodeChanged()),46!==ed&&8!==ed||et.nodeChanged(),es.get()&&er.typing&&!TC(NC(et),er.data[0])&&(et.isDirty()||et.setDirty(!0),et.dispatch("TypingUndo"),es.set(!1),et.nodeChanged())}),et.on("keydown",et=>{let ed=et.keyCode;if(et.isDefaultPrevented())return;if(ed>=33&&ed<=36||ed>=37&&ed<=40||45===ed)return void(er.typing&&r(et));let ec=et.ctrlKey&&!et.altKey||et.metaKey;if((ed<16||ed>20)&&224!==ed&&91!==ed&&!er.typing&&!ec)return er.beforeChange(),DC(er,!0,ei),er.add({},et),void es.set(!0);(tF.os.isMacOS()?et.metaKey:et.ctrlKey&&!et.altKey)&&er.beforeChange()}),et.on("mousedown",et=>{er.typing&&r(et)}),et.on("input",et=>{et.inputType&&("insertReplacementText"===et.inputType||"insertText"===et.inputType&&null===et.data||"insertFromPaste"===et.inputType||"insertFromDrop"===et.inputType)&&r(et)}),et.on("AddUndo Undo Redo ClearUndos",er=>{er.isDefaultPrevented()||et.nodeChanged()})})(et,ed,ei),et.addShortcut("meta+z","","Undo"),et.addShortcut("meta+y,meta+shift+z","","Redo"),ed},dL=[9,27,lr.HOME,lr.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,lr.DOWN,lr.UP,lr.LEFT,lr.RIGHT].concat(tF.browser.isFirefox()?[224]:[]),dB="data-mce-placeholder",Gw=et=>"keydown"===et.type||"keyup"===et.type,Yw=et=>{let er=et.keyCode;return er===lr.BACKSPACE||er===lr.DELETE},Xw=(et,er)=>({from:et,to:er}),Qw=(et,er)=>{let ei=pn(et),es=pn(er.container());return ph(ei,es).map(et=>({block:et,position:er}))},Jw=(et,er)=>Jn(er,et=>rR(et)||t5(et.dom),er=>En(er,et)).filter(tH).getOr(et),Zw=et=>{let er=(et=>{let er=Mn(et);return Z(er,rc).fold(N(er),et=>er.slice(0,et))})(et);return V(er,wo),er},ex=(et,er)=>{let ei=bp(er,et);return J(ei.reverse(),et=>bs(et)).each(wo)},tx=(et,er,ei,es)=>{if(bs(ei))return Pr(ei),a8(ei.dom);0===G(Pn(es),et=>!bs(et)).length&&bs(er)&&go(es,bn("br"));let ed=a3(ei.dom,Li.before(es.dom));return V(Zw(er),et=>{go(es,et)}),ex(et,er),ed},nx=(et,er,ei)=>{if(bs(ei)){if(bs(er)){let et=Y((et=>{let t=(et,er)=>Fn(et).fold(()=>er,et=>kr(et)?t(et,er.concat(oi(et))):er);return t(et,[])})(ei),(et,er)=>(vo(et,er),er),Dr());Co(er),bo(er,et)}return wo(ei),a8(er.dom)}let es=a5(ei.dom);return V(Zw(er),et=>{bo(ei,et)}),ex(et,er),es},ox=(et,er)=>{hu(et,er.dom).bind(et=>I.from(et.getNode())).map(pn).filter(Er).each(wo)},rx=(et,er,ei)=>(ox(!0,er),ox(!1,ei),(Sn(ei,er)?((et,er)=>{let ei=bp(er,et);return I.from(ei[ei.length-1])})(ei,er):I.none()).fold(O(nx,et,er,ei),O(tx,et,er,ei))),sx=(et,er,ei,es)=>er?rx(et,es,ei):rx(et,ei,es),ax=(et,er)=>{var ei,es;let ed=pn(et.getBody()),ec=(ei=ed.dom,(es=et.selection.getRng()).collapsed?((et,er,ei)=>{let es=Qw(et,Li.fromRangeStart(ei)),ed=es.bind(ei=>fu(er,et,ei.position).bind(ei=>Qw(et,ei).map(ei=>t3(ei.position.getNode())&&!bs(ei.block)?hu(!1,ei.block.dom).bind(es=>es.isEqual(ei.position)?fu(er,et,es).bind(er=>Qw(et,er)):I.some(ei)).getOr(ei):ei)));return Mt(es,ed,Xw).filter(er=>!En(er.from.block,er.to.block)&&((et,er)=>{let ei=pn(et);return En(Jw(ei,er.from.block),Jw(ei,er.to.block))})(et,er)&&!1===t6(er.from.block.dom)&&!1===t6(er.to.block.dom)&&(et=>{let t=et=>rf(et)||_s(et.dom);return t(et.from.block)&&t(et.to.block)})(er))})(ei,er,es):I.none()).map(ei=>()=>{sx(ed,er,ei.from.block,ei.to.block).each(er=>{et.selection.setRng(er.toRange())})});return ec},ix=(et,er)=>{let ei=pn(er),es=O(En,et);return Qn(ei,rR,es).isSome()},lx=et=>{let er=pn(et.getBody());return((et,er)=>{let ei=a3(et.dom,Li.fromRangeStart(er)).isNone(),es=a2(et.dom,Li.fromRangeEnd(er)).isNone();return!(ix(et,er.startContainer)||ix(et,er.endContainer))&&ei&&es})(er,et.selection.getRng())?I.some(()=>{et.setContent(""),et.selection.setCursorLocation()}):((et,er)=>{let ei=er.getRng();return Mt(ph(et,pn(ei.startContainer)),ph(et,pn(ei.endContainer)),(es,ed)=>En(es,ed)?I.none():I.some(()=>{ei.deleteContents(),sx(et,!0,es,ed).each(et=>{er.setRng(et.toRange())})})).getOr(I.none())})(er,et.selection)},dx=(et,er)=>et.selection.isCollapsed()?I.none():lx(et),cx=(et,er,ei,es,ed)=>I.from(er._selectionOverrides.showCaret(et,ei,es,ed)),ux=(et,er)=>et.dispatch("BeforeObjectSelected",{target:er}).isDefaultPrevented()?I.none():I.some((et=>{let er=et.ownerDocument.createRange();return er.selectNode(et),er})(er)),mx=(et,er,ei)=>er.collapsed?((et,er,ei)=>{let es=Wc(1,et.getBody(),er),ed=Li.fromRangeStart(es),ec=ed.getNode();if(kc(ec))return cx(1,et,ec,!ed.isAtEnd(),!1);let eu=ed.getNode(!0);if(kc(eu))return cx(1,et,eu,!1,!1);let ef=Vh(et.dom.getRoot(),ed.getNode());return kc(ef)?cx(1,et,ef,!1,ei):I.none()})(et,er,ei).getOr(er):er,fx=et=>l0(et)||lX(et),gx=et=>l1(et)||lJ(et),px=(et,er,ei,es,ed,ec)=>{var eu;cx(es,et,ec.getNode(!ed),ed,!0).each(ei=>{if(er.collapsed){let et=er.cloneRange();ed?et.setEnd(ei.startContainer,ei.startOffset):et.setStart(ei.endContainer,ei.endOffset),et.deleteContents()}else er.deleteContents();et.selection.setRng(ei)}),eu=et.dom,tJ(ei)&&0===ei.data.length&&eu.remove(ei)},hx=(et,er)=>((et,er)=>{let ei=et.selection.getRng();if(!tJ(ei.commonAncestorContainer))return I.none();let es=er?i0.Forwards:i0.Backwards,ed=du(et.getBody()),ec=O(Xc,er?ed.next:ed.prev),eu=er?fx:gx,ef=Gc(es,et.getBody(),ei),ey=ec(ef),eC=ey?dh(er,ey):ey;if(!eC||!Qc(ef,eC))return I.none();if(eu(eC))return I.some(()=>px(et,ei,ef.getNode(),es,er,eC));let eS=ec(eC);return eS&&eu(eS)&&Qc(eC,eS)?I.some(()=>px(et,ei,ef.getNode(),es,er,eS)):I.none()})(et,er),bx=(et,er)=>{let ei=et.getBody();return er?a8(ei).filter(l0):a5(ei).filter(l1)},vx=et=>{let er=et.selection.getRng();return!er.collapsed&&(bx(et,!0).exists(et=>et.isEqual(Li.fromRangeStart(er)))||bx(et,!1).exists(et=>et.isEqual(Li.fromRangeEnd(er))))},dD=al([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Cx=(et,er,ei)=>fu(er,et,ei).bind(es=>{var ed;return C(ed=es.getNode())&&(rR(pn(ed))||ry(pn(ed)))||((et,er,ei,es)=>{let r=er=>kr(pn(er))&&!Uc(ei,es,et);return Kc(!er,ei).fold(()=>Kc(er,es).fold(e$,r),r)})(et,er,ei,es)?I.none():er&&t6(es.getNode())||!er&&t6(es.getNode(!0))?((et,er,ei,es)=>{let ed=es.getNode(!er);return ph(pn(et),pn(ei.getNode())).map(et=>bs(et)?dD.remove(et.dom):dD.moveToElement(ed)).orThunk(()=>I.some(dD.moveToElement(ed)))})(et,er,ei,es):er&&l1(ei)||!er&&l0(ei)?I.some(dD.moveToPosition(es)):I.none()}),wx=(et,er)=>I.from(Vh(et.getBody(),er)),xx=(et,er)=>{let ei=et.selection.getNode();return wx(et,ei).filter(t6).fold(()=>((et,er,ei)=>{var es;let ed=Wc(er?1:-1,et,ei),ec=Li.fromRangeStart(ed),eu=pn(et);return!er&&l1(ec)?I.some(dD.remove(ec.getNode(!0))):er&&l0(ec)?I.some(dD.remove(ec.getNode())):!er&&l0(ec)&&Ap(eu,ec)?l6(eu,ec).map(et=>dD.remove(et.getNode())):er&&l1(ec)&&Rp(eu,ec)?l9(eu,ec).map(et=>dD.remove(et.getNode())):((et,er)=>{let ei=er.getNode(!et),es=et?"after":"before";return tY(ei)&&ei.getAttribute("data-mce-caret")===es})(er,ec)?(y(es=ec.getNode(!er))?I.none():er&&t6(es.nextSibling)?I.some(dD.moveToElement(es.nextSibling)):!er&&t6(es.previousSibling)?I.some(dD.moveToElement(es.previousSibling)):I.none()).orThunk(()=>Cx(et,er,ec)):Cx(et,er,ec).bind(er=>er.fold(et=>I.some(dD.remove(et)),et=>I.some(dD.moveToElement(et)),er=>Uc(ec,er,et)?I.none():I.some(dD.moveToPosition(er))))})(et.getBody(),er,et.selection.getRng()).map(ei=>()=>ei.fold(ei=>(et._selectionOverrides.hideFakeCaret(),rh(et,er,pn(ei)),!0),ei=>{let es=er?Li.before(ei):Li.after(ei);return et.selection.setRng(es.toRange()),!0},er=>(et.selection.setRng(er.toRange()),!0))),()=>I.some(E))},kx=et=>{let er=et.dom,ei=et.selection,es=Vh(et.getBody(),ei.getNode());if(t5(es)&&er.isBlock(es)&&er.isEmpty(es)){let et=er.create("br",{"data-mce-bogus":"1"});er.setHTML(es,""),es.appendChild(et),ei.setRng(Li.before(et).toRange())}return!0},Ex=(et,er)=>et.selection.isCollapsed()?xx(et,er):((et,er)=>{let ei=et.selection.getNode();return t6(ei)&&!t9(ei)?wx(et,ei.parentNode).filter(t6).fold(()=>I.some(()=>{V(Fo(pn(et.getBody()),".mce-offscreen-selection"),wo),rh(et,er,pn(et.selection.getNode())),hh(et)}),()=>I.some(E)):vx(et)?I.some(()=>{yh(et,et.selection.getRng(),pn(et.getBody()))}):I.none()})(et,er),Sx=(et,er)=>et.selection.isCollapsed()?((et,er)=>{let ei=Li.fromRangeStart(et.selection.getRng());return fu(er,et.getBody(),ei).filter(et=>er?lK(et):lY(et)).bind(et=>zc(er?0:-1,et)).map(er=>()=>et.selection.select(er))})(et,er):I.none(),Nx=et=>tJ(et)&&"\uFEFF"===et.data[0],Rx=et=>tJ(et)&&"\uFEFF"===et.data[et.data.length-1],Ax=et=>{var er;return(null!==(er=et.ownerDocument)&&void 0!==er?er:document).createTextNode("\uFEFF")},Ox=(et,er)=>et?(et=>{var er;if(tJ(et.previousSibling))return Rx(et.previousSibling)||et.previousSibling.appendData("\uFEFF"),et.previousSibling;if(tJ(et))return Nx(et)||et.insertData(0,"\uFEFF"),et;{let ei=Ax(et);return null===(er=et.parentNode)||void 0===er||er.insertBefore(ei,et),ei}})(er):(et=>{var er,ei;if(tJ(et.nextSibling))return Nx(et.nextSibling)||et.nextSibling.insertData(0,"\uFEFF"),et.nextSibling;if(tJ(et))return Rx(et)||et.appendData("\uFEFF"),et;{let es=Ax(et);return et.nextSibling?null===(er=et.parentNode)||void 0===er||er.insertBefore(es,et.nextSibling):null===(ei=et.parentNode)||void 0===ei||ei.appendChild(es),es}})(er),dP=O(Ox,!0),dF=O(Ox,!1),Dx=(et,er)=>tJ(et.container())?Ox(er,et.container()):Ox(er,et.getNode()),Px=(et,er)=>{let ei=er.get();return ei&&et.container()===ei&&Hr(ei)},Lx=(et,er)=>er.fold(er=>{hc(et.get());let ei=dP(er);return et.set(ei),I.some(Li(ei,ei.length-1))},er=>a8(er).map(er=>{if(Px(er,et)){let er=et.get();return Li(er,1)}{hc(et.get());let ei=Dx(er,!0);return et.set(ei),Li(ei,1)}}),er=>a5(er).map(er=>{if(Px(er,et)){let er=et.get();return Li(er,er.length-1)}{hc(et.get());let ei=Dx(er,!1);return et.set(ei),Li(ei,ei.length-1)}}),er=>{hc(et.get());let ei=dF(er);return et.set(ei),I.some(Li(ei,1))}),Mx=(et,er)=>{for(let ei=0;ei<et.length;ei++){let es=et[ei].apply(null,er);if(es.isSome())return es}return I.none()},dM=al([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Fx=(et,er)=>Fc(er,et)||et,Ux=(et,er,ei)=>{let es=l7(ei),ed=Fx(er,es.container());return lh(et,ed,es).fold(()=>a2(ed,es).bind(O(lh,et,ed)).map(et=>dM.before(et)),I.none)},zx=(et,er)=>null===ku(et,er),jx=(et,er,ei)=>lh(et,er,ei).filter(O(zx,er)),Hx=(et,er,ei)=>{let es=ir(ei);return jx(et,er,es).bind(et=>a3(et,es).isNone()?I.some(dM.start(et)):I.none())},$x=(et,er,ei)=>{let es=l7(ei);return jx(et,er,es).bind(et=>a2(et,es).isNone()?I.some(dM.end(et)):I.none())},qx=(et,er,ei)=>{let es=ir(ei),ed=Fx(er,es.container());return lh(et,ed,es).fold(()=>a3(ed,es).bind(O(lh,et,ed)).map(et=>dM.after(et)),I.none)},Vx=et=>!ih(Kx(et)),Wx=(et,er,ei)=>Mx([Ux,Hx,$x,qx],[et,er,ei]).filter(Vx),Kx=et=>et.fold(R,R,R,R),Gx=et=>et.fold(N("before"),N("start"),N("end"),N("after")),Yx=et=>et.fold(dM.before,dM.before,dM.after,dM.after),Xx=et=>et.fold(dM.start,dM.start,dM.end,dM.end),Qx=(et,er,ei,es,ed,ec)=>Mt(lh(er,ei,es),lh(er,ei,ed),(er,es)=>er!==es&&((et,er,ei)=>{let es=Fc(er,et),ed=Fc(ei,et);return C(es)&&es===ed})(ei,er,es)?dM.after(et?er:es):ec).getOr(ec),Jx=(et,er)=>et.fold(eq,et=>!(Gx(et)===Gx(er)&&Kx(et)===Kx(er))),Zx=(et,er)=>et?er.fold(S(I.some,dM.start),I.none,S(I.some,dM.after),I.none):er.fold(I.none,S(I.some,dM.before),I.none,S(I.some,dM.end)),ek=(et,er,ei)=>{let es=et?1:-1;return er.setRng(Li(ei.container(),ei.offset()+es).toRange()),er.getSel().modify("move",et?"forward":"backward","word"),!0};(ed=eS||(eS={}))[ed.Br=0]="Br",ed[ed.Block=1]="Block",ed[ed.Wrap=2]="Wrap",ed[ed.Eol=3]="Eol";let nk=(et,er)=>et===i0.Backwards?oe(er):er,ok=(et,er,ei)=>et===i0.Forwards?er.next(ei):er.prev(ei),rk=(et,er,ei,es)=>t3(es.getNode(er===i0.Forwards))?eS.Br:!1===Uc(ei,es)?eS.Block:eS.Wrap,sk=(et,er,ei,es)=>{let ed=du(ei),ec=es,eu=[];for(;ec;){let ei=ok(er,ed,ec);if(!ei)break;if(t3(ei.getNode(!1)))return er===i0.Forwards?{positions:nk(er,eu).concat([ei]),breakType:eS.Br,breakAt:I.some(ei)}:{positions:nk(er,eu),breakType:eS.Br,breakAt:I.some(ei)};if(ei.isVisible()){if(et(ec,ei)){let et=rk(0,er,ec,ei);return{positions:nk(er,eu),breakType:et,breakAt:I.some(ei)}}eu.push(ei),ec=ei}else ec=ei}return{positions:nk(er,eu),breakType:eS.Eol,breakAt:I.none()}},ak=(et,er,ei,es)=>er(ei,es).breakAt.map(es=>{let ed=er(ei,es).positions;return et===i0.Backwards?ed.concat(es):[es].concat(ed)}).getOr([]),ik=(et,er)=>X(et,(et,ei)=>et.fold(()=>I.some(ei),es=>Mt(le(es.getClientRects()),le(ei.getClientRects()),(et,ed)=>{let ec=Math.abs(er-et.left);return Math.abs(er-ed.left)<=ec?ei:es}).or(et)),I.none()),lk=(et,er)=>le(er.getClientRects()).bind(er=>ik(et,er.left)),dz=O(sk,Li.isAbove,-1),dV=O(sk,Li.isBelow,1),dU=O(ak,-1,dz),dH=O(ak,1,dV),fk=(et,er)=>dz(et,er).breakAt.isNone(),gk=(et,er)=>dV(et,er).breakAt.isNone(),pk=(et,er)=>lk(dU(et,er),er),hk=(et,er)=>lk(dH(et,er),er),vk=(et,er)=>Math.abs(et.left-er),yk=(et,er)=>Math.abs(et.right-er),Ck=(et,er)=>Te(et,(et,ei)=>{let es=Math.min(vk(et,er),yk(et,er)),ed=Math.min(vk(ei,er),yk(ei,er));return ed===es&&Ee(ei,"node")&&t6(ei.node)||ed<es?ei:et}),wk=et=>{let t=er=>q(er,er=>{let ei=li(er);return ei.node=et,ei});if(tY(et))return t(et.getClientRects());if(tJ(et)){let er=et.ownerDocument.createRange();return er.setStart(et,0),er.setEnd(et,et.data.length),t(er.getClientRects())}return[]},xk=et=>te(et,wk);(ec=e_||(e_={}))[ec.Up=-1]="Up",ec[ec.Down=1]="Down";let Ek=(et,er,ei,es,ed,ec)=>{let eu=0,ef=[],l=es=>{let ec=xk([es]);-1===et&&(ec=ec.reverse());for(let et=0;et<ec.length;et++){let es=ec[et];if(!ei(es,ey)){if(ef.length>0&&er(es,De(ef))&&eu++,es.line=eu,ed(es))return!0;ef.push(es)}}return!1},ey=De(ec.getClientRects());if(!ey)return ef;let eC=ec.getNode();return eC&&(l(eC),((et,er,ei,es)=>{let ed=es;for(;ed=Ic(ed,et,is,er);)if(ei(ed))return})(et,es,l,eC)),ef},dj=O(Ek,e_.Up,ui,mi),d$=O(Ek,e_.Down,mi,ui),Nk=et=>De(et.getClientRects()),Rk=et=>er=>er.line>et,Ak=et=>er=>er.line===et,Ok=(et,er)=>{et.selection.setRng(er),Zf(et,et.selection.getRng())},Tk=(et,er,ei)=>I.some(mx(et,er,ei)),Bk=(et,er,ei,es,ed,ec)=>{let eu=er===i0.Forwards,ef=du(et.getBody()),ey=O(Xc,eu?ef.next:ef.prev),eC=eu?es:ed;if(!ei.collapsed){let es=gi(ei);if(ec(es))return cx(er,et,es,er===i0.Backwards,!1);if(vx(et)){let et=ei.cloneRange();return et.collapse(er===i0.Backwards),I.from(et)}}let eS=Gc(er,et.getBody(),ei);if(eC(eS))return ux(et,eS.getNode(!eu));let e_=ey(eS),eR=Xr(ei);if(!e_)return eR?I.some(ei):I.none();if(eC(e_=dh(eu,e_)))return cx(er,et,e_.getNode(!eu),eu,!1);let eI=ey(e_);return eI&&eC(eI)&&Qc(e_,eI)?cx(er,et,eI.getNode(!eu),eu,!1):eR?Tk(et,e_.toRange(),!1):I.none()},Dk=(et,er,ei,es,ed,ec)=>{let eu;let ef=Gc(er,et.getBody(),ei),ey=De(ef.getClientRects()),eC=er===e_.Down,eS=et.getBody();if(!ey)return I.none();if(vx(et)){let et=eC?Li.fromRangeEnd(ei):Li.fromRangeStart(ei);return(eC?hk:pk)(eS,et).orThunk(()=>I.from(et)).map(et=>et.toRange())}let eR=(eC?d$:dj)(eS,Rk(1),ef),eI=G(eR,Ak(1)),eL=ey.left,eB=Ck(eI,eL);if(eB&&ec(eB.node)){let ei=Math.abs(eL-eB.left),es=Math.abs(eL-eB.right);return cx(er,et,eB.node,ei<es,!1)}if(eu=es(ef)?ef.getNode():ed(ef)?ef.getNode(!0):gi(ei)){let ei=((et,er,ei,es)=>{let ed,ec,eu,ef;let ey=du(er),eC=[],eS=0;1===et?(ed=ey.next,ec=mi,eu=ui,ef=Li.after(es)):(ed=ey.prev,ec=ui,eu=mi,ef=Li.before(es));let e_=Nk(ef);do{if(!ef.isVisible())continue;let et=Nk(ef);if(eu(et,e_))continue;eC.length>0&&ec(et,De(eC))&&eS++;let er=li(et);if(er.position=ef,er.line=eS,ei(er))break;eC.push(er)}while(ef=ed(ef));return eC})(er,eS,Rk(1),eu),es=Ck(G(ei,Ak(1)),eL);if(es||(es=De(G(ei,Ak(0)))))return Tk(et,es.position.toRange(),!1)}return 0===eI.length?Pk(et,eC).filter(eC?ed:es).map(er=>mx(et,er.toRange(),!1)):I.none()},Pk=(et,er)=>{var ei,es;let ed=et.selection.getRng(),ec=er?Li.fromRangeEnd(ed):Li.fromRangeStart(ed),eu=(ei=ec.container(),es=et.getBody(),Qn(pn(ei),et=>t5(et.dom),et=>et.dom===es).map(et=>et.dom).getOr(es));if(er){let et=dV(eu,ec);return de(et.positions)}{let et=dz(eu,ec);return le(et.positions)}},Lk=(et,er,ei)=>Pk(et,er).filter(ei).exists(er=>(et.selection.setRng(er.toRange()),!0)),Mk=(et,er)=>{let ei=et.dom.createRng();ei.setStart(er.container(),er.offset()),ei.setEnd(er.container(),er.offset()),et.selection.setRng(ei)},Ik=(et,er)=>{et?er.setAttribute("data-mce-selected","inline-boundary"):er.removeAttribute("data-mce-selected")},Fk=(et,er,ei)=>Lx(er,ei).map(er=>(Mk(et,er),ei)),Uk=(et,er,ei)=>{let es=et.getBody(),ed=((et,er,ei)=>{let es=Li.fromRangeStart(et);if(et.collapsed)return es;{let ed=Li.fromRangeEnd(et);return ei?a3(er,ed).getOr(ed):a2(er,es).getOr(es)}})(et.selection.getRng(),es,ei);return((et,er,ei,es)=>{let ed=dh(et,es),ec=Wx(er,ei,ed);return Wx(er,ei,ed).bind(O(Zx,et)).orThunk(()=>((et,er,ei,es,ed)=>{let ec=dh(et,ed);return fu(et,ei,ec).map(O(dh,et)).fold(()=>es.map(Yx),ed=>Wx(er,ei,ed).map(O(Qx,et,er,ei,ec,ed)).filter(O(Jx,es))).filter(Vx)})(et,er,ei,ec,es))})(ei,O(ah,et),es,ed).bind(ei=>Fk(et,er,ei))},zk=(et,er,ei)=>!!oV(et)&&Uk(et,er,ei).isSome(),jk=(et,er,ei)=>!!oV(er)&&((et,er)=>{let ei=er.selection.getRng(),es=et?Li.fromRangeEnd(ei):Li.fromRangeStart(ei);return!!eH(er.selection.getSel().modify)&&(et&&Vr(es)?ek(!0,er.selection,es):!(et||!Wr(es))&&ek(!1,er.selection,es))})(et,er),Hk=et=>{let er=Da(null),ei=O(ah,et);return et.on("NodeChange",es=>{oV(et)&&(((et,er,ei)=>{let es=q(Fo(pn(er.getRoot()),'*[data-mce-selected="inline-boundary"]'),et=>et.dom),ed=G(es,et),ec=G(ei,et);V(re(ed,ec),O(Ik,!1)),V(re(ec,ed),O(Ik,!0))})(ei,et.dom,es.parents),((et,er)=>{let ei=er.get();if(et.selection.isCollapsed()&&!et.composing&&ei){let es=Li.fromRangeStart(et.selection.getRng());!Li.isTextPosition(es)||Vr(es)||Wr(es)||(Mk(et,pc(ei,es)),er.set(null))}})(et,er),((et,er,ei,es)=>{if(er.selection.isCollapsed()){let ed=G(es,et);V(ed,es=>{let ed=Li.fromRangeStart(er.selection.getRng());Wx(et,er.getBody(),ed).bind(et=>Fk(er,ei,et))})}})(ei,et,er,es.parents))}),er},dq=O(jk,!0),dG=O(jk,!1),Vk=(et,er,ei)=>{if(oV(et)){let es=Pk(et,er).getOrThunk(()=>{let ei=et.selection.getRng();return er?Li.fromRangeEnd(ei):Li.fromRangeStart(ei)});return Wx(O(ah,et),et.getBody(),es).exists(er=>{let es=Yx(er);return Lx(ei,es).exists(er=>(Mk(et,er),!0))})}return!1},Wk=(et,er)=>ei=>Lx(er,ei).map(er=>()=>Mk(et,er)),Kk=(et,er,ei,es)=>{let ed=et.getBody(),ec=O(ah,et);et.undoManager.ignore(()=>{et.selection.setRng(((et,er)=>{let ei=document.createRange();return ei.setStart(et.container(),et.offset()),ei.setEnd(er.container(),er.offset()),ei})(ei,es)),fh(et),Wx(ec,ed,Li.fromRangeStart(et.selection.getRng())).map(Xx).bind(Wk(et,er)).each(P)}),et.nodeChanged()},Gk=(et,er,ei)=>{if(et.selection.isCollapsed()&&oV(et)){let es=Li.fromRangeStart(et.selection.getRng());return((et,er,ei,es)=>{var ed;let ec=(ed=et.getBody(),Fc(es.container(),ed)||ed),eu=O(ah,et),ef=Wx(eu,ec,es);return ef.bind(et=>ei?et.fold(N(I.some(Xx(et))),I.none,N(I.some(Yx(et))),I.none):et.fold(I.none,N(I.some(Yx(et))),I.none,N(I.some(Xx(et))))).map(Wk(et,er)).getOrThunk(()=>{let ed=gu(ei,ec,es),ey=ed.bind(et=>Wx(eu,ec,et));return Mt(ef,ey,()=>lh(eu,ec,es).bind(er=>Mt(a8(er),a5(er),(et,ei)=>{let es=dh(!0,et),ed=dh(!1,ei);return a2(er,es).forall(et=>et.isEqual(ed))}).getOr(!0)?I.some(()=>{rh(et,ei,pn(er))}):I.none())).getOrThunk(()=>ey.bind(()=>ed.map(ed=>()=>{ei?Kk(et,er,es,ed):Kk(et,er,ed,es)})))})})(et,er,ei,es)}return I.none()},Yk=(et,er)=>{let ei=pn(et.getBody()),es=pn(et.selection.getStart()),ed=bp(es,ei);return Z(ed,er).fold(N(ed),et=>ed.slice(0,et))},Xk=et=>1===zn(et),Qk=(et,er)=>{let ei=O(Ib,et);return te(er,et=>ei(et)?[et.dom]:[])},Jk=et=>{let er=Yk(et,rc);return Qk(et,er)},Zk=(et,er)=>{let ei=G(Yk(et,et=>rc(et)||zn(et)>1),Xk);return de(ei).bind(es=>{let ed=Li.fromRangeStart(et.selection.getRng());return bh(er,ed,es.dom)&&!Fb(es)?I.some(()=>((et,er,ei,es)=>{let ed=Qk(er,es);if(0===ed.length)rh(er,et,ei);else{let et=Mb(ei.dom,ed);er.selection.setRng(et.toRange())}})(er,et,es,ei)):I.none()})},eE=(et,er)=>{let ei=et.selection.getStart(),es=((et,er)=>{let ei=er.parentElement;return t3(er)&&!ez(ei)&&et.dom.isEmpty(ei)})(et,ei)||Fb(pn(ei))?Mb(ei,er):((et,er)=>{let{caretContainer:ei,caretPosition:es}=Lb(er);return et.insertNode(ei.dom),es})(et.selection.getRng(),er);et.selection.setRng(es.toRange())},tE=et=>tJ(et.startContainer),nE=et=>{let er=et.selection.getRng();return 0===er.startOffset&&tE(er)&&((et,er)=>{let ei=er.startContainer.parentElement;return!ez(ei)&&Ib(et,pn(ei))})(et,er)&&((et=>{let er=et.startContainer.parentNode,ei=et.endContainer.parentNode;return!ez(er)&&!ez(ei)&&er.isEqualNode(ei)})(er)&&(et=>{let er=et.endContainer;return et.endOffset===(tJ(er)?er.length:er.childNodes.length)})(er)||!er.endContainer.isEqualNode(er.commonAncestorContainer))},oE=(et,er)=>et.selection.isCollapsed()?Zk(et,er):(et=>{if(nE(et)){let er=Jk(et);return I.some(()=>{fh(et),((et,er)=>{let ei=re(er,Jk(et));ei.length>0&&eE(et,ei)})(et,er)})}return I.none()})(et),rE=et=>Qn(et,et=>xu(et.dom),rc).isSome(),sE=et=>((et=>{let er=et.selection.getRng();return er.collapsed&&(tE(er)||et.dom.isEmpty(er.startContainer))&&!rE(pn(et.selection.getStart()))})(et)&&eE(et,[]),!0),aE=(et,er,ei)=>C(ei)?I.some(()=>{et._selectionOverrides.hideFakeCaret(),rh(et,er,pn(ei))}):I.none(),iE=(et,er)=>et.selection.isCollapsed()?((et,er)=>{let ei=er?lX:lJ,es=er?i0.Forwards:i0.Backwards,ed=Gc(es,et.getBody(),et.selection.getRng());return ei(ed)?aE(et,er,ed.getNode(!er)):I.from(dh(er,ed)).filter(et=>ei(et)&&Qc(ed,et)).bind(ei=>aE(et,er,ei.getNode(!er)))})(et,er):((et,er)=>{let ei=et.selection.getNode();return t7(ei)?aE(et,er,ei):I.none()})(et,er),lE=et=>Xe(null!=et?et:"").getOr(0),dE=(et,er)=>(et||"table"===Ht(er)?"margin":"padding")+("rtl"===lo(er,"direction")?"-right":"-left"),cE=et=>{let er=mE(et);return!et.mode.isReadOnly()&&(er.length>1||ne(er,er=>{let ei=dE(ou(et),er),es=uo(er,ei).map(lE).getOr(0);return"false"!==et.dom.getContentEditable(er.dom)&&es>0}))},uE=et=>rv(et)||ry(et),mE=et=>G(ko(et.selection.getSelectedBlocks()),et=>!uE(et)&&!An(et).exists(uE)&&Jn(et,et=>t5(et.dom)||t6(et.dom)).exists(et=>t5(et.dom))),fE=(et,er)=>{var ei,es;let{dom:ed}=et,ec=of(et),eu=null!==(es=null===(ei=/[a-z%]+$/i.exec(ec))||void 0===ei?void 0:ei[0])&&void 0!==es?es:"px",ef=lE(ec),ey=ou(et);V(mE(et),et=>{((et,er,ei,es,ed,ec)=>{let eu=dE(ei,pn(ec)),ef=lE(et.getStyle(ec,eu));if("outdent"===er){let er=Math.max(0,ef-es);et.setStyle(ec,eu,er?er+ed:"")}else{let er=ef+es+ed;et.setStyle(ec,eu,er)}})(ed,er,ey,ef,eu,et.dom)})},gE=et=>fE(et,"outdent"),pE=et=>{if(et.selection.isCollapsed()&&cE(et)){let er=et.dom,ei=et.selection.getRng(),es=Li.fromRangeStart(ei),ed=er.getParent(ei.startContainer,er.isBlock);if(null!==ed&&l2(pn(ed),es))return I.some(()=>gE(et))}return I.none()},hE=(et,er,ei)=>ue([pE,Ex,hx,(et,ei)=>Gk(et,er,ei),ax,qh,Sx,iE,dx,oE],er=>er(et,ei)).filter(er=>et.selection.isEditable()),bE=(et,er)=>{et.addCommand("delete",()=>{((et,er)=>{hE(et,er,!1).fold(()=>{fh(et),hh(et)},P)})(et,er)}),et.addCommand("forwardDelete",()=>{((et,er)=>{hE(et,er,!0).fold(()=>mh(et,"ForwardDelete"),P)})(et,er)})},vE=et=>void 0===et.touches||1!==et.touches.length?I.none():I.some(et.touches[0]),yE=(et,er)=>ke(et,er.nodeName),CE=(et,er)=>!!tJ(er)||!!tY(er)&&!yE(et.getBlockElements(),er)&&!Lu(er)&&!As(et,er),wE=(et,er)=>!!(tJ(er)&&(0===er.data.length||/^\s+$/.test(er.data)&&(!er.nextSibling||yE(et,er.nextSibling)))),xE=et=>et.dom.create(nX(et),nJ(et)),kE=et=>{let er=et.dom,ei=et.selection,es=et.schema,ed=es.getBlockElements(),ec=ei.getStart(),eu=et.getBody(),ef,ey,eC=!1,eS=nX(et);if(!ec||!tY(ec))return;let e_=eu.nodeName.toLowerCase();if(!es.isValidChild(e_,eS.toLowerCase())||$(hp(pn(ec),pn(eu)),et=>yE(ed,et.dom)))return;let eR=ei.getRng(),{startContainer:eI,startOffset:eL,endContainer:eB,endOffset:eD}=eR,eP=xg(et),eF=eu.firstChild;for(;eF;)if(tY(eF)&&Ss(es,eF),CE(es,eF)){if(wE(ed,eF)){ey=eF,eF=eF.nextSibling,er.remove(ey);continue}ef||(ef=xE(et),eu.insertBefore(ef,eF),eC=!0),ey=eF,eF=eF.nextSibling,ef.appendChild(ey)}else ef=null,eF=eF.nextSibling;eC&&eP&&(eR.setStart(eI,eL),eR.setEnd(eB,eD),ei.setRng(eR),et.nodeChanged())},EE=(et,er,ei)=>{let es=pn(xE(et)),ed=Dr();bo(es,ed),ei(er,es);let ec=document.createRange();return ec.setStartBefore(ed.dom),ec.setEndBefore(ed.dom),ec},SE=et=>er=>-1!==(" "+er.attr("class")+" ").indexOf(et),_E=(et,er,ei)=>function(es){let ed=arguments,ec=ed[ed.length-2],eu=ec>0?er.charAt(ec-1):"";if('"'===eu)return es;if(">"===eu){let et=er.lastIndexOf("<",ec);if(-1!==et&&-1!==er.substring(et,ec).indexOf('contenteditable="false"'))return es}return'<span class="'+ei+'" data-mce-content="'+et.dom.encode(ed[0])+'">'+et.dom.encode("string"==typeof ed[1]?ed[1]:ed[0])+"</span>"},NE=(et,er)=>{er.hasAttribute("data-mce-caret")&&(Yr(er),et.selection.setRng(et.selection.getRng()),et.selection.scrollIntoView(er))},RE=(et,er)=>{let ei=eo(pn(et.getBody()),"*[data-mce-caret]").map(et=>et.dom).getOrNull();if(ei)return"compositionstart"===er.type?(er.preventDefault(),er.stopPropagation(),void NE(et,ei)):void(qr(ei)&&(NE(et,ei),et.undoManager.add()))},OE=(et,er,ei)=>{let es=du(et.getBody()),ed=O(Xc,1===er?es.next:es.prev);if(ei.collapsed){let es=et.dom.getParent(ei.startContainer,"PRE");if(!es)return;if(!ed(Li.fromRangeStart(ei))){let ei=pn((et=>{let er=et.dom.create(nX(et));return er.innerHTML='<br data-mce-bogus="1">',er})(et));1===er?po(pn(es),ei):go(pn(es),ei),et.selection.select(ei.dom,!0),et.selection.collapse()}}},TE=(et,er)=>((et,er)=>{let ei=er?i0.Forwards:i0.Backwards,es=et.selection.getRng();return Bk(et,ei,es,l0,l1,t6).orThunk(()=>(OE(et,ei,es),I.none()))})(et,((et,er)=>{let ei=er?et.getEnd(!0):et.getStart(!0);return ih(ei)?!er:er})(et.selection,er)).exists(er=>(Ok(et,er),!0)),BE=(et,er)=>((et,er)=>{let ei=er?1:-1,es=et.selection.getRng();return Dk(et,ei,es,et=>l0(et)||lQ(et),et=>l1(et)||lZ(et),t6).orThunk(()=>(OE(et,ei,es),I.none()))})(et,er).exists(er=>(Ok(et,er),!0)),DE=(et,er)=>Lk(et,er,er?l1:l0),PE=(et,er)=>bx(et,!er).map(ei=>{let es=ei.toRange(),ed=et.selection.getRng();return er?es.setStart(ed.startContainer,ed.startOffset):es.setEnd(ed.endContainer,ed.endOffset),es}).exists(er=>(Ok(et,er),!0)),LE=et=>H(["figcaption"],Ht(et)),ME=(et,er)=>!!et.selection.isCollapsed()&&((et,er)=>{let ei=pn(et.getBody()),es=Li.fromRangeStart(et.selection.getRng());return((et,er)=>{let ei=O(En,er);return Jn(pn(et.container()),rc,ei).filter(LE)})(es,ei).exists(()=>{if(er?gk(ei.dom,es):fk(ei.dom,es)){let es=EE(et,ei,er?bo:ho);return et.selection.setRng(es),!0}return!1})})(et,er),IE=(et,er)=>er?I.from(et.dom.getParent(et.selection.getNode(),"details")).map(er=>((et,er)=>{let ei=et.selection.getRng(),es=Li.fromRangeStart(ei);return!(et.getBody().lastChild!==er||!gk(er,es)||(et.execCommand("InsertNewBlockAfter"),0))})(et,er)).getOr(!1):I.from(et.dom.getParent(et.selection.getNode(),"summary")).bind(er=>I.from(et.dom.getParent(er,"details")).map(ei=>((et,er,ei)=>{let es=et.selection.getRng(),ed=Li.fromRangeStart(es);return!(et.getBody().firstChild!==er||!fk(ei,ed)||(et.execCommand("InsertNewBlockBefore"),0))})(et,ei,er))).getOr(!1),dW={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},UE=(et,er)=>er.keyCode===et.keyCode&&er.shiftKey===et.shiftKey&&er.altKey===et.altKey&&er.ctrlKey===et.ctrlKey&&er.metaKey===et.metaKey,zE=(et,...er)=>()=>et.apply(null,er),jE=(et,er)=>J(te(q(et,et=>({...dW,...et})),et=>UE(et,er)?[et]:[]),et=>et.action()),HE=(et,er)=>ue(te(q(et,et=>({...dW,...et})),et=>UE(et,er)?[et]:[]),et=>et.action()),$E=(et,er)=>{let ei=er?i0.Forwards:i0.Backwards,es=et.selection.getRng();return Bk(et,ei,es,lX,lJ,t7).exists(er=>(Ok(et,er),!0))},qE=(et,er)=>{let ei=et.selection.getRng();return Dk(et,er?1:-1,ei,lX,lJ,t7).exists(er=>(Ok(et,er),!0))},VE=(et,er)=>Lk(et,er,er?lJ:lX),dK=al([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),dY={...dK,none:et=>dK.none(et)},GE=(et,er,ei)=>te(Mn(et),et=>xn(et,er)?ei(et)?[et]:[]:GE(et,er,ei)),YE=(et,er)=>to(et,"table",er),XE=(et,er,ei,es,ed=eq)=>{let ec=1===es;if(!ec&&ei<=0)return dY.first(et[0]);if(ec&&ei>=et.length-1)return dY.last(et[et.length-1]);{let ec=ei+es,eu=et[ec];return ed(eu)?dY.middle(er,eu):XE(et,er,ec,es,ed)}},QE=(et,er)=>YE(et,er).bind(er=>{let ei=GE(er,"th,td",eq);return Z(ei,er=>En(et,er)).map(et=>({index:et,all:ei}))}),JE=(et,er,ei,es,ed)=>{let ec=Fo(pn(ei),"td,th,caption").map(et=>et.dom),eu=G(te(ec,er=>{var ei;let es={left:(ei=li(er.getBoundingClientRect())).left- -1,top:ei.top- -1,right:ei.right+-2,bottom:ei.bottom+-2,width:ei.width+-1,height:ei.height+-1};return[{x:es.left,y:et(es),cell:er},{x:es.right,y:et(es),cell:er}]}),et=>er(et,ed));return X(eu,(et,er)=>et.fold(()=>I.some(er),et=>{let ei=Math.sqrt(Math.abs(et.x-es)+Math.abs(et.y-ed)),ec=Math.sqrt(Math.abs(er.x-es)+Math.abs(er.y-ed));return I.some(ec<ei?er:et)}),I.none()).map(et=>et.cell)},dX=O(JE,et=>et.bottom,(et,er)=>et.y<er),dJ=O(JE,et=>et.top,(et,er)=>et.y>er),tS=(et,er,ei)=>{let es=et(er,ei);return(es.breakType!==eS.Wrap||0!==es.positions.length)&&(t3(ei.getNode())||es.breakType!==eS.Br||1!==es.positions.length)?es.breakAt.isNone():!es.breakAt.exists(ei=>et(er,ei).breakAt.isSome())},dQ=O(tS,dz),dZ=O(tS,dV),rS=(et,er,ei,es)=>{let ed=et.selection.getRng(),ec=er?1:-1;return!(!xc()||!((et,er,ei)=>{let es=Li.fromRangeStart(er);return hu(!et,ei).exists(et=>et.isEqual(es))})(er,ed,ei)||(cx(ec,et,ei,!er,!1).each(er=>{Ok(et,er)}),0))},sS=(et,er,ei)=>{let es=((et,er)=>{let ei=er.getNode(et);return Yo(ei)?I.some(ei):I.none()})(!!er,ei),ed=!1===er;es.fold(()=>Ok(et,ei.toRange()),es=>hu(ed,et.getBody()).filter(et=>et.isEqual(ei)).fold(()=>Ok(et,ei.toRange()),ei=>((et,er,ei)=>{er.undoManager.transact(()=>{let es=EE(er,pn(ei),et?po:go);Ok(er,es)})})(er,et,es)))},aS=(et,er,ei,es)=>{let ed=et.selection.getRng(),ec=Li.fromRangeStart(ed),eu=et.getBody();if(!er&&dQ(es,ec)){let es=le(ec.getClientRects()).bind(et=>dX(ei,et.left,et.top)).bind(et=>lk(a5(et).map(er=>dz(et,er).positions.concat(er)).getOr([]),ec)).orThunk(()=>le(ec.getClientRects()).bind(et=>ik(dU(eu,Li.before(ei)),et.left))).getOr(Li.before(ei));return sS(et,er,es),!0}if(er&&dZ(es,ec)){let es=de(ec.getClientRects()).bind(et=>dJ(ei,et.left,et.top)).bind(et=>lk(a8(et).map(er=>[er].concat(dV(et,er).positions)).getOr([]),ec)).orThunk(()=>le(ec.getClientRects()).bind(et=>ik(dH(eu,Li.after(ei)),et.left))).getOr(Li.after(ei));return sS(et,er,es),!0}return!1},iS=(et,er,ei)=>I.from(et.dom.getParent(et.selection.getNode(),"td,th")).bind(es=>I.from(et.dom.getParent(es,"table")).map(ed=>ei(et,er,ed,es))).getOr(!1),lS=(et,er)=>iS(et,er,rS),dS=(et,er)=>iS(et,er,aS),cS=(et,er,ei)=>ei.fold(I.none,I.none,(et,er)=>((et,er)=>{let n=et=>{for(let ei=0;ei<et.childNodes.length;ei++){let es=pn(et.childNodes[ei]);if(er(es))return I.some(es);let ed=n(et.childNodes[ei]);if(ed.isSome())return ed}return I.none()};return n(et.dom)})(er,Og).map(et=>(et=>{let er=lB.exact(et,0,et,0);return wf(er)})(et)),ei=>(et.execCommand("mceTableInsertRowAfter"),uS(et,er,ei))),uS=(et,er,ei)=>cS(et,er,QE(ei,void 0).fold(()=>dY.none(ei),et=>XE(et.all,ei,et.index,1,no))),mS=(et,er,ei)=>cS(et,er,QE(ei,void 0).fold(()=>dY.none(),et=>XE(et.all,ei,et.index,-1,no))),fS=(et,er)=>{let ei=["table","li","dl"],es=pn(et.getBody()),r=et=>{let er=Ht(et);return En(et,es)||H(ei,er)},ed=et.selection.getRng();return((et,er,ei=e$)=>ei(er)?I.none():H(et,Ht(er))?I.some(er):Zn(er,et.join(","),et=>xn(et,"table")||ei(et)))(["td","th"],pn(er?ed.endContainer:ed.startContainer),r).map(ei=>(YE(ei,r).each(er=>{et.model.table.clearSelectedCells(er.dom)}),et.selection.collapse(!er),(er?uS:mS)(et,r,ei).each(er=>{et.selection.setRng(er)}),!0)).getOr(!1)},gS=(et,er)=>({container:et,offset:er}),d0=Oa.DOM,hS=et=>er=>et===er?-1:0,bS=(et,er,ei)=>{if(tJ(et)&&er>=0)return I.some(gS(et,er));{let es=ai(d0);return I.from(es.backwards(et,er,hS(et),ei)).map(et=>gS(et.container,et.container.data.length))}},vS=(et,er,ei)=>{if(!tJ(et))return I.none();let es=et.data;if(er>=0&&er<=es.length)return I.some(gS(et,er));{let es=ai(d0);return I.from(es.backwards(et,er,hS(et),ei)).bind(et=>{let es=et.container.data;return vS(et.container,er+es.length,ei)})}},yS=(et,er,ei)=>{if(!tJ(et))return I.none();let es=et.data;if(er<=es.length)return I.some(gS(et,er));{let ed=ai(d0);return I.from(ed.forwards(et,er,hS(et),ei)).bind(et=>yS(et.container,er-es.length,ei))}},CS=(et,er,ei,es,ed)=>{let ec=ai(et,er=>et.isBlock(er)||H(["BR","IMG","HR","INPUT"],er.nodeName)||"false"===et.getContentEditable(er));return I.from(ec.backwards(er,ei,es,ed))},wS=et=>Fr(et.toString().replace(/\u00A0/g," ")),xS=et=>""!==et&&-1!==" \xa0\f\n\r	\v".indexOf(et),kS=(et,er)=>et.substring(er.length),ES=(et,er,ei,es=0)=>to(pn(er.startContainer),lU).fold(()=>((et,er,ei,es=0)=>{if(!er.collapsed||!tJ(er.startContainer))return I.none();let ed={text:"",offset:0},ec=et.getParent(er.startContainer,et.isBlock)||et.getRoot();return CS(et,er.startContainer,er.startOffset,(et,er,es)=>(ed.text=es+ed.text,ed.offset+=er,((et,er,ei)=>{let es;let ed=ei.charAt(0);for(es=er-1;es>=0;es--){let ec=et.charAt(es);if(xS(ec))return I.none();if(ed===ec&&je(et,ei,es,er))break}return I.some(es)})(ed.text,ed.offset,ei).getOr(er)),ec).bind(et=>{let ed=er.cloneRange();if(ed.setStart(et.container,et.offset),ed.setEnd(er.endContainer,er.endOffset),ed.collapsed)return I.none();let ec=wS(ed);return 0!==ec.lastIndexOf(ei)||kS(ec,ei).length<es?I.none():I.some({text:kS(ec,ei),range:ed,trigger:ei})})})(et,er,ei,es),er=>{let es=et.createRng();es.selectNode(er.dom);let ed=wS(es);return I.some({range:es,text:kS(ed,ei),trigger:ei})}),SS=et=>{if(3===et.nodeType)return gS(et,et.data.length);{let er=et.childNodes;return er.length>0?SS(er[er.length-1]):gS(et,er.length)}},_S=(et,er)=>{let ei=et.childNodes;return ei.length>0&&er<ei.length?_S(ei[er],0):ei.length>0&&1===et.nodeType&&ei.length===er?SS(ei[ei.length-1]):gS(et,er)},NS=(et,er,ei,es={})=>{var ed;let ec=er(),eu=null!==(ed=et.selection.getRng().startContainer.nodeValue)&&void 0!==ed?ed:"",ef=G(ec.lookupByTrigger(ei.trigger),er=>ei.text.length>=er.minChars&&er.matches.getOrThunk(()=>{var er;return er=et.dom,et=>{let ei=_S(et.startContainer,et.startOffset);return!((et,er)=>{var ei;let es=null!==(ei=et.getParent(er.container,et.isBlock))&&void 0!==ei?ei:et.getRoot();return CS(et,er.container,er.offset,(et,er)=>0===er?-1:er,es).filter(et=>{let er=et.container.data.charAt(et.offset-1);return!xS(er)}).isSome()})(er,ei)}})(ei.range,eu,ei.text));if(0===ef.length)return I.none();let ey=Promise.all(q(ef,et=>et.fetch(ei.text,et.maxResults,es).then(er=>({matchText:ei.text,items:er,columns:et.columns,onAction:et.onAction,highlightOn:et.highlightOn}))));return I.some({lookupData:ey,context:ei})};(eu=eR||(eR={}))[eu.Error=0]="Error",eu[eu.Value=1]="Value";let AS=(et,er,ei)=>et.stype===eR.Error?er(et.serror):ei(et.svalue),OS=et=>({stype:eR.Value,svalue:et}),TS=et=>({stype:eR.Error,serror:et}),DS=et=>eF(et)&&eX(et).length>100?" removed due to size":JSON.stringify(et,null,2),PS=(et,er)=>TS([{path:et,getErrorInfo:er}]),LS=(et,er)=>({extract:(ei,es)=>xe(es,et).fold(()=>PS(ei,()=>'Choice schema did not contain choice key: "'+et+'"'),et=>xe(er,et).fold(()=>PS(ei,()=>'The chosen schema: "'+et+'" did not exist in branches: '+DS(er)),er=>er.extract(ei.concat(["branch: "+et]),es))),toString:()=>"chooseOn("+et+"). Possible values: "+eX(er)}),MS=et=>(...er)=>{if(0===er.length)throw Error("Can't merge zero objects");let ei={};for(let es=0;es<er.length;es++){let ed=er[es];for(let er in ed)ke(ed,er)&&(ei[er]=et(ei[er],ed[er]))}return ei},d1=MS((et,er)=>g(et)&&g(er)?d1(et,er):er),d2=(MS((et,er)=>er),et=>({tag:"defaultedThunk",process:N(et)})),US=et=>{var er;let ei=(et=>{let er=[],ei=[];return V(et,et=>{AS(et,et=>ei.push(et),et=>er.push(et))}),{values:er,errors:ei}})(et);return ei.errors.length>0?(er=ei.errors,S(TS,ee)(er)):OS(ei.values)},zS=(et,er,ei)=>{switch(et.tag){case"field":return er(et.key,et.newKey,et.presence,et.prop);case"custom":return ei(et.newKey,et.instantiator)}},jS=et=>({extract:(er,ei)=>{var es,ed;return(es=et(ei)).stype===eR.Error?PS(er,N(es.serror)):es},toString:N("val")}),d3=jS(OS),$S=(et,er,ei,es)=>es(xe(et,er).getOrThunk(()=>ei(et))),qS=(et,er,ei,es,ed)=>{var ec;let s=et=>ed.extract(er.concat([es]),et),a=et=>et.fold(()=>OS(I.none()),et=>{var ei;let ec=ed.extract(er.concat([es]),et);return ei=I.some,ec.stype===eR.Value?{stype:eR.Value,svalue:ei(ec.svalue)}:ec});switch(et.tag){case"required":return xe(ei,es).fold(()=>PS(er,()=>'Could not find valid *required* value for "'+es+'" in '+DS(ei)),s);case"defaultedThunk":return $S(ei,es,et.process,s);case"option":return a(xe(ei,es));case"defaultedOptionThunk":return ec=et.process,a(xe(ei,es).map(et=>!0===et?ec(ei):et));case"mergeWithThunk":return $S(ei,es,N({}),er=>{let es=d1(et.process(ei),er);return s(es)})}},VS=et=>({extract:(er,ei)=>((et,er,ei)=>{let es={},ed=[];for(let ec of ei)zS(ec,(ei,ec,eu,ef)=>{let ey=qS(eu,et,er,ei,ef);AS(ey,et=>{ed.push(...et)},et=>{es[ec]=et})},(et,ei)=>{es[et]=ei(er)});return ed.length>0?TS(ed):OS(es)})(er,ei,et),toString:()=>{let er=q(et,et=>zS(et,(et,er,ei,es)=>et+" -> "+es.toString(),(et,er)=>"state("+et+")"));return"obj{\n"+er.join("\n")+"}"}}),WS=et=>({extract:(er,ei)=>{let es=q(ei,(ei,es)=>et.extract(er.concat(["["+es+"]"]),ei));return US(es)},toString:()=>"array("+et.toString()+")"}),KS=(et,er,ei)=>{var es;return AS((es=er.extract([et],ei)).stype===eR.Error?{stype:eR.Error,serror:{input:ei,errors:es.serror}}:es,nz.error,nz.value)},GS=(et,er)=>LS(et,pe(er,VS)),d8=N(d3),XS=(et,er)=>jS(ei=>{let es=typeof ei;return et(ei)?OS(ei):TS(`Expected type: ${er} but got: ${es}`)}),d5=XS(ej,"number"),d6=XS(eP,"string"),d9=XS(eV,"boolean"),d4=XS(eH,"function"),t_=(et,er,ei,es)=>({tag:"field",key:et,newKey:er,presence:ei,prop:es}),n_=(et,er)=>({tag:"custom",newKey:et,instantiator:er}),o_=(et,er)=>t_(et,et,{tag:"required",process:{}},er),r_=et=>o_(et,d6),s_=et=>o_(et,d4),a_=(et,er)=>t_(et,et,{tag:"option",process:{}},er),i_=et=>a_(et,d6),l_=(et,er,ei)=>t_(et,et,d2(er),ei),d_=(et,er)=>l_(et,er,d5),c_=(et,er,ei)=>{var es;return l_(et,er,(es=et=>H(ei,et)?nz.value(et):nz.error(`Unsupported value: "${et}", choose one of "${ei.join(", ")}".`),jS(et=>es(et).fold(TS,OS))))},u_=(et,er)=>l_(et,er,d9),m_=(et,er)=>l_(et,er,d4),d7=r_("type"),ce=s_("fetch"),ct=s_("onAction"),cr=m_("onSetup",()=>E),cd=i_("text"),cc=i_("icon"),cp=i_("tooltip"),ch=i_("label"),cy=u_("active",!1),ck=u_("enabled",!0),cA=u_("primary",!1),E_=et=>l_("type",et,d6),cR=VS([d7,r_("trigger"),d_("minChars",1),t_(ef="columns",ef,d2(1),d8()),d_("maxResults",10),a_("matches",d4),ce,ct,l_("highlightOn",[],WS(d6))]),cI=[ck,cp,cc,cd,cr],cT=[cy].concat(cI),cL=[m_("predicate",e$),c_("scope","node",["node","editor"]),c_("position","selection",["node","selection","line"])],cB=cI.concat([E_("contextformbutton"),cA,ct,n_("original",R)]),cD=cT.concat([E_("contextformbutton"),cA,ct,n_("original",R)]),cP=cI.concat([E_("contextformbutton")]),cF=cT.concat([E_("contextformtogglebutton")]),cM=GS("type",{contextformbutton:cB,contextformtogglebutton:cD});VS([E_("contextform"),m_("initValue",N("")),ch,t_(ey="commands",ey,{tag:"required",process:{}},WS(cM)),a_("launch",GS("type",{contextformbutton:cP,contextformtogglebutton:cF}))].concat(cL));let L_=et=>{let er=et.ui.registry.getAll().popups,ei=pe(er,et=>KS("Autocompleter",cR,{trigger:et.ch,...et}).fold(et=>{throw Error("Errors: \n"+(et=>{let er=et.length>10?et.slice(0,10).concat([{path:[],getErrorInfo:N("... (only showing first ten failures)")}]):et;return q(er,et=>"Failed path: ("+et.path.join(" > ")+")\n"+et.getErrorInfo())})(et.errors).join("\n")+"\n\nInput object: "+DS(et.input))},R)),es=Se(Ce(ei,et=>et.trigger)),ed=we(ei);return{dataset:ei,triggers:es,lookupByTrigger:et=>G(ed,er=>er.trigger===et)}},M_=et=>{let er=za(),ei=Da(!1),es=er.isSet,r=()=>{es()&&((et=>{FC(et).autocompleter.removeDecoration()})(et),(et=>{et.dispatch("AutocompleterEnd")})(et),ei.set(!1),er.clear())},ed=Pe(()=>L_(et)),a=ec=>{er.get().map(er=>ES(et.dom,et.selection.getRng(),er.trigger).bind(er=>NS(et,ed,er,ec))).getOrThunk(()=>((et,er)=>{var ei;let es=er(),ed=et.selection.getRng();return(ei=et.dom,ue(es.triggers,et=>ES(ei,ed,et))).bind(ei=>NS(et,er,ei))})(et,ed)).fold(r,ed=>{var ec;ec=ed.context,es()||(((et,er)=>{FC(et).autocompleter.addDecoration(er)})(et,ec.range),er.set({trigger:ec.trigger,matchLength:ec.text.length})),ed.lookupData.then(es=>{er.get().map(ec=>{let eu=ed.context;ec.trigger===eu.trigger&&(eu.text.length-ec.matchLength>=10?r():(er.set({...ec,matchLength:eu.text.length}),ei.get()?((et,er)=>{et.dispatch("AutocompleterUpdate",er)})(et,{lookupData:es}):(ei.set(!0),((et,er)=>{et.dispatch("AutocompleterStart",er)})(et,{lookupData:es}))))})})})};et.addCommand("mceAutocompleterReload",(et,er)=>{let ei=eF(er)?er.fetchOptions:{};a(ei)}),et.addCommand("mceAutocompleterClose",r),((et,er)=>{let ei=Ha(er.load,50);et.on("keypress compositionend",et=>{27!==et.which&&ei.throttle()}),et.on("keydown",et=>{let es=et.which;8===es?ei.throttle():27===es&&er.cancelIfNecessary()}),et.on("remove",ei.cancel)})(et,{cancelIfNecessary:r,load:a})},cz=xt().browser.isSafari(),F_=et=>Pr(pn(et)),U_=(et,er)=>{var ei;return 0===et.startOffset&&et.endOffset===(null===(ei=er.textContent)||void 0===ei?void 0:ei.length)},z_=(et,er)=>I.from(et.getParent(er.container(),"details")),j_=(et,er)=>z_(et,er).isSome(),H_=(et,er)=>{let ei=er.getNode();eU(ei)||et.selection.setCursorLocation(ei,er.offset())},$_=(et,er,ei)=>{let es=et.dom.getParent(er.container(),"details");if(es&&!es.open){let er=et.dom.select("summary",es)[0];er&&(ei?a8(er):a5(er)).each(er=>H_(et,er))}else H_(et,er)},q_=(et,er,ei)=>{let{dom:es,selection:ed}=et,ec=et.getBody();if("character"===ei){let ei=Li.fromRangeStart(ed.getRng()),eu=es.getParent(ei.container(),es.isBlock),ef=z_(es,ei),ey=eu&&es.isEmpty(eu),eC=ez(null==eu?void 0:eu.previousSibling),eS=ez(null==eu?void 0:eu.nextSibling);return!!(ey&&(er?eS:eC)&&gu(!er,ec,ei).exists(et=>j_(es,et)&&!Lt(ef,z_(es,et))))||gu(er,ec,ei).fold(e$,ei=>{let ed=z_(es,ei);if(j_(es,ei)&&!Lt(ef,ed)){if(er||$_(et,ei,!1),eu&&ey){if(er&&eC||!er&&eS)return!0;$_(et,ei,er),et.dom.remove(eu)}return!0}return!1})}return!1},V_=(et,er,ei,es)=>{let ed=et.selection.getRng(),ec=Li.fromRangeStart(ed),eu=et.getBody();return"selection"===es?((et,er)=>{let ei=er.startSummary.exists(er=>er.contains(et.startContainer)),es=er.startSummary.exists(er=>er.contains(et.endContainer)),ed=er.startDetails.forall(et=>er.endDetails.forall(er=>et!==er));return(ei||es)&&!(ei&&es)||ed})(ed,er):ei?er.startSummary.exists(et=>a5(et).exists(er=>t3(er.getNode())&&a3(et,er).exists(et=>et.isEqual(ec))||er.isEqual(ec)))||er.startDetails.exists(et=>a2(eu,ec).forall(er=>!et.contains(er.container()))):er.startSummary.exists(et=>a8(et).exists(et=>et.isEqual(ec)))||er.startDetails.exists(et=>a3(et,ec).forall(et=>er.startSummary.exists(er=>!er.contains(ec.container())&&er.contains(et.container()))))},W_=(et,er,ei)=>((et,er)=>{let ei=I.from(et.getParent(er.startContainer,"details")),es=I.from(et.getParent(er.endContainer,"details"));if(ei.isSome()||es.isSome()){let er=ei.bind(er=>I.from(et.select("summary",er)[0]));return I.some({startSummary:er,startDetails:ei,endDetails:es})}return I.none()})(et.dom,et.selection.getRng()).fold(()=>q_(et,er,ei),es=>V_(et,es,er,ei)||q_(et,er,ei))||cz&&((et,er,ei)=>{let es=et.selection,ed=es.getNode(),ec=es.getRng(),eu=Li.fromRangeStart(ec);return!!ra(ed)&&("selection"===ei&&U_(ec,ed)||bh(er,eu,ed)?F_(ed):et.undoManager.transact(()=>{let ec=es.getSel(),{anchorNode:eu,anchorOffset:ef,focusNode:ey,focusOffset:eC}=null!=ec?ec:{},c=()=>{C(eu)&&C(ef)&&C(ey)&&C(eC)&&(null==ec||ec.setBaseAndExtent(eu,ef,ey,eC))},u=(et,er)=>{V(et.childNodes,et=>{rm(et)&&er.appendChild(et)})},eS=et.dom.create("span",{"data-mce-bogus":"1"});u(ed,eS),ed.appendChild(eS),c(),"word"!==ei&&"line"!==ei||null==ec||ec.modify("extend",er?"right":"left",ei),!es.isCollapsed()&&U_(es.getRng(),eS)?F_(ed):(et.execCommand(er?"ForwardDelete":"Delete"),eu=null==ec?void 0:ec.anchorNode,ef=null==ec?void 0:ec.anchorOffset,ey=null==ec?void 0:ec.focusNode,eC=null==ec?void 0:ec.focusOffset,u(eS,ed),c()),et.dom.remove(eS)}),!0)})(et,er,ei)?I.some(E):I.none(),K_=et=>(er,ei,es={})=>{let ed=er.getBody(),ec={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:ed,currentTarget:ed,eventPhase:Event.AT_TARGET,originalTarget:ed,explicitOriginalTarget:ed,isTrusted:!1,srcElement:ed,cancelable:!1,preventDefault:E,inputType:ei},eu=fa(new InputEvent(et));return er.dispatch(et,{...eu,...ec,...es})},cV=K_("input"),cU=K_("beforeinput"),cH=xt(),cj=cH.os,c$=cj.isMacOS()||cj.isiOS(),cq=cH.browser.isFirefox(),eN=(et,er)=>{let ei=et.dom,es=et.schema.getMoveCaretBeforeOnEnterElements();if(!er)return;if(/^(LI|DT|DD)$/.test(er.nodeName)){let et=(et=>{for(;et;){if(tY(et)||tJ(et)&&et.data&&/[\r\n\s]/.test(et.data))return et;et=et.nextSibling}return null})(er.firstChild);et&&/^(UL|OL|DL)$/.test(et.nodeName)&&er.insertBefore(ei.doc.createTextNode("\xa0"),er.firstChild)}let ed=ei.createRng();if(er.normalize(),er.hasChildNodes()){let et=new zo(er,er),ei,ec=er;for(;ei=et.current();){if(tJ(ei)){ed.setStart(ei,0),ed.setEnd(ei,0);break}if(es[ei.nodeName.toLowerCase()]){ed.setStartBefore(ei),ed.setEndBefore(ei);break}ec=ei,ei=et.next()}ei||(ed.setStart(ec,0),ed.setEnd(ec,0))}else t3(er)?er.nextSibling&&ei.isBlock(er.nextSibling)?(ed.setStartBefore(er),ed.setEndBefore(er)):(ed.setStartAfter(er),ed.setEndAfter(er)):(ed.setStart(er,0),ed.setEnd(er,0));et.selection.setRng(ed),Zf(et,ed)},tN=(et,er)=>{let ei=et.getRoot(),es,ed=er;for(;ed!==ei&&ed&&"false"!==et.getContentEditable(ed);){if("true"===et.getContentEditable(ed)){es=ed;break}ed=ed.parentNode}return ed!==ei?es:ei},nN=et=>I.from(et.dom.getParent(et.selection.getStart(!0),et.dom.isBlock)),oN=et=>{et.innerHTML='<br data-mce-bogus="1">'},rN=(et,er)=>{nX(et).toLowerCase()===er.tagName.toLowerCase()&&((et,er,ei)=>{let es=et.dom;I.from(ei.style).map(es.parseStyle).each(et=>{let ei={...mo(pn(er)),...et};es.setStyles(er,ei)});let ed=I.from(ei.class).map(et=>et.split(/\s+/)),ec=I.from(er.className).map(et=>G(et.split(/\s+/),et=>""!==et));Mt(ed,ec,(et,ei)=>{let ed=G(ei,er=>!H(et,er)),ec=[...et,...ed];es.setAttrib(er,"class",ec.join(" "))});let eu=["style","class"],ef=ye(ei,(et,er)=>!H(eu,er));es.setAttribs(er,ef)})(et,er,nJ(et))},sN=(et,er,ei,es,ed=!0,ec)=>{let eu;let ef=et.dom,ey=et.schema,eC=nX(et),eS=ei?ei.nodeName.toUpperCase():"",e_=er,eR=ey.getTextInlineElements(),eI=eu=ec||"TABLE"===eS||"HR"===eS?ef.create(ec||eC):ei.cloneNode(!1);if(ed)do if(eR[e_.nodeName]){if(xu(e_)||Lu(e_))continue;let et=e_.cloneNode(!1);ef.setAttrib(et,"id",""),eu.hasChildNodes()?et.appendChild(eu.firstChild):eI=et,eu.appendChild(et)}while((e_=e_.parentNode)&&e_!==es);else ef.setAttrib(eu,"style",null),ef.setAttrib(eu,"class",null);return rN(et,eu),oN(eI),eu},aN=(et,er)=>{let ei=null==et?void 0:et.parentNode;return C(ei)&&ei.nodeName===er},iN=et=>C(et)&&/^(OL|UL|LI)$/.test(et.nodeName),lN=et=>{let er=et.parentNode;return C(er)&&/^(LI|DT|DD)$/.test(er.nodeName)?er:et},dN=(et,er,ei)=>{let es=et[ei?"firstChild":"lastChild"];for(;es&&!tY(es);)es=es[ei?"nextSibling":"previousSibling"];return es===er},cN=(et,er)=>er&&"A"===er.nodeName&&et.isEmpty(er),uN=(et,er)=>et.nodeName===er||et.previousSibling&&et.previousSibling.nodeName===er,mN=(et,er)=>C(er)&&et.isBlock(er)&&!/^(TD|TH|CAPTION|FORM)$/.test(er.nodeName)&&!/^(fixed|absolute)/i.test(er.style.position)&&et.isEditable(er.parentNode)&&"false"!==et.getContentEditable(er),fN=(et,er,ei)=>tJ(er)?et?1===ei&&"\uFEFF"===er.data.charAt(ei-1)?0:ei:ei===er.data.length-1&&"\uFEFF"===er.data.charAt(ei)?er.data.length:ei:ei,cG={insert:(et,er)=>{var ei;let es,ed,ec,eu,ef,ey=!1,eC=et.dom,eS=et.schema.getNonEmptyElements(),e_=et.selection.getRng(),eR=nX(et),eI=pn(e_.startContainer),eL=In(eI,e_.startOffset),eB=eL.exists(et=>Vt(et)&&!no(et)),eD=e_.collapsed&&eB,b=er=>sN(et,ed,eU,eV,n1(et),er),v=et=>{let er;let ei=fN(et,ed,ec);if(tJ(ed)&&(et?ei>0:ei<ed.data.length))return!1;if(ed.parentNode===eU&&ey&&!et||et&&tY(ed)&&ed===eU.firstChild)return!0;if(uN(ed,"TABLE")||uN(ed,"HR"))return ey&&!et||!ey&&et;let es=new zo(ed,eU);for(tJ(ed)&&(et&&0===ei?es.prev():et||ei!==ed.data.length||es.next());er=es.current();){if(tY(er)){if(!er.getAttribute("data-mce-bogus")){let et=er.nodeName.toLowerCase();if(eS[et]&&"br"!==et)return!1}}else if(tJ(er)&&!ds(er.data))return!1;et?es.prev():es.next()}return!0},w=()=>{let er;return er=/^(H[1-6]|PRE|FIGURE)$/.test(eu)&&"HGROUP"!==eH?b(eR):b(),((et,er)=>{let ei=n2(et);return!y(er)&&(eP(ei)?H(tz.explode(ei),er.nodeName.toLowerCase()):ei)})(et,ef)&&mN(eC,ef)&&eC.isEmpty(eU,void 0,{includeZwsp:!0})?er=eC.split(ef,eU):eC.insertAfter(er,eU),eN(et,er),er};Of(eC,e_).each(et=>{e_.setStart(et.startContainer,et.startOffset),e_.setEnd(et.endContainer,et.endOffset)}),ed=e_.startContainer,ec=e_.startOffset;let eF=!(!er||!er.shiftKey),eM=!(!er||!er.ctrlKey);tY(ed)&&ed.hasChildNodes()&&!eD&&(ey=ec>ed.childNodes.length-1,ed=ed.childNodes[Math.min(ec,ed.childNodes.length-1)]||ed,ec=ey&&tJ(ed)?ed.data.length:0);let eV=tN(eC,ed);if(!eV||((et,er)=>{let ei=et.dom.getParent(er,"ol,ul,dl");return null!==ei&&"false"===et.dom.getContentEditableParent(ei)})(et,ed))return;eF||(ed=((et,er,ei,es,ed)=>{var ec,eu;let ef=et.dom,ey=null!==(ec=tN(ef,es))&&void 0!==ec?ec:ef.getRoot(),eC=ef.getParent(es,ef.isBlock);if(!eC||!mN(ef,eC)){if(!(eC=eC||ey).hasChildNodes()){let es=ef.create(er);return rN(et,es),eC.appendChild(es),ei.setStart(es,0),ei.setEnd(es,0),es}let ec,eS=es;for(;eS&&eS.parentNode!==eC;)eS=eS.parentNode;for(;eS&&!ef.isBlock(eS);)ec=eS,eS=eS.previousSibling;let e_=null===(eu=null==ec?void 0:ec.parentElement)||void 0===eu?void 0:eu.nodeName;if(ec&&e_&&et.schema.isValidChild(e_,er.toLowerCase())){let eu=ec.parentNode,ey=ef.create(er);for(rN(et,ey),eu.insertBefore(ey,ec),eS=ec;eS&&!ef.isBlock(eS);){let et=eS.nextSibling;ey.appendChild(eS),eS=et}ei.setStart(es,ed),ei.setEnd(es,ed)}}return es})(et,eR,e_,ed,ec));let eU=eC.getParent(ed,eC.isBlock)||eC.getRoot();ef=C(null==eU?void 0:eU.parentNode)?eC.getParent(eU.parentNode,eC.isBlock):null,eu=eU?eU.nodeName.toUpperCase():"";let eH=ef?ef.nodeName.toUpperCase():"";if("LI"!==eH||eM||(eU=ef,ef=ef.parentNode,eu=eH),tY(ef)&&(ei=eU,!eF&&ei.nodeName.toLowerCase()===nX(et)&&et.dom.isEmpty(ei)&&((er,ei,es)=>{let ed=ei;for(;ed&&ed!==er&&ez(ed.nextSibling);){let er=ed.parentElement;if(!er||!ke(et.schema.getTextBlockElements(),er.nodeName.toLowerCase()))return rr(er);ed=er}return!1})(et.getBody(),ei)))return((et,er,ei)=>{var es,ed,ec;let eu=er(nX(et)),ef=et.dom.getParent(ei,rr);ef&&(et.dom.insertAfter(eu,ef),eN(et,eu),(null!==(ec=null===(ed=null===(es=ei.parentElement)||void 0===es?void 0:es.childNodes)||void 0===ed?void 0:ed.length)&&void 0!==ec?ec:0)>1&&et.dom.remove(ei))})(et,b,eU);if(/^(LI|DT|DD)$/.test(eu)&&tY(ef)&&eC.isEmpty(eU))return void((et,er,ei,es,ed)=>{var ec,eu,ef;let ey=et.dom,eC=et.selection.getRng(),eS=ei.parentNode;if(ei===et.getBody()||!eS)return;iN(ec=ei)&&iN(ec.parentNode)&&(ed="LI");let e_=er(ed);if(dN(ei,es,!0)&&dN(ei,es,!1)){if(aN(ei,"LI")){let et=lN(ei);ey.insertAfter(e_,et),(null===(ef=(eu=ei).parentNode)||void 0===ef?void 0:ef.firstChild)===eu?ey.remove(et):ey.remove(ei)}else ey.replace(e_,ei)}else if(dN(ei,es,!0))aN(ei,"LI")?(ey.insertAfter(e_,lN(ei)),e_.appendChild(ey.doc.createTextNode(" ")),e_.appendChild(ei)):eS.insertBefore(e_,ei),ey.remove(es);else if(dN(ei,es,!1))ey.insertAfter(e_,lN(ei)),ey.remove(es);else{ei=lN(ei);let et=eC.cloneRange();et.setStartAfter(es),et.setEndAfter(ei);let er=et.extractContents();"LI"===ed&&er.firstChild&&"LI"===er.firstChild.nodeName?(e_=er.firstChild,ey.insertAfter(er,ei)):(ey.insertAfter(er,ei),ey.insertAfter(e_,ei)),ey.remove(es)}eN(et,e_)})(et,b,ef,eU,eR);if(!(eD||eU!==et.getBody()&&mN(eC,eU)))return;let ej=eU.parentNode;if(eD)es=b(eR),eL.fold(()=>{bo(eI,pn(es))},et=>{go(et,pn(es))}),et.selection.setCursorLocation(es,0);else if(jr(eU))es=Yr(eU),eC.isEmpty(eU)&&oN(eU),rN(et,es),eN(et,es);else if(v(!1))es=w();else if(v(!0)&&ej){es=ej.insertBefore(b(),eU);let er=pn(e_.startContainer).dom.hasChildNodes()&&e_.collapsed;eN(et,uN(eU,"HR")||er?es:eU)}else{let er=(et=>{let er=et.cloneRange();return er.setStart(et.startContainer,fN(!0,et.startContainer,et.startOffset)),er.setEnd(et.endContainer,fN(!1,et.endContainer,et.endOffset)),er})(e_).cloneRange();er.setEndAfter(eU);let ei=er.extractContents();V(Io(pn(ei),tj),et=>{let er=et.dom;er.nodeValue=Fr(er.data)}),(et=>{let er=et;do tJ(er)&&(er.data=er.data.replace(/^[\r\n]+/,"")),er=er.firstChild;while(er)})(ei),es=ei.firstChild,eC.insertAfter(ei,eU),((et,er,ei)=>{var es;let ed=[];if(!ei)return;let ec=ei;for(;ec=ec.firstChild;){if(et.isBlock(ec))return;tY(ec)&&!er[ec.nodeName.toLowerCase()]&&ed.push(ec)}let eu=ed.length;for(;eu--;)(!(ec=ed[eu]).hasChildNodes()||ec.firstChild===ec.lastChild&&""===(null===(es=ec.firstChild)||void 0===es?void 0:es.nodeValue)||cN(et,ec))&&et.remove(ec)})(eC,eS,es),((et,er)=>{er.normalize();let ei=er.lastChild;(!ei||tY(ei)&&/^(left|right)$/gi.test(et.getStyle(ei,"float",!0)))&&et.add(er,"br")})(eC,eU),eC.isEmpty(eU)&&oN(eU),es.normalize(),eC.isEmpty(es)?(eC.remove(es),w()):(rN(et,es),eN(et,es))}eC.setAttrib(es,"id",""),et.dispatch("NewBlock",{newBlock:es})},fakeEventName:"insertParagraph"},pN=(et,er,ei)=>{let es=et.dom.createRng();ei?(es.setStartBefore(er),es.setEndBefore(er)):(es.setStartAfter(er),es.setEndAfter(er)),et.selection.setRng(es),Zf(et,es)},hN=(et,er)=>{let ei=bn("br");go(pn(er),ei),et.undoManager.add()},bN=(et,er)=>{vN(et.getBody(),er)||po(pn(er),bn("br"));let ei=bn("br");po(pn(er),ei),pN(et,ei.dom,!1),et.undoManager.add()},vN=(et,er)=>!!t3(Li.after(er).getNode())||a2(et,Li.after(er)).map(et=>t3(et.getNode())).getOr(!1),yN=et=>et&&"A"===et.nodeName&&"href"in et,CN=et=>et.fold(e$,yN,yN,e$),wN=(et,er)=>{er.fold(E,O(hN,et),O(bN,et),E)},cW={insert:(et,er)=>{let ei=(et=>{let er=O(ah,et),ei=Li.fromRangeStart(et.selection.getRng());return Wx(er,et.getBody(),ei).filter(CN)})(et);ei.isSome()?ei.each(O(wN,et)):((et,er)=>{let ei=et.selection,es=et.dom,ed=ei.getRng(),ec,eu=!1;Of(es,ed).each(et=>{ed.setStart(et.startContainer,et.startOffset),ed.setEnd(et.endContainer,et.endOffset)});let ef=ed.startOffset,ey=ed.startContainer;if(tY(ey)&&ey.hasChildNodes()){let et=ef>ey.childNodes.length-1;ey=ey.childNodes[Math.min(ef,ey.childNodes.length-1)]||ey,ef=et&&tJ(ey)?ey.data.length:0}let eC=es.getParent(ey,es.isBlock),eS=eC&&eC.parentNode?es.getParent(eC.parentNode,es.isBlock):null,e_=eS?eS.nodeName.toUpperCase():"",eR=!(!er||!er.ctrlKey);"LI"!==e_||eR||(eC=eS),tJ(ey)&&ef>=ey.data.length&&(((et,er,ei)=>{let es;let ed=new zo(er,ei),ec=et.getNonEmptyElements();for(;es=ed.next();)if(ec[es.nodeName.toLowerCase()]||tJ(es)&&es.length>0)return!0;return!1})(et.schema,ey,eC||es.getRoot())||(ec=es.create("br"),ed.insertNode(ec),ed.setStartAfter(ec),ed.setEndAfter(ec),eu=!0)),ec=es.create("br"),Ii(es,ed,ec),pN(et,ec,eu),et.undoManager.add()})(et,er)},fakeEventName:"insertLineBreak"},kN=(et,er)=>nN(et).filter(et=>er.length>0&&xn(pn(et),er)).isSome(),cK=al([{br:[]},{block:[]},{none:[]}]),SN=(et,er)=>kN(et,n0(et)),_N=et=>(er,ei)=>nN(er).filter(et=>ry(pn(et))).isSome()===et,NN=(et,er)=>(ei,es)=>{let ed=nN(ei).fold(N(""),et=>et.nodeName.toUpperCase())===et.toUpperCase();return ed===er},RN=et=>{let er=tN(et.dom,et.selection.getStart());return y(er)},AN=et=>NN("pre",et),ON=et=>(er,ei)=>nY(er)===et,TN=(et,er)=>kN(et,nZ(et)),BN=(et,er)=>er,DN=et=>{let er=nX(et),ei=tN(et.dom,et.selection.getStart());return C(ei)&&et.schema.isValidChild(ei.nodeName,er)},PN=et=>{let er=et.selection.getRng(),ei=pn(er.startContainer),es=In(ei,er.startOffset).map(et=>Vt(et)&&!no(et));return er.collapsed&&es.getOr(!0)},LN=(et,er)=>(ei,es)=>X(et,(et,er)=>et&&er(ei,es),!0)?I.some(er):I.none(),MN=(et,er,ei)=>{er.selection.isCollapsed()||(et=>{et.execCommand("delete")})(er),C(ei)&&cU(er,et.fakeEventName).isDefaultPrevented()||(et.insert(er,ei),C(ei)&&cV(er,et.fakeEventName))},IN=(et,er)=>{let n=()=>MN(cW,et,er),o=()=>MN(cG,et,er),ei=Mx([LN([SN],cK.none()),LN([AN(!0),RN],cK.none()),LN([NN("summary",!0)],cK.br()),LN([AN(!0),ON(!1),BN],cK.br()),LN([AN(!0),ON(!1)],cK.block()),LN([AN(!0),ON(!0),BN],cK.block()),LN([AN(!0),ON(!0)],cK.br()),LN([_N(!0),BN],cK.br()),LN([_N(!0)],cK.block()),LN([TN],cK.br()),LN([BN],cK.br()),LN([DN],cK.block()),LN([PN],cK.block())],[et,!(!er||!er.shiftKey)]).getOr(cK.none());switch(nQ(et)){case"linebreak":ei.fold(n,n,E);break;case"block":ei.fold(o,o,E);break;case"invert":ei.fold(o,n,E);break;default:ei.fold(n,o,E)}},cY=xt(),cX=cY.os.isiOS()&&cY.browser.isSafari(),zN=(et,er)=>{var ei;er.isDefaultPrevented()||(er.preventDefault(),(ei=et.undoManager).typing&&(ei.typing=!1,ei.add()),et.undoManager.transact(()=>{IN(et,er)}))},cJ=xt(),HN=et=>et.stopImmediatePropagation(),$N=et=>et.keyCode===lr.PAGE_UP||et.keyCode===lr.PAGE_DOWN,qN=(et,er,ei)=>{ei&&!et.get()?er.on("NodeChange",HN,!0):!ei&&et.get()&&er.off("NodeChange",HN),et.set(ei)},VN=(et,er)=>{let ei=er.container(),es=er.offset();return tJ(ei)?(ei.insertData(es,et),I.some(Li(ei,es+et.length))):Yc(er).map(ei=>{let es=vn(et);return er.isAtEnd()?po(ei,es):go(ei,es),Li(es.dom,et.length)})},cQ=O(VN,"\xa0"),cZ=O(VN," "),GN=et=>er=>{et.selection.setRng(er.toRange()),et.nodeChanged()},YN=et=>{let er=Li.fromRangeStart(et.selection.getRng()),ei=pn(et.getBody());if(et.selection.isCollapsed()){let es=O(ah,et),ed=Li.fromRangeStart(et.selection.getRng());return Wx(es,et.getBody(),ed).bind(et=>et.fold(et=>a3(ei.dom,Li.before(et)),et=>a8(et),et=>a5(et),et=>a2(ei.dom,Li.after(et)))).map(es=>()=>(Fp(ei,es)?cQ(er):cZ(er)).each(GN(et)))}return I.none()},XN=et=>{var er,ei;return It(tF.browser.isFirefox()&&et.selection.isEditable()&&(er=et.dom,ei=et.selection.getRng().startContainer,er.isEditable(er.getParent(ei,"summary"))),()=>{var er;let ei=pn(et.getBody());et.selection.isCollapsed()||et.getDoc().execCommand("Delete"),(Fp(ei,er=Li.fromRangeStart(et.selection.getRng()))?cQ(er):cZ(er)).each(GN(et))})},QN=et=>aX(et)?[{keyCode:lr.TAB,action:zE(fS,et,!0)},{keyCode:lr.TAB,shiftKey:!0,action:zE(fS,et,!1)}]:[],JN=et=>{if(et.addShortcut("Meta+P","","mcePrint"),M_(et),MC(et))return Da(null);{let er,ei;let es=Hk(et);return(et=>{et.on("keyup compositionstart",O(RE,et))})(et),((et,er)=>{et.on("keydown",ei=>{ei.isDefaultPrevented()||((et,er,ei)=>{let es=tF.os.isMacOS()||tF.os.isiOS();jE([{keyCode:lr.RIGHT,action:zE(TE,et,!0)},{keyCode:lr.LEFT,action:zE(TE,et,!1)},{keyCode:lr.UP,action:zE(BE,et,!1)},{keyCode:lr.DOWN,action:zE(BE,et,!0)},...es?[{keyCode:lr.UP,action:zE(PE,et,!1),metaKey:!0,shiftKey:!0},{keyCode:lr.DOWN,action:zE(PE,et,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:lr.RIGHT,action:zE(lS,et,!0)},{keyCode:lr.LEFT,action:zE(lS,et,!1)},{keyCode:lr.UP,action:zE(dS,et,!1)},{keyCode:lr.DOWN,action:zE(dS,et,!0)},{keyCode:lr.UP,action:zE(dS,et,!1)},{keyCode:lr.UP,action:zE(IE,et,!1)},{keyCode:lr.DOWN,action:zE(IE,et,!0)},{keyCode:lr.RIGHT,action:zE($E,et,!0)},{keyCode:lr.LEFT,action:zE($E,et,!1)},{keyCode:lr.UP,action:zE(qE,et,!1)},{keyCode:lr.DOWN,action:zE(qE,et,!0)},{keyCode:lr.RIGHT,action:zE(zk,et,er,!0)},{keyCode:lr.LEFT,action:zE(zk,et,er,!1)},{keyCode:lr.RIGHT,ctrlKey:!es,altKey:es,action:zE(dq,et,er)},{keyCode:lr.LEFT,ctrlKey:!es,altKey:es,action:zE(dG,et,er)},{keyCode:lr.UP,action:zE(ME,et,!1)},{keyCode:lr.DOWN,action:zE(ME,et,!0)}],ei).each(et=>{ei.preventDefault()})})(et,er,ei)})})(et,es),er=!1,et.on("keydown",ei=>{er=ei.keyCode===lr.BACKSPACE,ei.isDefaultPrevented()||((et,er,ei)=>{let es=ei.keyCode===lr.BACKSPACE?"deleteContentBackward":"deleteContentForward",ed=et.selection.isCollapsed(),ec=ed?"character":"selection",a=et=>ed?et?"word":"line":"selection";HE([{keyCode:lr.BACKSPACE,action:zE(pE,et)},{keyCode:lr.BACKSPACE,action:zE(Ex,et,!1)},{keyCode:lr.DELETE,action:zE(Ex,et,!0)},{keyCode:lr.BACKSPACE,action:zE(hx,et,!1)},{keyCode:lr.DELETE,action:zE(hx,et,!0)},{keyCode:lr.BACKSPACE,action:zE(Gk,et,er,!1)},{keyCode:lr.DELETE,action:zE(Gk,et,er,!0)},{keyCode:lr.BACKSPACE,action:zE(qh,et,!1)},{keyCode:lr.DELETE,action:zE(qh,et,!0)},{keyCode:lr.BACKSPACE,action:zE(W_,et,!1,ec)},{keyCode:lr.DELETE,action:zE(W_,et,!0,ec)},...c$?[{keyCode:lr.BACKSPACE,altKey:!0,action:zE(W_,et,!1,a(!0))},{keyCode:lr.DELETE,altKey:!0,action:zE(W_,et,!0,a(!0))},{keyCode:lr.BACKSPACE,metaKey:!0,action:zE(W_,et,!1,a(!1))}]:[{keyCode:lr.BACKSPACE,ctrlKey:!0,action:zE(W_,et,!1,a(!0))},{keyCode:lr.DELETE,ctrlKey:!0,action:zE(W_,et,!0,a(!0))}],{keyCode:lr.BACKSPACE,action:zE(Sx,et,!1)},{keyCode:lr.DELETE,action:zE(Sx,et,!0)},{keyCode:lr.BACKSPACE,action:zE(iE,et,!1)},{keyCode:lr.DELETE,action:zE(iE,et,!0)},{keyCode:lr.BACKSPACE,action:zE(dx,et,!1)},{keyCode:lr.DELETE,action:zE(dx,et,!0)},{keyCode:lr.BACKSPACE,action:zE(ax,et,!1)},{keyCode:lr.DELETE,action:zE(ax,et,!0)},{keyCode:lr.BACKSPACE,action:zE(oE,et,!1)},{keyCode:lr.DELETE,action:zE(oE,et,!0)}],ei).filter(er=>et.selection.isEditable()).each(er=>{ei.preventDefault(),cU(et,es).isDefaultPrevented()||(er(),cV(et,es))})})(et,es,ei)}),et.on("keyup",ei=>{var es;ei.isDefaultPrevented()||(es=er,jE([{keyCode:lr.BACKSPACE,action:zE(kx,et)},{keyCode:lr.DELETE,action:zE(kx,et)},...c$?[{keyCode:lr.BACKSPACE,altKey:!0,action:zE(sE,et)},{keyCode:lr.DELETE,altKey:!0,action:zE(sE,et)},...es?[{keyCode:cq?224:91,action:zE(sE,et)}]:[]]:[{keyCode:lr.BACKSPACE,ctrlKey:!0,action:zE(sE,et)},{keyCode:lr.DELETE,ctrlKey:!0,action:zE(sE,et)}]],ei)),er=!1}),ei=I.none(),et.on("keydown",er=>{er.keyCode===lr.ENTER&&(cX&&(et=>{if(!et.collapsed)return!1;let er=et.startContainer;if(tJ(er)){let ei=er.data.charAt(et.startOffset-1);return/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/.test(ei)}return!1})(et.selection.getRng())?(ei=I.some(et.selection.getBookmark()),et.undoManager.add()):zN(et,er))}),et.on("keyup",er=>{er.keyCode===lr.ENTER&&ei.each(()=>{et.undoManager.undo(),ei.fold(E,er=>et.selection.moveToBookmark(er)),zN(et,er),ei=I.none()})}),(et=>{et.on("keydown",er=>{er.isDefaultPrevented()||((et,er)=>{HE([{keyCode:lr.SPACEBAR,action:zE(YN,et)},{keyCode:lr.SPACEBAR,action:zE(XN,et)}],er).each(ei=>{er.preventDefault(),cU(et,"insertText",{data:" "}).isDefaultPrevented()||(ei(),cV(et,"insertText",{data:" "}))})})(et,er)})})(et),(et=>{et.on("input",er=>{er.isComposing||(et=>{let er=pn(et.getBody());et.selection.isCollapsed()&&Wp(er,Li.fromRangeStart(et.selection.getRng())).each(er=>{et.selection.setRng(er.toRange())})})(et)})})(et),(et=>{et.on("keydown",er=>{er.isDefaultPrevented()||((et,er)=>{jE([...QN(et)],er).each(et=>{er.preventDefault()})})(et,er)})})(et),((et,er)=>{et.on("keydown",ei=>{ei.isDefaultPrevented()||((et,er,ei)=>{let es=tF.os.isMacOS()||tF.os.isiOS();jE([{keyCode:lr.END,action:zE(DE,et,!0)},{keyCode:lr.HOME,action:zE(DE,et,!1)},...es?[]:[{keyCode:lr.HOME,action:zE(PE,et,!1),ctrlKey:!0,shiftKey:!0},{keyCode:lr.END,action:zE(PE,et,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:lr.END,action:zE(VE,et,!0)},{keyCode:lr.HOME,action:zE(VE,et,!1)},{keyCode:lr.END,action:zE(Vk,et,!0,er)},{keyCode:lr.HOME,action:zE(Vk,et,!1,er)}],ei).each(et=>{ei.preventDefault()})})(et,er,ei)})})(et,es),((et,er)=>{if(cJ.os.isMacOS())return;let ei=Da(!1);et.on("keydown",er=>{$N(er)&&qN(ei,et,!0)}),et.on("keyup",es=>{es.isDefaultPrevented()||jE([{keyCode:lr.PAGE_UP,action:zE(Vk,et,!1,er)},{keyCode:lr.PAGE_DOWN,action:zE(Vk,et,!0,er)}],es),$N(es)&&ei.get()&&(qN(ei,et,!1),et.nodeChanged())})})(et,es),es}};let ZN=class ZN{constructor(et){let er;this.lastPath=[],this.editor=et;let ei=this;"onselectionchange"in et.getDoc()||et.on("NodeChange click mouseup keyup focus",ei=>{let es=et.selection.getRng(),ed={startContainer:es.startContainer,startOffset:es.startOffset,endContainer:es.endContainer,endOffset:es.endOffset};"nodechange"!==ei.type&&kf(ed,er)||et.dispatch("SelectionChange"),er=ed}),et.on("contextmenu",()=>{et.dispatch("SelectionChange")}),et.on("SelectionChange",()=>{let er=et.selection.getStart(!0);er&&tm(et)&&!ei.isSameElementPath(er)&&et.dom.isChildOf(er,et.getBody())&&et.nodeChanged({selectionChange:!0})}),et.on("mouseup",er=>{!er.isDefaultPrevented()&&tm(et)&&("IMG"===et.selection.getNode().nodeName?lM.setEditorTimeout(et,()=>{et.nodeChanged()}):et.nodeChanged())})}nodeChanged(et={}){let er;let ei=this.editor.selection;if(this.editor.initialized&&ei&&!oQ(this.editor)&&!this.editor.mode.isReadOnly()){let es=this.editor.getBody();(er=ei.getStart(!0)||es).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(er,es)||(er=es);let ed=[];this.editor.dom.getParent(er,et=>et===es||(ed.push(et),!1)),this.editor.dispatch("NodeChange",{...et,element:er,parents:ed})}}isSameElementPath(et){let er;let ei=this.editor,es=oe(ei.dom.getParents(et,eq,ei.getBody()));if(es.length===this.lastPath.length){for(er=es.length;er>=0&&es[er]===this.lastPath[er];er--);if(-1===er)return this.lastPath=es,!0}return this.lastPath=es,!1}};let c0=ti("image"),c1=ti("event"),nR=et=>er=>{er[c1]=et},c2=nR(0),c3=nR(2),c8=nR(1),aR=et=>I.from(et[c1]).exists(et=>0===et),c5=ti("mode"),lR=et=>er=>{er[c5]=et},dR=(et,er)=>lR(er)(et),c6=lR(0),c9=lR(2),c4=lR(1),fR=et=>er=>I.from(er[c5]).exists(er=>er===et),c7=fR(0),ut=fR(1),ur=["none","copy","link","move"],ud=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],vR=()=>{let et=new window.DataTransfer,er="move",ei="all",es={get dropEffect(){return er},set dropEffect(e){H(ur,e)&&(er=e)},get effectAllowed(){return ei},set effectAllowed(e){aR(es)&&H(ud,e)&&(ei=e)},get items(){var ed;return{...ed=et.items,get length(){return ed.length},add:(et,er)=>{if(c7(es)){if(!eP(et))return ed.add(et);if(!eU(er))return ed.add(et,er)}return null},remove:et=>{c7(es)&&ed.remove(et)},clear:()=>{c7(es)&&ed.clear()}}},get files(){return ut(es)?Object.freeze({length:0,item:et=>null}):et.files},get types(){return et.types},setDragImage:(er,ei,ed)=>{c7(es)&&(es[c0]={image:er,x:ei,y:ed},et.setDragImage(er,ei,ed))},getData:er=>ut(es)?"":et.getData(er),setData:(er,ei)=>{c7(es)&&et.setData(er,ei)},clearData:er=>{c7(es)&&et.clearData(er)}};return c6(es),es},yR=(et,er)=>et.setData("text/html",er),ug="x-tinymce/html",up=N(ug),uh="<!-- "+ug+" -->",kR=et=>uh+et,ER=et=>-1!==et.indexOf(uh),ub="%MCEPASTEBIN%",_R=et=>et.dom.get("mcepastebin"),NR=et=>C(et)&&"mcepastebin"===et.id,RR=et=>et===ub,AR=(et,er)=>(tz.each(er,er=>{et=u(er,RegExp)?et.replace(er,""):et.replace(er[0],er[1])}),et),OR=et=>AR(et,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(et,er,ei)=>er||ei?"\xa0":" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),TR=(et,er)=>({content:et,cancelled:er}),BR=(et,er)=>(et.insertContent(er,{merge:aP(et),paste:!0}),!0),DR=et=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(et),PR=(et,er,ei)=>!(et.selection.isCollapsed()||!DR(er))&&(et.undoManager.extra(()=>{ei(et,er)},()=>{et.execCommand("mceInsertLink",!1,er)}),!0),LR=(et,er,ei)=>!!(DR(er)&&$(sc(et),et=>$e(er.toLowerCase(),`.${et.toLowerCase()}`)))&&(et.undoManager.extra(()=>{ei(et,er)},()=>{et.insertContent('<img src="'+er+'">')}),!0),uy=(es=0,()=>"mceclip"+es++),IR=et=>{let er=vR();return yR(er,et),c9(er),er},FR=(et,er,ei,es,ed)=>{let ec=((et,er,ei)=>{let es=et.dispatch("PastePreProcess",{content:er,internal:ei}),ed=((et,er)=>{let ei=oC({sanitize:aK(et)},et.schema);ei.addNodeFilter("meta",et=>{tz.each(et,et=>{et.remove()})});let es=ei.parse(er,{forced_root_block:!1,isRootContent:!0});return Xg({validate:!0},et.schema).serialize(es)})(et,es.content);return et.hasEventListeners("PastePostProcess")&&!es.isDefaultPrevented()?((et,er,ei)=>{let es=et.dom.create("div",{style:"display:none"},er),ed=et.dispatch("PastePostProcess",{node:es,internal:ei});return TR(ed.node.innerHTML,ed.isDefaultPrevented())})(et,ed,ei):TR(ed,es.isDefaultPrevented())})(et,er,ei);if(!ec.cancelled){let er=ec.content,n=()=>{es||!aF(et)?BR(et,er):tz.each([PR,LR,BR],ei=>!ei(et,er,BR))};ed?cU(et,"insertFromPaste",{dataTransfer:IR(er)}).isDefaultPrevented()||(n(),cV(et,"insertFromPaste")):n()}},UR=(et,er,ei,es)=>{let ed=ei||ER(er);FR(et,er.replace(uh,""),ed,!1,es)},zR=(et,er,ei)=>{let es=et.dom.encode(er).replace(/\r\n/g,"\n"),ed=((et,er,ei)=>{let es=et.split(/\n\n/),ed=((et,er)=>{let ei="<"+et,es=Ce(er,(et,er)=>er+'="'+rQ.encodeAllRaw(et)+'"');return es.length&&(ei+=" "+es.join(" ")),ei+">"})(er,ei),ec="</"+er+">",eu=q(es,et=>et.split(/\n/).join("<br />"));return 1===eu.length?eu[0]:q(eu,et=>ed+et+ec).join("")})(ms(es,az(et)),nX(et),nJ(et));FR(et,ed,!1,!0,ei)},jR=et=>{let er={};if(et&&et.types)for(let ei=0;ei<et.types.length;ei++){let es=et.types[ei];try{er[es]=et.getData(es)}catch(et){er[es]=""}}return er},HR=(et,er)=>er in et&&et[er].length>0,$R=et=>HR(et,"text/html")||HR(et,"text/plain"),qR=(et,er,ei)=>{let es="paste"===er.type?er.clipboardData:er.dataTransfer;if(aw(et)&&es){let ed=((et,er)=>{let ei=er.items?te(eY(er.items),et=>"file"===et.kind?[et.getAsFile()]:[]):[],es=er.files?eY(er.files):[];return G(ei.length>0?ei:es,(et=>{let er=sc(et);return et=>He(et.type,"image/")&&$(er,er=>(et=>{let er=et.toLowerCase(),ei={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return tz.hasOwn(ei,er)?"image/"+ei[er]:"image/"+er})(er)===et.type)})(et))})(et,es);if(ed.length>0)return er.preventDefault(),Promise.all(q(ed,et=>Pv(et).then(er=>({file:et,uri:er})))).then(er=>{ei&&et.selection.setRng(ei),V(er,er=>{((et,er)=>{Bv(er.uri).each(({data:ei,type:es,base64Encoded:ed})=>{let ec=ed?ei:btoa(ei),eu=er.file,ef=et.editorUpload.blobCache,ey=ef.getByData(ec,es),eC=null!=ey?ey:((et,er,ei,es)=>{let ed=uy(),ec=n8(et)&&C(ei.name),eu=ec?((et,er)=>{let ei=er.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return C(ei)?et.dom.encode(ei[1]):void 0})(et,ei.name):ed,ef=ec?ei.name:void 0,ey=er.create(ed,ei,es,eu,ef);return er.add(ey),ey})(et,ef,eu,ec);UR(et,`<img src="${eC.blobUri()}">`,!1,!0)})})(et,er)})}),!0}return!1},VR=(et,er,ei,es,ed)=>{var ec;let eu=OR(ei),ef=HR(er,up())||ER(ei),ey=!ef&&(ec=eu,!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(ec)),eC=DR(eu);(RR(eu)||!eu.length||ey&&!eC)&&(es=!0),(es||eC)&&(eu=HR(er,"text/plain")&&ey?er["text/plain"]:(et=>{let er=ca(),ei=oC({},er),es="",ed=er.getVoidElements(),ec=tz.makeMap("script noscript style textarea video audio iframe object"," "),eu=er.getBlockElements(),i=et=>{let ei=et.name;if("br"!==ei){if("wbr"!==ei){if(ed[ei]&&(es+=" "),ec[ei])es+=" ";else{if(3===et.type&&(es+=et.value),!(et.name in er.getVoidElements())){let er=et.firstChild;if(er)do i(er);while(er=er.next)}eu[ei]&&et.next&&(es+="\n","p"===ei&&(es+="\n"))}}}else es+="\n"};return et=AR(et,[/<!\[[^\]]+\]>/g]),i(ei.parse(et)),es})(eu)),RR(eu)||(es?zR(et,eu,ed):UR(et,eu,ef,ed))},WR=(et,er,ei)=>{let es;et.on("keydown",et=>{(lr.metaKeyPressed(et)&&86===et.keyCode||et.shiftKey&&45===et.keyCode)&&!et.isDefaultPrevented()&&(es=et.shiftKey&&86===et.keyCode)}),et.on("paste",ed=>{var ec,eu;if(ed.isDefaultPrevented()||tF.os.isAndroid()&&0===(null===(eu=null===(ec=ed.clipboardData)||void 0===ec?void 0:ec.items)||void 0===eu?void 0:eu.length))return;let ef="text"===ei.get()||es;es=!1;let ey=jR(ed.clipboardData);!$R(ey)&&qR(et,ed,er.getLastRng()||et.selection.getRng())||(HR(ey,"text/html")?(ed.preventDefault(),VR(et,ey,ey["text/html"],ef,!0)):HR(ey,"text/plain")&&HR(ey,"text/uri-list")?(ed.preventDefault(),VR(et,ey,ey["text/plain"],ef,!0)):(er.create(),lM.setEditorTimeout(et,()=>{let ei=er.getHtml();er.remove(),VR(et,ey,ei,ef,!1)},0)))}),(et=>{let t=et=>He(et,"webkit-fake-url"),n=et=>He(et,"data:");et.parser.addNodeFilter("img",(er,ei,es)=>{var ed;if(!aw(et)&&!0===(null===(ed=es.data)||void 0===ed?void 0:ed.paste))for(let ei of er){let er=ei.attr("src");eP(er)&&!ei.attr("data-mce-object")&&er!==tF.transparentSrc&&(t(er)||!aV(et)&&n(er))&&ei.remove()}})})(et)},KR=(et,er,ei,es)=>{((et,er,ei)=>{if(!et)return!1;try{return et.clearData(),et.setData("text/html",er),et.setData("text/plain",ei),et.setData(up(),er),!0}catch(et){return!1}})(et.clipboardData,er.html,er.text)?(et.preventDefault(),es()):ei(er.html,es)},GR=et=>(er,ei)=>{let{dom:es,selection:ed}=et,ec=es.create("div",{contenteditable:"false","data-mce-bogus":"all"}),eu=es.create("div",{contenteditable:"true"},er);es.setStyles(ec,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),ec.appendChild(eu),es.add(et.getBody(),ec);let ef=ed.getRng();eu.focus();let ey=es.createRng();ey.selectNodeContents(eu),ed.setRng(ey),lM.setEditorTimeout(et,()=>{ed.setRng(ef),es.remove(ec),ei()},0)},YR=et=>({html:kR(et.selection.getContent({contextual:!0})),text:et.selection.getContent({format:"text"})}),XR=et=>!et.selection.isCollapsed()||!!et.dom.getParent(et.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",et.getBody()),QR=(et,er)=>{var ei,es;return Df.getCaretRangeFromPoint(null!==(ei=er.clientX)&&void 0!==ei?ei:0,null!==(es=er.clientY)&&void 0!==es?es:0,et.getDoc())},JR=(et,er)=>{et.focus(),er&&et.selection.setRng(er)},uk=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,eA=et=>tz.trim(et).replace(uk,Wu).toLowerCase(),tA=(et,er,ei)=>{let es=aB(et);if(ei||"all"===es||!aD(et))return er;let ed=es?es.split(/[, ]/):[];if(ed&&"none"!==es){let ei=et.dom,es=et.selection.getNode();er=er.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(et,er,ec,eu)=>{let ef=ei.parseStyle(ei.decode(ec)),ey={};for(let et=0;et<ed.length;et++){let er=ef[ed[et]],ec=er,eu=ei.getStyle(es,ed[et],!0);/color/.test(ed[et])&&(ec=eA(ec),eu=eA(eu)),eu!==ec&&(ey[ed[et]]=er)}let eC=ei.serializeStyle(ey,"span");return eC?er+' style="'+eC+'"'+eu:er+eu})}else er=er.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return er=er.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(et,er,ei,es)=>er+' style="'+ei+'"'+es)},nA=et=>{let er=Da(!1),ei=Da(aM(et)?"text":"html"),es=(et=>{let er=Da(null);return{create:()=>((et,er)=>{let{dom:ei,selection:es}=et,ed=et.getBody();er.set(es.getRng());let ec=ei.add(et.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},ub);tF.browser.isFirefox()&&ei.setStyle(ec,"left","rtl"===ei.getStyle(ed,"direction",!0)?65535:-65535),ei.bind(ec,"beforedeactivate focusin focusout",et=>{et.stopPropagation()}),ec.focus(),es.select(ec,!0)})(et,er),remove:()=>((et,er)=>{let ei=et.dom;if(_R(et)){let es;let ed=er.get();for(;es=_R(et);)ei.remove(es),ei.unbind(es);ed&&et.selection.setRng(ed)}er.set(null)})(et,er),getEl:()=>_R(et),getHtml:()=>(et=>{let er=et.dom,n=(et,ei)=>{et.appendChild(ei),er.remove(ei,!0)},[ei,...es]=G(et.getBody().childNodes,NR);V(es,et=>{n(ei,et)});let ed=er.select("div[id=mcepastebin]",ei);for(let et=ed.length-1;et>=0;et--){let es=er.create("div");ei.insertBefore(es,ed[et]),n(es,ed[et])}return ei?ei.innerHTML:""})(et),getLastRng:er.get}})(et);(tF.browser.isChromium()||tF.browser.isSafari())&&((et,er)=>{et.on("PastePreProcess",ei=>{ei.content=er(et,ei.content,ei.internal)})})(et,tA),et.addCommand("mceTogglePlainTextPaste",()=>{"text"===ei.get()?(ei.set("html"),Zm(et,!1)):(ei.set("text"),Zm(et,!0)),et.focus()}),et.addCommand("mceInsertClipboardContent",(er,ei)=>{ei.html&&UR(et,ei.html,ei.internal,!1),ei.text&&zR(et,ei.text,!1)}),(et=>{let t=er=>ei=>{er(et,ei)},er=aI(et);eH(er)&&et.on("PastePreProcess",t(er));let ei=aT(et);eH(ei)&&et.on("PastePostProcess",t(ei))})(et),et.on("PreInit",()=>{et.on("cut",er=>{!er.isDefaultPrevented()&&XR(et)&&KR(er,YR(et),GR(et),()=>{if(tF.browser.isChromium()||tF.browser.isFirefox()){let er=et.selection.getRng();lM.setEditorTimeout(et,()=>{et.selection.setRng(er),et.execCommand("Delete")},0)}else et.execCommand("Delete")})}),et.on("copy",er=>{!er.isDefaultPrevented()&&XR(et)&&KR(er,YR(et),GR(et),E)}),ay(et)&&et.on("dragend dragover draggesture dragdrop drop drag",et=>{et.preventDefault(),et.stopPropagation()}),aw(et)||et.on("drop",et=>{let er=et.dataTransfer;er&&$(er.files,et=>/^image\//.test(et.type))&&et.preventDefault()}),et.on("drop",ei=>{if(ei.isDefaultPrevented())return;let es=QR(et,ei);if(y(es))return;let ed=jR(ei.dataTransfer),ec=HR(ed,up());if((!$R(ed)||(et=>{let er=et["text/plain"];return!!er&&0===er.indexOf("file://")})(ed))&&qR(et,ei,es))return;let eu=ed[up()],ef=eu||ed["text/html"]||ed["text/plain"],ey=((et,er,ei,es)=>{let ed=et.getParent(ei,et=>As(er,et));if(!ez(et.getParent(ei,"summary")))return!0;if(ed&&ke(es,"text/html")){let et=(new DOMParser).parseFromString(es["text/html"],"text/html").body;return!ez(et.querySelector(ed.nodeName.toLowerCase()))}return!1})(et.dom,et.schema,es.startContainer,ed),eC=er.get();eC&&!ey||ef&&(ei.preventDefault(),lM.setEditorTimeout(et,()=>{et.undoManager.transact(()=>{(eu||eC&&ey)&&et.execCommand("Delete"),JR(et,es);let er=OR(ef);ed["text/html"]?UR(et,er,ec,!0):zR(et,er,!0)})}))}),et.on("dragstart",et=>{er.set(!0)}),et.on("dragover dragend",ei=>{aw(et)&&!er.get()&&(ei.preventDefault(),JR(et,QR(et,ei))),"dragend"===ei.type&&er.set(!1)}),(et=>{et.on("input",er=>{if("deleteByDrag"===er.inputType){let er=G(et.dom.select("details"),et=>ez(et.querySelector("summary")));V(er,er=>{t3(er.firstChild)&&er.firstChild.remove();let ei=et.dom.create("summary");ei.appendChild(Dr().dom),er.prepend(ei)})}})})(et),WR(et,es,ei)})},sA=et=>t6(et.dom),aA=et=>er=>En(pn(et),er),iA=(et,er)=>Jn(pn(et),sA,aA(er)),lA=(et,er,ei)=>{let es=new zo(et,er),ed=ei?es.next.bind(es):es.prev.bind(es),ec=et;for(let er=ei?et:ed();er&&!t3(er);er=ed())ss(er)&&(ec=er);return ec},dA=et=>{let er=((et,er)=>{let ei=Li.fromRangeStart(et).getNode(),es=Jn(pn(ei),et=>t5(et.dom)||rc(et),aA(er)).getOr(pn(er)).dom,ed=lA(ei,es,!1),ec=lA(ei,es,!0),eu=document.createRange();return iA(ed,es).fold(()=>{tJ(ed)?eu.setStart(ed,0):eu.setStartBefore(ed)},et=>eu.setStartBefore(et.dom)),iA(ec,es).fold(()=>{tJ(ec)?eu.setEnd(ec,ec.data.length):eu.setEndAfter(ec)},et=>eu.setEndAfter(et.dom)),eu})(et.selection.getRng(),et.getBody());et.selection.setRng(sb(er))};(eC=eI||(eI={})).Before="before",eC.After="after";let uA=(et,er)=>Math.abs(et.left-er),mA=(et,er)=>Math.abs(et.right-er),fA=(et,er)=>X(G(et,et=>er>=et.top&&er<=et.bottom),(et,er)=>et.fold(()=>I.some(er),et=>{let ei=Math.min(er.left,et.left),es=Math.min(er.top,et.top),ed=Math.max(er.right,et.right),ec=Math.max(er.bottom,et.bottom);return I.some({top:es,right:ed,bottom:ec,left:ei,width:ed-ei,height:ec-es})}),I.none()).fold(()=>[[],et],er=>{let{pass:ei,fail:es}=K(et,et=>((et,er)=>{let ei=Math.max(0,Math.min(et.bottom,er.bottom)-Math.max(et.top,er.top))/Math.min(et.height,er.height);return et.top<er.bottom&&et.bottom>er.top&&ei>.5})(et,er));return[ei,es]}),gA=(et,er,ei)=>er>et.left&&er<et.right?0:Math.min(Math.abs(et.left-er),Math.abs(et.right-er)),pA=(et,er,ei)=>{let o=et=>ss(et.node)?I.some(et):tY(et.node)?pA(eY(et.node.childNodes),er,ei):I.none(),r=(et,es)=>{let ed=ae(et,(et,ed)=>es(et,er,ei)-es(ed,er,ei));return((et,es)=>{if(et.length>=2){let ed=o(et[0]).getOr(et[0]),ec=o(et[1]).getOr(et[1]);if(2>Math.abs(es(ed,er,ei)-es(ec,er,ei))){if(tJ(ed.node))return I.some(ed);if(tJ(ec.node))return I.some(ec)}}return I.none()})(ed,es).orThunk(()=>ue(ed,o))},[es,ed]=fA(xk(et),ei),{pass:ec,fail:eu}=K(ed,et=>et.top<ei);return r(es,gA).orThunk(()=>r(eu,fi)).orThunk(()=>r(ec,fi))},hA=(et,er,ei)=>((et,er,ei)=>{let es=pn(et),ed=Nn(es),ec=Cn(ed,er,ei).filter(et=>Sn(es,et)).getOr(es);return((et,er,ei,es)=>{let r=(er,ed)=>{let ec=G(er.dom.childNodes,T(et=>tY(et)&&et.classList.contains("mce-drag-container")));return ed.fold(()=>pA(ec,ei,es),et=>{let er=G(ec,er=>er!==et.dom);return pA(er,ei,es)}).orThunk(()=>(En(er,et)?I.none():On(er)).bind(et=>r(et,I.some(er))))};return r(er,I.none())})(es,ec,er,ei)})(et,er,ei).filter(et=>Ec(et.node)).map(et=>({node:et.node,position:uA(et,er)<mA(et,er)?eI.Before:eI.After})),bA=et=>{var er,ei;let es=et.getBoundingClientRect(),ed=et.ownerDocument,ec=ed.documentElement,eu=ed.defaultView;return{top:es.top+(null!==(er=null==eu?void 0:eu.scrollY)&&void 0!==er?er:0)-ec.clientTop,left:es.left+(null!==(ei=null==eu?void 0:eu.scrollX)&&void 0!==ei?ei:0)-ec.clientLeft}},vA=et=>({target:et,srcElement:et}),yA=(et,er,ei,es)=>{let ed=((et,er)=>{let ei=(et=>{let er=vR(),ei=I.from(et[c5]);return c9(et),c2(er),er.dropEffect=et.dropEffect,er.effectAllowed=et.effectAllowed,I.from(et[c0]).each(et=>er.setDragImage(et.image,et.x,et.y)),V(et.types,ei=>{"Files"!==ei&&er.setData(ei,et.getData(ei))}),V(et.files,et=>er.items.add(et)),I.from(et[c1]).each(et=>{((et,er)=>{nR(er)(et)})(er,et)}),ei.each(ei=>{dR(et,ei),dR(er,ei)}),er})(et);return"dragstart"===er?(c2(ei),c6(ei)):"drop"===er?(c3(ei),c9(ei)):(c8(ei),c4(ei)),ei})(ei,et);return eU(es)?((et,er,ei)=>{let es=B("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:et,composedPath:es,initEvent:es,preventDefault:E,stopImmediatePropagation:E,stopPropagation:E,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:es,initMouseEvent:es,getModifierState:es,dataTransfer:ei,...vA(er)}})(et,er,ed):{...es,dataTransfer:ed,type:et,...vA(er)}},uR=((...et)=>er=>{for(let ei=0;ei<et.length;ei++)if(et[ei](er))return!0;return!1})(t6,t5),xA=(et,er,ei,es)=>{let ed=et.dom,ec=er.cloneNode(!0);ed.setStyles(ec,{width:ei,height:es}),ed.setAttrib(ec,"data-mce-selected",null);let eu=ed.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return ed.setStyles(eu,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:ei,height:es}),ed.setStyles(ec,{margin:0,boxSizing:"border-box"}),eu.appendChild(ec),eu},kA=(et,er)=>ei=>()=>{let es="left"===et?ei.scrollX:ei.scrollY;ei.scroll({[et]:es+er,behavior:"smooth"})},uI=kA("left",-32),uT=kA("left",32),uL=kA("top",-32),uB=kA("top",32),RA=et=>{et&&et.parentNode&&et.parentNode.removeChild(et)},AA=(et,er,ei,es,ed)=>{"dragstart"===er&&yR(es,et.dom.getOuterHTML(ei));let ec=yA(er,ei,es,ed);return et.dispatch(er,ec)},OA=(et,er)=>{let ei=ja((et,ei)=>{er._selectionOverrides.hideFakeCaret(),hA(er.getBody(),et,ei).fold(()=>er.selection.placeCaretAt(et,ei),es=>{let ed=er._selectionOverrides.showCaret(1,es.node,es.position===eI.Before,!1);ed?er.selection.setRng(ed):er.selection.placeCaretAt(et,ei)})},0);return er.on("remove",ei.cancel),es=>et.on(ed=>{var ec,eu,ef,ey,eC,eS;let e_=Math.max(Math.abs(es.screenX-ed.screenX),Math.abs(es.screenY-ed.screenY));if(!ed.dragging&&e_>10){let et=AA(er,"dragstart",ed.element,ed.dataTransfer,es);if(C(et.dataTransfer)&&(ed.dataTransfer=et.dataTransfer),et.isDefaultPrevented())return;ed.dragging=!0,er.focus()}if(ed.dragging){let e_=es.currentTarget===er.getDoc().documentElement,eR=(ef=er.inline?bA(er.getBody()):{left:0,top:0},ey=(et=>{let er=et.getBody();return et.inline?{left:er.scrollLeft,top:er.scrollTop}:{left:0,top:0}})(er),{pageX:(eS={pageX:(eC=((et,er)=>{if(er.target.ownerDocument!==et.getDoc()){let ei=bA(et.getContentAreaContainer()),es=(et=>{let er=et.getBody(),ei=et.getDoc().documentElement,es={left:er.scrollLeft,top:er.scrollTop},ed={left:er.scrollLeft||ei.scrollLeft,top:er.scrollTop||ei.scrollTop};return et.inline?es:ed})(et);return{left:er.pageX-ei.left+es.left,top:er.pageY-ei.top+es.top}}return{left:er.pageX,top:er.pageY}})(er,es)).left-ef.left+ey.left,pageY:eC.top-ef.top+ey.top}).pageX-ed.relX,pageY:eS.pageY+5});ec=ed.ghost,eu=er.getBody(),ec.parentNode!==eu&&eu.appendChild(ec),((et,er,ei,es,ed,ec,eu,ef,ey,eC,eS,e_)=>{let eR=0,eI=0;et.style.left=er.pageX+"px",et.style.top=er.pageY+"px",er.pageX+ei>ed&&(eR=er.pageX+ei-ed),er.pageY+es>ec&&(eI=er.pageY+es-ec),et.style.width=ei-eR+"px",et.style.height=es-eI+"px";let eL=ey.clientHeight,eB=ey.clientWidth,eD=eu+ey.getBoundingClientRect().top,eP=ef+ey.getBoundingClientRect().left;eS.on(et=>{et.intervalId.clear(),et.dragging&&e_&&(eu+8>=eL?et.intervalId.set(uB(eC)):eu-8<=0?et.intervalId.set(uL(eC)):ef+8>=eB?et.intervalId.set(uT(eC)):ef-8<=0?et.intervalId.set(uI(eC)):eD+16>=window.innerHeight?et.intervalId.set(uB(window)):eD-16<=0?et.intervalId.set(uL(window)):eP+16>=window.innerWidth?et.intervalId.set(uT(window)):eP-16<=0&&et.intervalId.set(uI(window)))})})(ed.ghost,eR,ed.width,ed.height,ed.maxX,ed.maxY,es.clientY,es.clientX,er.getContentAreaContainer(),er.getWin(),et,e_),ei.throttle(es.clientX,es.clientY)}})},TA=(et,er,ei)=>{et.on(et=>{et.intervalId.clear(),et.dragging&&ei.fold(()=>AA(er,"dragend",et.element,et.dataTransfer),ei=>AA(er,"dragend",et.element,et.dataTransfer,ei))}),BA(et)},BA=et=>{et.on(et=>{et.intervalId.clear(),RA(et.ghost)}),et.clear()},DA=et=>{let er=za(),ei=Oa.DOM,es=document,ed=OA(er,et),i=ei=>TA(er,et,I.some(ei));et.on("mousedown",ei=>{var es,ed;if(0===ei.button){let ec=J(et.dom.getParents(ei.target),uR).getOr(null);if(C(ec)&&(es=et.dom,ed=et.getBody(),t6(ec)&&ec!==ed&&es.isEditable(ec.parentElement))){let es=et.dom.getPos(ec),ed=et.getBody(),eu=et.getDoc().documentElement;er.set({element:ec,dataTransfer:vR(),dragging:!1,screenX:ei.screenX,screenY:ei.screenY,maxX:(et.inline?ed.scrollWidth:eu.offsetWidth)-2,maxY:(et.inline?ed.scrollHeight:eu.offsetHeight)-2,relX:ei.pageX-es.x,relY:ei.pageY-es.y,width:ec.offsetWidth,height:ec.offsetHeight,ghost:xA(et,ec,ec.offsetWidth,ec.offsetHeight),intervalId:Ua(100)})}}}),et.on("mousemove",ed),et.on("mouseup",ei=>{er.on(er=>{var es,ed,ec;if(er.intervalId.clear(),er.dragging){if(ed=(et=>{let er=et.getSel();if(C(er)){let et=er.getRangeAt(0).startContainer;return tJ(et)?et.parentNode:et}return null})(et.selection),ec=er.element,!y(ed)&&ed!==ec&&!et.dom.isChildOf(ed,ec)&&et.dom.isEditable(ed)){let ed=null!==(es=et.getDoc().elementFromPoint(ei.clientX,ei.clientY))&&void 0!==es?es:et.getBody();AA(et,"drop",ed,er.dataTransfer,ei).isDefaultPrevented()||et.undoManager.transact(()=>{((et,er)=>{let ei=et.getParent(er.parentNode,et.isBlock);RA(er),ei&&ei!==et.getRoot()&&et.isEmpty(ei)&&Pr(pn(ei))})(et.dom,er.element),(et=>{let er=et.getData("text/html");return""===er?I.none():I.some(er)})(er.dataTransfer).each(er=>et.insertContent(er)),et._selectionOverrides.hideFakeCaret()})}AA(et,"dragend",et.getBody(),er.dataTransfer,ei)}}),BA(er)}),ei.bind(es,"mousemove",ed),ei.bind(es,"mouseup",i),et.on("remove",()=>{ei.unbind(es,"mousemove",ed),ei.unbind(es,"mouseup",i)}),et.on("keydown",ei=>{ei.keyCode===lr.ESC&&TA(er,et,I.none())})},LA=(et,er)=>Vh(et.getBody(),er),MA=et=>{let er;let ei=et.selection,es=et.dom,ed=et.getBody(),ec=wc(et,ed,es.isBlock,()=>xg(et)),eu="sel-"+es.uniqueId(),ef="data-mce-selected",l=et=>et!==ed&&(t6(et)||t7(et))&&es.isChildOf(et,ed)&&es.isEditable(et.parentNode),d=(er,es,ed,eu=!0)=>et.dispatch("ShowCaret",{target:es,direction:er,before:ed}).isDefaultPrevented()?null:(eu&&ei.scrollIntoView(es,-1===er),ec.show(ed,es)),c=et=>$r(et)||Kr(et)||Gr(et),u=et=>c(et.startContainer)||c(et.endContainer),m=er=>{let ei=et.schema.getVoidElements(),ed=es.createRng(),ec=er.startContainer,eu=er.startOffset,ef=er.endContainer,ey=er.endOffset;return ke(ei,ec.nodeName.toLowerCase())?0===eu?ed.setStartBefore(ec):ed.setStartAfter(ec):ed.setStart(ec,eu),ke(ei,ef.nodeName.toLowerCase())?0===ey?ed.setEndBefore(ef):ed.setEndAfter(ef):ed.setEnd(ef,ey),ed},f=(ec,ey)=>{if(!ec)return null;if(ec.collapsed){if(!u(ec)){let et=ey?1:-1,er=Gc(et,ed,ec),ei=er.getNode(!ey);if(C(ei)){if(Ec(ei))return d(et,ei,!!ey&&!er.isAtEnd(),!1);if(Hr(ei)&&t6(ei.nextSibling)){let et=es.createRng();return et.setStart(ei,0),et.setEnd(ei,0),et}}let eu=er.getNode(ey);if(C(eu)){if(Ec(eu))return d(et,eu,!ey&&!er.isAtEnd(),!1);if(Hr(eu)&&t6(eu.previousSibling)){let et=es.createRng();return et.setStart(eu,1),et.setEnd(eu,1),et}}}return null}let eC=ec.startContainer,eS=ec.startOffset,e_=ec.endOffset;if(tJ(eC)&&0===eS&&t6(eC.parentNode)&&(eC=eC.parentNode,eS=es.nodeIndex(eC),eC=eC.parentNode),!tY(eC))return null;if(e_===eS+1&&eC===ec.endContainer){let ed=eC.childNodes[eS];if(l(ed))return(ed=>{let ec=ed.cloneNode(!0),ey=et.dispatch("ObjectSelected",{target:ed,targetClone:ec});if(ey.isDefaultPrevented())return null;let eC=((er,ed)=>{let ec=pn(et.getBody()),ef=et.getDoc(),ey=eo(ec,"#"+eu).getOrThunk(()=>{let et=hn('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ef);return Jt(et,"id",eu),bo(ec,et),et}),eC=es.createRng();Co(ey),yo(ey,[vn("\xa0",ef),pn(ed),vn("\xa0",ef)]),eC.setStart(ey.dom.firstChild,1),eC.setEnd(ey.dom.lastChild,0),io(ey,{top:es.getPos(er,et.getBody()).y+"px"}),eg(ey);let eS=ei.getSel();return eS&&(eS.removeAllRanges(),eS.addRange(eC)),eC})(ed,ey.targetClone),eS=pn(ed);return V(Fo(pn(et.getBody()),`*[${ef}]`),et=>{En(eS,et)||on(et,ef)}),es.getAttrib(ed,ef)||ed.setAttribute(ef,"1"),er=ed,p(),eC})(ed)}return null},g=()=>{er&&er.removeAttribute(ef),eo(pn(et.getBody()),"#"+eu).each(wo),er=null},p=()=>{ec.hide()};return MC(et)||(et.on("click",er=>{es.isEditable(er.target)||(er.preventDefault(),et.focus())}),et.on("blur NewBlock",g),et.on("ResizeWindow FullscreenStateChanged",ec.reposition),et.on("tap",er=>{let ei=er.target,es=LA(et,ei);t6(es)?(er.preventDefault(),ux(et,es).each(f)):l(ei)&&ux(et,ei).each(f)},!0),et.on("mousedown",er=>{let ec=er.target;if(ec!==ed&&"HTML"!==ec.nodeName&&!es.isChildOf(ec,ed)||!((et,er,ei)=>{let es=pn(et.getBody()),ed=et.inline?es:pn(Nn(es).dom.documentElement),ec=((et,er,ei,es)=>{let ed=er.dom.getBoundingClientRect();return{x:ei-(et?ed.left+er.dom.clientLeft+dr(er):0),y:es-(et?ed.top+er.dom.clientTop+dt(er):0)}})(et.inline,ed,er,ei);return((et,er,ei)=>{let es=s4(et),ed=s7(et);return er>=0&&ei>=0&&er<=es&&ei<=ed})(ed,ec.x,ec.y)})(et,er.clientX,er.clientY))return;g(),p();let eu=LA(et,ec);t6(eu)?(er.preventDefault(),ux(et,eu).each(f)):hA(ed,er.clientX,er.clientY).each(es=>{var ed;er.preventDefault(),(ed=d(1,es.node,es.position===eI.Before,!1))&&ei.setRng(ed),tY(eu)?eu.focus():et.getBody().focus()})}),et.on("keypress",et=>{lr.modifierPressed(et)||t6(ei.getNode())&&et.preventDefault()}),et.on("GetSelectionRange",et=>{let ei=et.range;if(er){if(!er.parentNode)return void(er=null);(ei=ei.cloneRange()).selectNode(er),et.range=ei}}),et.on("SetSelectionRange",et=>{et.range=m(et.range);let er=f(et.range,et.forward);er&&(et.range=er)}),et.on("AfterSetSelectionRange",et=>{let er=et.range,ei=er.startContainer.parentElement;u(er)||tY(ei)&&"mcepastebin"===ei.id||p(),C(ei)&&es.hasClass(ei,"mce-offscreen-selection")||g()}),DA(et),o8(et)&&(et=>{let t=er=>{if(!er.isDefaultPrevented()){let ei=er.dataTransfer;ei&&(H(ei.types,"Files")||ei.files.length>0)&&(er.preventDefault(),"drop"===er.type&&ww(et,"Dropped file type is not supported"))}},n=er=>{hg(et,er.target)&&t(er)},o=()=>{let er=Oa.DOM,ei=et.dom,es=document,ed=et.inline?et.getBody():et.getDoc(),ec=["drop","dragover"];V(ec,et=>{er.bind(es,et,n),ei.bind(ed,et,t)}),et.on("remove",()=>{V(ec,et=>{er.unbind(es,et,n),ei.unbind(ed,et,t)})})};et.on("init",()=>{lM.setEditorTimeout(et,o,0)})})(et),(et=>{let er=ja(()=>{if(!et.removed&&et.getBody().contains(document.activeElement)){let er=et.selection.getRng();if(er.collapsed){let ei=mx(et,er,!1);et.selection.setRng(ei)}}},0);et.on("focus",()=>{er.throttle()}),et.on("blur",()=>{er.cancel()})})(et),(et=>{et.on("init",()=>{et.on("focusin",er=>{let ei=er.target;if(t7(ei)){let er=Vh(et.getBody(),ei),es=t6(er)?er:ei;et.selection.getNode()!==es&&ux(et,es).each(er=>et.selection.setRng(er))}})})})(et)),{showCaret:d,showBlockCaretContainer:et=>{et.hasAttribute("data-mce-caret")&&(Yr(et),ei.scrollIntoView(et))},hideFakeCaret:p,destroy:()=>{ec.destroy(),er=null}}},IA=(et,er)=>{let ei=er;for(let er=et.previousSibling;tJ(er);er=er.previousSibling)ei+=er.data.length;return ei},FA=(et,er,ei,es,ed)=>{if(tJ(ei)&&(es<0||es>ei.data.length))return[];let ec=ed&&tJ(ei)?[IA(ei,es)]:[es],eu=ei;for(;eu!==er&&eu.parentNode;)ec.push(et.nodeIndex(eu,ed)),eu=eu.parentNode;return eu===er?ec.reverse():[]},UA=(et,er,ei,es,ed,ec,eu=!1)=>({start:FA(et,er,ei,es,eu),end:FA(et,er,ed,ec,eu)}),zA=(et,er)=>{let ei=er.slice(),es=ei.pop();return ej(es)?X(ei,(et,er)=>et.bind(et=>I.from(et.childNodes[er])),I.some(et)).bind(et=>tJ(et)&&(es<0||es>et.data.length)?I.none():I.some({node:et,offset:es})):I.none()},jA=(et,er)=>zA(et,er.start).bind(({node:ei,offset:es})=>zA(et,er.end).map(({node:et,offset:er})=>{let ed=document.createRange();return ed.setStart(ei,es),ed.setEnd(et,er),ed})),HA=(et,er,ei)=>{if(er&&et.isEmpty(er)&&!ei(er)){let es=er.parentNode;et.remove(er,tJ(er.firstChild)&&ds(er.firstChild.data)),HA(et,es,ei)}},$A=(et,er,ei,es=!0)=>{let ed=er.startContainer.parentNode,ec=er.endContainer.parentNode;er.deleteContents(),es&&!ei(er.startContainer)&&(tJ(er.startContainer)&&0===er.startContainer.data.length&&et.remove(er.startContainer),tJ(er.endContainer)&&0===er.endContainer.data.length&&et.remove(er.endContainer),HA(et,ed,ei),ed!==ec&&HA(et,ec,ei))},qA=(et,er)=>I.from(et.dom.getParent(er.startContainer,et.dom.isBlock)),VA=(et,er,ei)=>{let es=et.dynamicPatternsLookup({text:ei,block:er});return{...et,blockPatterns:cl(es).concat(et.blockPatterns),inlinePatterns:ul(es).concat(et.inlinePatterns)}},WA=(et,er,ei,es)=>{let ed=et.createRng();return ed.setStart(er,0),ed.setEnd(ei,es),ed.toString()},KA=(et,er,ei)=>{((et,er,ei)=>{if(tJ(et)&&0>=et.length)return I.some(gS(et,0));{let er=ai(d0);return I.from(er.forwards(et,0,hS(et),ei)).map(et=>gS(et.container,0))}})(er,0,er).each(es=>{var ed;let ec=es.container;yS(ec,ei.start.length,er).each(ei=>{let es=et.createRng();es.setStart(ec,0),es.setEnd(ei.container,ei.offset),$A(et,es,et=>et===er)});let eu=pn(ec),ef=vr(eu);/^\s[^\s]/.test(ef)&&(ed=ef.slice(1),rs.set(eu,ed))})},GA=(et,er)=>et.create("span",{"data-mce-type":"bookmark",id:er}),YA=(et,er)=>{let ei=et.createRng();return ei.setStartAfter(er.start),ei.setEndBefore(er.end),ei},XA=(et,er,ei)=>{let es=jA(et.getRoot(),ei).getOrDie("Unable to resolve path range"),ed=es.startContainer,ec=es.endContainer,eu=0===es.endOffset?ec:ec.splitText(es.endOffset),ef=0===es.startOffset?ed:ed.splitText(es.startOffset),ey=ef.parentNode;return{prefix:er,end:eu.parentNode.insertBefore(GA(et,er+"-end"),eu),start:ey.insertBefore(GA(et,er+"-start"),ef)}},QA=(et,er,ei)=>{HA(et,et.get(er.prefix+"-end"),ei),HA(et,et.get(er.prefix+"-start"),ei)},JA=et=>0===et.start.length,ZA=(et,er,ei,es)=>{let ed=er.start;return CS(et,es.container,es.offset,(et,er)=>{let ei=et.data.substring(0,er),es=ei.lastIndexOf(ed.charAt(ed.length-1)),ec=ei.lastIndexOf(ed);return -1!==ec?ec+ed.length:-1!==es?es+1:-1},ei).bind(es=>{var ec,eu;let ef=null!==(eu=null===(ec=ei.textContent)||void 0===ec?void 0:ec.indexOf(ed))&&void 0!==eu?eu:-1;if(-1!==ef&&es.offset>=ef+ed.length){let er=et.createRng();return er.setStart(es.container,es.offset-ed.length),er.setEnd(es.container,es.offset),I.some(er)}{let ec=es.offset-ed.length;return vS(es.container,ec,ei).map(er=>{let ei=et.createRng();return ei.setStart(er.container,er.offset),ei.setEnd(es.container,es.offset),ei}).filter(et=>et.toString()===ed).orThunk(()=>ZA(et,er,ei,gS(es.container,0)))}})},eO=(et,er,ei,es)=>{let ed=et.dom,ec=ed.getRoot(),eu=ei.pattern,ef=ei.position.container,ey=ei.position.offset;return vS(ef,ey-ei.pattern.end.length,er).bind(eC=>{let eS=UA(ed,ec,eC.container,eC.offset,ef,ey,es);if(JA(eu))return I.some({matches:[{pattern:eu,startRng:eS,endRng:eS}],position:eC});{let ef=tO(et,ei.remainingPatterns,eC.container,eC.offset,er,es),ey=ef.getOr({matches:[],position:eC}),e_=ey.position,eR=((et,er,ei,es,ed,ec=!1)=>{if(0===er.start.length&&!ec){let er=et.createRng();return er.setStart(ei,es),er.setEnd(ei,es),I.some(er)}return bS(ei,es,ed).bind(ei=>ZA(et,er,ed,ei).bind(et=>{var er;return ec&&(et.endContainer===ei.container&&et.endOffset===ei.offset||0===ei.offset&&(null===(er=et.endContainer.textContent)||void 0===er?void 0:er.length)===et.endOffset)?I.none():I.some(et)}))})(ed,eu,e_.container,e_.offset,er,ef.isNone());return eR.map(et=>{let er=((et,er,ei,es=!1)=>UA(et,er,ei.startContainer,ei.startOffset,ei.endContainer,ei.endOffset,es))(ed,ec,et,es);return{matches:ey.matches.concat([{pattern:eu,startRng:er,endRng:eS}]),position:gS(et.startContainer,et.startOffset)}})}})},tO=(et,er,ei,es,ed,ec)=>{let eu=et.dom;return bS(ei,es,eu.getRoot()).bind(ef=>{let ey=WA(eu,ed,ei,es);for(let eu=0;eu<er.length;eu++){let eC=er[eu];if(!$e(ey,eC.end))continue;let eS=er.slice();eS.splice(eu,1);let e_=eO(et,ed,{pattern:eC,remainingPatterns:eS,position:ef},ec);if(e_.isNone()&&es>0)return tO(et,er,ei,es-1,ed,ec);if(e_.isSome())return e_}return I.none()})},nO=(et,er,ei)=>{et.selection.setRng(ei),"inline-format"===er.type?V(er.format,er=>{et.formatter.apply(er)}):et.execCommand(er.cmd,!1,er.value)},oO=(et,er,ei,es,ed,ec)=>((et,er)=>{let ei=ne(et,et=>$(er,er=>et.pattern.start===er.pattern.start&&et.pattern.end===er.pattern.end));return et.length===er.length?ei?et:er:et.length>er.length?et:er})(tO(et,ed.inlinePatterns,ei,es,er,ec).fold(()=>[],et=>et.matches),tO(et,ae(ed.inlinePatterns,(et,er)=>er.end.length-et.end.length),ei,es,er,ec).fold(()=>[],et=>et.matches)),rO=(et,er)=>{if(0===er.length)return;let ei=et.dom,es=et.selection.getBookmark(),ed=((et,er)=>{let ei=ti("mce_textpattern"),es=Y(er,(er,es)=>{let ed=XA(et,ei+`_end${er.length}`,es.endRng);return er.concat([{...es,endMarker:ed}])},[]);return Y(es,(er,ed)=>{let ec=es.length-er.length-1,eu=JA(ed.pattern)?ed.endMarker:XA(et,ei+`_start${ec}`,ed.startRng);return er.concat([{...ed,startMarker:eu}])},[])})(ei,er);V(ed,er=>{let es=ei.getParent(er.startMarker.start,ei.isBlock),r=et=>et===es;JA(er.pattern)?((et,er,ei,es)=>{let ed=YA(et.dom,ei);$A(et.dom,ed,es),nO(et,er,ed)})(et,er.pattern,er.endMarker,r):((et,er,ei,es,ed)=>{let ec=et.dom,eu=YA(ec,es),ef=YA(ec,ei);$A(ec,ef,ed),$A(ec,eu,ed);let ey={prefix:ei.prefix,start:ei.end,end:es.start},eC=YA(ec,ey);nO(et,er,eC)})(et,er.pattern,er.startMarker,er.endMarker,r),QA(ei,er.endMarker,r),QA(ei,er.startMarker,r)}),et.selection.moveToBookmark(es)},sO=(et,er)=>{let ei=et.selection.getRng();return qA(et,ei).map(es=>{var ed;let ec=Math.max(0,ei.startOffset),eu=VA(er,es,null!==(ed=es.textContent)&&void 0!==ed?ed:""),ef=oO(et,es,ei.startContainer,ec,eu,!0),ey=((et,er,ei,es)=>{var ed;let ec=et.dom,eu=nX(et);if(!ec.is(er,eu))return[];let ef=null!==(ed=er.textContent)&&void 0!==ed?ed:"";return((et,er)=>{let ei=ae(et,(et,er)=>er.start.length-et.start.length),es=er.replace("\xa0"," ");return J(ei,et=>0===er.indexOf(et.start)||0===es.indexOf(et.start))})(ei.blockPatterns,ef).map(et=>tz.trim(ef).length===et.start.length?[]:[{pattern:et,range:UA(ec,ec.getRoot(),er,0,er,0,!0)}]).getOr([])})(et,es,eu);return(ey.length>0||ef.length>0)&&(et.undoManager.add(),et.undoManager.extra(()=>{et.execCommand("mceInsertNewLine")},()=>{et.insertContent("\uFEFF"),rO(et,ef),((et,er)=>{if(0===er.length)return;let ei=et.selection.getBookmark();V(er,er=>((et,er)=>{let ei=et.dom,es=er.pattern,ed=jA(ei.getRoot(),er.range).getOrDie("Unable to resolve path range");return qA(et,ed).each(er=>{"block-format"===es.type?((et,er)=>{let ei=er.get(et);return eM(ei)&&le(ei).exists(et=>ke(et,"block"))})(es.format,et.formatter)&&et.undoManager.transact(()=>{KA(et.dom,er,es),et.formatter.apply(es.format)}):"block-command"===es.type&&et.undoManager.transact(()=>{KA(et.dom,er,es),et.execCommand(es.cmd,!1,es.value)})}),!0})(et,er)),et.selection.moveToBookmark(ei)})(et,ey);let er=et.selection.getRng(),ei=bS(er.startContainer,er.startOffset,et.dom.getRoot());et.execCommand("mceInsertNewLine"),ei.each(er=>{let ei=er.container;"\uFEFF"===ei.data.charAt(er.offset-1)&&(ei.deleteData(er.offset-1,1),HA(et.dom,ei.parentNode,er=>er===et.dom.getRoot()))})}),!0)}).getOr(!1)},aO=(et,er,ei)=>{for(let es=0;es<et.length;es++)if(ei(et[es],er))return!0;return!1},iO=et=>{let er=tz.each,ei=lr.BACKSPACE,es=lr.DELETE,ed=et.dom,ec=et.selection,eu=et.parser,ef=tF.browser,ey=ef.isFirefox(),eC=ef.isChromium()||ef.isSafari(),eS=tF.deviceType.isiPhone()||tF.deviceType.isiPad(),e_=tF.os.isMacOS()||tF.os.isiOS(),f=(er,ei)=>{try{et.getDoc().execCommand(er,!1,String(ei))}catch(et){}},g=et=>et.isDefaultPrevented(),p=()=>{et.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{et.inline||ed.bind(et.getDoc(),"mousedown mouseup",er=>{let ei;if(er.target===et.getDoc().documentElement){if(ei=ec.getRng(),et.getBody().focus(),"mousedown"===er.type){if($r(ei.startContainer))return;ec.placeCaretAt(er.clientX,er.clientY)}else ec.setRng(ei)}})},b=()=>{Range.prototype.getClientRects||et.on("mousedown",er=>{if(!g(er)&&"HTML"===er.target.nodeName){let er=et.getBody();er.blur(),lM.setEditorTimeout(et,()=>{er.focus()})}})},v=()=>{let er=o9(et);et.on("click",ei=>{let es=ei.target;/^(IMG|HR)$/.test(es.nodeName)&&ed.isEditable(es.parentNode)&&(ei.preventDefault(),et.selection.select(es),et.nodeChanged()),"A"===es.nodeName&&ed.hasClass(es,er)&&0===es.childNodes.length&&ed.isEditable(es.parentNode)&&(ei.preventDefault(),ec.select(es))})},y=()=>{et.on("keydown",et=>{if(!g(et)&&et.keyCode===ei&&ec.isCollapsed()&&0===ec.getRng().startOffset){let er=ec.getNode().previousSibling;if(er&&er.nodeName&&"table"===er.nodeName.toLowerCase())return et.preventDefault(),!1}return!0})},C=()=>{oZ(et)||et.on("BeforeExecCommand mousedown",()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),oR(et)||f("enableObjectResizing",!1)})},w=()=>{et.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},x=()=>{et.inline||et.on("keydown",()=>{document.activeElement===document.body&&et.getWin().focus()})},k=()=>{et.inline||(et.contentStyles.push("body {min-height: 150px}"),et.on("click",er=>{let ei;"HTML"===er.target.nodeName&&(ei=et.selection.getRng(),et.getBody().focus(),et.selection.setRng(ei),et.selection.normalize(),et.nodeChanged())}))},S=()=>{e_&&et.on("keydown",er=>{!lr.metaKeyPressed(er)||er.shiftKey||37!==er.keyCode&&39!==er.keyCode||(er.preventDefault(),et.selection.getSel().modify("move",37===er.keyCode?"backward":"forward","lineboundary"))})},_=()=>{et.on("click",et=>{let er=et.target;do if("A"===er.tagName)return void et.preventDefault();while(er=er.parentNode)}),et.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},N=()=>{et.on("init",()=>{et.dom.bind(et.getBody(),"submit",et=>{et.preventDefault()})})};return MC(et)?(eC&&(h(),v(),N(),p(),eS&&(x(),k(),_())),ey&&(b(),C(),w(),S())):(et.on("keydown",er=>{if(g(er)||er.keyCode!==lr.BACKSPACE)return;let ei=ec.getRng(),es=ei.startContainer,eu=ei.startOffset,ef=ed.getRoot(),ey=es;if(ei.collapsed&&0===eu){for(;ey.parentNode&&ey.parentNode.firstChild===ey&&ey.parentNode!==ef;)ey=ey.parentNode;"BLOCKQUOTE"===ey.nodeName&&(et.formatter.toggle("blockquote",void 0,ey),(ei=ed.createRng()).setStart(es,0),ei.setEnd(es,0),ec.setRng(ei))}}),(()=>{let t=et=>{let er=ed.create("body"),ei=et.cloneContents();return er.appendChild(ei),ec.serializer.serialize(er,{format:"html"})};et.on("keydown",er=>{let ec=er.keyCode;if(!g(er)&&(ec===es||ec===ei)&&et.selection.isEditable()){let ei=et.selection.isCollapsed(),es=et.getBody();if(ei&&(!ed.isEmpty(es)||(et=>{let er=pn(et);return $(Fo(er,'[contenteditable="true"]'),et=>On(et).exists(et=>!no(et)))})(es))||!ei&&!(er=>{let ei=t(er),es=ed.createRng();return es.selectNode(et.getBody()),ei===t(es)})(et.selection.getRng()))return;er.preventDefault(),et.setContent(""),es.firstChild&&ed.isBlock(es.firstChild)?et.selection.setCursorLocation(es.firstChild,0):et.selection.setCursorLocation(es,0),et.nodeChanged()}})})(),tF.windowsPhone||et.on("keyup focusin mouseup",er=>{lr.modifierPressed(er)||(et=>{let er=et.getBody(),ei=et.selection.getRng();return ei.startContainer===ei.endContainer&&ei.startContainer===er&&0===ei.startOffset&&ei.endOffset===er.childNodes.length})(et)||ec.normalize()},!0),eC&&(h(),v(),et.on("init",()=>{f("DefaultParagraphSeparator",nX(et))}),N(),y(),eu.addNodeFilter("br",et=>{let er=et.length;for(;er--;)"Apple-interchange-newline"===et[er].attr("class")&&et[er].remove()}),eS?(x(),k(),_()):p()),ey&&(et.on("keydown",er=>{if(!g(er)&&er.keyCode===ei&&et.getBody().getElementsByTagName("hr").length&&ec.isCollapsed()&&0===ec.getRng().startOffset){let et=ec.getNode(),ei=et.previousSibling;if("HR"===et.nodeName)return ed.remove(et),void er.preventDefault();ei&&ei.nodeName&&"hr"===ei.nodeName.toLowerCase()&&(ed.remove(ei),er.preventDefault())}}),b(),(()=>{let n=()=>{let ei=ed.getAttribs(ec.getStart().cloneNode(!1));return()=>{let es=ec.getStart();es!==et.getBody()&&(ed.setAttrib(es,"style",null),er(ei,et=>{es.setAttributeNode(et.cloneNode(!0))}))}},o=()=>!ec.isCollapsed()&&ed.getParent(ec.getStart(),ed.isBlock)!==ed.getParent(ec.getEnd(),ed.isBlock);et.on("keypress",er=>{let ei;return!(!(g(er)||8!==er.keyCode&&46!==er.keyCode)&&o()&&(ei=n(),et.getDoc().execCommand("delete",!1),ei(),er.preventDefault(),1))}),ed.bind(et.getDoc(),"cut",er=>{if(!g(er)&&o()){let er=n();lM.setEditorTimeout(et,()=>{er()})}})})(),C(),et.on("SetContent ExecCommand",et=>{"setcontent"!==et.type&&"mceInsertLink"!==et.command||er(ed.select("a:not([data-mce-block])"),et=>{var er;let ei=et.parentNode,es=ed.getRoot();if((null==ei?void 0:ei.lastChild)===et){for(;ei&&!ed.isBlock(ei);){if((null===(er=ei.parentNode)||void 0===er?void 0:er.lastChild)!==ei||ei===es)return;ei=ei.parentNode}ed.add(ei,"br",{"data-mce-bogus":1})}})}),w(),S(),y(),et.on("drop",er=>{var ei;let es=null===(ei=er.dataTransfer)||void 0===ei?void 0:ei.getData("text/html");eP(es)&&/^<img[^>]*>$/.test(es)&&et.dispatch("dragend",new window.DragEvent("dragend",er))}))),{refreshContentEditable:E,isHidden:()=>{if(!ey||et.removed)return!1;let er=et.selection.getSel();return!er||!er.rangeCount||0===er.rangeCount}}},uD=Oa.DOM,dO=et=>et.inline?et.getElement().nodeName.toLowerCase():void 0,cO=et=>ye(et,et=>!1===eU(et)),uO=et=>{let er=et.options.get,ei=et.editorUpload.blobCache;return cO({allow_conditional_comments:er("allow_conditional_comments"),allow_html_data_urls:er("allow_html_data_urls"),allow_svg_data_urls:er("allow_svg_data_urls"),allow_html_in_named_anchor:er("allow_html_in_named_anchor"),allow_script_urls:er("allow_script_urls"),allow_unsafe_link_target:er("allow_unsafe_link_target"),convert_fonts_to_spans:er("convert_fonts_to_spans"),fix_list_elements:er("fix_list_elements"),font_size_legacy_values:er("font_size_legacy_values"),forced_root_block:er("forced_root_block"),forced_root_block_attrs:er("forced_root_block_attrs"),preserve_cdata:er("preserve_cdata"),inline_styles:er("inline_styles"),root_name:dO(et),sanitize:er("xss_sanitization"),validate:!0,blob_cache:ei,document:et.getDoc()})},mO=et=>{let er=et.options.get;return cO({custom_elements:er("custom_elements"),extended_valid_elements:er("extended_valid_elements"),invalid_elements:er("invalid_elements"),invalid_styles:er("invalid_styles"),schema:er("schema"),valid_children:er("valid_children"),valid_classes:er("valid_classes"),valid_elements:er("valid_elements"),valid_styles:er("valid_styles"),verify_html:er("verify_html"),padd_empty_block_inline_children:er("format_empty_lines")})},fO=et=>et.inline?et.ui.styleSheetLoader:et.dom.styleSheetLoader,gO=et=>{let er=fO(et),ei=oy(et),es=et.contentCSS,r=()=>{er.unloadAll(es),et.inline||et.ui.styleSheetLoader.unloadAll(ei)},s=()=>{et.removed?r():et.on("remove",r)};if(et.contentStyles.length>0){let er="";tz.each(et.contentStyles,et=>{er+=et+"\r\n"}),et.dom.addStyle(er)}let ed=Promise.all(((et,er,ei)=>{let es=[fO(et).loadAll(er)];return et.inline?es:es.concat([et.ui.styleSheetLoader.loadAll(ei)])})(et,es,ei)).then(s).catch(s),ec=ov(et);return ec&&((et,er)=>{let ei=pn(et.getBody()),es=Vn(tK(ei)),ed=bn("style");Jt(ed,"type","text/css"),bo(ed,vn(er)),bo(es,ed),et.on("remove",()=>{wo(ed)})})(et,ec),ed},pO=et=>{!0!==et.removed&&(MC(et)||et.load({initial:!0,format:"html"}),et.startContent=et.getContent({format:"raw"}),(et=>{et.bindPendingEventDelegates(),et.initialized=!0,(et=>{et.dispatch("Init")})(et),et.focus(!0),(et=>{let er=et.dom.getRoot();et.inline||tm(et)&&et.selection.getStart(!0)!==er||a8(er).each(er=>{let ei=er.getNode(),es=Yo(ei)?a8(ei).getOr(er):er;et.selection.setRng(es.toRange())})})(et),et.nodeChanged({initial:!0});let er=at(et);eH(er)&&er.call(et,et),(et=>{let er=aa(et);er&&lM.setEditorTimeout(et,()=>{let ei;(ei=!0===er?et:et.editorManager.get(er))&&!ei.destroyed&&(ei.focus(),ei.selection.scrollIntoView())},100)})(et)})(et))},hO=et=>{let er=et.getElement(),ei=et.getDoc();et.inline&&(uD.addClass(er,"mce-content-body"),et.contentDocument=ei=document,et.contentWindow=window,et.bodyElement=er,et.contentAreaContainer=er);let es=et.getBody();es.disabled=!0,et.readonly=oZ(et),et._editableRoot=o0(et),!et.readonly&&et.hasEditableRoot()&&(et.inline&&"static"===uD.getStyle(es,"position",!0)&&(es.style.position="relative"),es.contentEditable="true"),es.disabled=!1,et.editorUpload=Bw(et),et.schema=ca(mO(et)),et.dom=Oa(ei,{keep_values:!0,url_converter:et.convertURL,url_converter_scope:et,update_styles:!0,root_element:et.inline?et.getBody():null,collect:et.inline,schema:et.schema,contentCssCors:oa(et),referrerPolicy:os(et),onSetAttrib:er=>{et.dispatch("SetAttrib",er)}}),et.parser=(et=>{let er=oC(uO(et),et.schema);return er.addAttributeFilter("src,href,style,tabindex",(er,ei)=>{let es=et.dom,ed="data-mce-"+ei,ec=er.length;for(;ec--;){let eu=er[ec],ef=eu.attr(ei);if(ef&&!eu.attr(ed)){if(0===ef.indexOf("data:")||0===ef.indexOf("blob:"))continue;"style"===ei?((ef=es.serializeStyle(es.parseStyle(ef),eu.name)).length||(ef=null),eu.attr(ed,ef),eu.attr(ei,ef)):"tabindex"===ei?(eu.attr(ed,ef),eu.attr(ei,null)):eu.attr(ed,et.convertURL(ef,ei,eu.name))}}}),er.addNodeFilter("script",et=>{let er=et.length;for(;er--;){let ei=et[er],es=ei.attr("type")||"no/type";0!==es.indexOf("mce-")&&ei.attr("type","mce-"+es)}}),aG(et)&&er.addNodeFilter("#cdata",er=>{var ei;let es=er.length;for(;es--;){let ed=er[es];ed.type=8,ed.name="#comment",ed.value="[CDATA["+et.dom.encode(null!==(ei=ed.value)&&void 0!==ei?ei:"")+"]]"}}),er.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",er=>{let ei=er.length,es=et.schema.getNonEmptyElements();for(;ei--;){let et=er[ei];et.isEmpty(es)&&0===et.getAll("br").length&&et.append(new Fg("br",1))}}),er})(et),et.serializer=KC((et=>{let er=et.options.get;return{...uO(et),...mO(et),...cO({remove_trailing_brs:er("remove_trailing_brs"),pad_empty_with_br:er("pad_empty_with_br"),url_converter:er("url_converter"),url_converter_scope:er("url_converter_scope"),element_format:er("element_format"),entities:er("entities"),entity_encoding:er("entity_encoding"),indent:er("indent"),indent_after:er("indent_after"),indent_before:er("indent_before")})}})(et),et),et.selection=qC(et.dom,et.getWin(),et.serializer,et),et.annotator=Vm(et),et.formatter=$w(et),et.undoManager=Vw(et),et._nodeChangeDispatcher=new ZN(et),et._selectionOverrides=MA(et),(et=>{let er=za(),ei=Da(!1),es=Ha(er=>{et.dispatch("longpress",{...er,type:"longpress"}),ei.set(!0)},400);et.on("touchstart",et=>{vE(et).each(ed=>{es.cancel();let ec={x:ed.clientX,y:ed.clientY,target:et.target};es.throttle(et),ei.set(!1),er.set(ec)})},!0),et.on("touchmove",ed=>{es.cancel(),vE(ed).each(es=>{er.on(ed=>{((et,er)=>{let ei=Math.abs(et.clientX-er.x),es=Math.abs(et.clientY-er.y);return ei>5||es>5})(es,ed)&&(er.clear(),ei.set(!1),et.dispatch("longpresscancel"))})})},!0),et.on("touchend touchcancel",ed=>{es.cancel(),"touchcancel"!==ed.type&&er.get().filter(et=>et.target.isEqualNode(ed.target)).each(()=>{ei.get()?ed.preventDefault():et.dispatch("tap",{...ed,type:"tap"})})},!0)})(et),(et=>{et.on("click",er=>{et.dom.getParent(er.target,"details")&&er.preventDefault()})})(et),et.parser.addNodeFilter("details",er=>{let ei=aJ(et);V(er,et=>{"expanded"===ei?et.attr("open","open"):"collapsed"===ei&&et.attr("open",null)})}),et.serializer.addNodeFilter("details",er=>{let ei=aQ(et);V(er,et=>{"expanded"===ei?et.attr("open","open"):"collapsed"===ei&&et.attr("open",null)})}),(et=>{let er="contenteditable",ei=" "+tz.trim(a$(et))+" ",es=" "+tz.trim(aj(et))+" ",ed=SE(ei),ec=SE(es),eu=aq(et);eu.length>0&&et.on("BeforeSetContent",er=>{((et,er,ei)=>{let es=er.length,ed=ei.content;if("raw"!==ei.format){for(;es--;)ed=ed.replace(er[es],_E(et,ed,aj(et)));ei.content=ed}})(et,eu,er)}),et.parser.addAttributeFilter("class",et=>{let ei=et.length;for(;ei--;){let es=et[ei];ed(es)?es.attr(er,"true"):ec(es)&&es.attr(er,"false")}}),et.serializer.addAttributeFilter(er,et=>{let ei=et.length;for(;ei--;){let es=et[ei];(ed(es)||ec(es))&&(eu.length>0&&es.attr("data-mce-content")?(es.name="#text",es.type=3,es.raw=!0,es.value=es.attr("data-mce-content")):es.attr(er,null))}})})(et),MC(et)||((et=>{et.on("mousedown",er=>{er.detail>=3&&(er.preventDefault(),dA(et))})})(et),(et=>{let er=[",",".",";",":","!","?"],ei=[32],o=()=>{var er,ei;return er=aU(et),ei=aH(et),{inlinePatterns:ul(er),blockPatterns:cl(er),dynamicPatternsLookup:ei}},r=()=>et.options.isSet("text_patterns_lookup");et.on("keydown",er=>{if(13===er.keyCode&&!lr.modifierPressed(er)&&et.selection.isCollapsed()){let ei=o();(ei.inlinePatterns.length>0||ei.blockPatterns.length>0||r())&&sO(et,ei)&&er.preventDefault()}},!0);let s=()=>{if(et.selection.isCollapsed()){let er=o();(er.inlinePatterns.length>0||r())&&((et,er)=>{let ei=et.selection.getRng();qA(et,ei).map(es=>{let ed=Math.max(0,ei.startOffset-1),ec=WA(et.dom,es,ei.startContainer,ed),eu=VA(er,es,ec),ef=oO(et,es,ei.startContainer,ed,eu,!1);ef.length>0&&et.undoManager.transact(()=>{rO(et,ef)})})})(et,er)}};et.on("keyup",et=>{aO(ei,et,(et,er)=>et===er.keyCode&&!lr.modifierPressed(er))&&s()}),et.on("keypress",ei=>{aO(er,ei,(et,er)=>et.charCodeAt(0)===er.charCode)&&lM.setEditorTimeout(et,s)})})(et));let ed=JN(et);bE(et,ed),(et=>{et.on("NodeChange",O(kE,et))})(et),(et=>{var er;let ei=et.dom,es=nX(et),ed=null!==(er=oL(et))&&void 0!==er?er:"",s=(er,ec)=>{if((et=>{if(Gw(et)){let er=et.keyCode;return!Yw(et)&&(lr.metaKeyPressed(et)||et.altKey||er>=112&&er<=123||H(dL,er))}return!1})(er))return;let eu=et.getBody(),ef=(!Gw(er)||!!(Yw(er)||"keyup"===er.type&&229===er.keyCode))&&((et,er,ei)=>{if(bs(pn(er),!1)){let es=er.firstElementChild;return!es||!et.getStyle(er.firstElementChild,"padding-left")&&!et.getStyle(er.firstElementChild,"padding-right")&&ei===es.nodeName.toLowerCase()}return!1})(ei,eu,es);(""!==ei.getAttrib(eu,dB)!==ef||ec)&&(ei.setAttrib(eu,dB,ef?ed:null),ei.setAttrib(eu,"aria-placeholder",ef?ed:null),((et,er)=>{et.dispatch("PlaceholderToggle",{state:er})})(et,ef),et.on(ef?"keydown":"keyup",s),et.off(ef?"keyup":"keydown",s))};Ge(ed)&&et.on("init",er=>{s(er,!0),et.on("change SetContent ExecCommand",s),et.on("paste",er=>lM.setEditorTimeout(et,()=>s(er)))})})(et),nA(et);let ec=xe(et.plugins,"rtc").bind(et=>I.from(et.setup)).fold(()=>(et.rtcInstance=LC(et),I.none()),er=>(et.rtcInstance=(()=>{let et=N(null),er=N("");return{init:{bindEvents:E},undoManager:{beforeChange:E,add:et,undo:et,redo:et,clear:E,reset:E,hasUndo:e$,hasRedo:e$,transact:et,ignore:E,extra:E},formatter:{match:e$,matchAll:N([]),matchNode:N(void 0),canApply:e$,closest:er,apply:E,remove:E,toggle:E,formatChanged:N({unbind:E})},editor:{getContent:er,setContent:N({content:"",html:""}),insertContent:N(""),addVisual:E},selection:{getContent:er},autocompleter:{addDecoration:E,removeDecoration:E},raw:{getModel:N(I.none())}}})(),I.some(()=>er().then(er=>(et.rtcInstance=(et=>{let t=et=>eF(et)?et:{},{init:er,undoManager:ei,formatter:es,editor:ed,selection:ec,autocompleter:eu,raw:ef}=et;return{init:{bindEvents:er.bindEvents},undoManager:{beforeChange:ei.beforeChange,add:ei.add,undo:ei.undo,redo:ei.redo,clear:ei.clear,reset:ei.reset,hasUndo:ei.hasUndo,hasRedo:ei.hasRedo,transact:(et,er,es)=>ei.transact(es),ignore:(et,er)=>ei.ignore(er),extra:(et,er,es,ed)=>ei.extra(es,ed)},formatter:{match:(et,er,ei,ed)=>es.match(et,t(er),ed),matchAll:es.matchAll,matchNode:es.matchNode,canApply:et=>es.canApply(et),closest:et=>es.closest(et),apply:(et,er,ei)=>es.apply(et,t(er)),remove:(et,er,ei,ed)=>es.remove(et,t(er)),toggle:(et,er,ei)=>es.toggle(et,t(er)),formatChanged:(et,er,ei,ed,ec)=>es.formatChanged(er,ei,ed,ec)},editor:{getContent:et=>ed.getContent(et),setContent:(et,er)=>({content:ed.setContent(et,er),html:""}),insertContent:(et,er)=>(ed.insertContent(et),""),addVisual:ed.addVisual},selection:{getContent:(et,er)=>ec.getContent(er)},autocompleter:{addDecoration:eu.addDecoration,removeDecoration:eu.removeDecoration},raw:{getModel:()=>I.some(ef.getRawModel())}}})(er),er.rtc.isRemote)))));(et=>{let er=et.getDoc(),ei=et.getBody();(et=>{et.dispatch("PreInit")})(et),ad(et)||(er.body.spellcheck=!1,uD.setAttrib(ei,"spellcheck","false")),et.quirks=iO(et),(et=>{et.dispatch("PostRender")})(et);let es=oS(et);void 0!==es&&(ei.dir=es);let ed=ac(et);ed&&et.on("BeforeSetContent",et=>{tz.each(ed,er=>{et.content=et.content.replace(er,et=>"<!--mce:protected "+escape(et)+"-->")})}),et.on("SetContent",()=>{et.addVisual(et.getBody())}),et.on("compositionstart compositionend",er=>{et.composing="compositionstart"===er.type})})(et),ec.fold(()=>{let er=(et=>{let er=!1,ei=setTimeout(()=>{er||et.setProgressState(!0)},500);return()=>{clearTimeout(ei),er=!0,et.setProgressState(!1)}})(et);gO(et).then(()=>{pO(et),er()})},er=>{et.setProgressState(!0),gO(et).then(()=>{er().then(er=>{et.setProgressState(!1),pO(et),UC(et)},er=>{et.notificationManager.open({type:"error",text:String(er)}),pO(et),UC(et)})})})},uP=Oa.DOM,uF=Oa.DOM,CO=(et,er)=>({editorContainer:et,iframeContainer:er,api:{}}),wO=et=>{let er=et.getElement();return et.inline?CO(null):(et=>{let er=uF.create("div");return uF.insertAfter(er,et),CO(er,er)})(er)},xO=async et=>{var er;et.dispatch("ScriptsLoaded"),(et=>{let er=tz.trim(n6(et)),ei=et.ui.registry.getAll().icons,es={...s6.get("default").icons,...s6.get(er).icons};ge(es,(er,es)=>{ke(ei,es)||et.ui.registry.addIcon(es,er)})})(et),(et=>{let er=oP(et);if(eP(er)){let ei=dc.get(er);et.theme=ei(et,dc.urls[er])||{},eH(et.theme.init)&&et.theme.init(et,dc.urls[er]||et.documentBaseUrl.replace(/\/$/,""))}else et.theme={}})(et),(et=>{let er=oM(et),ei=s9.get(er);et.model=ei(et,s9.urls[er])})(et),(et=>{let er=[];V(o2(et),ei=>{((et,er,ei)=>{let es=dd.get(ei),ed=dd.urls[ei]||et.documentBaseUrl.replace(/\/$/,"");if(ei=tz.trim(ei),es&&-1===tz.inArray(er,ei)){if(et.plugins[ei])return;try{let ec=es(et,ed)||{};et.plugins[ei]=ec,eH(ec.init)&&(ec.init(et,ed),er.push(ei))}catch(er){((et,er,ei)=>{let es=nl.translate(["Failed to initialize plugin: {0}",er]);Gm(et,"PluginLoadError",{message:es}),Ew(es,ei),ww(et,es)})(et,ei,er)}}})(et,er,ei.replace(/^\-/,""))})})(et);let ei=await (et=>{let er=et.getElement();return et.orgDisplay=er.style.display,eP(oP(et))?(et=>{let er=et.theme.renderUI;return er?er():wO(et)})(et):eH(oP(et))?(et=>{let er=et.getElement(),ei=oP(et)(et,er);return ei.editorContainer.nodeType&&(ei.editorContainer.id=ei.editorContainer.id||et.id+"_parent"),ei.iframeContainer&&ei.iframeContainer.nodeType&&(ei.iframeContainer.id=ei.iframeContainer.id||et.id+"_iframecontainer"),ei.height=ei.iframeHeight?ei.iframeHeight:er.offsetHeight,ei})(et):wO(et)})(et);((et,er)=>{let ei={show:I.from(er.show).getOr(E),hide:I.from(er.hide).getOr(E),isEnabled:I.from(er.isEnabled).getOr(eq),setEnabled:ei=>{et.mode.isReadOnly()||I.from(er.setEnabled).each(et=>et(ei))}};et.ui={...et.ui,...ei}})(et,I.from(ei.api).getOr({})),et.editorContainer=ei.editorContainer,et.contentCSS=et.contentCSS.concat(Sw(et,op(et)),Sw(et,oy(et))),et.inline?hO(et):(((et,er)=>{let ei=et.translate("Rich Text Area"),es=tn(pn(et.getElement()),"tabindex").bind(Xe),ed=((et,er,ei,es)=>{let ed=bn("iframe");return es.each(et=>Jt(ed,"tabindex",et)),Zt(ed,ei),Zt(ed,{id:et+"_ifr",frameBorder:"0",allowTransparency:"true",title:er}),un(ed,"tox-edit-area__iframe"),ed})(et.id,ei,nj(et),es).dom;ed.onload=()=>{ed.onload=null,et.dispatch("load")},et.contentAreaContainer=er.iframeContainer,et.iframeElement=ed,et.iframeHTML=(et=>{let er=n$(et)+"<html><head>";nq(et)!==et.documentBaseUrl&&(er+='<base href="'+et.documentBaseURI.getURI()+'" />'),er+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';let ei=nG(et),es=nW(et),ed=et.translate(o4(et));return nK(et)&&(er+='<meta http-equiv="Content-Security-Policy" content="'+nK(et)+'" />'),er+=`</head><body id="${ei}" class="mce-content-body ${es}" data-id="${et.id}" aria-label="${ed}"><br></body></html>`})(et),uP.add(er.iframeContainer,ed)})(et,er={editorContainer:ei.editorContainer,iframeContainer:ei.iframeContainer}),er.editorContainer&&(er.editorContainer.style.display=et.orgDisplay,et.hidden=uP.isHidden(er.editorContainer)),et.getElement().style.display="none",uP.setAttrib(et.id,"aria-hidden","true"),et.getElement().style.visibility=et.orgVisibility,(et=>{let er=et.iframeElement,n=()=>{et.contentDocument=er.contentDocument,hO(et)};if(aY(et)||tF.browser.isFirefox()){let er=et.getDoc();er.open(),er.write(et.iframeHTML),er.close(),n()}else{let ei=_o(pn(er),"load",eq,()=>{ei.unbind(),n()});er.srcdoc=et.iframeHTML}})(et))},uM=Oa.DOM,EO=et=>"-"===et.charAt(0),SO=(et,er,ei)=>I.from(er).filter(et=>Ge(et)&&!s6.has(et)).map(er=>({url:`${et.editorManager.baseURL}/icons/${er}/icons${ei}.js`,name:I.some(er)})),_O=(et,er)=>{let ei=Ba.ScriptLoader,o=()=>{!et.removed&&(et=>{let er=oP(et);return!eP(er)||C(dc.get(er))})(et)&&(et=>{let er=oM(et);return C(s9.get(er))})(et)&&xO(et)};((et,er)=>{let ei=oP(et);if(eP(ei)&&!EO(ei)&&!ke(dc.urls,ei)){let es=oF(et),ed=es?et.documentBaseURI.toAbsolute(es):`themes/${ei}/theme${er}.js`;dc.load(ei,ed).catch(()=>{xw(et,"ThemeLoadError",kw("theme",ed,ei))})}})(et,er),((et,er)=>{let ei=oM(et);if("plugin"!==ei&&!ke(s9.urls,ei)){let es=oz(et),ed=eP(es)?et.documentBaseURI.toAbsolute(es):`models/${ei}/model${er}.js`;s9.load(ei,ed).catch(()=>{xw(et,"ModelLoadError",kw("model",ed,ei))})}})(et,er),((et,er)=>{let ei=od(er),es=oc(er);if(!nl.hasCode(ei)&&"en"!==ei){let ed=Ge(es)?es:`${er.editorManager.baseURL}/langs/${ei}.js`;et.add(ed).catch(()=>{xw(er,"LanguageLoadError",kw("language",ed,ei))})}})(ei,et),((et,er,ei)=>{let es=SO(er,"default",ei),ed=I.from(n9(er)).filter(Ge).map(et=>({url:et,name:I.none()})).orThunk(()=>SO(er,n6(er),""));V((et=>{let er=[],n=et=>{er.push(et)};for(let er=0;er<et.length;er++)et[er].each(n);return er})([es,ed]),ei=>{et.add(ei.url).catch(()=>{xw(er,"IconsLoadError",kw("icons",ei.url,ei.name.getOrUndefined()))})})})(ei,et,er),((et,er)=>{let n=(er,ei)=>{dd.load(er,ei).catch(()=>{xw(et,"PluginLoadError",kw("plugin",ei,er))})};ge(o3(et),(er,ei)=>{n(ei,er),et.options.set("plugins",o2(et).concat(ei))}),V(o2(et),et=>{!(et=tz.trim(et))||dd.urls[et]||EO(et)||n(et,`plugins/${et}/plugin${er}.js`)})})(et,er),ei.loadQueue().then(o,o)},uz=xt().deviceType,uV=uz.isPhone(),uU=uz.isTablet(),OO=et=>{if(y(et))return[];{let er=eM(et)?et:et.split(/[ ,]/),ei=q(er,e0);return G(ei,Ge)}},TO=(et,er)=>{var ei,es;let ed=((er,ei)=>{let es={},ed={};return ve(er,(er,ei)=>H(et,ei),be(es),be(ed)),{t:es,f:ed}})(er);return ei=ed.t,es=ed.f,{sections:N(ei),options:N(es)}},BO=(et,er)=>ke(et.sections(),er),DO=(et,er)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:xe(et,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...er?{menubar:!1}:{}}),PO=(et,er)=>{var ei;let es=null!==(ei=er.external_plugins)&&void 0!==ei?ei:{};return et&&et.external_plugins?tz.extend({},et.external_plugins,es):es},LO=(et,er,ei,es,ed)=>{var ec;let eu=et?{mobile:DO(null!==(ec=ed.mobile)&&void 0!==ec?ec:{},er)}:{},ef=TO(["mobile"],d1(eu,ed)),ey=tz.extend(ei,es,ef.options(),et&&BO(ef,"mobile")?((et,er,ei={})=>{let es=et.sections(),ed=xe(es,er).getOr({});return tz.extend({},ei,ed)})(ef,"mobile"):{},{external_plugins:PO(es,ef.options())});return((et,er,ei,es)=>{var ed,ec;let eu=OO(ei.forced_plugins),ef=OO(es.plugins),ey=BO(er,ed="mobile")?er.sections()[ed]:{},eC=(ec=ey.plugins?OO(ey.plugins):ef,et&&BO(er,"mobile")?ec:ef),eS=[...OO(eu),...OO(eC)];return tz.extend(es,{forced_plugins:eu,plugins:eS})})(et,ef,es,ey)},MO=et=>{(et=>{let t=er=>()=>{V("left,center,right,justify".split(","),ei=>{er!==ei&&et.formatter.remove("align"+ei)}),"none"!==er&&(et.formatter.toggle("align"+er,void 0),et.nodeChanged())};et.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})})(et),(et=>{let t=er=>()=>{let ei=et.selection,es=ei.isCollapsed()?[et.dom.getParent(ei.getNode(),et.dom.isBlock)]:ei.getSelectedBlocks();return $(es,ei=>C(et.formatter.matchNode(ei,er)))};et.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")})(et)},IO=(et,er)=>{let ei=et.selection,es=et.dom;return/^ | $/.test(er)?((et,er,ei)=>{let es=pn(et.getRoot());return ei=Up(es,Li.fromRangeStart(er))?ei.replace(/^ /,"&nbsp;"):ei.replace(/^&nbsp;/," "),zp(es,Li.fromRangeEnd(er))?ei.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):ei.replace(/&nbsp;(<br( \/)?>)?$/," ")})(es,ei.getRng(),er):er},FO=(et,er)=>{if(et.selection.isEditable()){let{content:ei,details:es}=(et=>{if("string"!=typeof et){let er=tz.extend({paste:et.paste,data:{paste:et.paste}},et);return{content:et.content,details:er}}return{content:et,details:{}}})(er);iC(et,{...es,content:IO(et,ei),format:"html",set:!1,selection:!0}).each(er=>{var ei;let ed=(ei=er.content,IC(et).editor.insertContent(ei,es));lC(et,ed,er),et.addVisual()})}},uH={"font-size":"size","font-family":"face"},uj=Xt("font"),jO=et=>(er,ei)=>I.from(ei).map(pn).filter(tH).bind(ei=>{var es;return vb(pn(ei.dom),er=>uo(er,et).orThunk(()=>uj(er)?xe(uH,et).bind(et=>tn(er,et)):I.none()),et=>En(pn(er),et)).or((es=ei.dom,I.from(Oa.DOM.getStyle(es,et,!0))))}).getOr(""),u$=jO("font-size"),uq=S(et=>et.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),jO("font-family")),qO=et=>a8(et.getBody()).bind(et=>{let er=et.container();return I.from(tJ(er)?er.parentNode:er)}),VO=(et,er)=>{var ei;return ei=_(I.some,er),I.from(et.selection.getRng()).bind(er=>{let ei=et.getBody();return er.startContainer===ei&&0===er.startOffset?I.none():I.from(et.selection.getStart(!0))}).orThunk(O(qO,et)).map(pn).filter(tH).bind(ei)},WO=(et,er)=>{if(/^[0-9.]+$/.test(er)){let ei=parseInt(er,10);if(ei>=1&&ei<=7){let es=tz.explode(et.options.get("font_size_style_values")),ed=tz.explode(et.options.get("font_size_classes"));return ed.length>0?ed[ei-1]||er:es[ei-1]||er}}return er},KO=et=>{let er=et.split(/\s*,\s*/);return q(er,et=>-1===et.indexOf(" ")||He(et,'"')||He(et,"'")?et:`'${et}'`).join(",")},GO=(et,er)=>{let ei=et.dom,es=et.selection.getRng(),ed=er?et.selection.getStart():et.selection.getEnd(),ec=er?es.startContainer:es.endContainer,eu=tN(ei,ec);if(!eu||!eu.isContentEditable)return;let ef=er?go:po,ey=nX(et);((et,er,ei,es)=>{let ed=et.dom,s=et=>ed.isBlock(et)&&et.parentElement===ei,ec=s(er)?er:ed.getParent(es,s,ei);return I.from(ec).map(pn)})(et,ed,eu,ec).each(er=>{let ei=sN(et,ec,er.dom,eu,!1,ey);ef(er,pn(ei)),et.selection.setCursorLocation(ei,0),et.dispatch("NewBlock",{newBlock:ei}),cV(et,"insertParagraph")})},YO=et=>{MO(et),(et=>{et.editorCommands.addCommands({"Cut,Copy,Paste":er=>{let ei;let es=et.getDoc();try{es.execCommand(er)}catch(et){ei=!0}if("paste"!==er||es.queryCommandEnabled(er)||(ei=!0),ei||!es.queryCommandSupported(er)){let er=et.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(tF.os.isMacOS()||tF.os.isiOS())&&(er=er.replace(/Ctrl\+/g,"⌘+")),et.notificationManager.open({text:er,type:"error"})}}})})(et),(et=>{et.editorCommands.addCommands({mceAddUndoLevel:()=>{et.undoManager.add()},mceEndUndoLevel:()=>{et.undoManager.add()},Undo:()=>{et.undoManager.undo()},Redo:()=>{et.undoManager.redo()}})})(et),(et=>{et.editorCommands.addCommands({mceSelectNodeDepth:(er,ei,es)=>{let ed=0;et.dom.getParent(et.selection.getNode(),er=>!tY(er)||ed++!==es||(et.selection.select(er),!1),et.getBody())},mceSelectNode:(er,ei,es)=>{et.selection.select(es)},selectAll:()=>{let er=et.dom.getParent(et.selection.getStart(),t5);if(er){let ei=et.dom.createRng();ei.selectNodeContents(er),et.selection.setRng(ei)}}})})(et),(et=>{et.editorCommands.addCommands({mceCleanup:()=>{let er=et.selection.getBookmark();et.setContent(et.getContent()),et.selection.moveToBookmark(er)},insertImage:(er,ei,es)=>{FO(et,et.dom.createHTML("img",{src:es}))},insertHorizontalRule:()=>{et.execCommand("mceInsertContent",!1,"<hr>")},insertText:(er,ei,es)=>{FO(et,et.dom.encode(es))},insertHTML:(er,ei,es)=>{FO(et,es)},mceInsertContent:(er,ei,es)=>{FO(et,es)},mceSetContent:(er,ei,es)=>{et.setContent(es)},mceReplaceContent:(er,ei,es)=>{et.execCommand("mceInsertContent",!1,es.replace(/\{\$selection\}/g,et.selection.getContent({format:"text"})))},mceNewDocument:()=>{et.setContent(aL(et))}})})(et),(et=>{let t=(er,ei,es)=>{let ed=eP(es)?{href:es}:es,ec=et.dom.getParent(et.selection.getNode(),"a");eF(ed)&&eP(ed.href)&&(ed.href=ed.href.replace(/ /g,"%20"),ec&&ed.href||et.formatter.remove("link"),ed.href&&et.formatter.apply("link",ed,ec))};et.editorCommands.addCommands({unlink:()=>{if(et.selection.isEditable()){if(et.selection.isCollapsed()){let er=et.dom.getParent(et.selection.getStart(),"a");return void(er&&et.dom.remove(er,!0))}et.formatter.remove("link")}},mceInsertLink:t,createLink:t})})(et),et.editorCommands.addCommands({Indent:()=>{fE(et,"indent")},Outdent:()=>{gE(et)}}),et.editorCommands.addCommands({Outdent:()=>cE(et)},"state"),(et=>{et.editorCommands.addCommands({InsertNewBlockBefore:()=>{GO(et,!0)},InsertNewBlockAfter:()=>{GO(et,!1)}})})(et),(et=>{et.editorCommands.addCommands({insertParagraph:()=>{MN(cG,et)},mceInsertNewLine:(er,ei,es)=>{IN(et,es)},InsertLineBreak:(er,ei,es)=>{MN(cW,et)}})})(et),(et=>{et.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":er=>{et.getDoc().execCommand(er);let ei=et.dom.getParent(et.selection.getNode(),"ol,ul");if(ei){let er=ei.parentNode;if(er&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(er.nodeName)){let es=et.selection.getBookmark();et.dom.split(er,ei),et.selection.moveToBookmark(es)}}}})})(et),(et=>{et.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":er=>{let ei=et.dom.getParent(et.selection.getNode(),"ul,ol");return ei&&("insertunorderedlist"===er&&"UL"===ei.tagName||"insertorderedlist"===er&&"OL"===ei.tagName)}},"state")})(et),(et=>{let t=(er,ei)=>{et.formatter.toggle(er,ei),et.nodeChanged()};et.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":et=>{t(et)},"ForeColor,HiliteColor":(et,er,ei)=>{t(et,{value:ei})},BackColor:(et,er,ei)=>{t("hilitecolor",{value:ei})},FontName:(er,ei,es)=>{((et,er)=>{let ei=WO(et,er);et.formatter.toggle("fontname",{value:KO(ei)}),et.nodeChanged()})(et,es)},FontSize:(er,ei,es)=>{et.formatter.toggle("fontsize",{value:WO(et,es)}),et.nodeChanged()},LineHeight:(er,ei,es)=>{et.formatter.toggle("lineheight",{value:String(es)}),et.nodeChanged()},Lang:(et,er,ei)=>{var es;t(et,{value:ei.code,customValue:null!==(es=ei.customCode)&&void 0!==es?es:null})},RemoveFormat:er=>{et.formatter.remove(er)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(et,er,ei)=>{t(eP(ei)?ei:"p")},mceToggleFormat:(et,er,ei)=>{t(ei)}})})(et),(et=>{let t=er=>et.formatter.match(er);et.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":et=>t(et),mceBlockQuote:()=>t("blockquote")},"state"),et.editorCommands.addQueryValueHandler("FontName",()=>VO(et,er=>uq(et.getBody(),er.dom)).getOr("")),et.editorCommands.addQueryValueHandler("FontSize",()=>VO(et,er=>u$(et.getBody(),er.dom)).getOr("")),et.editorCommands.addQueryValueHandler("LineHeight",()=>VO(et,er=>{let ei=pn(et.getBody()),es=vb(er,et=>uo(et,"line-height"),O(En,ei));return es.getOrThunk(()=>{let et=parseFloat(lo(er,"line-height")),ei=parseFloat(lo(er,"font-size"));return String(et/ei)})}).getOr(""))})(et),(et=>{et.editorCommands.addCommands({mceRemoveNode:(er,ei,es)=>{let ed=null!=es?es:et.selection.getNode();if(ed!==et.getBody()){let er=et.selection.getBookmark();et.dom.remove(ed,!0),et.selection.moveToBookmark(er)}},mcePrint:()=>{et.getWin().print()},mceFocus:(er,ei,es)=>{et.removed||(!0===es?kg(et):(et=>{var er;let ei=et.selection,es=et.getBody(),ed=ei.getRng();et.quirks.refreshContentEditable(),C(et.bookmark)&&!xg(et)&&cg(et).each(er=>{et.selection.setRng(er),ed=er});let ec=(er=ei.getNode(),et.dom.getParent(er,er=>"true"===et.dom.getContentEditable(er)));if(ec&&et.dom.isChildOf(ec,es))return wg(ec),Cg(et,ed),void kg(et);et.inline||(tF.browser.isOpera()||wg(es),et.getWin().focus()),(tF.browser.isFirefox()||et.inline)&&(wg(es),Cg(et,ed)),kg(et)})(et))},mceToggleVisualAid:()=>{et.hasVisual=!et.hasVisual,et.addVisual()}})})(et)},uG=["toggleview"],QO=et=>H(uG,et.toLowerCase());let JO=class JO{constructor(et){this.commands={state:{},exec:{},value:{}},this.editor=et}execCommand(et,er=!1,ei,es){let ed=this.editor,ec=et.toLowerCase(),eu=null==es?void 0:es.skip_focus;if(ed.removed||("mcefocus"!==ec&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(ec)||eu?(et=>{cg(et).each(er=>et.selection.setRng(er))})(ed):ed.focus()),ed.dispatch("BeforeExecCommand",{command:et,ui:er,value:ei}).isDefaultPrevented()))return!1;let ef=this.commands.exec[ec];return!!eH(ef)&&(ef(ec,er,ei),ed.dispatch("ExecCommand",{command:et,ui:er,value:ei}),!0)}queryCommandState(et){if(!QO(et)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;let er=et.toLowerCase(),ei=this.commands.state[er];return!!eH(ei)&&ei(er)}queryCommandValue(et){if(!QO(et)&&this.editor.quirks.isHidden()||this.editor.removed)return"";let er=et.toLowerCase(),ei=this.commands.value[er];return eH(ei)?ei(er):""}addCommands(et,er="exec"){let ei=this.commands;ge(et,(et,es)=>{V(es.toLowerCase().split(","),es=>{ei[er][es]=et})})}addCommand(et,er,ei){let es=et.toLowerCase();this.commands.exec[es]=(et,es,ed)=>er.call(null!=ei?ei:this.editor,es,ed)}queryCommandSupported(et){let er=et.toLowerCase();return!!this.commands.exec[er]}addQueryStateHandler(et,er,ei){this.commands.state[et.toLowerCase()]=()=>er.call(null!=ei?ei:this.editor)}addQueryValueHandler(et,er,ei){this.commands.value[et.toLowerCase()]=()=>er.call(null!=ei?ei:this.editor)}};let uW="data-mce-contenteditable",eT=(et,er,ei)=>{try{et.getDoc().execCommand(er,!1,String(ei))}catch(et){}},tT=(et,er)=>{et.dom.contentEditable=er?"true":"false"},nT=(et,er)=>{var ei;let es=pn(et.getBody());gn(es,ei="mce-content-readonly")&&!er?fn(es,ei):er&&un(es,ei),er?(et.selection.controlSelection.hideResizeRect(),et._selectionOverrides.hideFakeCaret(),(et=>{I.from(et.selection.getNode()).each(et=>{et.removeAttribute("data-mce-selected")})})(et),et.readonly=!0,tT(es,!1),V(Fo(es,'*[contenteditable="true"]'),et=>{Jt(et,uW,"true"),tT(et,!1)})):(et.readonly=!1,et.hasEditableRoot()&&tT(es,!0),V(Fo(es,`*[${uW}="true"]`),et=>{on(et,uW),tT(et,!0)}),eT(et,"StyleWithCSS",!1),eT(et,"enableInlineTableEditing",!1),eT(et,"enableObjectResizing",!1),(xg(et)||(et=>{let er=tK(pn(et.getElement()));return ng(er).filter(er=>!pg(er.dom)&&hg(et,er.dom)).isSome()})(et))&&et.focus(),(et=>{et.selection.setRng(et.selection.getRng())})(et),et.nodeChanged())},oT=et=>et.readonly,rT=et=>{et.parser.addAttributeFilter("contenteditable",er=>{oT(et)&&V(er,et=>{et.attr(uW,et.attr("contenteditable")),et.attr("contenteditable","false")})}),et.serializer.addAttributeFilter(uW,er=>{oT(et)&&V(er,et=>{et.attr("contenteditable",et.attr(uW))})}),et.serializer.addTempAttr(uW)},uK=["copy"],uY=tz.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");let iT=class iT{static isNative(et){return!!uY[et.toLowerCase()]}constructor(et){this.bindings={},this.settings=et||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||e$}fire(et,er){return this.dispatch(et,er)}dispatch(et,er){let ei=et.toLowerCase(),es=ga(ei,null!=er?er:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(es);let ed=this.bindings[ei];if(ed)for(let et=0,er=ed.length;et<er;et++){let er=ed[et];if(!er.removed){if(er.once&&this.off(ei,er.func),es.isImmediatePropagationStopped())return es;if(!1===er.func.call(this.scope,es))return es.preventDefault(),es}}return es}on(et,er,ei,es){if(!1===er&&(er=e$),er){let ed={func:er,removed:!1};es&&tz.extend(ed,es);let ec=et.toLowerCase().split(" "),eu=ec.length;for(;eu--;){let et=ec[eu],er=this.bindings[et];er||(er=[],this.toggleEvent(et,!0)),er=ei?[ed,...er]:[...er,ed],this.bindings[et]=er}}return this}off(et,er){if(et){let ei=et.toLowerCase().split(" "),es=ei.length;for(;es--;){let ed=ei[es],ec=this.bindings[ed];if(!ed)return ge(this.bindings,(et,er)=>{this.toggleEvent(er,!1),delete this.bindings[er]}),this;if(ec){if(er){let et=K(ec,et=>et.func===er);ec=et.fail,this.bindings[ed]=ec,V(et.pass,et=>{et.removed=!0})}else ec.length=0;ec.length||(this.toggleEvent(et,!1),delete this.bindings[ed])}}}else ge(this.bindings,(et,er)=>{this.toggleEvent(er,!1)}),this.bindings={};return this}once(et,er,ei){return this.on(et,er,ei,{once:!0})}has(et){et=et.toLowerCase();let er=this.bindings[et];return!(!er||0===er.length)}};let lT=et=>(et._eventDispatcher||(et._eventDispatcher=new iT({scope:et,toggleEvent:(er,ei)=>{iT.isNative(er)&&et.toggleNativeEvent&&et.toggleNativeEvent(er,ei)}})),et._eventDispatcher),uX={fire(et,er,ei){return this.dispatch(et,er,ei)},dispatch(et,er,ei){if(this.removed&&"remove"!==et&&"detach"!==et)return ga(et.toLowerCase(),null!=er?er:{},this);let es=lT(this).dispatch(et,er);if(!1!==ei&&this.parent){let er=this.parent();for(;er&&!es.isPropagationStopped();)er.dispatch(et,es,!1),er=er.parent?er.parent():void 0}return es},on(et,er,ei){return lT(this).on(et,er,ei)},off(et,er){return lT(this).off(et,er)},once(et,er){return lT(this).once(et,er)},hasEventListeners(et){return lT(this).has(et)}},uJ=Oa.DOM,mT=(et,er)=>{if("selectionchange"===er)return et.getDoc();if(!et.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(er))return et.getDoc().documentElement;let ei=oB(et);return ei?(et.eventRoot||(et.eventRoot=uJ.select(ei)[0]),et.eventRoot):et.getBody()},fT=(et,er,ei)=>{et.hidden||oT(et)?oT(et)&&((et,er)=>{if("click"!==er.type||lr.metaKeyPressed(er))H(uK,er.type)&&et.dispatch(er.type,er);else{let ei=pn(er.target);to(ei,"a",er=>En(er,pn(et.getBody()))).bind(et=>tn(et,"href")).each(ei=>{if(er.preventDefault(),/^#/.test(ei)){let er=et.dom.select(`${ei},[name="${ze(ei,"#")}"]`);er.length&&et.selection.scrollIntoView(er[0],!0)}else window.open(ei,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}})(et,ei):et.dispatch(er,ei)},gT=(et,ei)=>{if(et.delegates||(et.delegates={}),et.delegates[ei]||et.removed)return;let es=mT(et,ei);if(oB(et)){if(er||(er={},et.editorManager.on("removeEditor",()=>{et.editorManager.activeEditor||er&&(ge(er,(er,ei)=>{et.dom.unbind(mT(et,ei))}),er=null)})),er[ei])return;let o=er=>{let es=er.target,ed=et.editorManager.get(),ec=ed.length;for(;ec--;){let et=ed[ec].getBody();(et===es||uJ.isChildOf(es,et))&&fT(ed[ec],ei,er)}};er[ei]=o,uJ.bind(es,ei,o)}else{let o=er=>{fT(et,ei,er)};uJ.bind(es,ei,o),et.delegates[ei]=o}},uQ={...uX,bindPendingEventDelegates(){let et=this;tz.each(et._pendingNativeEvents,er=>{gT(et,er)})},toggleNativeEvent(et,er){"focus"!==et&&"blur"!==et&&(this.removed||(er?this.initialized?gT(this,et):this._pendingNativeEvents?this._pendingNativeEvents.push(et):this._pendingNativeEvents=[et]:this.initialized&&this.delegates&&(this.dom.unbind(mT(this,et),et,this.delegates[et]),delete this.delegates[et])))},unbindAllNativeEvents(){let et=this,er=et.getBody(),ei=et.dom;et.delegates&&(ge(et.delegates,(er,ei)=>{et.dom.unbind(mT(et,ei),ei,er)}),delete et.delegates),!et.inline&&er&&ei&&(er.onload=null,ei.unbind(et.getWin()),ei.unbind(et.getDoc())),ei&&(ei.unbind(er),ei.unbind(et.getContainer()))}},hT=et=>eP(et)?{value:et.split(/[ ,]/),valid:!0}:k(et,eP)?{value:et,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},bT=(et,er)=>et+(Ye(er.message)?"":`. ${er.message}`),vT=et=>et.valid,yT=(et,er,ei="")=>{let es=er(et);return eV(es)?es?{value:et,valid:!0}:{valid:!1,message:ei}:es},uZ=["design","readonly"],wT=(et,er,ei,es)=>{let ed=ei[er.get()],ec=ei[es];try{ec.activate()}catch(et){return void console.error(`problem while activating editor mode ${es}:`,et)}ed.deactivate(),ed.editorReadOnly!==ec.editorReadOnly&&nT(et,ec.editorReadOnly),er.set(es),((et,er)=>{et.dispatch("SwitchMode",{mode:er})})(et,es)},u0=tz.each,u1=tz.explode,u2={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},u3=tz.makeMap("alt,ctrl,shift,meta,access"),_T=et=>{let er;let ei={},es=tF.os.isMacOS()||tF.os.isiOS();u0(u1(et.toLowerCase(),"+"),et=>{et in u3?ei[et]=!0:/^[0-9]{2,}$/.test(et)?ei.keyCode=parseInt(et,10):(ei.charCode=et.charCodeAt(0),ei.keyCode=u2[et]||et.toUpperCase().charCodeAt(0))});let ed=[ei.keyCode];for(er in u3)ei[er]?ed.push(er):ei[er]=!1;return ei.id=ed.join(","),ei.access&&(ei.alt=!0,es?ei.ctrl=!0:ei.shift=!0),ei.meta&&(es?ei.meta=!0:(ei.ctrl=!0,ei.meta=!1)),ei};let NT=class NT{constructor(et){this.shortcuts={},this.pendingPatterns=[],this.editor=et;let er=this;et.on("keyup keypress keydown",et=>{!er.hasModifier(et)&&!er.isFunctionKey(et)||et.isDefaultPrevented()||(u0(er.shortcuts,ei=>{er.matchShortcut(et,ei)&&(er.pendingPatterns=ei.subpatterns.slice(0),"keydown"===et.type&&er.executeShortcutAction(ei))}),er.matchShortcut(et,er.pendingPatterns[0])&&(1===er.pendingPatterns.length&&"keydown"===et.type&&er.executeShortcutAction(er.pendingPatterns[0]),er.pendingPatterns.shift()))})}add(et,er,ei,es){let ed=this,ec=ed.normalizeCommandFunc(ei);return u0(u1(tz.trim(et)),et=>{let ei=ed.createShortcut(et,er,ec,es);ed.shortcuts[ei.id]=ei}),!0}remove(et){let er=this.createShortcut(et);return!!this.shortcuts[er.id]&&(delete this.shortcuts[er.id],!0)}normalizeCommandFunc(et){let er=this;return"string"==typeof et?()=>{er.editor.execCommand(et,!1,null)}:tz.isArray(et)?()=>{er.editor.execCommand(et[0],et[1],et[2])}:et}createShortcut(et,er,ei,es){let ed=tz.map(u1(et,">"),_T);return ed[ed.length-1]=tz.extend(ed[ed.length-1],{func:ei,scope:es||this.editor}),tz.extend(ed[0],{desc:this.editor.translate(er),subpatterns:ed.slice(1)})}hasModifier(et){return et.altKey||et.ctrlKey||et.metaKey}isFunctionKey(et){return"keydown"===et.type&&et.keyCode>=112&&et.keyCode<=123}matchShortcut(et,er){return!!er&&er.ctrl===et.ctrlKey&&er.meta===et.metaKey&&er.alt===et.altKey&&er.shift===et.shiftKey&&!!(et.keyCode===er.keyCode||et.charCode&&et.charCode===er.charCode)&&(et.preventDefault(),!0)}executeShortcutAction(et){return et.func?et.func.call(et.scope):null}};let RT=()=>{let et=(()=>{let et={},er={},ei={},es={},ed={},ec={},eu={},ef={},l=(et,er)=>(ei,es)=>{et[ei.toLowerCase()]={...es,type:er}};return{addButton:l(et,"button"),addGroupToolbarButton:l(et,"grouptoolbarbutton"),addToggleButton:l(et,"togglebutton"),addMenuButton:l(et,"menubutton"),addSplitButton:l(et,"splitbutton"),addMenuItem:l(er,"menuitem"),addNestedMenuItem:l(er,"nestedmenuitem"),addToggleMenuItem:l(er,"togglemenuitem"),addAutocompleter:l(ei,"autocompleter"),addContextMenu:l(ed,"contextmenu"),addContextToolbar:l(ec,"contexttoolbar"),addContextForm:l(ec,"contextform"),addSidebar:l(eu,"sidebar"),addView:l(ef,"views"),addIcon:(et,er)=>es[et.toLowerCase()]=er,getAll:()=>({buttons:et,menuItems:er,icons:es,popups:ei,contextMenus:ed,contextToolbars:ec,sidebars:eu,views:ef})}})();return{addAutocompleter:et.addAutocompleter,addButton:et.addButton,addContextForm:et.addContextForm,addContextMenu:et.addContextMenu,addContextToolbar:et.addContextToolbar,addIcon:et.addIcon,addMenuButton:et.addMenuButton,addMenuItem:et.addMenuItem,addNestedMenuItem:et.addNestedMenuItem,addSidebar:et.addSidebar,addSplitButton:et.addSplitButton,addToggleButton:et.addToggleButton,addGroupToolbarButton:et.addGroupToolbarButton,addToggleMenuItem:et.addToggleMenuItem,addView:et.addView,getAll:et.getAll}},u8=Oa.DOM,u5=tz.extend,u6=tz.each;let BT=class BT{constructor(et,er,ei){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=ei,this.documentBaseUrl=ei.documentBaseURL,u5(this,uQ),this.id=et,this.hidden=!1;let es=LO(uV||uU,uV,er,ei.defaultOptions,er);this.options=((et,er)=>{let ei={},es={},r=(et,er,ei)=>{let ed=yT(er,ei);return vT(ed)?(es[et]=ed.value,!0):(console.warn(bT(`Invalid value passed for the ${et} option`,ed)),!1)},s=et=>ke(ei,et);return{register:(et,ed)=>{let ec=eP(ed.processor)?(et=>{let er=(()=>{switch(et){case"array":return eM;case"boolean":return eV;case"function":return eH;case"number":return ej;case"object":return eF;case"string":return eP;case"string[]":return hT;case"object[]":return et=>k(et,eF);case"regexp":return et=>u(et,RegExp);default:return eq}})();return ei=>yT(ei,er,`The value must be a ${et}.`)})(ed.processor):ed.processor,eu=((et,er,ei)=>{if(!eU(er)){let es=yT(er,ei);if(vT(es))return es.value;console.error(bT(`Invalid default value passed for the "${et}" option`,es))}})(et,ed.default,ec);ei[et]={...ed,default:eu,processor:ec},xe(es,et).orThunk(()=>xe(er,et)).each(er=>r(et,er,ec))},isRegistered:s,get:et=>xe(es,et).orThunk(()=>xe(ei,et).map(et=>et.default)).getOrUndefined(),set:(et,er)=>{if(s(et)){let es=ei[et];return es.immutable?(console.error(`"${et}" is an immutable option and cannot be updated`),!1):r(et,er,es.processor)}return console.warn(`"${et}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:et=>{let er=s(et);return er&&delete es[et],er},isSet:et=>ke(es,et)}})(0,es),(et=>{let er=et.options.register;er("id",{processor:"string",default:et.id}),er("selector",{processor:"string"}),er("target",{processor:"object"}),er("suffix",{processor:"string"}),er("cache_suffix",{processor:"string"}),er("base_url",{processor:"string"}),er("referrer_policy",{processor:"string",default:""}),er("language_load",{processor:"boolean",default:!0}),er("inline",{processor:"boolean",default:!1}),er("iframe_attrs",{processor:"object",default:{}}),er("doctype",{processor:"string",default:"<!DOCTYPE html>"}),er("document_base_url",{processor:"string",default:et.documentBaseUrl}),er("body_id",{processor:yl(et,"tinymce"),default:"tinymce"}),er("body_class",{processor:yl(et),default:""}),er("content_security_policy",{processor:"string",default:""}),er("br_in_pre",{processor:"boolean",default:!0}),er("forced_root_block",{processor:et=>{let er=eP(et)&&Ge(et);return er?{value:et,valid:er}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),er("forced_root_block_attrs",{processor:"object",default:{}}),er("newline_behavior",{processor:et=>{let er=H(["block","linebreak","invert","default"],et);return er?{value:et,valid:er}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),er("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),er("no_newline_selector",{processor:"string",default:""}),er("keep_styles",{processor:"boolean",default:!0}),er("end_container_on_empty_block",{processor:et=>eV(et)||eP(et)?{valid:!0,value:et}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),er("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),er("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),er("font_size_classes",{processor:"string",default:""}),er("automatic_uploads",{processor:"boolean",default:!0}),er("images_reuse_filename",{processor:"boolean",default:!1}),er("images_replace_blob_uris",{processor:"boolean",default:!0}),er("icons",{processor:"string",default:""}),er("icons_url",{processor:"string",default:""}),er("images_upload_url",{processor:"string",default:""}),er("images_upload_base_path",{processor:"string",default:""}),er("images_upload_credentials",{processor:"boolean",default:!1}),er("images_upload_handler",{processor:"function"}),er("language",{processor:"string",default:"en"}),er("language_url",{processor:"string",default:""}),er("entity_encoding",{processor:"string",default:"named"}),er("indent",{processor:"boolean",default:!0}),er("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),er("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),er("indent_use_margin",{processor:"boolean",default:!1}),er("indentation",{processor:"string",default:"40px"}),er("content_css",{processor:et=>{let er=!1===et||eP(et)||k(et,eP);return er?eP(et)?{value:q(et.split(","),e0),valid:er}:eM(et)?{value:et,valid:er}:!1===et?{value:[],valid:er}:{value:et,valid:er}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:oG(et)?[]:["default"]}),er("content_style",{processor:"string"}),er("content_css_cors",{processor:"boolean",default:!1}),er("font_css",{processor:et=>{let er=eP(et)||k(et,eP);return er?{value:eM(et)?et:q(et.split(","),e0),valid:er}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),er("inline_boundaries",{processor:"boolean",default:!0}),er("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),er("object_resizing",{processor:et=>{let er=eV(et)||eP(et);return er?!1===et||nV.isiPhone()||nV.isiPad()?{value:"",valid:er}:{value:!0===et?"table,img,figure.image,div,video,iframe":et,valid:er}:{valid:!1,message:"Must be boolean or a string"}},default:!nU}),er("resize_img_proportional",{processor:"boolean",default:!0}),er("event_root",{processor:"object"}),er("service_message",{processor:"string"}),er("theme",{processor:et=>!1===et||eP(et)||eH(et),default:"silver"}),er("theme_url",{processor:"string"}),er("formats",{processor:"object"}),er("format_empty_lines",{processor:"boolean",default:!1}),er("format_noneditable_selector",{processor:"string",default:""}),er("preview_styles",{processor:et=>{let er=!1===et||eP(et);return er?{value:!1===et?"":et,valid:er}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),er("custom_ui_selector",{processor:"string",default:""}),er("hidden_input",{processor:"boolean",default:!0}),er("submit_patch",{processor:"boolean",default:!0}),er("encoding",{processor:"string"}),er("add_form_submit_trigger",{processor:"boolean",default:!0}),er("add_unload_trigger",{processor:"boolean",default:!0}),er("custom_undo_redo_levels",{processor:"number",default:0}),er("disable_nodechange",{processor:"boolean",default:!1}),er("readonly",{processor:"boolean",default:!1}),er("editable_root",{processor:"boolean",default:!0}),er("plugins",{processor:"string[]",default:[]}),er("external_plugins",{processor:"object"}),er("forced_plugins",{processor:"string[]"}),er("model",{processor:"string",default:et.hasPlugin("rtc")?"plugin":"dom"}),er("model_url",{processor:"string"}),er("block_unsupported_drop",{processor:"boolean",default:!0}),er("visual",{processor:"boolean",default:!0}),er("visual_table_class",{processor:"string",default:"mce-item-table"}),er("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),er("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),er("setup",{processor:"function"}),er("init_instance_callback",{processor:"function"}),er("url_converter",{processor:"function",default:et.convertURL}),er("url_converter_scope",{processor:"object",default:et}),er("urlconverter_callback",{processor:"function"}),er("allow_conditional_comments",{processor:"boolean",default:!1}),er("allow_html_data_urls",{processor:"boolean",default:!1}),er("allow_svg_data_urls",{processor:"boolean"}),er("allow_html_in_named_anchor",{processor:"boolean",default:!1}),er("allow_script_urls",{processor:"boolean",default:!1}),er("allow_unsafe_link_target",{processor:"boolean",default:!1}),er("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),er("fix_list_elements",{processor:"boolean",default:!1}),er("preserve_cdata",{processor:"boolean",default:!1}),er("remove_trailing_brs",{processor:"boolean",default:!0}),er("pad_empty_with_br",{processor:"boolean",default:!1}),er("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),er("element_format",{processor:"string",default:"html"}),er("entities",{processor:"string"}),er("schema",{processor:"string",default:"html5"}),er("convert_urls",{processor:"boolean",default:!0}),er("relative_urls",{processor:"boolean",default:!0}),er("remove_script_host",{processor:"boolean",default:!0}),er("custom_elements",{processor:"string"}),er("extended_valid_elements",{processor:"string"}),er("invalid_elements",{processor:"string"}),er("invalid_styles",{processor:vl}),er("valid_children",{processor:"string"}),er("valid_classes",{processor:vl}),er("valid_elements",{processor:"string"}),er("valid_styles",{processor:vl}),er("verify_html",{processor:"boolean",default:!0}),er("auto_focus",{processor:et=>eP(et)||!0===et}),er("browser_spellcheck",{processor:"boolean",default:!1}),er("protect",{processor:"array"}),er("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),er("deprecation_warnings",{processor:"boolean",default:!0}),er("a11y_advanced_options",{processor:"boolean",default:!1}),er("api_key",{processor:"string"}),er("paste_block_drop",{processor:"boolean",default:!1}),er("paste_data_images",{processor:"boolean",default:!0}),er("paste_preprocess",{processor:"function"}),er("paste_postprocess",{processor:"function"}),er("paste_webkit_styles",{processor:"string",default:"none"}),er("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),er("paste_merge_formats",{processor:"boolean",default:!0}),er("smart_paste",{processor:"boolean",default:!0}),er("paste_as_text",{processor:"boolean",default:!1}),er("paste_tab_spaces",{processor:"number",default:4}),er("text_patterns",{processor:et=>k(et,eF)||!1===et?{value:ml(!1===et?[]:et),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),er("text_patterns_lookup",{processor:et=>eH(et)?{value:er=>{let ei=et(er);return ml(ei)},valid:!0}:{valid:!1,message:"Must be a single function"},default:et=>[]}),er("noneditable_class",{processor:"string",default:"mceNonEditable"}),er("editable_class",{processor:"string",default:"mceEditable"}),er("noneditable_regexp",{processor:et=>k(et,hl)?{value:et,valid:!0}:hl(et)?{value:[et],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),er("table_tab_navigation",{processor:"boolean",default:!0}),er("highlight_on_focus",{processor:"boolean",default:!1}),er("xss_sanitization",{processor:"boolean",default:!0}),er("details_initial_state",{processor:et=>{let er=H(["inherited","collapsed","expanded"],et);return er?{value:et,valid:er}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),er("details_serialized_state",{processor:et=>{let er=H(["inherited","collapsed","expanded"],et);return er?{value:et,valid:er}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),er("init_content_sync",{processor:"boolean",default:!1}),er("newdocument_content",{processor:"string",default:""}),et.on("ScriptsLoaded",()=>{er("directionality",{processor:"string",default:nl.isRtl()?"rtl":void 0}),er("placeholder",{processor:"string",default:nH.getAttrib(et.getElement(),"placeholder")})})})(this);let ed=this.options.get;ed("deprecation_warnings")&&(((et,er)=>{let ei=ew(et),es=ow(er),ed=es.length>0,ec=ei.length>0,eu="mobile"===er.theme;if(ed||ec||eu){let et=eu?`

Themes:
- mobile`:"",er=ed?`

Plugins:
- ${es.join("\n- ")}`:"",ef=ec?`

Options:
- ${ei.join("\n- ")}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+et+er+ef)}})(er,es),((et,er)=>{let ei=tw(et),es=rw(er),ed=es.length>0,ec=ei.length>0;if(ed||ec){let et=ed?`

Plugins:
- ${es.map(sw).join("\n- ")}`:"",er=ec?`

Options:
- ${ei.join("\n- ")}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+et+er)}})(er,es));let ec=ed("suffix");ec&&(ei.suffix=ec),this.suffix=ei.suffix;let eu=ed("base_url");eu&&ei._setBaseUrl(eu),this.baseUri=ei.baseURI;let ef=os(this);ef&&(Ba.ScriptLoader._setReferrerPolicy(ef),Oa.DOM.styleSheetLoader._setReferrerPolicy(ef));let ey=o1(this);C(ey)&&Oa.DOM.styleSheetLoader._setContentCssCors(ey),Fa.languageLoad=ed("language_load"),Fa.baseURL=ei.baseURL,this.setDirty(!1),this.documentBaseURI=new qy(nq(this),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=oG(this),this.hasVisual=o5(this),this.shortcuts=new NT(this),this.editorCommands=new JO(this),YO(this);let eC=ed("cache_suffix");eC&&(tF.cacheSuffix=eC.replace(/^[\?\&]+/,"")),this.ui={registry:RT(),styleSheetLoader:void 0,show:E,hide:E,setEnabled:E,isEnabled:eq},this.mode=(et=>{let er=Da("design"),ei=Da({design:{activate:E,deactivate:E,editorReadOnly:!1},readonly:{activate:E,deactivate:E,editorReadOnly:!0}});return et.serializer?rT(et):et.on("PreInit",()=>{rT(et)}),et.on("ShowCaret",er=>{oT(et)&&er.preventDefault()}),et.on("ObjectSelected",er=>{oT(et)&&er.preventDefault()}),{isReadOnly:()=>oT(et),set:es=>((et,er,ei,es)=>{if(es!==ei.get()){if(!ke(er,es))throw Error(`Editor mode '${es}' is invalid`);et.initialized?wT(et,ei,er,es):et.on("init",()=>wT(et,ei,er,es))}})(et,ei.get(),er,es),get:()=>er.get(),register:(et,er)=>{ei.set(((et,er,ei)=>{if(H(uZ,er))throw Error(`Cannot override default mode ${er}`);return{...et,[er]:{...ei,deactivate:()=>{try{ei.deactivate()}catch(et){console.error(`problem while deactivating editor mode ${er}:`,et)}}}}})(ei.get(),et,er))}}})(this),ei.dispatch("SetupEditor",{editor:this});let eS=o7(this);eH(eS)&&eS.call(this,this)}render(){(et=>{let er=et.id;nl.setCode(od(et));let n=()=>{uM.unbind(window,"ready",n),et.render()};if(!Ca.Event.domLoaded)return void uM.bind(window,"ready",n);if(!et.getElement())return;let ei=pn(et.getElement()),es=rn(ei);et.on("remove",()=>{W(ei.dom.attributes,et=>on(ei,et.name)),Zt(ei,es)}),et.ui.styleSheetLoader=rH.forElement(ei,{contentCssCors:o1(et),referrerPolicy:os(et)}),oG(et)?et.inline=!0:(et.orgVisibility=et.getElement().style.visibility,et.getElement().style.visibility="hidden");let ed=et.getElement().form||uM.getParent(er,"form");ed&&(et.formElement=ed,oW(et)&&!tX(et.getElement())&&(uM.insertAfter(uM.create("input",{type:"hidden",name:er}),er),et.hasHiddenInput=!0),et.formEventDelegate=er=>{et.dispatch(er.type,er)},uM.bind(ed,"submit reset",et.formEventDelegate),et.on("reset",()=>{et.resetContent()}),!oK(et)||ed.submit.nodeType||ed.submit.length||ed._mceOldSubmit||(ed._mceOldSubmit=ed.submit,ed.submit=()=>(et.editorManager.triggerSave(),et.setDirty(!1),ed._mceOldSubmit(ed)))),et.windowManager=yw(et),et.notificationManager=hw(et),"xml"===et.options.get("encoding")&&et.on("GetContent",et=>{et.save&&(et.content=uM.encode(et.content))}),oY(et)&&et.on("submit",()=>{et.initialized&&et.save()}),oX(et)&&(et._beforeUnload=()=>{!et.initialized||et.destroyed||et.isHidden()||et.save({format:"raw",no_events:!0,set_dirty:!1})},et.editorManager.on("BeforeUnload",et._beforeUnload)),et.editorManager.add(et),_O(et,et.suffix)})(this)}focus(et){this.execCommand("mceFocus",!1,et)}hasFocus(){return xg(this)}translate(et){return nl.translate(et)}getParam(et,er,ei){let es=this.options;return es.isRegistered(et)||(C(ei)?es.register(et,{processor:ei,default:er}):es.register(et,{processor:eq,default:er})),es.isSet(et)||eU(er)?es.get(et):er}hasPlugin(et,er){return!(!H(o2(this),et)||er&&void 0===dd.get(et))}nodeChanged(et){this._nodeChangeDispatcher.nodeChanged(et)}addCommand(et,er,ei){this.editorCommands.addCommand(et,er,ei)}addQueryStateHandler(et,er,ei){this.editorCommands.addQueryStateHandler(et,er,ei)}addQueryValueHandler(et,er,ei){this.editorCommands.addQueryValueHandler(et,er,ei)}addShortcut(et,er,ei,es){this.shortcuts.add(et,er,ei,es)}execCommand(et,er,ei,es){return this.editorCommands.execCommand(et,er,ei,es)}queryCommandState(et){return this.editorCommands.queryCommandState(et)}queryCommandValue(et){return this.editorCommands.queryCommandValue(et)}queryCommandSupported(et){return this.editorCommands.queryCommandSupported(et)}show(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(u8.show(this.getContainer()),u8.hide(this.id)),this.load(),this.dispatch("show"))}hide(){this.hidden||(this.save(),this.inline?(this.getBody().contentEditable="false",this===this.editorManager.focusedEditor&&(this.editorManager.focusedEditor=null)):(u8.hide(this.getContainer()),u8.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(et,er){this.dispatch("ProgressState",{state:et,time:er})}load(et={}){let er=this.getElement();if(this.removed)return"";if(er){let ei={...et,load:!0},es=tX(er)?er.value:er.innerHTML,ed=this.setContent(es,ei);return ei.no_events||this.dispatch("LoadContent",{...ei,element:er}),ed}return""}save(et={}){let er=this,ei=er.getElement();if(!ei||!er.initialized||er.removed)return"";let es={...et,save:!0,element:ei},ed=er.getContent(es),ec={...es,content:ed};if(ec.no_events||er.dispatch("SaveContent",ec),"raw"===ec.format&&er.dispatch("RawSaveContent",ec),ed=ec.content,tX(ei))ei.value=ed;else{!et.is_removing&&er.inline||(ei.innerHTML=ed);let es=u8.getParent(er.id,"form");es&&u6(es.elements,et=>et.name!==er.id||(et.value=ed,!1))}return ec.element=es.element=ei=null,!1!==ec.set_dirty&&er.setDirty(!1),ed}setContent(et,er){return GC(this,et,er)}getContent(et){return((et,er={})=>{var ei;let es=(ei=er.format?er.format:"html",{...er,format:ei,get:!0,getInner:!0});return sC(et,es).fold(R,er=>{let ei=IC(et).editor.getContent(er);return aC(et,ei,er)})})(this,et)}insertContent(et,er){er&&(et=u5({content:et},er)),this.execCommand("mceInsertContent",!1,et)}resetContent(et){void 0===et?GC(this,this.startContent,{format:"raw"}):GC(this,et),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(et){let er=!this.isNotDirty;this.isNotDirty=!et,et&&et!==er&&this.dispatch("dirty")}getContainer(){return this.container||(this.container=this.editorContainer||u8.get(this.id+"_parent")),this.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=u8.get(this.id)),this.targetElm}getWin(){if(!this.contentWindow){let et=this.iframeElement;et&&(this.contentWindow=et.contentWindow)}return this.contentWindow}getDoc(){if(!this.contentDocument){let et=this.getWin();et&&(this.contentDocument=et.document)}return this.contentDocument}getBody(){var et,er;let ei=this.getDoc();return null!==(er=null!==(et=this.bodyElement)&&void 0!==et?et:null==ei?void 0:ei.body)&&void 0!==er?er:null}convertURL(et,er,ei){let es=this.options.get,ed=ar(this);return eH(ed)?ed.call(this,et,ei,!0,er):!es("convert_urls")||"link"===ei||eF(ei)&&"LINK"===ei.nodeName||0===et.indexOf("file:")||0===et.length?et:es("relative_urls")?this.documentBaseURI.toRelative(et):et=this.documentBaseURI.toAbsolute(et,es("remove_script_host"))}addVisual(et){((et,er)=>{FC(et).editor.addVisual(er)})(this,et)}setEditableRoot(et){this._editableRoot!==et&&(this._editableRoot=et,this.readonly||(this.getBody().contentEditable=String(this.hasEditableRoot()),this.nodeChanged()),((et,er)=>{et.dispatch("EditableRootStateChange",{state:er})})(this,et))}hasEditableRoot(){return this._editableRoot}remove(){(et=>{if(!et.removed){let{_selectionOverrides:er,editorUpload:ei}=et,es=et.getBody(),ed=et.getElement();es&&et.save({is_removing:!0}),et.removed=!0,et.unbindAllNativeEvents(),et.hasHiddenInput&&C(null==ed?void 0:ed.nextSibling)&&s5.remove(ed.nextSibling),(et=>{et.dispatch("remove")})(et),et.editorManager.remove(et),!et.inline&&es&&s5.setStyle(et.id,"display",et.orgDisplay),(et=>{et.dispatch("detach")})(et),s5.remove(et.getContainer()),iw(er),iw(ei),et.destroy()}})(this)}destroy(et){((et,er)=>{let{selection:ei,dom:es}=et;et.destroyed||(er||et.removed?(er||(et.editorManager.off("beforeunload",et._beforeUnload),et.theme&&et.theme.destroy&&et.theme.destroy(),iw(ei),iw(es)),(et=>{let er=et.formElement;er&&(er._mceOldSubmit&&(er.submit=er._mceOldSubmit,delete er._mceOldSubmit),s5.unbind(er,"submit reset",et.formEventDelegate))})(et),(et=>{et.contentAreaContainer=et.formElement=et.container=et.editorContainer=null,et.bodyElement=et.contentDocument=et.contentWindow=null,et.iframeElement=et.targetElm=null;let er=et.selection;if(er){let ei=er.dom;et.selection=er.win=er.dom=ei.doc=null}})(et),et.destroyed=!0):et.remove())})(this,et)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}};let u9=Oa.DOM,u4=tz.each,u7,me=!1,mt=[],FT=et=>{let er=et.type;u4(ma.get(),ei=>{switch(er){case"scroll":ei.dispatch("ScrollWindow",et);break;case"resize":ei.dispatch("ResizeWindow",et)}})},UT=et=>{if(et!==me){let er=Oa.DOM;et?(er.bind(window,"resize",FT),er.bind(window,"scroll",FT)):(er.unbind(window,"resize",FT),er.unbind(window,"scroll",FT)),me=et}},zT=et=>{let er=mt;return mt=G(mt,er=>et!==er),ma.activeEditor===et&&(ma.activeEditor=mt.length>0?mt[0]:null),ma.focusedEditor===et&&(ma.focusedEditor=null),er.length!==mt.length},mr="CSS1Compat"!==document.compatMode,ma={...uX,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"7.2",releaseDate:"2023-10-25",i18n:nl,activeEditor:null,focusedEditor:null,setup(){let et="",er="",ei=qy.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(ei)&&(ei=ei.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(ei)||(ei+="/"));let es=window.tinymce||window.tinyMCEPreInit;if(es)et=es.base||es.baseURL,er=es.suffix;else{let ei=document.getElementsByTagName("script");for(let es=0;es<ei.length;es++){let ed=ei[es].src||"";if(""===ed)continue;let ec=ed.substring(ed.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(ed)){-1!==ec.indexOf(".min")&&(er=".min"),et=ed.substring(0,ed.lastIndexOf("/"));break}}if(!et&&document.currentScript){let ei=document.currentScript.src;-1!==ei.indexOf(".min")&&(er=".min"),et=ei.substring(0,ei.lastIndexOf("/"))}}this.baseURL=new qy(ei).toAbsolute(et),this.documentBaseURL=ei,this.baseURI=new qy(this.baseURL),this.suffix=er,this.on("AddEditor",O(vg,this)),this.on("RemoveEditor",O(yg,this))},overrideDefaults(et){let er=et.base_url;er&&this._setBaseUrl(er);let ei=et.suffix;ei&&(this.suffix=ei),this.defaultOptions=et;let es=et.plugin_base_urls;void 0!==es&&ge(es,(et,er)=>{Fa.PluginManager.urls[er]=et})},init(et){let er;let ei=this,es=tz.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),r=et=>{er=et},s=()=>{let er,ed=0,ec=[];u9.unbind(window,"ready",s),(er=>{let es=et.onpageload;es&&es.apply(ei,[])})(),er=((et,er)=>{let ei=[],es=eH(er)?et=>$(ei,ei=>er(ei,et)):et=>H(ei,et);for(let er=0,ed=et.length;er<ed;er++){let ed=et[er];es(ed)||ei.push(ed)}return ei})(tF.browser.isIE()||tF.browser.isEdge()?(Ew("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):mr?(Ew("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):eP(et.selector)?u9.select(et.selector):C(et.target)?[et.target]:[]),tz.each(er,et=>{var er;(er=ei.get(et.id))&&er.initialized&&!(er.getContainer()||er.getBody()).parentNode&&(zT(er),er.unbindAllNativeEvents(),er.destroy(!0),er.removed=!0)}),0===(er=tz.grep(er,et=>!ei.get(et.id))).length?r([]):u4(er,eu=>{let ef;et.inline&&eu.tagName.toLowerCase() in es?Ew("Could not initialize inline editor on invalid inline target element",eu):((et,es,eu)=>{let ef=new BT(et,es,ei);ec.push(ef),ef.on("init",()=>{++ed===er.length&&r(ec)}),ef.targetElm=ef.targetElm||eu,ef.render()})(((ef=eu.id)||(ef=xe(eu,"name").filter(et=>!u9.get(et)).getOrThunk(u9.uniqueId),eu.setAttribute("id",ef)),ef),et,eu)})};return u9.bind(window,"ready",s),new Promise(et=>{er?et(er):r=er=>{et(er)}})},get(et){return 0==arguments.length?mt.slice(0):eP(et)?J(mt,er=>er.id===et).getOr(null):ej(et)&&mt[et]?mt[et]:null},add(et){let er=this,ei=er.get(et.id);return ei===et||(null===ei&&mt.push(et),UT(!0),er.activeEditor=et,er.dispatch("AddEditor",{editor:et}),u7||(u7=et=>{let ei=er.dispatch("BeforeUnload");if(ei.returnValue)return et.preventDefault(),et.returnValue=ei.returnValue,ei.returnValue},window.addEventListener("beforeunload",u7))),et},createEditor(et,er){return this.add(new BT(et,er,this))},remove(et){let er;let ei=this;if(et){if(!eP(et))return er=et,ez(ei.get(er.id))?null:(zT(er)&&ei.dispatch("RemoveEditor",{editor:er}),0===mt.length&&window.removeEventListener("beforeunload",u7),er.remove(),UT(mt.length>0),er);u4(u9.select(et),et=>{(er=ei.get(et.id))&&ei.remove(er)})}else for(let et=mt.length-1;et>=0;et--)ei.remove(mt[et])},execCommand(et,er,ei){var es;let ed=eF(ei)?null!==(es=ei.id)&&void 0!==es?es:ei.index:ei;switch(et){case"mceAddEditor":if(!this.get(ed)){let et=ei.options;new BT(ed,et,this).render()}return!0;case"mceRemoveEditor":{let et=this.get(ed);return et&&et.remove(),!0}case"mceToggleEditor":{let et=this.get(ed);return et?et.isHidden()?et.show():et.hide():this.execCommand("mceAddEditor",!1,ei),!0}}return!!this.activeEditor&&this.activeEditor.execCommand(et,er,ei)},triggerSave:()=>{u4(mt,et=>{et.save()})},addI18n:(et,er)=>{nl.add(et,er)},translate:et=>nl.translate(et),setActive(et){let er=this.activeEditor;this.activeEditor!==et&&(er&&er.dispatch("deactivate",{relatedTarget:et}),et.dispatch("activate",{relatedTarget:er})),this.activeEditor=et},_setBaseUrl(et){this.baseURL=new qy(this.documentBaseURL).toAbsolute(et.replace(/\/+$/,"")),this.baseURI=new qy(this.baseURL)}};ma.setup();let md=(()=>{let et=za();return{FakeClipboardItem:et=>({items:et,types:eX(et),getType:er=>xe(et,er).getOrUndefined()}),write:er=>{et.set(er)},read:()=>et.get().getOrUndefined(),clear:et.clear}})(),mg=Math.min,mf=Math.max,mp=Math.round,KT=(et,er,ei)=>{let es=er.x,ed=er.y,ec=et.w,eu=et.h,ef=er.w,ey=er.h,eC=(ei||"").split("");return"b"===eC[0]&&(ed+=ey),"r"===eC[1]&&(es+=ef),"c"===eC[0]&&(ed+=mp(ey/2)),"c"===eC[1]&&(es+=mp(ef/2)),"b"===eC[3]&&(ed-=eu),"r"===eC[4]&&(es-=ec),"c"===eC[3]&&(ed-=mp(eu/2)),"c"===eC[4]&&(es-=mp(ec/2)),GT(es,ed,ec,eu)},GT=(et,er,ei,es)=>({x:et,y:er,w:ei,h:es}),mb=(()=>{let et={},er={};return{load:(ei,es)=>{let ed=`Script at URL "${es}" failed to load`,ec=`Script at URL "${es}" did not call \`tinymce.Resource.add('${ei}', data)\` within 1 second`;if(void 0!==et[ei])return et[ei];{let eu=new Promise((et,eu)=>{let ef=((et,er,ei=1e3)=>{let es=!1,ed=null,s=et=>(...er)=>{es||(es=!0,null!==ed&&(clearTimeout(ed),ed=null),et.apply(null,er))},ec=s(et),eu=s(er);return{start:(...et)=>{es||null!==ed||(ed=setTimeout(()=>eu.apply(null,et),ei))},resolve:ec,reject:eu}})(et,eu);er[ei]=ef.resolve,Ba.ScriptLoader.loadScript(es).then(()=>ef.start(ec),()=>ef.reject(ed))});return et[ei]=eu,eu}},add:(ei,es)=>{void 0!==er[ei]&&(er[ei](es),delete er[ei]),et[ei]=Promise.resolve(es)},unload:er=>{delete et[er]}}})();try{let et="__storage_test__";(ei=window.localStorage).setItem(et,et),ei.removeItem(et)}catch(et){ei=(()=>{let et={},er=[],ei={getItem:er=>et[er]||null,setItem:(ei,es)=>{er.push(ei),et[ei]=String(es)},key:et=>er[et],removeItem:ei=>{er=er.filter(et=>et===ei),delete et[ei]},clear:()=>{er=[],et={}},length:0};return Object.defineProperty(ei,"length",{get:()=>er.length,configurable:!1,enumerable:!1}),ei})()}let my={geom:{Rect:{inflate:(et,er,ei)=>GT(et.x-er,et.y-ei,et.w+2*er,et.h+2*ei),relativePosition:KT,findBestRelativePosition:(et,er,ei,es)=>{for(let ed=0;ed<es.length;ed++){let ec=KT(et,er,es[ed]);if(ec.x>=ei.x&&ec.x+ec.w<=ei.w+ei.x&&ec.y>=ei.y&&ec.y+ec.h<=ei.h+ei.y)return es[ed]}return null},intersect:(et,er)=>{let ei=mf(et.x,er.x),es=mf(et.y,er.y),ed=mg(et.x+et.w,er.x+er.w),ec=mg(et.y+et.h,er.y+er.h);return ed-ei<0||ec-es<0?null:GT(ei,es,ed-ei,ec-es)},clamp:(et,er,ei)=>{let es=et.x,ed=et.y,ec=et.x+et.w,eu=et.y+et.h,ef=er.x+er.w,ey=er.y+er.h,eC=mf(0,er.x-es),eS=mf(0,er.y-ed),e_=mf(0,ec-ef),eR=mf(0,eu-ey);return es+=eC,ed+=eS,ei&&(ec+=eC,eu+=eS,es-=e_,ed-=eR),GT(es,ed,(ec-=e_)-es,(eu-=eR)-ed)},create:GT,fromClientRect:et=>GT(et.left,et.top,et.width,et.height)}},util:{Delay:lM,Tools:tz,VK:lr,URI:qy,EventDispatcher:iT,Observable:uX,I18n:nl,LocalStorage:ei,ImageUploader:et=>{let er=Nw(),ei=Tw(et,er);return{upload:(er,es=!0)=>ei.upload(er,es?Ow(et):void 0)}}},dom:{EventUtils:Ca,TreeWalker:zo,TextSeeker:ai,DOMUtils:Oa,ScriptLoader:Ba,RangeUtils:Df,Serializer:KC,StyleSheetLoader:Ls,ControlSelection:sf,BookmarkManager:Wm,Selection:qC,Event:Ca.Event},html:{Styles:ua,Entities:rQ,Node:Fg,Schema:ca,DomParser:oC,Writer:Yg,Serializer:Xg},Env:tF,AddOnManager:Fa,Annotator:Vm,Formatter:$w,UndoManager:Vw,EditorCommands:JO,WindowManager:yw,NotificationManager:hw,EditorObservable:uQ,Shortcuts:NT,Editor:BT,FocusManager:lF,EditorManager:ma,DOM:Oa.DOM,ScriptLoader:Ba.ScriptLoader,PluginManager:dd,ThemeManager:dc,ModelManager:s9,IconManager:s6,Resource:mb,FakeClipboard:md,trim:tz.trim,isArray:tz.isArray,is:tz.is,toArray:tz.toArray,makeMap:tz.makeMap,each:tz.each,map:tz.map,grep:tz.grep,inArray:tz.inArray,extend:tz.extend,walk:tz.walk,resolve:tz.resolve,explode:tz.explode,_addCacheSuffix:tz._addCacheSuffix},mk=tz.extend(ma,my);window.tinymce=mk,window.tinyMCE=mk,(et=>{if("object"==typeof module)try{module.exports=et}catch(et){}})(mk)}();