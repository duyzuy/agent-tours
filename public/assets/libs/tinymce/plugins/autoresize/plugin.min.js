!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env");let o=e=>t=>t.options.get(e),i=o("min_height"),s=o("max_height"),n=o("autoresize_overflow_padding"),r=o("autoresize_bottom_margin"),l=(e,t)=>{let i=e.getBody();i&&(i.style.overflowY=t?"":"hidden",t||(i.scrollTop=0))},g=(e,t,i,s)=>{var n;let r=parseInt(null!==(n=e.getStyle(t,i,s))&&void 0!==n?n:"",10);return isNaN(r)?0:r},a=(e,r,d,f)=>{var u;let m=e.dom,h=e.getDoc();if(!h)return;if(e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen())return void l(e,!0);let c=h.documentElement,p=f?f():n(e),y=null!==(u=i(e))&&void 0!==u?u:e.getElement().offsetHeight,S=y,v=g(m,c,"margin-top",!0),C=g(m,c,"margin-bottom",!0),b=c.offsetHeight+v+C+p;b<0&&(b=0);let w=e.getContainer().offsetHeight-e.getContentAreaContainer().offsetHeight;b+w>y&&(S=b+w);let z=s(e);if(z&&S>z?(S=z,l(e,!0)):l(e,!1),S!==r.get()){let i=S-r.get();if(m.setStyle(e.getContainer(),"height",S+"px"),r.set(S),(e=>{e.dispatch("ResizeEditor")})(e),t.browser.isSafari()&&(t.os.isMacOS()||t.os.isiOS())){let t=e.getWin();t.scrollTo(t.pageXOffset,t.pageYOffset)}e.hasFocus()&&"setcontent"===(null==d?void 0:d.type.toLowerCase())&&(!0===d.selection||!0===d.paste)&&e.selection.scrollIntoView(),(t.browser.isSafari()||t.browser.isChromium())&&i<0&&a(e,r,d,f)}};e.add("autoresize",e=>{if((e=>{let t=e.options.register;t("autoresize_overflow_padding",{processor:"number",default:1}),t("autoresize_bottom_margin",{processor:"number",default:50})})(e),e.options.isSet("resize")||e.options.set("resize",!1),!e.inline){let i,s,d,f;let u=(i=0,{get:()=>i,set:e=>{i=e}});((e,t)=>{e.addCommand("mceAutoResize",()=>{a(e,t)})})(e,u),f=()=>r(e),e.on("init",i=>{s=0;let r=n(e),d=e.dom;d.setStyles(e.getDoc().documentElement,{height:"auto"}),t.browser.isEdge()||t.browser.isIE()?d.setStyles(e.getBody(),{paddingLeft:r,paddingRight:r,"min-height":0}):d.setStyles(e.getBody(),{paddingLeft:r,paddingRight:r}),a(e,u,i,f),s+=1}),e.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",t=>{if(1===s)d=e.getContainer().offsetHeight,a(e,u,t,f),s+=1;else if(2===s){let t=d<e.getContainer().offsetHeight;if(t){let t=e.dom,i=e.getDoc();t.setStyles(i.documentElement,{"min-height":0}),t.setStyles(e.getBody(),{"min-height":"inherit"})}f=t?()=>0:f,s+=1}else a(e,u,t,f)})}})}();