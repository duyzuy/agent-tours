!function(){"use strict";let e;let Cell=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");let get$2=e=>({isEnabled:()=>e.get()}),fireVisualChars=(e,t)=>e.dispatch("VisualChars",{state:t}),hasProto=(e,t,r)=>{var l;return!!r(e,t.prototype)||(null===(l=e.constructor)||void 0===l?void 0:l.name)===t.name},typeOf=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&hasProto(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},isType$1=e=>t=>typeOf(t)===e,isSimpleType=e=>t=>typeof t===e,r=isType$1("string"),l=isType$1("object"),isNull=e=>null===e,o=isSimpleType("boolean"),isNullable=e=>null==e,isNonNullable=e=>!isNullable(e),a=isSimpleType("number");let Optional=class Optional{constructor(e,t){this.tag=e,this.value=t}static some(e){return new Optional(!0,e)}static none(){return Optional.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?Optional.some(e(this.value)):Optional.none()}bind(e){return this.tag?e(this.value):Optional.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:Optional.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return isNonNullable(e)?Optional.some(e):Optional.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Optional.singletonNone=new Optional(!1);let map=(e,t)=>{let r=e.length,l=Array(r);for(let o=0;o<r;o++){let r=e[o];l[o]=t(r,o)}return l},each$1=(e,t)=>{for(let r=0,l=e.length;r<l;r++){let l=e[r];t(l,r)}},filter=(e,t)=>{let r=[];for(let l=0,o=e.length;l<o;l++){let o=e[l];t(o,l)&&r.push(o)}return r},s=Object.keys,each=(e,t)=>{let r=s(e);for(let l=0,o=r.length;l<o;l++){let o=r[l],a=e[o];t(a,o)}},i="undefined"!=typeof window?window:Function("return this;")(),path=(e,t)=>{let r=null!=t?t:i;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r},resolve=(e,t)=>{let r=e.split(".");return path(r,t)},unsafe=(e,t)=>resolve(e,t),getOrDie=(e,t)=>{let r=unsafe(e,t);if(null==r)throw Error(e+" not available on this browser");return r},n=Object.getPrototypeOf,sandHTMLElement=e=>getOrDie("HTMLElement",e),isPrototypeOf=e=>{let t=resolve("ownerDocument.defaultView",e);return l(e)&&(sandHTMLElement(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(n(e).constructor.name))},type=e=>e.dom.nodeType,value=e=>e.dom.nodeValue,isType=e=>t=>type(t)===e,isHTMLElement=e=>u(e)&&isPrototypeOf(e.dom),u=isType(1),d=isType(3),rawSet=(e,t,l)=>{if(r(l)||o(l)||a(l))e.setAttribute(t,l+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",l,":: Element ",e),Error("Attribute value was not simple")},set=(e,t,r)=>{rawSet(e.dom,t,r)},get$1=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},remove$3=(e,t)=>{e.dom.removeAttribute(t)},read=(e,t)=>{let r=get$1(e,t);return void 0===r||""===r?[]:r.split(" ")},add$2=(e,t,r)=>{let l=read(e,t),o=l.concat([r]);return set(e,t,o.join(" ")),!0},remove$2=(e,t,r)=>{let l=filter(read(e,t),e=>e!==r);return l.length>0?set(e,t,l.join(" ")):remove$3(e,t),!1},supports=e=>void 0!==e.dom.classList,get=e=>read(e,"class"),add$1=(e,t)=>add$2(e,"class",t),remove$1=(e,t)=>remove$2(e,"class",t),add=(e,t)=>{supports(e)?e.dom.classList.add(t):add$1(e,t)},cleanClass=e=>{let t=supports(e)?e.dom.classList:get(e);0===t.length&&remove$3(e,"class")},remove=(e,t)=>{if(supports(e)){let r=e.dom.classList;r.remove(t)}else remove$1(e,t);cleanClass(e)},fromDom=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},m={fromHtml:(e,t)=>{let r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return fromDom(r.childNodes[0])},fromTag:(e,t)=>{let r=(t||document).createElement(e);return fromDom(r)},fromText:(e,t)=>{let r=(t||document).createTextNode(e);return fromDom(r)},fromDom,fromPoint:(e,t,r)=>Optional.from(e.dom.elementFromPoint(t,r)).map(fromDom)},p={"\xa0":"nbsp","\xad":"shy"},charMapToRegExp=(e,t)=>{let r="";return each(e,(e,t)=>{r+=t}),RegExp("["+r+"]",t?"g":"")},c=charMapToRegExp(p),h=charMapToRegExp(p,!0),g=(e="",each(p,t=>{e&&(e+=","),e+="span.mce-"+t}),e),f="mce-nbsp",getRaw=e=>e.dom.contentEditable,wrapCharWithSpan=e=>'<span data-mce-bogus="1" class="mce-'+p[e]+'">'+e+"</span>",isWrappedNbsp=e=>"span"===e.nodeName.toLowerCase()&&e.classList.contains("mce-nbsp-wrap"),isMatch=e=>{let t=value(e);return d(e)&&r(t)&&c.test(t)},isContentEditableFalse=e=>isHTMLElement(e)&&"false"===getRaw(e),isChildEditable=(e,t)=>{if(isHTMLElement(e)&&!isWrappedNbsp(e.dom)){let t=getRaw(e);if("true"===t)return!0;if("false"===t)return!1}return t},filterEditableDescendants=(e,t,r)=>{let l=[],o=e.dom,a=map(o.childNodes,m.fromDom),isEditable=e=>isWrappedNbsp(e.dom)||!isContentEditableFalse(e);return each$1(a,e=>{r&&isEditable(e)&&t(e)&&(l=l.concat([e])),l=l.concat(filterEditableDescendants(e,t,isChildEditable(e,r)))}),l},findParentElm=(e,t)=>{for(;e.parentNode;){if(e.parentNode===t)return t;e=e.parentNode}},replaceWithSpans=e=>e.replace(h,wrapCharWithSpan),show=(e,t)=>{let r=e.dom,l=filterEditableDescendants(m.fromDom(t),isMatch,e.dom.isEditable(t));each$1(l,t=>{var l;let o=t.dom.parentNode;if(isWrappedNbsp(o))add(m.fromDom(o),f);else{let o;let a=replaceWithSpans(r.encode(null!==(l=value(t))&&void 0!==l?l:"")),s=r.create("div",{},a);for(;o=s.lastChild;)r.insertAfter(o,t.dom);e.dom.remove(t.dom)}})},hide=(e,t)=>{let r=e.dom.select(g,t);each$1(r,t=>{isWrappedNbsp(t)?remove(m.fromDom(t),f):e.dom.remove(t,!0)})},toggle=e=>{let t=e.getBody(),r=e.selection.getBookmark(),l=findParentElm(e.selection.getNode(),t);hide(e,l=void 0!==l?l:t),show(e,l),e.selection.moveToBookmark(r)},applyVisualChars=(e,t)=>{fireVisualChars(e,t.get());let r=e.getBody();!0===t.get()?show(e,r):hide(e,r)},toggleVisualChars=(e,t)=>{t.set(!t.get());let r=e.selection.getBookmark();applyVisualChars(e,t),e.selection.moveToBookmark(r)},register$2=(e,t)=>{e.addCommand("mceVisualChars",()=>{toggleVisualChars(e,t)})},register$1=e=>{let t=e.options.register;t("visualchars_default_state",{processor:"boolean",default:!1})},isEnabledByDefault=e=>e.options.get("visualchars_default_state"),setup$1=(e,t)=>{e.on("init",()=>{applyVisualChars(e,t)})},first=(e,t)=>{let r=null;return{cancel:()=>{isNull(r)||(clearTimeout(r),r=null)},throttle:(...l)=>{isNull(r)&&(r=setTimeout(()=>{r=null,e.apply(null,l)},t))}}},setup=(e,t)=>{let r=first(()=>{toggle(e)},300);e.on("keydown",l=>{!0===t.get()&&(13===l.keyCode?toggle(e):r.throttle())}),e.on("remove",r.cancel)},toggleActiveState=(e,t)=>r=>{r.setActive(t.get());let editorEventCallback=e=>r.setActive(e.state);return e.on("VisualChars",editorEventCallback),()=>e.off("VisualChars",editorEventCallback)},register=(e,t)=>{let onAction=()=>e.execCommand("mceVisualChars");e.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction,onSetup:toggleActiveState(e,t)}),e.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction,onSetup:toggleActiveState(e,t)})};t.add("visualchars",e=>{register$1(e);let t=Cell(isEnabledByDefault(e));return register$2(e,t),register(e,t),setup(e,t),setup$1(e,t),get$2(t)})}();