!function(){"use strict";let e,t,r;let n=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var o,l=tinymce.util.Tools.resolve("tinymce.PluginManager");let i=e=>({isFullscreen:()=>null!==e.get()}),s=(e,t,r)=>{var n;return!!r(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},a=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&s(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},u=e=>t=>a(t)===e,m=e=>t=>typeof t===e,d=e=>t=>e===t,c=u("string"),h=u("array"),f=d(null),g=m("boolean"),p=d(void 0),v=e=>null==e,w=e=>!v(e),b=m("function"),y=m("number"),S=()=>{},x=(e,t)=>(...r)=>e(t.apply(null,r)),E=(e,t)=>r=>e(t(r)),F=e=>()=>e,O=F(!1),k=F(!0);class T{constructor(e,t){this.tag=e,this.value=t}static some(e){return new T(!0,e)}static none(){return T.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?T.some(e(this.value)):T.none()}bind(e){return this.tag?e(this.value):T.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:T.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return w(e)?T.some(e):T.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}T.singletonNone=new T(!1);let C=e=>{let t=n(T.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(T.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(T.some(e))}}},D=()=>C(e=>e.unbind()),A=()=>{let e=C(S);return{...e,on:t=>e.get().each(t)}},R=(e,t)=>{let r=null;return{cancel:()=>{f(r)||(clearTimeout(r),r=null)},throttle:(...n)=>{f(r)&&(r=setTimeout(()=>{r=null,e.apply(null,n)},t))}}},L=Array.prototype.push,M=(e,t)=>{let r=e.length,n=Array(r);for(let o=0;o<r;o++){let r=e[o];n[o]=t(r,o)}return n},N=(e,t)=>{for(let r=0,n=e.length;r<n;r++)t(e[r],r)},P=(e,t)=>{let r=[];for(let n=0,o=e.length;n<o;n++){let o=e[n];t(o,n)&&r.push(o)}return r},W=(e,t,r)=>{for(let n=0,o=e.length;n<o;n++){let o=e[n];if(t(o,n))return T.some(o);if(r(o,n))break}return T.none()},q=(e,t)=>W(e,t,O),I=e=>{let t=[];for(let r=0,n=e.length;r<n;++r){if(!h(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);L.apply(t,e[r])}return t},B=(e,t)=>I(M(e,t)),H=(e,t)=>t>=0&&t<e.length?T.some(e[t]):T.none(),V=e=>H(e,0),_=(e,t)=>{for(let r=0;r<e.length;r++){let n=t(e[r],r);if(n.isSome())return n}return T.none()},j=Object.keys,z=(e,t)=>{let r=j(e);for(let n=0,o=r.length;n<o;n++){let o=r[n];t(e[o],o)}},$=(e,t,r=0,n)=>{let o=e.indexOf(t,r);return -1!==o&&(!!p(n)||o+t.length<=n)},U=e=>void 0!==e.style&&b(e.style.getPropertyValue),K={fromDom:e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}}};"undefined"!=typeof window?window:Function("return this;")();let X=e=>e.dom.nodeType,Y=e=>t=>X(t)===e,G=Y(1),J=Y(3),Q=Y(9),Z=Y(11),ee=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},et=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,er=(e,t)=>{let r=void 0===t?document:t.dom;return et(r)?[]:M(r.querySelectorAll(e),K.fromDom)},en=(e,t)=>e.dom===t.dom,eo=e=>K.fromDom(e.dom.ownerDocument),el=e=>T.from(e.dom.parentNode).map(K.fromDom),ei=(e,t)=>{let r=b(t)?t:O,n=e.dom,o=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){let e=n.parentNode,t=K.fromDom(e);if(o.push(t),!0===r(t))break;n=e}return o},es=e=>el(e).map(ea).map(t=>P(t,t=>!en(e,t))).getOr([]),ea=e=>M(e.dom.childNodes,K.fromDom),eu=e=>Z(e)&&w(e.dom.host),em=b(Element.prototype.attachShadow)&&b(Node.prototype.getRootNode),ed=F(em),ec=em?e=>K.fromDom(e.dom.getRootNode()):e=>Q(e)?e:eo(e),eh=e=>{let t=ec(e);return eu(t)?T.some(t):T.none()},ef=e=>K.fromDom(e.dom.host),eg=e=>{if(ed()&&w(e.target)){let t=K.fromDom(e.target);if(G(t)&&ep(t)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return V(t)}}return T.from(e.target)},ep=e=>w(e.dom.shadowRoot),ev=e=>{let t=J(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return eh(K.fromDom(t)).fold(()=>r.body.contains(t),E(ev,ef))},ew=e=>{let t=e.dom.body;if(null==t)throw Error("Body is not available yet");return K.fromDom(t)},eb=(e,t,r)=>{if(c(r)||g(r)||y(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},ey=(e,t,r)=>{eb(e.dom,t,r)},eS=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},ex=(e,t)=>{e.dom.removeAttribute(t)},eE=(e,t,r)=>{if(!c(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);U(e)&&e.style.setProperty(t,r)},eF=(e,t)=>{let r=e.dom;z(t,(e,t)=>{eE(r,t,e)})},eO=(e,t)=>{let r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||ev(e)?n:ek(r,t)},ek=(e,t)=>U(e)?e.style.getPropertyValue(t):"",eT=(e,t,r,n,o,l,i)=>({target:e,x:t,y:r,stop:n,prevent:o,kill:l,raw:i}),eC=e=>{let t=K.fromDom(eg(e).getOr(e.target)),r=()=>e.stopPropagation(),n=()=>e.preventDefault(),o=x(n,r);return eT(t,e.clientX,e.clientY,r,n,o,e)},eD=(e,t)=>r=>{e(r)&&t(eC(r))},eA=(e,t,r,n,o)=>{let l=eD(r,n);return e.dom.addEventListener(t,l,o),{unbind:function(e,...t){return(...r)=>{let n=t.concat(r);return e.apply(null,n)}}(eL,e,t,l,o)}},eR=(e,t,r,n)=>eA(e,t,r,n,!1),eL=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},eM=(e,t,r)=>eR(e,t,k,r),eN=(e,t,r,n)=>{let o=e.isiOS()&&!0===/ipad/i.test(r),l=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),s=i||n("(pointer:coarse)"),a=o||!l&&i&&n("(min-device-width:768px)"),u=l||i&&!a,m=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r);return{isiPad:F(o),isiPhone:F(l),isTablet:F(a),isPhone:F(u),isTouch:F(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:F(m),isDesktop:F(!u&&!a&&!m)}},eP=(e,t)=>{for(let r=0;r<e.length;r++){let n=e[r];if(n.test(t))return n}},eW=(e,t)=>{let r=eP(e,t);if(!r)return{major:0,minor:0};let n=e=>Number(t.replace(r,"$"+e));return eI(n(1),n(2))},eq=()=>eI(0,0),eI=(e,t)=>({major:e,minor:t}),eB=(e,t)=>{let r=String(t).toLowerCase();return 0===e.length?eq():eW(e,r)},eH=(e,t)=>_(t.brands,t=>{let r=t.brand.toLowerCase();return q(e,e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:eI(parseInt(t.version,10),0)}))}),eV=(e,t)=>{let r=String(t).toLowerCase();return q(e,e=>e.search(r))},e_=(e,t)=>eV(e,t).map(e=>{let r=eB(e.versionRegexes,t);return{current:e.name,version:r}}),ej=(e,t)=>eV(e,t).map(e=>{let r=eB(e.versionRegexes,t);return{current:e.name,version:r}}),ez=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,e$=e=>t=>$(t,e),eU=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>$(e,"edge/")&&$(e,"chrome")&&$(e,"safari")&&$(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ez],search:e=>$(e,"chrome")&&!$(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>$(e,"msie")||$(e,"trident")},{name:"Opera",versionRegexes:[ez,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:e$("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:e$("firefox")},{name:"Safari",versionRegexes:[ez,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>($(e,"safari")||$(e,"mobile/"))&&$(e,"applewebkit")}],eK=[{name:"Windows",search:e$("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>$(e,"iphone")||$(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:e$("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:e$("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:e$("linux"),versionRegexes:[]},{name:"Solaris",search:e$("sunos"),versionRegexes:[]},{name:"FreeBSD",search:e$("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:e$("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],eX={browsers:F(eU),oses:F(eK)},eY="Edge",eG="Chromium",eJ="Opera",eQ="Firefox",eZ="Safari",e0=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n(eY),isChromium:n(eG),isIE:n("IE"),isOpera:n(eJ),isFirefox:n(eQ),isSafari:n(eZ)}},e9={unknown:()=>e0({current:void 0,version:eq()}),nu:e0,edge:F(eY),chromium:F(eG),ie:F("IE"),opera:F(eJ),firefox:F(eQ),safari:F(eZ)},e1="Windows",e5="Android",e2="Linux",e3="macOS",e6="Solaris",e7="FreeBSD",e8="ChromeOS",e4=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(e1),isiOS:n("iOS"),isAndroid:n(e5),isMacOS:n(e3),isLinux:n(e2),isSolaris:n(e6),isFreeBSD:n(e7),isChromeOS:n(e8)}},te={unknown:()=>e4({current:void 0,version:eq()}),nu:e4,windows:F(e1),ios:F("iOS"),android:F(e5),linux:F(e2),macos:F(e3),solaris:F(e6),freebsd:F(e7),chromeos:F(e8)},tt=(e,t,r)=>{let n=eX.browsers(),o=eX.oses(),l=t.bind(e=>eH(n,e)).orThunk(()=>e_(n,e)).fold(e9.unknown,e9.nu),i=ej(o,e).fold(te.unknown,te.nu),s=eN(i,l,e,r);return{browser:l,os:i,deviceType:s}},tr=e=>window.matchMedia(e).matches,tn=(o=()=>tt(navigator.userAgent,T.from(navigator.userAgentData),tr),t=!1,(...r)=>(t||(t=!0,e=o.apply(null,r)),e)),to=()=>tn(),tl=(e,t)=>({left:e,top:t,translate:(r,n)=>tl(e+r,t+n)}),ti=e=>{let t=void 0!==e?e.dom:document;return tl(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},ts=e=>{let t=void 0===e?window:e;return to().browser.isFirefox()?T.none():T.from(t.visualViewport)},ta=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),tu=e=>{let t=void 0===e?window:e,r=t.document,n=ti(K.fromDom(r));return ts(t).fold(()=>{let e=t.document.documentElement,r=e.clientWidth,o=e.clientHeight;return ta(n.left,n.top,r,o)},e=>ta(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))},tm=(e,t,r)=>ts(r).map(r=>{let n=e=>t(eC(e));return r.addEventListener(e,n),{unbind:()=>r.removeEventListener(e,n)}}).getOrThunk(()=>({unbind:S}));var td=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),tc=tinymce.util.Tools.resolve("tinymce.Env");let th=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},tf=e=>{(0,e.options.register)("fullscreen_native",{processor:"boolean",default:!1})},tg=(r="fullscreen_native",e=>e.options.get(r)),tp=e=>{let t=K.fromDom(e.getElement());return eh(t).map(ef).getOrThunk(()=>ew(eo(t)))},tv=e=>void 0!==e.fullscreenElement?e.fullscreenElement:void 0!==e.msFullscreenElement?e.msFullscreenElement:void 0!==e.webkitFullscreenElement?e.webkitFullscreenElement:null,tw=()=>void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",tb=e=>{let t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},ty=e=>{let t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()},tS=e=>e.dom===tv(eo(e).dom),tx=(e,t,r)=>P(ei(e,r),t),tE=(e,t)=>P(es(e),t),tF=e=>er(e),tO=(e,t,r)=>tx(e,e=>ee(e,t),r),tk=(e,t)=>tE(e,e=>ee(e,t)),tT="data-ephox-mobile-fullscreen-style",tC="position:absolute!important;",tD="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",tA=tc.os.isAndroid(),tR=e=>{let t=eO(e,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"},tL=(e,t,r)=>{let n=t=>r=>{let n=eS(r,"style"),o=void 0===n?"no-styles":n.trim();o!==t&&(ey(r,tT,o),eF(r,e.parseStyle(t)))},o=tO(t,"*"),l=B(o,e=>tk(e,"*:not(.tox-silver-sink)")),i=tR(r);N(l,n("display:none!important;")),N(o,n(tC+tD+i)),n((!0===tA?"":tC)+tD+i)(t)},tM=e=>{N(tF("["+tT+"]"),t=>{let r=eS(t,tT);r&&"no-styles"!==r?eF(t,e.parseStyle(r)):ex(t,"style"),ex(t,tT)})},tN=td.DOM,tP=()=>tu(window),tW=e=>window.scrollTo(e.x,e.y),tq=ts().fold(()=>({bind:S,unbind:S}),e=>{let t=A(),r=D(),n=D(),o=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},l=()=>{window.requestAnimationFrame(()=>{t.on(t=>eF(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"}))})},i=R(()=>{o(),l()},50);return{bind:e=>{t.set(e),i.throttle(),r.set(tm("resize",i.throttle)),n.set(tm("scroll",i.throttle))},unbind:()=>{t.on(()=>{r.clear(),n.clear()}),t.clear()}}}),tI=(e,t)=>{let r=document.body,n=document.documentElement,o=e.getContainer(),l=K.fromDom(o),i=tp(e),s=t.get(),a=K.fromDom(e.getBody()),u=tc.deviceType.isTouch(),m=o.style,d=e.iframeElement,c=null==d?void 0:d.style,h=e=>{e(r,"tox-fullscreen"),e(n,"tox-fullscreen"),e(o,"tox-fullscreen"),eh(l).map(e=>ef(e).dom).each(t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")})},f=()=>{u&&tM(e.dom),h(tN.removeClass),tq.unbind(),T.from(t.get()).each(e=>e.fullscreenChangeHandler.unbind())};if(s)s.fullscreenChangeHandler.unbind(),tg(e)&&tS(i)&&ty(eo(i)),c.width=s.iframeWidth,c.height=s.iframeHeight,m.width=s.containerWidth,m.height=s.containerHeight,m.top=s.containerTop,m.left=s.containerLeft,f(),tW(s.scrollPos),t.set(null),th(e,!1),e.off("remove",f);else{let r=eM(eo(i),tw(),r=>{tg(e)&&!tS(i)&&null!==t.get()&&tI(e,t)}),n={scrollPos:tP(),containerWidth:m.width,containerHeight:m.height,containerTop:m.top,containerLeft:m.left,iframeWidth:c.width,iframeHeight:c.height,fullscreenChangeHandler:r};u&&tL(e.dom,l,a),c.width=c.height="100%",m.width=m.height="",h(tN.addClass),tq.bind(l),e.on("remove",f),t.set(n),tg(e)&&tb(i),th(e,!0)}},tB=(e,t)=>{e.addCommand("mceFullScreen",()=>{tI(e,t)})},tH=(e,t)=>r=>{r.setActive(null!==t.get());let n=e=>r.setActive(e.state);return e.on("FullscreenStateChanged",n),()=>e.off("FullscreenStateChanged",n)},tV=(e,t)=>{let r=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:r,onSetup:tH(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:r,onSetup:tH(e,t)})};l.add("fullscreen",e=>{let t=n(null);return e.inline||(tf(e),tB(e,t),tV(e,t),e.addShortcut("Meta+Shift+F","","mceFullScreen")),i(t)})}();