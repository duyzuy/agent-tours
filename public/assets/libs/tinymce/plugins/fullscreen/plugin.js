!function(){"use strict";let e,t;let Cell=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var n,o=tinymce.util.Tools.resolve("tinymce.PluginManager");let get$5=e=>({isFullscreen:()=>null!==e.get()}),hasProto=(e,t,n)=>{var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},typeOf=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&hasProto(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},isType$1=e=>t=>typeOf(t)===e,isSimpleType=e=>t=>typeof t===e,eq$1=e=>t=>e===t,l=isType$1("string"),i=isType$1("array"),s=eq$1(null),a=isSimpleType("boolean"),c=eq$1(void 0),isNullable=e=>null==e,isNonNullable=e=>!isNullable(e),u=isSimpleType("function"),d=isSimpleType("number"),noop=()=>{},compose=(e,t)=>(...n)=>e(t.apply(null,n)),compose1=(e,t)=>n=>e(t(n)),constant=e=>()=>e,m=constant(!1),h=constant(!0);let Optional=class Optional{constructor(e,t){this.tag=e,this.value=t}static some(e){return new Optional(!0,e)}static none(){return Optional.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?Optional.some(e(this.value)):Optional.none()}bind(e){return this.tag?e(this.value):Optional.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:Optional.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return isNonNullable(e)?Optional.some(e):Optional.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Optional.singletonNone=new Optional(!1);let singleton=e=>{let t=Cell(Optional.none()),revoke=()=>t.get().each(e);return{clear:()=>{revoke(),t.set(Optional.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{revoke(),t.set(Optional.some(e))}}},unbindable=()=>singleton(e=>e.unbind()),value=()=>{let e=singleton(noop);return{...e,on:t=>e.get().each(t)}},first=(e,t)=>{let n=null;return{cancel:()=>{s(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{s(n)&&(n=setTimeout(()=>{n=null,e.apply(null,o)},t))}}},p=Array.prototype.push,map=(e,t)=>{let n=e.length,o=Array(n);for(let l=0;l<n;l++){let n=e[l];o[l]=t(n,l)}return o},each$1=(e,t)=>{for(let n=0,o=e.length;n<o;n++){let o=e[n];t(o,n)}},filter$1=(e,t)=>{let n=[];for(let o=0,l=e.length;o<l;o++){let l=e[o];t(l,o)&&n.push(l)}return n},findUntil=(e,t,n)=>{for(let o=0,l=e.length;o<l;o++){let l=e[o];if(t(l,o))return Optional.some(l);if(n(l,o))break}return Optional.none()},find$1=(e,t)=>findUntil(e,t,m),flatten=e=>{let t=[];for(let n=0,o=e.length;n<o;++n){if(!i(e[n]))throw Error("Arr.flatten item "+n+" was not an array, input: "+e);p.apply(t,e[n])}return t},bind$3=(e,t)=>flatten(map(e,t)),get$4=(e,t)=>t>=0&&t<e.length?Optional.some(e[t]):Optional.none(),head=e=>get$4(e,0),findMap=(e,t)=>{for(let n=0;n<e.length;n++){let o=t(e[n],n);if(o.isSome())return o}return Optional.none()},g=Object.keys,each=(e,t)=>{let n=g(e);for(let o=0,l=n.length;o<l;o++){let l=n[o],i=e[l];t(i,l)}},contains=(e,t,n=0,o)=>{let l=e.indexOf(t,n);return -1!==l&&(!!c(o)||l+t.length<=o)},isSupported$1=e=>void 0!==e.style&&u(e.style.getPropertyValue),fromDom=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},f={fromHtml:(e,t)=>{let n=t||document,o=n.createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return fromDom(o.childNodes[0])},fromTag:(e,t)=>{let n=t||document,o=n.createElement(e);return fromDom(o)},fromText:(e,t)=>{let n=t||document,o=n.createTextNode(e);return fromDom(o)},fromDom,fromPoint:(e,t,n)=>Optional.from(e.dom.elementFromPoint(t,n)).map(fromDom)};"undefined"!=typeof window?window:Function("return this;")();let type=e=>e.dom.nodeType,isType=e=>t=>type(t)===e,v=isType(1),w=isType(3),b=isType(9),S=isType(11),is=(e,t)=>{let n=e.dom;if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},bypassSelector=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,all$1=(e,t)=>{let n=void 0===t?document:t.dom;return bypassSelector(n)?[]:map(n.querySelectorAll(e),f.fromDom)},eq=(e,t)=>e.dom===t.dom,owner=e=>f.fromDom(e.dom.ownerDocument),parent=e=>Optional.from(e.dom.parentNode).map(f.fromDom),parents=(e,t)=>{let n=u(t)?t:m,o=e.dom,l=[];for(;null!==o.parentNode&&void 0!==o.parentNode;){let e=o.parentNode,t=f.fromDom(e);if(l.push(t),!0===n(t))break;o=e}return l},siblings$2=e=>parent(e).map(children).map(t=>filter$1(t,t=>!eq(e,t))).getOr([]),children=e=>map(e.dom.childNodes,f.fromDom),isShadowRoot=e=>S(e)&&isNonNullable(e.dom.host),y=u(Element.prototype.attachShadow)&&u(Node.prototype.getRootNode),O=constant(y),$=y?e=>f.fromDom(e.dom.getRootNode()):e=>b(e)?e:owner(e),getShadowRoot=e=>{let t=$(e);return isShadowRoot(t)?Optional.some(t):Optional.none()},getShadowHost=e=>f.fromDom(e.dom.host),getOriginalEventTarget=e=>{if(O()&&isNonNullable(e.target)){let t=f.fromDom(e.target);if(v(t)&&isOpenShadowHost(t)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return head(t)}}return Optional.from(e.target)},isOpenShadowHost=e=>isNonNullable(e.dom.shadowRoot),inBody=e=>{let t=w(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let n=t.ownerDocument;return getShadowRoot(f.fromDom(t)).fold(()=>n.body.contains(t),compose1(inBody,getShadowHost))},getBody=e=>{let t=e.dom.body;if(null==t)throw Error("Body is not available yet");return f.fromDom(t)},rawSet=(e,t,n)=>{if(l(n)||a(n)||d(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),Error("Attribute value was not simple")},set=(e,t,n)=>{rawSet(e.dom,t,n)},get$3=(e,t)=>{let n=e.dom.getAttribute(t);return null===n?void 0:n},remove=(e,t)=>{e.dom.removeAttribute(t)},internalSet=(e,t,n)=>{if(!l(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),Error("CSS value must be a string: "+n);isSupported$1(e)&&e.style.setProperty(t,n)},setAll=(e,t)=>{let n=e.dom;each(t,(e,t)=>{internalSet(n,t,e)})},get$2=(e,t)=>{let n=e.dom,o=window.getComputedStyle(n),l=o.getPropertyValue(t);return""!==l||inBody(e)?l:getUnsafeProperty(n,t)},getUnsafeProperty=(e,t)=>isSupported$1(e)?e.style.getPropertyValue(t):"",mkEvent=(e,t,n,o,l,i,s)=>({target:e,x:t,y:n,stop:o,prevent:l,kill:i,raw:s}),fromRawEvent=e=>{let t=f.fromDom(getOriginalEventTarget(e).getOr(e.target)),stop=()=>e.stopPropagation(),prevent=()=>e.preventDefault(),n=compose(prevent,stop);return mkEvent(t,e.clientX,e.clientY,stop,prevent,n,e)},handle=(e,t)=>n=>{e(n)&&t(fromRawEvent(n))},binder=(e,t,n,o,l)=>{let i=handle(n,o);return e.dom.addEventListener(t,i,l),{unbind:function(e,...t){return(...n)=>{let o=t.concat(n);return e.apply(null,o)}}(unbind,e,t,i,l)}},bind$2=(e,t,n,o)=>binder(e,t,n,o,!1),unbind=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},bind$1=(e,t,n)=>bind$2(e,t,h,n),DeviceType=(e,t,n,o)=>{let l=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!l,s=e.isiOS()||e.isAndroid(),a=s||o("(pointer:coarse)"),c=l||!i&&s&&o("(min-device-width:768px)"),u=i||s&&!c,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),m=!u&&!c&&!d;return{isiPad:constant(l),isiPhone:constant(i),isTablet:constant(c),isPhone:constant(u),isTouch:constant(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:constant(d),isDesktop:constant(m)}},firstMatch=(e,t)=>{for(let n=0;n<e.length;n++){let o=e[n];if(o.test(t))return o}},find=(e,t)=>{let n=firstMatch(e,t);if(!n)return{major:0,minor:0};let group=e=>Number(t.replace(n,"$"+e));return nu$2(group(1),group(2))},unknown$2=()=>nu$2(0,0),nu$2=(e,t)=>({major:e,minor:t}),F={nu:nu$2,detect:(e,t)=>{let n=String(t).toLowerCase();return 0===e.length?unknown$2():find(e,n)},unknown:unknown$2},detectBrowser$1=(e,t)=>findMap(t.brands,t=>{let n=t.brand.toLowerCase();return find$1(e,e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:F.nu(parseInt(t.version,10),0)}))}),detect$2=(e,t)=>{let n=String(t).toLowerCase();return find$1(e,e=>e.search(n))},detectBrowser=(e,t)=>detect$2(e,t).map(e=>{let n=F.detect(e.versionRegexes,t);return{current:e.name,version:n}}),detectOs=(e,t)=>detect$2(e,t).map(e=>{let n=F.detect(e.versionRegexes,t);return{current:e.name,version:n}}),E=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,checkContains=e=>t=>contains(t,e),k=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>contains(e,"edge/")&&contains(e,"chrome")&&contains(e,"safari")&&contains(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,E],search:e=>contains(e,"chrome")&&!contains(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>contains(e,"msie")||contains(e,"trident")},{name:"Opera",versionRegexes:[E,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:checkContains("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:checkContains("firefox")},{name:"Safari",versionRegexes:[E,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(contains(e,"safari")||contains(e,"mobile/"))&&contains(e,"applewebkit")}],x=[{name:"Windows",search:checkContains("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>contains(e,"iphone")||contains(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:checkContains("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:checkContains("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:checkContains("linux"),versionRegexes:[]},{name:"Solaris",search:checkContains("sunos"),versionRegexes:[]},{name:"FreeBSD",search:checkContains("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:checkContains("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],C={browsers:constant(k),oses:constant(x)},T="Edge",N="Chromium",D="Opera",R="Firefox",A="Safari",nu$1=e=>{let t=e.current,n=e.version,isBrowser=e=>()=>t===e;return{current:t,version:n,isEdge:isBrowser(T),isChromium:isBrowser(N),isIE:isBrowser("IE"),isOpera:isBrowser(D),isFirefox:isBrowser(R),isSafari:isBrowser(A)}},B={unknown:()=>nu$1({current:void 0,version:F.unknown()}),nu:nu$1,edge:constant(T),chromium:constant(N),ie:constant("IE"),opera:constant(D),firefox:constant(R),safari:constant(A)},M="Windows",P="Android",H="Linux",L="macOS",q="Solaris",V="FreeBSD",W="ChromeOS",nu=e=>{let t=e.current,n=e.version,isOS=e=>()=>t===e;return{current:t,version:n,isWindows:isOS(M),isiOS:isOS("iOS"),isAndroid:isOS(P),isMacOS:isOS(L),isLinux:isOS(H),isSolaris:isOS(q),isFreeBSD:isOS(V),isChromeOS:isOS(W)}},I={unknown:()=>nu({current:void 0,version:F.unknown()}),nu,windows:constant(M),ios:constant("iOS"),android:constant(P),linux:constant(H),macos:constant(L),solaris:constant(q),freebsd:constant(V),chromeos:constant(W)},U={detect:(e,t,n)=>{let o=C.browsers(),l=C.oses(),i=t.bind(e=>detectBrowser$1(o,e)).orThunk(()=>detectBrowser(o,e)).fold(B.unknown,B.nu),s=detectOs(l,e).fold(I.unknown,I.nu),a=DeviceType(s,i,e,n);return{browser:i,os:s,deviceType:a}}},mediaMatch=e=>window.matchMedia(e).matches,_=(n=()=>U.detect(navigator.userAgent,Optional.from(navigator.userAgentData),mediaMatch),t=!1,(...o)=>(t||(t=!0,e=n.apply(null,o)),e)),detect=()=>_(),r=(e,t)=>({left:e,top:t,translate:(n,o)=>r(e+n,t+o)}),get$1=e=>{let t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return r(n,o)},get=e=>{let t=void 0===e?window:e;return detect().browser.isFirefox()?Optional.none():Optional.from(t.visualViewport)},bounds=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),getBounds=e=>{let t=void 0===e?window:e,n=t.document,o=get$1(f.fromDom(n));return get(t).fold(()=>{let e=t.document.documentElement,n=e.clientWidth,l=e.clientHeight;return bounds(o.left,o.top,n,l)},e=>bounds(Math.max(e.pageLeft,o.left),Math.max(e.pageTop,o.top),e.width,e.height))},bind=(e,t,n)=>get(n).map(n=>{let handler=e=>t(fromRawEvent(e));return n.addEventListener(e,handler),{unbind:()=>n.removeEventListener(e,handler)}}).getOrThunk(()=>({unbind:noop}));var j=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),z=tinymce.util.Tools.resolve("tinymce.Env");let fireFullscreenStateChanged=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},register$2=e=>{let t=e.options.register;t("fullscreen_native",{processor:"boolean",default:!1})},getFullscreenNative=e=>e.options.get("fullscreen_native"),getFullscreenRoot=e=>{let t=f.fromDom(e.getElement());return getShadowRoot(t).map(getShadowHost).getOrThunk(()=>getBody(owner(t)))},getFullscreenElement=e=>void 0!==e.fullscreenElement?e.fullscreenElement:void 0!==e.msFullscreenElement?e.msFullscreenElement:void 0!==e.webkitFullscreenElement?e.webkitFullscreenElement:null,getFullscreenchangeEventName=()=>void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",requestFullscreen=e=>{let t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},exitFullscreen=e=>{let t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()},isFullscreenElement=e=>e.dom===getFullscreenElement(owner(e).dom),ancestors$1=(e,t,n)=>filter$1(parents(e,n),t),siblings$1=(e,t)=>filter$1(siblings$2(e),t),all=e=>all$1(e),ancestors=(e,t,n)=>ancestors$1(e,e=>is(e,t),n),siblings=(e,t)=>siblings$1(e,e=>is(e,t)),K="data-ephox-mobile-fullscreen-style",X="position:absolute!important;",Y="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",G=z.os.isAndroid(),matchColor=e=>{let t=get$2(e,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"},clobberStyles=(e,t,n)=>{let clobber=t=>n=>{let o=get$3(n,"style"),l=void 0===o?"no-styles":o.trim();l!==t&&(set(n,K,l),setAll(n,e.parseStyle(t)))},o=ancestors(t,"*"),l=bind$3(o,e=>siblings(e,"*:not(.tox-silver-sink)")),i=matchColor(n);each$1(l,clobber("display:none!important;")),each$1(o,clobber(X+Y+i));let s=!0===G?"":X;clobber(s+Y+i)(t)},restoreStyles=e=>{let t=all("["+K+"]");each$1(t,t=>{let n=get$3(t,K);n&&"no-styles"!==n?setAll(t,e.parseStyle(n)):remove(t,"style"),remove(t,K)})},J=j.DOM,getScrollPos=()=>getBounds(window),setScrollPos=e=>window.scrollTo(e.x,e.y),Q=get().fold(()=>({bind:noop,unbind:noop}),e=>{let t=value(),n=unbindable(),o=unbindable(),refreshScroll=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},refreshVisualViewport=()=>{window.requestAnimationFrame(()=>{t.on(t=>setAll(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"}))})},l=first(()=>{refreshScroll(),refreshVisualViewport()},50);return{bind:e=>{t.set(e),l.throttle(),n.set(bind("resize",l.throttle)),o.set(bind("scroll",l.throttle))},unbind:()=>{t.on(()=>{n.clear(),o.clear()}),t.clear()}}}),toggleFullscreen=(e,t)=>{let n=document.body,o=document.documentElement,l=e.getContainer(),i=f.fromDom(l),s=getFullscreenRoot(e),a=t.get(),c=f.fromDom(e.getBody()),u=z.deviceType.isTouch(),d=l.style,m=e.iframeElement,h=null==m?void 0:m.style,handleClasses=e=>{e(n,"tox-fullscreen"),e(o,"tox-fullscreen"),e(l,"tox-fullscreen"),getShadowRoot(i).map(e=>getShadowHost(e).dom).each(t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")})},cleanup=()=>{u&&restoreStyles(e.dom),handleClasses(J.removeClass),Q.unbind(),Optional.from(t.get()).each(e=>e.fullscreenChangeHandler.unbind())};if(a)a.fullscreenChangeHandler.unbind(),getFullscreenNative(e)&&isFullscreenElement(s)&&exitFullscreen(owner(s)),h.width=a.iframeWidth,h.height=a.iframeHeight,d.width=a.containerWidth,d.height=a.containerHeight,d.top=a.containerTop,d.left=a.containerLeft,cleanup(),setScrollPos(a.scrollPos),t.set(null),fireFullscreenStateChanged(e,!1),e.off("remove",cleanup);else{let n=bind$1(owner(s),getFullscreenchangeEventName(),n=>{getFullscreenNative(e)&&!isFullscreenElement(s)&&null!==t.get()&&toggleFullscreen(e,t)}),o={scrollPos:getScrollPos(),containerWidth:d.width,containerHeight:d.height,containerTop:d.top,containerLeft:d.left,iframeWidth:h.width,iframeHeight:h.height,fullscreenChangeHandler:n};u&&clobberStyles(e.dom,i,c),h.width=h.height="100%",d.width=d.height="",handleClasses(J.addClass),Q.bind(i),e.on("remove",cleanup),t.set(o),getFullscreenNative(e)&&requestFullscreen(s),fireFullscreenStateChanged(e,!0)}},register$1=(e,t)=>{e.addCommand("mceFullScreen",()=>{toggleFullscreen(e,t)})},makeSetupHandler=(e,t)=>n=>{n.setActive(null!==t.get());let editorEventCallback=e=>n.setActive(e.state);return e.on("FullscreenStateChanged",editorEventCallback),()=>e.off("FullscreenStateChanged",editorEventCallback)},register=(e,t)=>{let onAction=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction,onSetup:makeSetupHandler(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction,onSetup:makeSetupHandler(e,t)})};o.add("fullscreen",e=>{let t=Cell(null);return e.inline||(register$2(e),register$1(e,t),register(e,t),e.addShortcut("Meta+Shift+F","","mceFullScreen")),get$5(t)})}();