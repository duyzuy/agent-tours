!function(){"use strict";var e,s=tinymce.util.Tools.resolve("tinymce.PluginManager");let t=e=>s=>(e=>{var s,d;let h=typeof e;return null===e?"null":"object"===h&&Array.isArray(e)?"array":"object"===h&&((s=String).prototype.isPrototypeOf(e)||(null===(d=e.constructor)||void 0===d?void 0:d.name)===s.name)?"string":h})(s)===e,n=e=>s=>typeof s===e,d=t("string"),h=t("object"),f=t("array"),y=n("boolean"),l=e=>null!=e,U=n("function"),er=n("number"),c=()=>{},m=(e,s)=>e===s,u=e=>s=>!e(s),p=()=>!1;let g=class g{constructor(e,s){this.tag=e,this.value=s}static some(e){return new g(!0,e)}static none(){return g.singletonNone}fold(e,s){return this.tag?s(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?g.some(e(this.value)):g.none()}bind(e){return this.tag?e(this.value):g.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:g.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return l(e)?g.some(e):g.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};g.singletonNone=new g(!1);let el=Array.prototype.slice,eo=Array.prototype.indexOf,ei=Array.prototype.push,v=(e,s)=>eo.call(e,s)>-1,C=(e,s)=>{for(let d=0,h=e.length;d<h;d++)if(s(e[d],d))return!0;return!1},b=(e,s)=>{let d=e.length,h=Array(d);for(let f=0;f<d;f++){let d=e[f];h[f]=s(d,f)}return h},S=(e,s)=>{for(let d=0,h=e.length;d<h;d++)s(e[d],d)},N=(e,s)=>{let d=[];for(let h=0,f=e.length;h<f;h++){let f=e[h];s(f,h)&&d.push(f)}return d},L=(e,s,d)=>(S(e,(e,h)=>{d=s(d,e,h)}),d),O=(e,s,d)=>{for(let h=0,f=e.length;h<f;h++){let f=e[h];if(s(f,h))return g.some(f);if(d(f,h))break}return g.none()},A=(e,s)=>O(e,s,p),x=(e,s)=>(e=>{let s=[];for(let d=0,h=e.length;d<h;++d){if(!f(e[d]))throw Error("Arr.flatten item "+d+" was not an array, input: "+e);ei.apply(s,e[d])}return s})(b(e,s)),k=e=>{let s=el.call(e,0);return s.reverse(),s},T=(e,s)=>s>=0&&s<e.length?g.some(e[s]):g.none(),E=e=>T(e,0),w=e=>T(e,e.length-1),D=(e,s)=>{let d=[],h=U(s)?e=>C(d,d=>s(d,e)):e=>v(d,e);for(let s=0,f=e.length;s<f;s++){let f=e[s];h(f)||d.push(f)}return d},B=(e,s,d=m)=>e.exists(e=>d(e,s)),I=(e,s,d)=>e.isSome()&&s.isSome()?g.some(d(e.getOrDie(),s.getOrDie())):g.none(),P=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},M=(e,s)=>{let d=(s||document).createElement("div");if(d.innerHTML=e,!d.hasChildNodes()||d.childNodes.length>1){let s="HTML does not have a single root node";throw console.error(s,e),Error(s)}return P(d.childNodes[0])},R=(e,s)=>{let d=(s||document).createElement(e);return P(d)},$=(e,s)=>e.dom===s.dom;"undefined"!=typeof window?window:Function("return this;")();let _=e=>e.dom.nodeName.toLowerCase(),H=e=>e.dom.nodeType,V=e=>1===H(e),F=e=>s=>V(s)&&_(s)===e,j=e=>g.from(e.dom.parentNode).map(P),K=e=>b(e.dom.childNodes,P),z=(e,s)=>{let d=e.dom.childNodes;return g.from(d[s]).map(P)},Q=e=>z(e,0),W=e=>z(e,e.dom.childNodes.length-1),q=(e,s,d)=>{let h=e.dom,f=U(d)?d:p;for(;h.parentNode;){h=h.parentNode;let e=P(h);if(s(e))return g.some(e);if(f(e))break}return g.none()},Z=(e,s,d)=>s(e)?g.some(e):U(d)&&d(e)?g.none():q(e,s,d),G=(e,s)=>{j(e).each(d=>{d.dom.insertBefore(s.dom,e.dom)})},J=(e,s)=>{e.dom.appendChild(s.dom)},X=(e,s)=>{S(s,s=>{J(e,s)})},Y=e=>{e.dom.textContent="",S(K(e),e=>{ee(e)})},ee=e=>{let s=e.dom;null!==s.parentNode&&s.parentNode.removeChild(s)};var es=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ea=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ed=tinymce.util.Tools.resolve("tinymce.util.VK");let re=e=>b(e,P),em=Object.keys,ie=(e,s)=>{let d=em(e);for(let h=0,f=d.length;h<f;h++){let f=d[h];s(e[f],f)}},le=(e,s)=>{let h=e.dom;ie(s,(e,s)=>{((e,s,h)=>{if(!(d(h)||y(h)||er(h)))throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",h,":: Element ",e),Error("Attribute value was not simple");e.setAttribute(s,h+"")})(h,s,e)})},ae=e=>L(e.dom.attributes,(e,s)=>(e[s.name]=s.value,e),{}),de=e=>P(e.dom.cloneNode(!0)),ce=(e,s)=>{let d=((e,s)=>{let d=R(s),h=ae(e);return le(d,h),d})(e,s);g.from(e.dom.nextSibling).map(P).fold(()=>{j(e).each(e=>{J(e,d)})},e=>{G(e,d)});let h=K(e);return X(d,h),ee(e),d};var eu=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ec=tinymce.util.Tools.resolve("tinymce.util.Tools");let pe=e=>s=>l(s)&&s.nodeName.toLowerCase()===e,ge=e=>s=>l(s)&&e.test(s.nodeName),he=e=>l(e)&&3===e.nodeType,fe=e=>l(e)&&1===e.nodeType,eg=ge(/^(OL|UL|DL)$/),ep=ge(/^(OL|UL)$/),eh=pe("ol"),ef=ge(/^(LI|DT|DD)$/),ey=ge(/^(DT|DD)$/),ev=ge(/^(TH|TD)$/),eb=pe("br"),Oe=(e,s)=>l(s)&&s.nodeName in e.schema.getTextBlockElements(),Ae=(e,s)=>l(e)&&e.nodeName in s,xe=(e,s)=>l(s)&&s.nodeName in e.schema.getVoidElements(),ke=(e,s,d)=>{let h=e.isEmpty(s);return!(d&&e.select("span[data-mce-type=bookmark]",s).length>0)&&h},Te=(e,s)=>e.isChildOf(s,e.getRoot()),Ee=e=>s=>s.options.get(e),eC=Ee("lists_indent_on_tab"),eS=Ee("forced_root_block"),eN=Ee("forced_root_block_attrs"),Ie=(e,s)=>{let d=e.dom,h=e.schema.getBlockElements(),f=d.createFragment(),y=eS(e),U=eN(e),er,el,eo=!1;for(el=d.create(y,U),Ae(s.firstChild,h)||f.appendChild(el);er=s.firstChild;){let e=er.nodeName;eo||"SPAN"===e&&"bookmark"===er.getAttribute("data-mce-type")||(eo=!0),Ae(er,h)?(f.appendChild(er),el=null):(el||(el=d.create(y,U),f.appendChild(el)),el.appendChild(er))}return!eo&&el&&el.appendChild(d.create("br",{"data-mce-bogus":"1"})),f},eL=eu.DOM,eO=F("dd"),ek=F("dt"),Ue=(e,s)=>{eO(s)?ce(s,"dt"):ek(s)&&g.from(s.dom.parentElement).map(P).each(d=>((e,s,d)=>{let h=eL.select('span[data-mce-type="bookmark"]',s),f=Ie(e,d),y=eL.createRng();y.setStartAfter(d),y.setEndAfter(s);let U=y.extractContents();for(let s=U.firstChild;s;s=s.firstChild)if("LI"===s.nodeName&&e.dom.isEmpty(s)){eL.remove(s);break}e.dom.isEmpty(U)||eL.insertAfter(U,s),eL.insertAfter(f,s);let er=d.parentElement;er&&ke(e.dom,er)&&(e=>{let s=e.parentNode;s&&ec.each(h,e=>{s.insertBefore(e,d.parentNode)}),eL.remove(e)})(er),eL.remove(d),ke(e.dom,s)&&eL.remove(s)})(e,d.dom,s.dom))},$e=e=>{ek(e)&&ce(e,"dd")},_e=(e,s)=>{if(he(e))return{container:e,offset:s};let d=es.getNode(e,s);return he(d)?{container:d,offset:s>=e.childNodes.length?d.data.length:0}:d.previousSibling&&he(d.previousSibling)?{container:d.previousSibling,offset:d.previousSibling.data.length}:d.nextSibling&&he(d.nextSibling)?{container:d.nextSibling,offset:0}:{container:e,offset:s}},He=e=>{let s=e.cloneRange(),d=_e(e.startContainer,e.startOffset);s.setStart(d.container,d.offset);let h=_e(e.endContainer,e.endOffset);return s.setEnd(h.container,h.offset),s},eA=["OL","UL","DL"],eE=eA.join(","),je=(e,s)=>{let d=s||e.selection.getStart(!0);return e.dom.getParent(d,eE,Qe(e,d))},Ke=e=>{let s=e.selection.getSelectedBlocks();return N(((e,s)=>{let d=ec.map(s,s=>e.dom.getParent(s,"li,dd,dt",Qe(e,s))||s);return D(d)})(e,s),ef)},ze=(e,s)=>{let d=e.dom.getParents(s,"TD,TH");return d.length>0?d[0]:e.getBody()},Qe=(e,s)=>{let d=e.dom.getParents(s,e.dom.isBlock),h=A(d,s=>{var d;return d=e.schema,!eg(s)&&!ef(s)&&C(eA,e=>d.isValidChild(s.nodeName,e))});return h.getOr(e.getBody())},We=(e,s)=>{let d=e.dom.getParents(s,"ol,ul",Qe(e,s));return w(d)},qe=(e,s)=>{let d=b(s,s=>We(e,s).getOr(s));return D(d)},Ze=e=>/\btox\-/.test(e.className),Ge=(e,s)=>O(e,eg,ev).exists(e=>e.nodeName===s&&!Ze(e)),Je=(e,s)=>null!==s&&!e.dom.isEditable(s),Xe=(e,s)=>{let d=e.dom.getParent(s,"ol,ul,dl");return Je(e,d)},Ye=(e,s)=>{let d=e.selection.getNode();return s({parents:e.dom.getParents(d),element:d}),e.on("NodeChange",s),()=>e.off("NodeChange",s)},et=(e,s)=>{let d=(s||document).createDocumentFragment();return S(e,e=>{d.appendChild(e.dom)}),P(d)},tt=(e,s,d)=>e.dispatch("ListMutation",{action:s,element:d}),eP=(e=/^\s+|\s+$/g,s=>s.replace(e,"")),rt=(e,s,h)=>{((e,s,h)=>{if(!d(h))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",h,":: Element ",e),Error("CSS value must be a string: "+h);void 0!==e.style&&U(e.style.getPropertyValue)&&e.style.setProperty(s,h)})(e.dom,s,h)},st=e=>((e,s)=>{let d=e.dom;if(1!==d.nodeType)return!1;if(void 0!==d.matches)return d.matches(s);if(void 0!==d.msMatchesSelector)return d.msMatchesSelector(s);if(void 0!==d.webkitMatchesSelector)return d.webkitMatchesSelector(s);if(void 0!==d.mozMatchesSelector)return d.mozMatchesSelector(s);throw Error("Browser lacks native selectors")})(e,"OL,UL"),it=e=>Q(e).exists(st),lt=e=>"listAttributes"in e,at=e=>"isComment"in e,dt=e=>e.depth>0,ct=e=>e.isSelected,mt=e=>{let s=K(e),d=W(e).exists(st)?s.slice(0,-1):s;return b(d,de)},ut=(e,s)=>{J(e.item,s.list)},pt=(e,s)=>{let d={list:R(s,e),item:R("li",e)};return J(d.list,d.item),d},gt=(e,s,d)=>{let h=s.slice(0,d.depth);return w(h).each(s=>{if(lt(d)){let h=((e,s,d)=>{let h=R("li",e);return le(h,s),X(h,d),h})(e,d.itemAttributes,d.content);J(s.list,h),s.item=h,_(s.list)!==d.listType&&(s.list=ce(s.list,d.listType)),le(s.list,d.listAttributes)}else if("isInPreviousLi"in d){if(d.isInPreviousLi){let h=((e,s,d,h)=>{let f=R(h,e);return le(f,s),X(f,d),f})(e,d.attributes,d.content,d.type);J(s.item,h)}}else{let e=M(`<!--${d.content}-->`);J(s.list,e)}}),h},ht=(e,s)=>{let d=g.none(),h=L(s,(s,h,f)=>lt(h)?h.depth>s.length?((e,s,d)=>{let h=((e,s,d)=>{let h=[];for(let f=0;f<d;f++)h.push(pt(e,s.listType));return h})(e,d,d.depth-s.length);return(e=>{for(let s=1;s<e.length;s++)ut(e[s-1],e[s])})(h),((e,s)=>{for(let s=0;s<e.length-1;s++)rt(e[s].item,"list-style-type","none");w(e).each(e=>{le(e.list,s.listAttributes),le(e.item,s.itemAttributes),X(e.item,s.content)})})(h,d),I(w(s),E(h),ut),s.concat(h)})(e,s,h):gt(e,s,h):0===f&&at(h)?(d=g.some(h),s):gt(e,s,h),[]);return d.each(e=>{let s=M(`<!--${e.content}-->`);E(h).each(e=>{((e,s)=>{Q(e).fold(()=>{J(e,s)},d=>{e.dom.insertBefore(s.dom,d.dom)})})(e.list,s)})}),E(h).map(e=>e.list)},ft=e=>(S(e,(s,d)=>{((e,s)=>{let d=e[s].depth,o=e=>e.depth===d&&!e.dirty,r=e=>e.depth<d;return O(k(e.slice(0,s)),o,r).orThunk(()=>O(e.slice(s+1),o,r))})(e,d).fold(()=>{s.dirty&&lt(s)&&(s.listAttributes=((e,s)=>{var d;let h={};return d=(e,s)=>{h[s]=e},ie(e,(e,h)=>{(s(e,h)?d:c)(e,h)}),h})(s.listAttributes,(e,s)=>"start"!==s))},e=>{lt(s)&&lt(e)&&(s.listType=e.listType,s.listAttributes={...e.listAttributes})})}),e),yt=(e,s,d,h)=>{var f,y;if(8===H(h)||"#comment"===_(h))return[{depth:e+1,content:null!==(f=h.dom.nodeValue)&&void 0!==f?f:"",dirty:!1,isSelected:!1,isComment:!0}];s.each(e=>{$(e.start,h)&&d.set(!0)});let U=(y=d.get(),j(h).filter(V).map(s=>({depth:e,dirty:!1,isSelected:y,content:mt(h),itemAttributes:ae(h),listAttributes:ae(s),listType:_(s),isInPreviousLi:!1})));s.each(e=>{$(e.end,h)&&d.set(!1)});let er=W(h).filter(st).map(h=>Ct(e,s,d,h)).getOr([]);return U.toArray().concat(er)},vt=(e,s,d,h)=>Q(h).filter(st).fold(()=>yt(e,s,d,h),f=>{let y=L(K(h),(h,f,y)=>{if(0===y)return h;{let y=yt(e,s,d,f).map(e=>{var s;return s=f.dom.nodeName.toLowerCase(),lt(e)?{depth:e.depth,dirty:e.dirty,content:e.content,isSelected:e.isSelected,type:s,attributes:e.itemAttributes,isInPreviousLi:!0}:e});return h.concat(y)}},[]);return Ct(e,s,d,f).concat(y)}),Ct=(e,s,d,h)=>x(K(h),h=>(st(h)?Ct:vt)(e+1,s,d,h)),bt=(e,s,d)=>{let h=((e,s)=>{let d;let h=(d=!1,{get:()=>d,set:e=>{d=e}});return b(e,e=>({sourceList:e,entries:Ct(0,s,h,e)}))})(s,(e=>{let s=b(Ke(e),P);return I(A(s,u(it)),A(k(s),u(it)),(e,s)=>({start:e,end:s}))})(e));S(h,s=>{var h;S(N(s.entries,ct),e=>((e,s)=>{switch(e){case"Indent":s.depth++;break;case"Outdent":s.depth--;break;case"Flatten":s.depth=0}s.dirty=!0})(d,e));let f=x(((e,s)=>{if(0===e.length)return[];{let d=s(e[0]),h=[],f=[];for(let y=0,U=e.length;y<U;y++){let U=e[y],er=s(U);er!==d&&(h.push(f),f=[]),d=er,f.push(U)}return 0!==f.length&&h.push(f),h}})(s.entries,dt),s=>E(s).exists(dt)?((e,s)=>{let d=ft(s);return ht(e.contentDocument,d).toArray()})(e,s):((e,s)=>{let d=ft(s);return b(d,s=>{let d=at(s)?et([M(`<!--${s.content}-->`)]):et(s.content);return P(Ie(e,d.dom))})})(e,s));S(f,s=>{tt(e,"Indent"===d?"IndentList":"OutdentList",s.dom)}),h=s.sourceList,S(f,e=>{G(h,e)}),ee(s.sourceList)})},St=(e,s)=>{let d=re((e=>{let s=(e=>{let s=We(e,e.selection.getStart()),d=N(e.selection.getSelectedBlocks(),ep);return s.toArray().concat(d)})(e),d=(e=>{let s=e.selection.getStart();return e.dom.getParents(s,"ol,ul",Qe(e,s))})(e);return A(d,e=>j(P(e)).exists(e=>ef(e.dom)&&Q(e).exists(e=>!eg(e.dom))&&W(e).exists(e=>!eg(e.dom)))).fold(()=>qe(e,s),e=>[e])})(e)),h=re(N(Ke(e),ey)),f=!1;if(d.length||h.length){let y=e.selection.getBookmark();bt(e,d,s),S(h,"Indent"===s?$e:s=>Ue(e,s)),e.selection.moveToBookmark(y),e.selection.setRng(He(e.selection.getRng())),e.nodeChanged(),f=!0}return f},Nt=(e,s)=>!(e=>{let s=je(e);return Je(e,s)})(e)&&St(e,s),Lt=e=>Nt(e,"Indent"),Ot=e=>Nt(e,"Outdent"),At=e=>Nt(e,"Flatten"),xt=e=>"\uFEFF"===e;var eT=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");let ex=eu.DOM,Et=e=>{let s={},n=d=>{let h=e[d?"startContainer":"endContainer"],f=e[d?"startOffset":"endOffset"];if(fe(h)){let e=ex.create("span",{"data-mce-type":"bookmark"});h.hasChildNodes()?(f=Math.min(f,h.childNodes.length-1),d?h.insertBefore(e,h.childNodes[f]):ex.insertAfter(e,h.childNodes[f])):h.appendChild(e),h=e,f=0}s[d?"startContainer":"endContainer"]=h,s[d?"startOffset":"endOffset"]=f};return n(!0),e.collapsed||n(),s},wt=e=>{let t=s=>{let d=e[s?"startContainer":"endContainer"],h=e[s?"startOffset":"endOffset"];if(d){if(fe(d)&&d.parentNode){let e=d;h=(e=>{var s;let d=null===(s=e.parentNode)||void 0===s?void 0:s.firstChild,h=0;for(;d;){if(d===e)return h;fe(d)&&"bookmark"===d.getAttribute("data-mce-type")||h++,d=d.nextSibling}return -1})(d),d=d.parentNode,ex.remove(e),!d.hasChildNodes()&&ex.isBlock(d)&&d.appendChild(ex.create("br"))}e[s?"startContainer":"endContainer"]=d,e[s?"startOffset":"endOffset"]=h}};t(!0),t();let s=ex.createRng();return s.setStart(e.startContainer,e.startOffset),e.endContainer&&s.setEnd(e.endContainer,e.endOffset),He(s)},Dt=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Bt=(e,s)=>{ec.each(s,(s,d)=>{e.setAttribute(d,s)})},It=(e,s,d)=>{((e,s,d)=>{let h=d["list-style-type"]?d["list-style-type"]:null;e.setStyle(s,"list-style-type",h)})(e,s,d),Bt(s,d["list-attributes"]),ec.each(e.select("li",s),e=>{Bt(e,d["list-item-attributes"])})},Pt=(e,s)=>l(s)&&!Ae(s,e.schema.getBlockElements()),Mt=(e,s,d,h)=>{let f=s[d?"startContainer":"endContainer"],y=s[d?"startOffset":"endOffset"];fe(f)&&(f=f.childNodes[Math.min(y,f.childNodes.length-1)]||f),!d&&eb(f.nextSibling)&&(f=f.nextSibling);let i=(s,d)=>{var f;let y;let U=new ea(s,(s=>{for(;!e.dom.isBlock(s)&&s.parentNode&&h!==s;)s=s.parentNode;return s})(s)),er=d?"next":"prev";for(;y=U[er]();)if(!xe(e,y)&&!xt(y.textContent)&&0!==(null===(f=y.textContent)||void 0===f?void 0:f.length))return g.some(y);return g.none()};if(d&&he(f)){if(xt(f.textContent))f=i(f,!1).getOr(f);else for(null!==f.parentNode&&Pt(e,f.parentNode)&&(f=f.parentNode);null!==f.previousSibling&&(Pt(e,f.previousSibling)||he(f.previousSibling));)f=f.previousSibling}if(!d&&he(f)){if(xt(f.textContent))f=i(f,!0).getOr(f);else for(null!==f.parentNode&&Pt(e,f.parentNode)&&(f=f.parentNode);null!==f.nextSibling&&(Pt(e,f.nextSibling)||he(f.nextSibling));)f=f.nextSibling}for(;f.parentNode!==h;){let s=f.parentNode;if(Oe(e,f)||/^(TD|TH)$/.test(s.nodeName))break;f=s}return f},Rt=(e,s,d)=>{let h=e.selection.getRng(),f="LI",y=Qe(e,((e,s)=>{let d=e.selection.getStart(!0),h=Mt(e,s,!0,e.getBody());return q(P(h),function(e,...s){return(...d)=>{let h=s.concat(d);return e.apply(null,h)}}($,P(s.commonAncestorContainer)),void 0).isSome()?s.commonAncestorContainer:d})(e,h)),U=e.dom;if("false"===U.getContentEditable(e.selection.getNode()))return;"DL"===(s=s.toUpperCase())&&(f="DT");let er=Et(h),el=N(((e,s,d)=>{let h;let f=[],y=e.dom,U=Mt(e,s,!0,d),er=Mt(e,s,!1,d),el=[];for(let e=U;e&&(el.push(e),e!==er);e=e.nextSibling);return ec.each(el,s=>{var U;if(Oe(e,s))return f.push(s),void(h=null);if(y.isBlock(s)||eb(s))return eb(s)&&y.remove(s),void(h=null);let er=s.nextSibling;eT.isBookmarkNode(s)&&(eg(er)||Oe(e,er)||!er&&s.parentNode===d)?h=null:(h||(h=y.create("p"),null===(U=s.parentNode)||void 0===U||U.insertBefore(h,s),f.push(h)),h.appendChild(s))}),f})(e,h,y),e.dom.isEditable);ec.each(el,h=>{var y;let er;let el=h.previousSibling,eo=h.parentNode;ef(eo)||(el&&eg(el)&&el.nodeName===s&&((e,s,d)=>{let h=e.getStyle(s,"list-style-type"),f=d?d["list-style-type"]:"";return h===(f=null===f?"":f)})(U,el,d)?(er=el,h=U.rename(h,f),el.appendChild(h)):(er=U.create(s),eo.insertBefore(er,h),er.appendChild(h),h=U.rename(h,f)),y=h,ec.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],e=>U.setStyle(y,e,"")),It(U,er,d),$t(e.dom,er))}),e.selection.setRng(wt(er))},Ut=(e,s,d)=>eg(s)&&s.nodeName===(null==d?void 0:d.nodeName)&&e.getStyle(s,"list-style-type",!0)===e.getStyle(d,"list-style-type",!0)&&s.className===d.className,$t=(e,s)=>{let d,h=s.nextSibling;if(Ut(e,s,h)){let f=h;for(;d=f.firstChild;)s.appendChild(d);e.remove(f)}if(h=s.previousSibling,Ut(e,s,h)){let f=h;for(;d=f.lastChild;)s.insertBefore(d,s.firstChild);e.remove(f)}},_t=(e,s,d,h)=>{if(s.nodeName!==d){let f=e.dom.rename(s,d);It(e.dom,f,h),tt(e,Dt(d),f)}else It(e.dom,s,h),tt(e,Dt(d),s)},Ht=(e,s,d,h)=>{if(s.classList.forEach((e,d,h)=>{e.startsWith("tox-")&&(h.remove(e),0===h.length&&s.removeAttribute("class"))}),s.nodeName!==d){let f=e.dom.rename(s,d);It(e.dom,f,h),tt(e,Dt(d),f)}else It(e.dom,s,h),tt(e,Dt(d),s)},Vt=e=>"list-style-type"in e,Ft=(e,s,d)=>{let f=je(e);if(Xe(e,f))return;let y=(e=>{let s=je(e),d=e.selection.getSelectedBlocks();return l(s)&&1===d.length&&d[0]===s?N(s.querySelectorAll(eE),eg):N(d,e=>eg(e)&&s!==e)})(e),U=h(d)?d:{};y.length>0?((e,s,d,h,f)=>{let y=eg(s);if(!y||s.nodeName!==h||Vt(f)||Ze(s)){Rt(e,h,f);let U=Et(e.selection.getRng()),er=y?[s,...d]:d,el=y&&Ze(s)?Ht:_t;ec.each(er,s=>{el(e,s,h,f)}),e.selection.setRng(wt(U))}else At(e)})(e,f,y,s,U):((e,s,d,h)=>{if(s!==e.getBody()){if(s){if(s.nodeName!==d||Vt(h)||Ze(s)){let f=Et(e.selection.getRng());Ze(s)&&s.classList.forEach((e,d,h)=>{e.startsWith("tox-")&&(h.remove(e),0===h.length&&s.removeAttribute("class"))}),It(e.dom,s,h);let y=e.dom.rename(s,d);$t(e.dom,y),e.selection.setRng(wt(f)),Rt(e,d,h),tt(e,Dt(d),y)}else At(e)}else Rt(e,d,h),tt(e,Dt(d),s)}})(e,f,s,U)},eD=eu.DOM,Kt=(e,s)=>{let d=ec.grep(e.select("ol,ul",s));ec.each(d,s=>{((e,s)=>{let d=s.parentElement;if(d&&"LI"===d.nodeName&&d.firstChild===s){let h=d.previousSibling;h&&"LI"===h.nodeName?(h.appendChild(s),ke(e,d)&&eD.remove(d)):eD.setStyle(d,"listStyleType","none")}if(eg(d)){let e=d.previousSibling;e&&"LI"===e.nodeName&&e.appendChild(s)}})(e,s)})},zt=(e,s,d,h)=>{var f,y;let U=s.startContainer,er=s.startOffset;if(he(U)&&(d?er<U.data.length:er>0))return U;let el=e.schema.getNonEmptyElements();fe(U)&&(U=es.getNode(U,er));let eo=new ea(U,h);d&&(f=e.dom,eb(y=U)&&f.isBlock(y.nextSibling)&&!eb(y.previousSibling))&&eo.next();let ei=d?eo.next.bind(eo):eo.prev2.bind(eo);for(;U=ei();)if("LI"===U.nodeName&&!U.hasChildNodes()||el[U.nodeName]||he(U)&&U.data.length>0)return U;return null},Qt=(e,s)=>{let d=s.childNodes;return 1===d.length&&!eg(d[0])&&e.isBlock(d[0])},Wt=(e,s,d)=>{let h;let f=s.parentNode;if(!Te(e,s)||!Te(e,d))return;eg(d.lastChild)&&(h=d.lastChild),f===d.lastChild&&eb(f.previousSibling)&&e.remove(f.previousSibling);let y=d.lastChild;y&&eb(y)&&s.hasChildNodes()&&e.remove(y),ke(e,d,!0)&&Y(P(d)),((e,s,d)=>{let h;let f=Qt(e,d)?d.firstChild:d;if(Qt(e,s)&&e.remove(s.firstChild,!0),!ke(e,s,!0))for(;h=s.firstChild;)f.appendChild(h)})(e,s,d),h&&d.appendChild(h);let U=((e,s)=>{let d=e.dom,h=s.dom;return d!==h&&d.contains(h)})(P(d),P(s))?e.getParents(s,eg,d):[];e.remove(s),S(U,s=>{ke(e,s)&&s!==e.getRoot()&&e.remove(s)})},qt=(e,s)=>{let d=e.dom,h=e.selection,f=h.getStart(),y=ze(e,f),U=d.getParent(h.getStart(),"LI",y);if(U){let f=U.parentElement;if(f===e.getBody()&&ke(d,f))return!0;let er=He(h.getRng()),el=d.getParent(zt(e,er,s,y),"LI",y);if(el&&el!==U)return e.undoManager.transact(()=>{var d;s?((e,s,d,h)=>{let f=e.dom;if(f.isEmpty(h))Y(P(h)),Wt(e.dom,d,h),e.selection.setCursorLocation(h,0);else{let y=Et(s);Wt(f,d,h),e.selection.setRng(wt(y))}})(e,er,el,U):(null===(d=U.parentNode)||void 0===d?void 0:d.firstChild)===U?Ot(e):((e,s,d,h)=>{let f=Et(s);Wt(e.dom,d,h);let y=wt(f);e.selection.setRng(y)})(e,er,U,el)}),!0;if(!el&&!s&&0===er.startOffset&&0===er.endOffset)return e.undoManager.transact(()=>{At(e)}),!0}return!1},Zt=e=>{let s=e.selection.getStart(),d=ze(e,s);return e.dom.getParent(s,"LI,DT,DD",d)||Ke(e).length>0},Gt=(e,s)=>{let d=e.selection;return!Xe(e,d.getNode())&&(d.isCollapsed()?qt(e,s)||((e,s)=>{let d=e.dom,h=e.selection.getStart(),f=ze(e,h),y=d.getParent(h,d.isBlock,f);if(y&&d.isEmpty(y)){let h=He(e.selection.getRng()),U=d.getParent(zt(e,h,s,f),"LI",f);if(U){let l=e=>v(["td","th","caption"],_(e)),a=e=>e.dom===f;return!!((e,s,d=m)=>I(e,s,d).getOr(e.isNone()&&s.isNone()))(Z(P(U),l,a),Z(P(h.startContainer),l,a),$)&&(e.undoManager.transact(()=>{let h=U.parentNode;((e,s,d)=>{let h=e.getParent(s.parentNode,e.isBlock,d);e.remove(s),h&&e.isEmpty(h)&&e.remove(h)})(d,y,f),$t(d,h),e.selection.select(U,!0),e.selection.collapse(s)}),!0)}}return!1})(e,s):!!Zt(e)&&(e.undoManager.transact(()=>{e.execCommand("Delete"),Kt(e.dom,e.getBody())}),!0))},Jt=e=>{let s=k(eP(e).split("")),d=b(s,(e,s)=>{let d=e.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,s)*d});return L(d,(e,s)=>e+s,0)},Xt=e=>{if(--e<0)return"";{let s=e%26,d=Math.floor(e/26);return Xt(d)+String.fromCharCode(65+s)}},Yt=e=>{let s=parseInt(e.start,10);return B(e.listStyleType,"upper-alpha")?Xt(s):B(e.listStyleType,"lower-alpha")?Xt(s).toLowerCase():e.start},en=(e,s)=>()=>{let d=je(e);return l(d)&&d.nodeName===s},tn=e=>{e.addCommand("mceListProps",()=>{(e=>{let s=je(e);eh(s)&&!Xe(e,s)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Yt({start:e.dom.getAttrib(s,"start","1"),listStyleType:g.from(e.dom.getStyle(s,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:s=>{(e=>{switch(/^[0-9]+$/.test(e)?2:/^[A-Z]+$/.test(e)?0:/^[a-z]+$/.test(e)?1:e.length>0?4:3){case 2:return g.some({listStyleType:g.none(),start:e});case 0:return g.some({listStyleType:g.some("upper-alpha"),start:Jt(e).toString()});case 1:return g.some({listStyleType:g.some("lower-alpha"),start:Jt(e).toString()});case 3:return g.some({listStyleType:g.none(),start:""});case 4:return g.none()}})(s.getData().start).each(s=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===s.start?"":s.start},styles:{"list-style-type":s.listStyleType.getOr("")}})}),s.close()}})})(e)})};var ew=tinymce.util.Tools.resolve("tinymce.html.Node");let on=e=>3===e.type,rn=e=>0===e.length,sn=e=>{let t=(s,d)=>{let h=ew.create("li");S(s,e=>h.append(e)),d?e.insert(h,d,!0):e.append(h)},s=L(e.children(),(e,s)=>on(s)?[...e,s]:rn(e)||on(s)?e:(t(e,s),[]),[]);rn(s)||t(s)},ln=(e,s)=>d=>(d.setEnabled(e.selection.isEditable()),Ye(e,h=>{d.setActive(Ge(h.parents,s)),d.setEnabled(!Xe(e,h.element)&&e.selection.isEditable())})),an=(e,s)=>d=>Ye(e,h=>d.setEnabled(Ge(h.parents,s)&&!Xe(e,h.element)));s.add("lists",e=>((e=>{(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})})(e),(e=>{e.on("PreInit",()=>{let{parser:s}=e;s.addNodeFilter("ul,ol",e=>S(e,sn))})})(e),e.hasPlugin("rtc",!0)?tn(e):(eC(e)&&(e=>{e.on("keydown",s=>{s.keyCode!==ed.TAB||ed.metaKeyPressed(s)||e.undoManager.transact(()=>{(s.shiftKey?Ot(e):Lt(e))&&s.preventDefault()})})})(e),e.on("ExecCommand",s=>{let d=s.command.toLowerCase();("delete"===d||"forwarddelete"===d)&&Zt(e)&&Kt(e.dom,e.getBody())}),e.on("keydown",s=>{s.keyCode===ed.BACKSPACE?Gt(e,!1)&&s.preventDefault():s.keyCode===ed.DELETE&&Gt(e,!0)&&s.preventDefault()}),e.on("BeforeExecCommand",s=>{let d=s.command.toLowerCase();"indent"===d?Lt(e):"outdent"===d&&Ot(e)}),e.addCommand("InsertUnorderedList",(s,d)=>{Ft(e,"UL",d)}),e.addCommand("InsertOrderedList",(s,d)=>{Ft(e,"OL",d)}),e.addCommand("InsertDefinitionList",(s,d)=>{Ft(e,"DL",d)}),e.addCommand("RemoveList",()=>{At(e)}),tn(e),e.addCommand("mceListUpdate",(s,d)=>{h(d)&&((e,s)=>{let d=je(e);null===d||Xe(e,d)||e.undoManager.transact(()=>{h(s.styles)&&e.dom.setStyles(d,s.styles),h(s.attrs)&&ie(s.attrs,(s,h)=>e.dom.setAttrib(d,h,s))})})(e,d)}),e.addQueryStateHandler("InsertUnorderedList",en(e,"UL")),e.addQueryStateHandler("InsertOrderedList",en(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",en(e,"DL"))),(e=>{let t=s=>()=>e.execCommand(s);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:ln(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:ln(e,"UL")}))})(e),(e=>{let s={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:an(e,"OL")};e.ui.registry.addMenuItem("listprops",s),e.ui.registry.addContextMenu("lists",{update:s=>{let d=je(e,s);return eh(d)?["listprops"]:[]}})})(e),{backspaceDelete:s=>{Gt(e,s)}}))}();