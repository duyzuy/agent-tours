!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let t=(e,t,r)=>{var n;return!!r(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},r=e=>{let r=typeof e;return null===e?"null":"object"===r&&Array.isArray(e)?"array":"object"===r&&t(e,String,(e,t)=>t.isPrototypeOf(e))?"string":r},n=e=>t=>r(t)===e,o=e=>t=>typeof t===e,l=n("string"),i=n("object"),s=n("array"),a=o("boolean"),d=e=>null==e,m=e=>!d(e),u=o("function"),c=o("number"),p=()=>{},g=(e,t)=>e===t,f=e=>t=>!e(t),h=()=>!1;class y{constructor(e,t){this.tag=e,this.value=t}static some(e){return new y(!0,e)}static none(){return y.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?y.some(e(this.value)):y.none()}bind(e){return this.tag?e(this.value):y.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:y.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return m(e)?y.some(e):y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}y.singletonNone=new y(!1);let v=Array.prototype.slice,b=Array.prototype.indexOf,C=Array.prototype.push,S=(e,t)=>b.call(e,t),N=(e,t)=>S(e,t)>-1,L=(e,t)=>{for(let r=0,n=e.length;r<n;r++){let n=e[r];if(t(n,r))return!0}return!1},D=(e,t)=>{let r=e.length,n=Array(r);for(let o=0;o<r;o++){let r=e[o];n[o]=t(r,o)}return n},T=(e,t)=>{for(let r=0,n=e.length;r<n;r++){let n=e[r];t(n,r)}},O=(e,t)=>{let r=[];for(let n=0,o=e.length;n<o;n++){let o=e[n];t(o,n)&&r.push(o)}return r},k=(e,t)=>{if(0===e.length)return[];{let r=t(e[0]),n=[],o=[];for(let l=0,i=e.length;l<i;l++){let i=e[l],s=t(i);s!==r&&(n.push(o),o=[]),r=s,o.push(i)}return 0!==o.length&&n.push(o),n}},A=(e,t,r)=>(T(e,(e,n)=>{r=t(r,e,n)}),r),x=(e,t,r)=>{for(let n=0,o=e.length;n<o;n++){let o=e[n];if(t(o,n))return y.some(o);if(r(o,n))break}return y.none()},E=(e,t)=>x(e,t,h),B=e=>{let t=[];for(let r=0,n=e.length;r<n;++r){if(!s(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);C.apply(t,e[r])}return t},w=(e,t)=>B(D(e,t)),P=e=>{let t=v.call(e,0);return t.reverse(),t},I=(e,t)=>t>=0&&t<e.length?y.some(e[t]):y.none(),M=e=>I(e,0),R=e=>I(e,e.length-1),U=(e,t)=>{let r=[],n=u(t)?e=>L(r,r=>t(r,e)):e=>N(r,e);for(let t=0,o=e.length;t<o;t++){let o=e[t];n(o)||r.push(o)}return r},$=(e,t,r=g)=>e.exists(e=>r(e,t)),H=(e,t,r=g)=>_(e,t,r).getOr(e.isNone()&&t.isNone()),_=(e,t,r)=>e.isSome()&&t.isSome()?y.some(r(e.getOrDie(),t.getOrDie())):y.none(),F=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},V={fromHtml:(e,t)=>{let r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return F(r.childNodes[0])},fromTag:(e,t)=>{let r=(t||document).createElement(e);return F(r)},fromText:(e,t)=>{let r=(t||document).createTextNode(e);return F(r)},fromDom:F,fromPoint:(e,t,r)=>y.from(e.dom.elementFromPoint(t,r)).map(F)},j=(e,t)=>e.dom===t.dom,K=(e,t)=>{let r=e.dom,n=t.dom;return r!==n&&r.contains(n)},z=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")};var Q=(e,t,r,n,o)=>e(r,n)?y.some(r):u(o)&&o(r)?y.none():t(r,n,o);"undefined"!=typeof window?window:Function("return this;")();let W=e=>{let t=e.dom.nodeName;return t.toLowerCase()},q=e=>e.dom.nodeType,Z=e=>8===q(e)||"#comment"===W(e),G=e=>1===q(e),J=e=>t=>G(t)&&W(t)===e,X=e=>y.from(e.dom.parentNode).map(V.fromDom),Y=e=>y.from(e.dom.parentElement).map(V.fromDom),ee=e=>y.from(e.dom.nextSibling).map(V.fromDom),et=e=>D(e.dom.childNodes,V.fromDom),er=(e,t)=>{let r=e.dom.childNodes;return y.from(r[t]).map(V.fromDom)},en=e=>er(e,0),eo=e=>er(e,e.dom.childNodes.length-1),el=(e,t,r)=>{let n=e.dom,o=u(r)?r:h;for(;n.parentNode;){n=n.parentNode;let e=V.fromDom(n);if(t(e))return y.some(e);if(o(e))break}return y.none()},ei=(e,t,r)=>Q((e,t)=>t(e),el,e,t,r),es=(e,t)=>{let r=X(e);r.each(r=>{r.dom.insertBefore(t.dom,e.dom)})},ea=(e,t)=>{let r=ee(e);r.fold(()=>{let r=X(e);r.each(e=>{em(e,t)})},e=>{es(e,t)})},ed=(e,t)=>{let r=en(e);r.fold(()=>{em(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},em=(e,t)=>{e.dom.appendChild(t.dom)},eu=(e,t)=>{T(t,t=>{es(e,t)})},ec=(e,t)=>{T(t,t=>{em(e,t)})},ep=e=>{e.dom.textContent="",T(et(e),e=>{eg(e)})},eg=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)};var ef=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),eh=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ey=tinymce.util.Tools.resolve("tinymce.util.VK");let ev=e=>D(e,V.fromDom),eb=Object.keys,eC=(e,t)=>{let r=eb(e);for(let n=0,o=r.length;n<o;n++){let o=r[n],l=e[o];t(l,o)}},eS=e=>(t,r)=>{e[r]=t},eN=(e,t,r,n)=>{eC(e,(e,o)=>{(t(e,o)?r:n)(e,o)})},eL=(e,t)=>{let r={};return eN(e,t,eS(r),p),r},eD=(e,t,r)=>{if(l(r)||a(r)||c(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},eT=(e,t)=>{let r=e.dom;eC(t,(e,t)=>{eD(r,t,e)})},eO=e=>A(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),ek=(e,t)=>V.fromDom(e.dom.cloneNode(t)),eA=e=>ek(e,!0),ex=(e,t)=>{let r=V.fromTag(t),n=eO(e);return eT(r,n),r},eE=(e,t)=>{let r=ex(e,t);ea(e,r);let n=et(e);return ec(r,n),eg(e),r};var eB=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ew=tinymce.util.Tools.resolve("tinymce.util.Tools");let eP=e=>t=>m(t)&&t.nodeName.toLowerCase()===e,eI=e=>t=>m(t)&&e.test(t.nodeName),eM=e=>m(e)&&3===e.nodeType,eR=e=>m(e)&&1===e.nodeType,eU=eI(/^(OL|UL|DL)$/),e$=eI(/^(OL|UL)$/),eH=eP("ol"),e_=eI(/^(LI|DT|DD)$/),eF=eI(/^(DT|DD)$/),eV=eI(/^(TH|TD)$/),ej=eP("br"),eK=e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e},ez=(e,t)=>m(t)&&t.nodeName in e.schema.getTextBlockElements(),eQ=(e,t)=>m(e)&&e.nodeName in t,eW=(e,t)=>m(t)&&t.nodeName in e.schema.getVoidElements(),eq=(e,t)=>!!ej(t)&&e.isBlock(t.nextSibling)&&!ej(t.previousSibling),eZ=(e,t,r)=>{let n=e.isEmpty(t);return(!r||!(e.select("span[data-mce-type=bookmark]",t).length>0))&&n},eG=(e,t)=>e.isChildOf(t,e.getRoot()),eJ=e=>t=>t.options.get(e),eX=e=>{let t=e.options.register;t("lists_indent_on_tab",{processor:"boolean",default:!0})},eY=eJ("lists_indent_on_tab"),e0=eJ("forced_root_block"),e1=eJ("forced_root_block_attrs"),e2=(e,t)=>{let r,n;let o=e.dom,l=e.schema.getBlockElements(),i=o.createFragment(),s=e0(e),a=e1(e),d=!1;for(n=o.create(s,a),eQ(t.firstChild,l)||i.appendChild(n);r=t.firstChild;){let e=r.nodeName;d||"SPAN"===e&&"bookmark"===r.getAttribute("data-mce-type")||(d=!0),eQ(r,l)?(i.appendChild(r),n=null):(n||(n=o.create(s,a),i.appendChild(n)),n.appendChild(r))}return!d&&n&&n.appendChild(o.create("br",{"data-mce-bogus":"1"})),i},e6=eB.DOM,e3=(e,t,r)=>{let n=e6.select('span[data-mce-type="bookmark"]',t),o=e2(e,r),l=e6.createRng();l.setStartAfter(r),l.setEndAfter(t);let i=l.extractContents();for(let t=i.firstChild;t;t=t.firstChild)if("LI"===t.nodeName&&e.dom.isEmpty(t)){e6.remove(t);break}e.dom.isEmpty(i)||e6.insertAfter(i,t),e6.insertAfter(o,t);let s=r.parentElement;s&&eZ(e.dom,s)&&(e=>{let t=e.parentNode;t&&ew.each(n,e=>{t.insertBefore(e,r.parentNode)}),e6.remove(e)})(s),e6.remove(r),eZ(e.dom,t)&&e6.remove(t)},e4=J("dd"),e5=J("dt"),e8=(e,t)=>{e4(t)?eE(t,"dt"):e5(t)&&Y(t).each(r=>e3(e,r.dom,t.dom))},e9=e=>{e5(e)&&eE(e,"dd")},e7=(e,t,r)=>{"Indent"===t?T(r,e9):T(r,t=>e8(e,t))},te=(e,t)=>{if(eM(e))return{container:e,offset:t};let r=ef.getNode(e,t);return eM(r)?{container:r,offset:t>=e.childNodes.length?r.data.length:0}:r.previousSibling&&eM(r.previousSibling)?{container:r.previousSibling,offset:r.previousSibling.data.length}:r.nextSibling&&eM(r.nextSibling)?{container:r.nextSibling,offset:0}:{container:e,offset:t}},tt=e=>{let t=e.cloneRange(),r=te(e.startContainer,e.startOffset);t.setStart(r.container,r.offset);let n=te(e.endContainer,e.endOffset);return t.setEnd(n.container,n.offset),t},tr=["OL","UL","DL"],tn=tr.join(","),to=(e,t)=>{let r=t||e.selection.getStart(!0);return e.dom.getParent(r,tn,tp(e,r))},tl=(e,t)=>m(e)&&1===t.length&&t[0]===e,ti=e=>O(e.querySelectorAll(tn),eU),ts=e=>{let t=to(e),r=e.selection.getSelectedBlocks();return tl(t,r)?ti(t):O(r,e=>eU(e)&&t!==e)},ta=(e,t)=>{let r=ew.map(t,t=>{let r=e.dom.getParent(t,"li,dd,dt",tp(e,t));return r||t});return U(r)},td=e=>{let t=e.selection.getSelectedBlocks();return O(ta(e,t),e_)},tm=e=>O(td(e),eF),tu=(e,t)=>{let r=e.dom.getParents(t,"TD,TH");return r.length>0?r[0]:e.getBody()},tc=(e,t)=>!eU(t)&&!e_(t)&&L(tr,r=>e.isValidChild(t.nodeName,r)),tp=(e,t)=>{let r=e.dom.getParents(t,e.dom.isBlock),n=E(r,t=>tc(e.schema,t));return n.getOr(e.getBody())},tg=e=>X(e).exists(e=>e_(e.dom)&&en(e).exists(e=>!eU(e.dom))&&eo(e).exists(e=>!eU(e.dom))),tf=(e,t)=>{let r=e.dom.getParents(t,"ol,ul",tp(e,t));return R(r)},th=e=>{let t=tf(e,e.selection.getStart()),r=O(e.selection.getSelectedBlocks(),e$);return t.toArray().concat(r)},ty=e=>{let t=e.selection.getStart();return e.dom.getParents(t,"ol,ul",tp(e,t))},tv=e=>{let t=th(e),r=ty(e);return E(r,e=>tg(V.fromDom(e))).fold(()=>tb(e,t),e=>[e])},tb=(e,t)=>{let r=D(t,t=>tf(e,t).getOr(t));return U(r)},tC=e=>/\btox\-/.test(e.className),tS=(e,t)=>x(e,eU,eV).exists(e=>e.nodeName===t&&!tC(e)),tN=(e,t)=>null!==t&&!e.dom.isEditable(t),tL=e=>{let t=to(e);return tN(e,t)},tD=(e,t)=>{let r=e.dom.getParent(t,"ol,ul,dl");return tN(e,r)},tT=(e,t)=>{let r=e.selection.getNode();return t({parents:e.dom.getParents(r),element:r}),e.on("NodeChange",t),()=>e.off("NodeChange",t)},tO=(e,t)=>{let r=(t||document).createDocumentFragment();return T(e,e=>{r.appendChild(e.dom)}),V.fromDom(r)},tk=(e,t,r)=>e.dispatch("ListMutation",{action:t,element:r}),tA=e=>e.replace(/^\s+|\s+$/g,""),tx=e=>e.length>0,tE=e=>!tx(e),tB=e=>void 0!==e.style&&u(e.style.getPropertyValue),tw=(e,t,r)=>{if(!l(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);tB(e)&&e.style.setProperty(t,r)},tP=(e,t,r)=>{let n=e.dom;tw(n,t,r)},tI=e=>z(e,"OL,UL"),tM=e=>en(e).exists(tI),tR=e=>eo(e).exists(tI),tU=e=>"listAttributes"in e,t$=e=>"isInPreviousLi"in e,tH=e=>"isComment"in e,t_=e=>e.depth>0,tF=e=>e.isSelected,tV=e=>{let t=et(e),r=tR(e)?t.slice(0,-1):t;return D(r,eA)},tj=(e,t,r)=>X(e).filter(G).map(n=>({depth:t,dirty:!1,isSelected:r,content:tV(e),itemAttributes:eO(e),listAttributes:eO(n),listType:W(n),isInPreviousLi:!1})),tK=(e,t)=>{em(e.item,t.list)},tz=e=>{for(let t=1;t<e.length;t++)tK(e[t-1],e[t])},tQ=(e,t)=>{_(R(e),M(t),tK)},tW=(e,t)=>{let r={list:V.fromTag(t,e),item:V.fromTag("li",e)};return em(r.list,r.item),r},tq=(e,t,r)=>{let n=[];for(let o=0;o<r;o++)n.push(tW(e,t.listType));return n},tZ=(e,t)=>{for(let t=0;t<e.length-1;t++)tP(e[t].item,"list-style-type","none");R(e).each(e=>{eT(e.list,t.listAttributes),eT(e.item,t.itemAttributes),ec(e.item,t.content)})},tG=(e,t)=>{W(e.list)!==t.listType&&(e.list=eE(e.list,t.listType)),eT(e.list,t.listAttributes)},tJ=(e,t,r)=>{let n=V.fromTag("li",e);return eT(n,t),ec(n,r),n},tX=(e,t)=>{em(e.list,t),e.item=t},tY=(e,t,r,n)=>{let o=V.fromTag(n,e);return eT(o,t),ec(o,r),o},t0=(e,t,r)=>{let n=t.slice(0,r.depth);return R(n).each(t=>{if(tU(r)){let n=tJ(e,r.itemAttributes,r.content);tX(t,n),tG(t,r)}else if(t$(r)){if(r.isInPreviousLi){let n=tY(e,r.attributes,r.content,r.type);em(t.item,n)}}else{let e=V.fromHtml(`<!--${r.content}-->`);em(t.list,e)}}),n},t1=(e,t,r)=>{let n=tq(e,r,r.depth-t.length);return tz(n),tZ(n,r),tQ(t,n),t.concat(n)},t2=(e,t)=>{let r=y.none(),n=A(t,(t,n,o)=>tU(n)?n.depth>t.length?t1(e,t,n):t0(e,t,n):0===o&&tH(n)?(r=y.some(n),t):t0(e,t,n),[]);return r.each(e=>{let t=V.fromHtml(`<!--${e.content}-->`);M(n).each(e=>{ed(e.list,t)})}),M(n).map(e=>e.list)},t6=(e,t)=>{switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0},t3=(e,t)=>{tU(e)&&tU(t)&&(e.listType=t.listType,e.listAttributes={...t.listAttributes})},t4=e=>{e.listAttributes=eL(e.listAttributes,(e,t)=>"start"!==t)},t5=(e,t)=>{let r=e[t].depth,n=e=>e.depth===r&&!e.dirty,o=e=>e.depth<r;return x(P(e.slice(0,t)),n,o).orThunk(()=>x(e.slice(t+1),n,o))},t8=e=>(T(e,(t,r)=>{t5(e,r).fold(()=>{t.dirty&&tU(t)&&t4(t)},e=>t3(t,e))}),e),t9=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},t7=(e,t,r)=>tU(e)?{depth:e.depth,dirty:e.dirty,content:e.content,isSelected:e.isSelected,type:t,attributes:e.itemAttributes,isInPreviousLi:r}:e,re=(e,t,r,n)=>{var o;if(Z(n))return[{depth:e+1,content:null!==(o=n.dom.nodeValue)&&void 0!==o?o:"",dirty:!1,isSelected:!1,isComment:!0}];t.each(e=>{j(e.start,n)&&r.set(!0)});let l=tj(n,e,r.get());t.each(e=>{j(e.end,n)&&r.set(!1)});let i=eo(n).filter(tI).map(n=>rr(e,t,r,n)).getOr([]);return l.toArray().concat(i)},rt=(e,t,r,n)=>en(n).filter(tI).fold(()=>re(e,t,r,n),o=>{let l=A(et(n),(n,o,l)=>{if(0===l)return n;{let l=re(e,t,r,o).map(e=>t7(e,o.dom.nodeName.toLowerCase(),!0));return n.concat(l)}},[]);return rr(e,t,r,o).concat(l)}),rr=(e,t,r,n)=>w(et(n),n=>{let o=tI(n)?rr:rt;return o(e+1,t,r,n)}),rn=(e,t)=>{let r=t9(!1);return D(e,e=>({sourceList:e,entries:rr(0,t,r,e)}))},ro=(e,t)=>{let r=t8(t);return D(r,t=>{let r=tH(t)?tO([V.fromHtml(`<!--${t.content}-->`)]):tO(t.content);return V.fromDom(e2(e,r.dom))})},rl=(e,t)=>{let r=t8(t);return t2(e.contentDocument,r).toArray()},ri=(e,t)=>w(k(t,t_),t=>{let r=M(t).exists(t_);return r?rl(e,t):ro(e,t)}),rs=(e,t)=>{T(O(e,tF),e=>t6(t,e))},ra=e=>{let t=D(td(e),V.fromDom);return _(E(t,f(tM)),E(P(t),f(tM)),(e,t)=>({start:e,end:t}))},rd=(e,t,r)=>{let n=rn(t,ra(e));T(n,t=>{rs(t.entries,r);let n=ri(e,t.entries);T(n,t=>{tk(e,"Indent"===r?"IndentList":"OutdentList",t.dom)}),eu(t.sourceList,n),eg(t.sourceList)})},rm=(e,t)=>{let r=ev(tv(e)),n=ev(tm(e)),o=!1;if(r.length||n.length){let l=e.selection.getBookmark();rd(e,r,t),e7(e,t,n),e.selection.moveToBookmark(l),e.selection.setRng(tt(e.selection.getRng())),e.nodeChanged(),o=!0}return o},ru=(e,t)=>!tL(e)&&rm(e,t),rc=e=>ru(e,"Indent"),rp=e=>ru(e,"Outdent"),rg=e=>ru(e,"Flatten"),rf=e=>"\uFEFF"===e,rh=(e,t,r)=>el(e,t,r).isSome(),ry=(e,t)=>rh(e,function(e,...t){return(...r)=>{let n=t.concat(r);return e.apply(null,n)}}(j,t));var rv=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");let rb=eB.DOM,rC=e=>{let t={},r=r=>{let n=e[r?"startContainer":"endContainer"],o=e[r?"startOffset":"endOffset"];if(eR(n)){let e=rb.create("span",{"data-mce-type":"bookmark"});n.hasChildNodes()?(o=Math.min(o,n.childNodes.length-1),r?n.insertBefore(e,n.childNodes[o]):rb.insertAfter(e,n.childNodes[o])):n.appendChild(e),n=e,o=0}t[r?"startContainer":"endContainer"]=n,t[r?"startOffset":"endOffset"]=o};return r(!0),e.collapsed||r(),t},rS=e=>{let t=t=>{let r=e[t?"startContainer":"endContainer"],n=e[t?"startOffset":"endOffset"];if(r){if(eR(r)&&r.parentNode){let e=r;n=(e=>{var t;let r=null===(t=e.parentNode)||void 0===t?void 0:t.firstChild,n=0;for(;r;){if(r===e)return n;(!eR(r)||"bookmark"!==r.getAttribute("data-mce-type"))&&n++,r=r.nextSibling}return -1})(r),r=r.parentNode,rb.remove(e),!r.hasChildNodes()&&rb.isBlock(r)&&r.appendChild(rb.create("br"))}e[t?"startContainer":"endContainer"]=r,e[t?"startOffset":"endOffset"]=n}};t(!0),t();let r=rb.createRng();return r.setStart(e.startContainer,e.startOffset),e.endContainer&&r.setEnd(e.endContainer,e.endOffset),tt(r)},rN=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},rL=(e,t,r)=>{let n=r["list-style-type"]?r["list-style-type"]:null;e.setStyle(t,"list-style-type",n)},rD=(e,t)=>{ew.each(t,(t,r)=>{e.setAttribute(r,t)})},rT=(e,t,r)=>{rD(t,r["list-attributes"]),ew.each(e.select("li",t),e=>{rD(e,r["list-item-attributes"])})},rO=(e,t,r)=>{rL(e,t,r),rT(e,t,r)},rk=(e,t,r)=>{ew.each(r,r=>e.setStyle(t,r,""))},rA=(e,t)=>m(t)&&!eQ(t,e.schema.getBlockElements()),rx=(e,t,r,n)=>{let o=t[r?"startContainer":"endContainer"],l=t[r?"startOffset":"endOffset"];eR(o)&&(o=o.childNodes[Math.min(l,o.childNodes.length-1)]||o),!r&&ej(o.nextSibling)&&(o=o.nextSibling);let i=t=>{for(;!e.dom.isBlock(t)&&t.parentNode&&n!==t;)t=t.parentNode;return t},s=(t,r)=>{var n;let o;let l=new eh(t,i(t)),s=r?"next":"prev";for(;o=l[s]();)if(!(eW(e,o)||rf(o.textContent)||(null===(n=o.textContent)||void 0===n?void 0:n.length)===0))return y.some(o);return y.none()};if(r&&eM(o)){if(rf(o.textContent))o=s(o,!1).getOr(o);else for(null!==o.parentNode&&rA(e,o.parentNode)&&(o=o.parentNode);null!==o.previousSibling&&(rA(e,o.previousSibling)||eM(o.previousSibling));)o=o.previousSibling}if(!r&&eM(o)){if(rf(o.textContent))o=s(o,!0).getOr(o);else for(null!==o.parentNode&&rA(e,o.parentNode)&&(o=o.parentNode);null!==o.nextSibling&&(rA(e,o.nextSibling)||eM(o.nextSibling));)o=o.nextSibling}for(;o.parentNode!==n;){let t=o.parentNode;if(ez(e,o)||/^(TD|TH)$/.test(t.nodeName))break;o=t}return o},rE=(e,t,r)=>{let n;let o=[],l=e.dom,i=rx(e,t,!0,r),s=rx(e,t,!1,r),a=[];for(let e=i;e&&(a.push(e),e!==s);e=e.nextSibling);return ew.each(a,t=>{var i;if(ez(e,t)){o.push(t),n=null;return}if(l.isBlock(t)||ej(t)){ej(t)&&l.remove(t),n=null;return}let s=t.nextSibling;if(rv.isBookmarkNode(t)&&(eU(s)||ez(e,s)||!s&&t.parentNode===r)){n=null;return}n||(n=l.create("p"),null===(i=t.parentNode)||void 0===i||i.insertBefore(n,t),o.push(n)),n.appendChild(t)}),o},rB=(e,t,r)=>{let n=e.getStyle(t,"list-style-type"),o=r?r["list-style-type"]:"";return n===(o=null===o?"":o)},rw=(e,t)=>{let r=e.selection.getStart(!0),n=rx(e,t,!0,e.getBody());return ry(V.fromDom(n),V.fromDom(t.commonAncestorContainer))?t.commonAncestorContainer:r},rP=(e,t,r)=>{let n=e.selection.getRng(),o="LI",l=tp(e,rw(e,n)),i=e.dom;if("false"===i.getContentEditable(e.selection.getNode()))return;"DL"===(t=t.toUpperCase())&&(o="DT");let s=rC(n),a=O(rE(e,n,l),e.dom.isEditable);ew.each(a,n=>{let l;let s=n.previousSibling,a=n.parentNode;e_(a)||(s&&eU(s)&&s.nodeName===t&&rB(i,s,r)?(l=s,n=i.rename(n,o),s.appendChild(n)):(l=i.create(t),a.insertBefore(l,n),l.appendChild(n),n=i.rename(n,o)),rk(i,n,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),rO(i,l,r),r$(e.dom,l))}),e.selection.setRng(rS(s))},rI=(e,t)=>eU(e)&&e.nodeName===(null==t?void 0:t.nodeName),rM=(e,t,r)=>{let n=e.getStyle(t,"list-style-type",!0),o=e.getStyle(r,"list-style-type",!0);return n===o},rR=(e,t)=>e.className===t.className,rU=(e,t,r)=>rI(t,r)&&rM(e,t,r)&&rR(t,r),r$=(e,t)=>{let r;let n=t.nextSibling;if(rU(e,t,n)){let o=n;for(;r=o.firstChild;)t.appendChild(r);e.remove(o)}if(n=t.previousSibling,rU(e,t,n)){let o=n;for(;r=o.lastChild;)t.insertBefore(r,t.firstChild);e.remove(o)}},rH=(e,t,r,n)=>{if(t.nodeName!==r){let o=e.dom.rename(t,r);rO(e.dom,o,n),tk(e,rN(r),o)}else rO(e.dom,t,n),tk(e,rN(r),t)},r_=(e,t,r,n)=>{if(t.classList.forEach((e,r,n)=>{e.startsWith("tox-")&&(n.remove(e),0===n.length&&t.removeAttribute("class"))}),t.nodeName!==r){let o=e.dom.rename(t,r);rO(e.dom,o,n),tk(e,rN(r),o)}else rO(e.dom,t,n),tk(e,rN(r),t)},rF=(e,t,r,n,o)=>{let l=eU(t);if(!l||t.nodeName!==n||rV(o)||tC(t)){rP(e,n,o);let i=rC(e.selection.getRng()),s=l?[t,...r]:r,a=l&&tC(t)?r_:rH;ew.each(s,t=>{a(e,t,n,o)}),e.selection.setRng(rS(i))}else rg(e)},rV=e=>"list-style-type"in e,rj=(e,t,r,n)=>{if(t!==e.getBody()){if(t){if(t.nodeName!==r||rV(n)||tC(t)){let o=rC(e.selection.getRng());tC(t)&&t.classList.forEach((e,r,n)=>{e.startsWith("tox-")&&(n.remove(e),0===n.length&&t.removeAttribute("class"))}),rO(e.dom,t,n);let l=e.dom.rename(t,r);r$(e.dom,l),e.selection.setRng(rS(o)),rP(e,r,n),tk(e,rN(r),l)}else rg(e)}else rP(e,r,n),tk(e,rN(r),t)}},rK=(e,t,r)=>{let n=to(e);if(tD(e,n))return;let o=ts(e),l=i(r)?r:{};o.length>0?rF(e,n,o,t,l):rj(e,n,t,l)},rz=eB.DOM,rQ=(e,t)=>{let r=t.parentElement;if(r&&"LI"===r.nodeName&&r.firstChild===t){let n=r.previousSibling;n&&"LI"===n.nodeName?(n.appendChild(t),eZ(e,r)&&rz.remove(r)):rz.setStyle(r,"listStyleType","none")}if(eU(r)){let e=r.previousSibling;e&&"LI"===e.nodeName&&e.appendChild(t)}},rW=(e,t)=>{let r=ew.grep(e.select("ol,ul",t));ew.each(r,t=>{rQ(e,t)})},rq=(e,t,r,n)=>{let o=t.startContainer,l=t.startOffset;if(eM(o)&&(r?l<o.data.length:l>0))return o;let i=e.schema.getNonEmptyElements();eR(o)&&(o=ef.getNode(o,l));let s=new eh(o,n);r&&eq(e.dom,o)&&s.next();let a=r?s.next.bind(s):s.prev2.bind(s);for(;o=a();)if("LI"===o.nodeName&&!o.hasChildNodes()||i[o.nodeName]||eM(o)&&o.data.length>0)return o;return null},rZ=(e,t)=>{let r=t.childNodes;return 1===r.length&&!eU(r[0])&&e.isBlock(r[0])},rG=(e,t)=>{rZ(e,t)&&e.remove(t.firstChild,!0)},rJ=(e,t,r)=>{let n;let o=rZ(e,r)?r.firstChild:r;if(rG(e,t),!eZ(e,t,!0))for(;n=t.firstChild;)o.appendChild(n)},rX=(e,t,r)=>{let n;let o=t.parentNode;if(!eG(e,t)||!eG(e,r))return;eU(r.lastChild)&&(n=r.lastChild),o===r.lastChild&&ej(o.previousSibling)&&e.remove(o.previousSibling);let l=r.lastChild;l&&ej(l)&&t.hasChildNodes()&&e.remove(l),eZ(e,r,!0)&&ep(V.fromDom(r)),rJ(e,t,r),n&&r.appendChild(n);let i=K(V.fromDom(r),V.fromDom(t)),s=i?e.getParents(t,eU,r):[];e.remove(t),T(s,t=>{eZ(e,t)&&t!==e.getRoot()&&e.remove(t)})},rY=(e,t,r)=>{ep(V.fromDom(r)),rX(e.dom,t,r),e.selection.setCursorLocation(r,0)},r0=(e,t,r,n)=>{let o=e.dom;if(o.isEmpty(n))rY(e,r,n);else{let l=rC(t);rX(o,r,n),e.selection.setRng(rS(l))}},r1=(e,t,r,n)=>{let o=rC(t);rX(e.dom,r,n);let l=rS(o);e.selection.setRng(l)},r2=(e,t)=>{let r=e.dom,n=e.selection,o=n.getStart(),l=tu(e,o),i=r.getParent(n.getStart(),"LI",l);if(i){let o=i.parentElement;if(o===e.getBody()&&eZ(r,o))return!0;let s=tt(n.getRng()),a=r.getParent(rq(e,s,t,l),"LI",l);if(a&&a!==i)return e.undoManager.transact(()=>{t?r0(e,s,a,i):eK(i)?rp(e):r1(e,s,i,a)}),!0;if(!a&&!t&&0===s.startOffset&&0===s.endOffset)return e.undoManager.transact(()=>{rg(e)}),!0}return!1},r6=(e,t,r)=>{let n=e.getParent(t.parentNode,e.isBlock,r);e.remove(t),n&&e.isEmpty(n)&&e.remove(n)},r3=(e,t)=>{let r=e.dom,n=e.selection.getStart(),o=tu(e,n),l=r.getParent(n,r.isBlock,o);if(l&&r.isEmpty(l)){let n=tt(e.selection.getRng()),i=r.getParent(rq(e,n,t,o),"LI",o);if(i){let s=e=>N(["td","th","caption"],W(e)),a=e=>e.dom===o,d=ei(V.fromDom(i),s,a),m=ei(V.fromDom(n.startContainer),s,a);return!!H(d,m,j)&&(e.undoManager.transact(()=>{let n=i.parentNode;r6(r,l,o),r$(r,n),e.selection.select(i,!0),e.selection.collapse(t)}),!0)}}return!1},r4=(e,t)=>r2(e,t)||r3(e,t),r5=e=>{let t=e.selection.getStart(),r=tu(e,t),n=e.dom.getParent(t,"LI,DT,DD",r);return n||td(e).length>0},r8=e=>!!r5(e)&&(e.undoManager.transact(()=>{e.execCommand("Delete"),rW(e.dom,e.getBody())}),!0),r9=(e,t)=>{let r=e.selection;return!tD(e,r.getNode())&&(r.isCollapsed()?r4(e,t):r8(e))},r7=e=>{e.on("ExecCommand",t=>{let r=t.command.toLowerCase();("delete"===r||"forwarddelete"===r)&&r5(e)&&rW(e.dom,e.getBody())}),e.on("keydown",t=>{t.keyCode===ey.BACKSPACE?r9(e,!1)&&t.preventDefault():t.keyCode===ey.DELETE&&r9(e,!0)&&t.preventDefault()})},ne=e=>({backspaceDelete:t=>{r9(e,t)}}),nt=(e,t)=>{let r=to(e);null===r||tD(e,r)||e.undoManager.transact(()=>{i(t.styles)&&e.dom.setStyles(r,t.styles),i(t.attrs)&&eC(t.attrs,(t,n)=>e.dom.setAttrib(r,n,t))})},nr=e=>{let t=P(tA(e).split("")),r=D(t,(e,t)=>{let r=e.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,t)*r});return A(r,(e,t)=>e+t,0)},nn=e=>{if(--e<0)return"";{let t=e%26,r=Math.floor(e/26),n=nn(r),o=String.fromCharCode(65+t);return n+o}},no=e=>/^[A-Z]+$/.test(e),nl=e=>/^[a-z]+$/.test(e),ni=e=>/^[0-9]+$/.test(e),ns=e=>ni(e)?2:no(e)?0:nl(e)?1:tE(e)?3:4,na=e=>{switch(ns(e)){case 2:return y.some({listStyleType:y.none(),start:e});case 0:return y.some({listStyleType:y.some("upper-alpha"),start:nr(e).toString()});case 1:return y.some({listStyleType:y.some("lower-alpha"),start:nr(e).toString()});case 3:return y.some({listStyleType:y.none(),start:""});case 4:return y.none()}},nd=e=>{let t=parseInt(e.start,10);return $(e.listStyleType,"upper-alpha")?nn(t):$(e.listStyleType,"lower-alpha")?nn(t).toLowerCase():e.start},nm=e=>{let t=to(e);!eH(t)||tD(e,t)||e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:nd({start:e.dom.getAttrib(t,"start","1"),listStyleType:y.from(e.dom.getStyle(t,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{let r=t.getData();na(r.start).each(t=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})}),t.close()}})},nu=(e,t)=>()=>{let r=to(e);return m(r)&&r.nodeName===t},nc=e=>{e.addCommand("mceListProps",()=>{nm(e)})},np=e=>{e.on("BeforeExecCommand",t=>{let r=t.command.toLowerCase();"indent"===r?rc(e):"outdent"===r&&rp(e)}),e.addCommand("InsertUnorderedList",(t,r)=>{rK(e,"UL",r)}),e.addCommand("InsertOrderedList",(t,r)=>{rK(e,"OL",r)}),e.addCommand("InsertDefinitionList",(t,r)=>{rK(e,"DL",r)}),e.addCommand("RemoveList",()=>{rg(e)}),nc(e),e.addCommand("mceListUpdate",(t,r)=>{i(r)&&nt(e,r)}),e.addQueryStateHandler("InsertUnorderedList",nu(e,"UL")),e.addQueryStateHandler("InsertOrderedList",nu(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",nu(e,"DL"))};var ng=tinymce.util.Tools.resolve("tinymce.html.Node");let nf=e=>3===e.type,nh=e=>0===e.length,ny=e=>{let t=(t,r)=>{let n=ng.create("li");T(t,e=>n.append(e)),r?e.insert(n,r,!0):e.append(n)},r=A(e.children(),(e,r)=>nf(r)?[...e,r]:nh(e)||nf(r)?e:(t(e,r),[]),[]);nh(r)||t(r)},nv=e=>{e.on("PreInit",()=>{let{parser:t}=e;t.addNodeFilter("ul,ol",e=>T(e,ny))})},nb=e=>{e.on("keydown",t=>{t.keyCode!==ey.TAB||ey.metaKeyPressed(t)||e.undoManager.transact(()=>{(t.shiftKey?rp(e):rc(e))&&t.preventDefault()})})},nC=e=>{eY(e)&&nb(e),r7(e)},nS=(e,t)=>r=>(r.setEnabled(e.selection.isEditable()),tT(e,n=>{r.setActive(tS(n.parents,t)),r.setEnabled(!tD(e,n.element)&&e.selection.isEditable())})),nN=e=>{let t=t=>()=>e.execCommand(t);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:nS(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:nS(e,"UL")}))},nL=(e,t)=>r=>tT(e,n=>r.setEnabled(tS(n.parents,t)&&!tD(e,n.element))),nD=e=>{let t={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:nL(e,"OL")};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:t=>{let r=to(e,t);return eH(r)?["listprops"]:[]}})};e.add("lists",e=>(eX(e),nv(e),e.hasPlugin("rtc",!0)?nc(e):(nC(e),np(e)),nN(e),nD(e),ne(e)))}();