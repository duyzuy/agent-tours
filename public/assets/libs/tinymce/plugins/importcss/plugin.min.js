!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let t=e=>r=>(e=>{var r,s;let l=typeof e;return null===e?"null":"object"===l&&Array.isArray(e)?"array":"object"===l&&((r=String).prototype.isPrototypeOf(e)||(null===(s=e.constructor)||void 0===s?void 0:s.name)===r.name)?"string":l})(r)===e,r=t("string"),s=t("object"),l=t("array"),n=e=>"function"==typeof e;var i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),a=tinymce.util.Tools.resolve("tinymce.EditorManager"),m=tinymce.util.Tools.resolve("tinymce.Env"),f=tinymce.util.Tools.resolve("tinymce.util.Tools");let p=e=>r=>r.options.get(e),y=p("importcss_merge_classes"),d=p("importcss_exclusive"),h=p("importcss_selector_converter"),_=p("importcss_selector_filter"),g=p("importcss_groups"),v=p("importcss_append"),b=p("importcss_file_filter"),x=p("skin"),A=p("skin_url"),E=Array.prototype.push,I=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,T=e=>r(e)?r=>-1!==r.indexOf(e):e instanceof RegExp?r=>e.test(r):e,S=(e,r)=>{let s={},l=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(r);if(!l)return;let i=l[1],a=l[2].substr(1).split(".").join(" "),m=f.makeMap("a,img");return l[1]?(s={title:r},e.schema.getTextBlockElements()[i]?s.block=i:e.schema.getBlockElements()[i]||m[i.toLowerCase()]?s.selector=i:s.inline=i):l[2]&&(s={inline:"span",title:r.substr(1),classes:a}),y(e)?s.classes=a:s.attributes={class:a},s},k=(e,r)=>null===r||d(e),w=e=>{e.on("init",()=>{var s;let y=(()=>{let e=[],r=[],s={};return{addItemToGroup:(e,l)=>{s[e]?s[e].push(l):(r.push(e),s[e]=[l])},addItem:r=>{e.push(r)},toFormats:()=>(e=>{let r=[];for(let s=0,i=e.length;s<i;++s){if(!l(e[s]))throw Error("Arr.flatten item "+s+" was not an array, input: "+e);E.apply(r,e[s])}return r})(((e,r)=>{let s=e.length,l=Array(s);for(let i=0;i<s;i++){let s=e[i];l[i]=r(s,i)}return l})(r,e=>{let r=s[e];return 0===r.length?[]:[{title:e,items:r}]})).concat(e)}})(),d={},M=T(_(e)),j=(s=g(e),f.map(s,e=>f.extend({},e,{original:e,selectors:{},filter:T(e.filter)}))),u=(r,s)=>{if(!(k(e,s)?r in d:r in s.selectors)){k(e,s)?d[r]=!0:s.selectors[r]=!0;let l=((e,r,s,l)=>{let i=h(e);return(l&&l.selector_converter?l.selector_converter:i||(()=>S(e,s))).call(r,s,l)})(e,e.plugins.importcss,r,s);if(l){let r=l.name||i.DOM.uniqueId();return e.formatter.register(r,l),{title:l.title,format:r}}}return null};f.each(((e,s,l)=>{let i=[],y={},c=(s,y)=>{let d,h=s.href;if((h=(e=>{let s=m.cacheSuffix;return r(e)&&(e=e.replace("?"+s,"").replace("&"+s,"")),e})(h))&&(!l||l(h,y))&&!((e,r)=>{let s=x(e);if(s){let l=A(e),i=l?e.documentBaseURI.toAbsolute(l):a.baseURL+"/skins/ui/"+s,m=a.baseURL+"/skins/content/";return r===i+"/content"+(e.inline?".inline":"")+".min.css"||-1!==r.indexOf(m)}return!1})(e,h)){f.each(s.imports,e=>{c(e,!0)});try{d=s.cssRules||s.rules}catch(e){}f.each(d,e=>{e.styleSheet?c(e.styleSheet,!0):e.selectorText&&f.each(e.selectorText.split(","),e=>{i.push(f.trim(e))})})}};f.each(e.contentCSS,e=>{y[e]=!0}),l||(l=(e,r)=>r||y[e]);try{f.each(s.styleSheets,e=>{c(e)})}catch(e){}return i})(e,e.getDoc(),T(b(e))),e=>{if(!I.test(e)&&(!M||M(e))){let r=f.grep(j,r=>!r.filter||r.filter(e));if(r.length>0)f.each(r,r=>{let s=u(e,r);s&&y.addItemToGroup(r.title,s)});else{let r=u(e,null);r&&y.addItem(r)}}});let O=y.toFormats();e.dispatch("addStyleModifications",{items:O,replace:!v(e)})})};e.add("importcss",e=>((e=>{let l=e.options.register,o=e=>r(e)||n(e)||s(e);l("importcss_merge_classes",{processor:"boolean",default:!0}),l("importcss_exclusive",{processor:"boolean",default:!0}),l("importcss_selector_converter",{processor:"function"}),l("importcss_selector_filter",{processor:o}),l("importcss_file_filter",{processor:o}),l("importcss_groups",{processor:"object[]"}),l("importcss_append",{processor:"boolean",default:!1})})(e),w(e),{convertSelectorToFormat:r=>S(e,r)}))}();