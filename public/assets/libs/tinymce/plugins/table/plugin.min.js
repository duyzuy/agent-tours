!function(){"use strict";var e,h=tinymce.util.Tools.resolve("tinymce.PluginManager");let t=e=>h=>(e=>{var h,f;let w=typeof e;return null===e?"null":"object"===w&&Array.isArray(e)?"array":"object"===w&&((h=String).prototype.isPrototypeOf(e)||(null===(f=e.constructor)||void 0===f?void 0:f.name)===h.name)?"string":w})(h)===e,o=e=>h=>typeof h===e,f=t("string"),w=t("array"),S=o("boolean"),a=e=>void 0===e,s=e=>null!=e,O=o("function"),_=o("number"),m=()=>{},d=e=>()=>e,u=e=>e,p=(e,h)=>e===h;function b(e,...h){return(...f)=>{let w=h.concat(f);return e.apply(null,w)}}let g=e=>{e()},V=d(!1),U=d(!0);let y=class y{constructor(e,h){this.tag=e,this.value=h}static some(e){return new y(!0,e)}static none(){return y.singletonNone}fold(e,h){return this.tag?h(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?y.some(e(this.value)):y.none()}bind(e){return this.tag?e(this.value):y.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:y.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return s(e)?y.some(e):y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};y.singletonNone=new y(!1);let Q=Object.keys,X=Object.hasOwnProperty,C=(e,h)=>{let f=Q(e);for(let w=0,S=f.length;w<S;w++){let S=f[w];h(e[S],S)}},v=(e,h)=>{var f;let w={};return f=(e,h)=>{w[h]=e},C(e,(e,w)=>{(h(e,w)?f:m)(e,w)}),w},T=e=>Q(e).length,x=(e,h)=>A(e,h)?y.from(e[h]):y.none(),A=(e,h)=>X.call(e,h),R=(e,h)=>A(e,h)&&void 0!==e[h]&&null!==e[h],Y=Array.prototype.indexOf,Z=Array.prototype.push,D=(e,h)=>Y.call(e,h)>-1,N=(e,h)=>{for(let f=0,w=e.length;f<w;f++)if(h(e[f],f))return!0;return!1},I=(e,h)=>{let f=[];for(let w=0;w<e;w++)f.push(h(w));return f},M=(e,h)=>{let f=e.length,w=Array(f);for(let S=0;S<f;S++){let f=e[S];w[S]=h(f,S)}return w},P=(e,h)=>{for(let f=0,w=e.length;f<w;f++)h(e[f],f)},k=(e,h)=>{let f=[];for(let w=0,S=e.length;w<S;w++){let S=e[w];h(S,w)&&f.push(S)}return f},E=(e,h,f)=>(P(e,(e,w)=>{f=h(f,e,w)}),f),B=(e,h)=>((e,h,f)=>{for(let w=0,S=e.length;w<S;w++){let S=e[w];if(h(S,w))return y.some(S);if(f(S,w))break}return y.none()})(e,h,V),F=(e,h)=>(e=>{let h=[];for(let f=0,S=e.length;f<S;++f){if(!w(e[f]))throw Error("Arr.flatten item "+f+" was not an array, input: "+e);Z.apply(h,e[f])}return h})(M(e,h)),q=(e,h)=>{for(let f=0,w=e.length;f<w;++f)if(!0!==h(e[f],f))return!1;return!0},L=(e,h)=>h>=0&&h<e.length?y.some(e[h]):y.none(),H=(e,h)=>{for(let f=0;f<e.length;f++){let w=h(e[f],f);if(w.isSome())return w}return y.none()},j=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},et={fromHtml:(e,h)=>{let f=(h||document).createElement("div");if(f.innerHTML=e,!f.hasChildNodes()||f.childNodes.length>1){let h="HTML does not have a single root node";throw console.error(h,e),Error(h)}return j(f.childNodes[0])},fromTag:(e,h)=>{let f=(h||document).createElement(e);return j(f)},fromText:(e,h)=>{let f=(h||document).createTextNode(e);return j(f)},fromDom:j,fromPoint:(e,h,f)=>y.from(e.dom.elementFromPoint(h,f)).map(j)},$=(e,h)=>{let f=e.dom;if(1!==f.nodeType)return!1;if(void 0!==f.matches)return f.matches(h);if(void 0!==f.msMatchesSelector)return f.msMatchesSelector(h);if(void 0!==f.webkitMatchesSelector)return f.webkitMatchesSelector(h);if(void 0!==f.mozMatchesSelector)return f.mozMatchesSelector(h);throw Error("Browser lacks native selectors")},W=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,z=(e,h)=>e.dom===h.dom;"undefined"!=typeof window?window:Function("return this;")();let G=e=>e.dom.nodeName.toLowerCase(),K=e=>e.dom.nodeType,J=e=>h=>K(h)===e,er=J(1),en=J(3),ea=J(9),es=J(11),ee=e=>h=>er(h)&&G(h)===e,te=e=>ea(e)?e:et.fromDom(e.dom.ownerDocument),oe=e=>y.from(e.dom.parentNode).map(et.fromDom),le=e=>y.from(e.dom.nextSibling).map(et.fromDom),ne=e=>M(e.dom.childNodes,et.fromDom),ei=O(Element.prototype.attachShadow)&&O(Node.prototype.getRootNode)?e=>et.fromDom(e.dom.getRootNode()):te,ae=e=>et.fromDom(e.dom.host),se=e=>{let h=en(e)?e.dom.parentNode:e.dom;if(null==h||null===h.ownerDocument)return!1;let f=h.ownerDocument;return(e=>{let h=ei(e);return es(h)&&s(h.dom.host)?y.some(h):y.none()})(et.fromDom(h)).fold(()=>f.body.contains(h),e=>se(ae(e)))};var ce=(e,h,f,w,S)=>e(f,w)?y.some(f):O(S)&&S(f)?y.none():h(f,w,S);let ie=(e,h,f)=>{let w=e.dom,S=O(f)?f:V;for(;w.parentNode;){w=w.parentNode;let e=et.fromDom(w);if(h(e))return y.some(e);if(S(e))break}return y.none()},me=(e,h,f)=>ie(e,e=>$(e,h),f),de=(e,h)=>B(e.dom.childNodes,e=>$(et.fromDom(e),h)).map(et.fromDom),ue=(e,h)=>((e,h)=>{let f=void 0===h?document:h.dom;return W(f)?y.none():y.from(f.querySelector(e)).map(et.fromDom)})(h,e),pe=(e,h,f)=>ce((e,h)=>$(e,h),me,e,h,f),be=(e,h=!1)=>se(e)?e.dom.isContentEditable:pe(e,"[contenteditable]").fold(d(h),e=>"true"===ge(e)),ge=e=>e.dom.contentEditable,he=e=>h=>z(h,et.fromDom(e.getBody())),fe=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,ye=e=>et.fromDom(e.selection.getStart()),we=(e,h)=>{let f=[];return P(ne(e),e=>{h(e)&&(f=f.concat([e])),f=f.concat(we(e,h))}),f},Se=(e,h)=>k(ne(e),e=>$(e,h)),Ce=(e,h)=>((e,h)=>{let f=void 0===h?document:h.dom;return W(f)?[]:M(f.querySelectorAll(e),et.fromDom)})(h,e),ve=(e,h,w)=>{if(!(f(w)||S(w)||_(w)))throw console.error("Invalid call to Attribute.set. Key ",h,":: Value ",w,":: Element ",e),Error("Attribute value was not simple");e.setAttribute(h,w+"")},Te=(e,h)=>{let f=e.dom.getAttribute(h);return null===f?void 0:f},xe=(e,h)=>y.from(Te(e,h)),Ae=(e,h)=>{e.dom.removeAttribute(h)},Re=(e,h,f=p)=>e.exists(e=>f(e,h)),Oe=(e,h,f)=>e.isSome()&&h.isSome()?y.some(f(e.getOrDie(),h.getOrDie())):y.none(),_e=(e,h)=>""===h||e.length>=h.length&&e.substr(0,0+h.length)===h,ec=(e=/^\s+|\s+$/g,h=>h.replace(e,"")),Ie=e=>e.length>0,Me=(e,h=10)=>{let f=parseInt(e,h);return isNaN(f)?y.none():y.some(f)},Pe=e=>void 0!==e.style&&O(e.style.getPropertyValue),ke=(e,h)=>{let f=e.dom,w=window.getComputedStyle(f).getPropertyValue(h);return""!==w||se(e)?w:Ee(f,h)},Ee=(e,h)=>Pe(e)?e.style.getPropertyValue(h):"",Be=(e,h)=>{let f=e.dom,w=Ee(f,h);return y.from(w).filter(e=>e.length>0)},Fe=(e,h,f=0)=>xe(e,h).map(e=>parseInt(e,10)).getOr(f),qe=(e,h)=>Le(e,h,U),Le=(e,h,f)=>F(ne(e),e=>$(e,h)?f(e)?[e]:[]:Le(e,h,f)),ed=["tfoot","thead","tbody","colgroup"],je=(e,h,f)=>({element:e,rowspan:h,colspan:f}),Ve=(e,h,f)=>({element:e,cells:h,section:f}),$e=(e,h)=>pe(e,"table",h),We=e=>qe(e,"tr"),ze=e=>$e(e).fold(d([]),e=>Se(e,"colgroup")),Ue=e=>oe(e).map(e=>{let h=G(e);return D(ed,h)?h:"tbody"}).getOr("tbody"),Ge=e=>xe(e,"data-snooker-locked-cols").bind(e=>y.from(e.match(/\d+/g))).map(e=>((e,h)=>{let f={};for(let w=0,S=e.length;w<S;w++){let S=e[w];f[String(S)]=h(S,w)}return f})(e,U)),Ke=(e,h)=>e+","+h,Je=e=>{let h={},f=[],w=L(e,0).map(e=>e.element).bind($e).bind(Ge).getOr({}),S=0,O=0,_=0,{pass:V,fail:U}=((e,h)=>{let f=[],w=[];for(let h=0,S=e.length;h<S;h++){let S=e[h];("colgroup"===S.section?f:w).push(S)}return{pass:f,fail:w}})(e);P(U,e=>{let V=[];P(e.cells,e=>{var f,S;let U=0;for(;void 0!==h[Ke(_,U)];)U++;let Q=R(w,U.toString()),X=(f=e.element,S=e.rowspan,{element:f,rowspan:S,colspan:e.colspan,row:_,column:U,isLocked:Q});for(let f=0;f<e.colspan;f++)for(let w=0;w<e.rowspan;w++){let e=U+f,S=Ke(_+w,e);h[S]=X,O=Math.max(O,e+1)}V.push(X)}),S++,f.push(Ve(e.element,V,e.section)),_++});let{columns:Q,colgroups:X}=L(V,V.length-1).map(e=>{let h=(e=>{let h={},f=0;return P(e.cells,e=>{let w=e.colspan;I(w,S=>{let O=f+S;h[O]={element:e.element,colspan:w,column:O}}),f+=w}),h})(e),f={element:e.element,columns:((e,h)=>{let f=[];return C(e,(e,w)=>{f.push(h(e,w))}),f})(h,u)};return{colgroups:[f],columns:h}}).getOrThunk(()=>({colgroups:[],columns:{}})),Y={rows:S,columns:O};return{grid:Y,access:h,all:f,columns:Q,colgroups:X}},Qe=e=>{let h=(e=>{let h=We(e);return M([...ze(e),...h],e=>{if("colgroup"===G(e)){let h=M($(e,"colgroup")?Se(e,"col"):F(ze(e),e=>Se(e,"col")),e=>{let h=Fe(e,"span",1);return je(e,1,h)});return Ve(e,h,"colgroup")}{let h=M(qe(e,"th,td"),e=>{let h=Fe(e,"rowspan",1),f=Fe(e,"colspan",1);return je(e,h,f)});return Ve(e,h,Ue(e))}})})(e);return Je(h)},Xe=(e,h,f)=>y.from(e.access[Ke(h,f)]),Ye=(e,h,f)=>{let w=((e,h)=>{let f=F(e.all,e=>e.cells);return k(f,h)})(e,e=>f(h,e.element));return w.length>0?y.some(w[0]):y.none()},Ze=(e,h)=>y.from(e.columns[h]);var em=tinymce.util.Tools.resolve("tinymce.util.Tools");let tt=(e,h,f)=>{let w;let S=e.select("td,th",h);for(let h=0;h<S.length;h++){let O=e.getStyle(S[h],f);if(a(w)&&(w=O),w!==O)return""}return w},ot=(e,h,f)=>{em.each("left center right".split(" "),w=>{w!==f&&e.formatter.remove("align"+w,{},h)}),f&&e.formatter.apply("align"+f,{},h)},lt=(e,h,f)=>{e.dispatch("TableModified",{...f,table:h})},nt=(e,h,f)=>(e=>{let h=parseFloat(e);return isNaN(h)?y.none():y.some(h)})(ke(e,h)).getOr(f),rt=e=>((e,h)=>{var f,w;let S=e.dom,O=S.getBoundingClientRect().width||S.offsetWidth;return"border-box"===h?O:(f="left",w="right",O-nt(e,`padding-${f}`,0)-nt(e,`padding-${w}`,0)-nt(e,`border-${f}-width`,0)-nt(e,`border-${w}-width`,0))})(e,"content-box");var eu=tinymce.util.Tools.resolve("tinymce.Env");let ep=I(5,e=>{let h=`${e+1}px`;return{title:h,value:h}}),eb=M(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],e=>({title:e,value:e.toLowerCase()})),eg="100%",mt=e=>{var h;let f=e.dom,w=null!==(h=f.getParent(e.selection.getStart(),f.isBlock))&&void 0!==h?h:e.getBody();return rt(et.fromDom(w))+"px"},dt=e=>h=>h.options.get(e),ey=dt("table_sizing_mode"),eh=dt("table_border_widths"),ef=dt("table_border_styles"),ew=dt("table_cell_advtab"),eS=dt("table_row_advtab"),eC=dt("table_advtab"),ev=dt("table_appearance_options"),eT=dt("table_grid"),ex=dt("table_style_by_css"),eA=dt("table_cell_class_list"),eR=dt("table_row_class_list"),eM=dt("table_class_list"),eD=dt("table_toolbar"),eO=dt("table_background_color_map"),e_=dt("table_border_color_map"),Ot=e=>"fixed"===ey(e),_t=e=>"responsive"===ey(e),Dt=e=>{let h=e.options,f=h.get("table_default_styles");return h.isSet("table_default_styles")?f:_t(e)||!ex(e)?f:Ot(e)?{...f,width:mt(e)}:{...f,width:eg}},Nt=e=>{let h=e.options,f=h.get("table_default_attributes");return h.isSet("table_default_attributes")?f:_t(e)||ex(e)?f:Ot(e)?{...f,width:mt(e)}:{...f,width:eg}},It=(e,h)=>h.column>=e.startCol&&h.column+h.colspan-1<=e.finishCol&&h.row>=e.startRow&&h.row+h.rowspan-1<=e.finishRow,Mt=(e,h,f)=>((e,h,f)=>{let w=Ye(e,h,z),S=Ye(e,f,z);return w.bind(e=>S.map(h=>({startRow:Math.min(e.row,h.row),startCol:Math.min(e.column,h.column),finishRow:Math.max(e.row+e.rowspan-1,h.row+h.rowspan-1),finishCol:Math.max(e.column+e.colspan-1,h.column+h.colspan-1)})))})(e,h,f).bind(h=>((e,h)=>{let f=!0,w=b(It,h);for(let S=h.startRow;S<=h.finishRow;S++)for(let O=h.startCol;O<=h.finishCol;O++)f=f&&Xe(e,S,O).exists(w);return f?y.some(h):y.none()})(e,h)),kt=(e,h)=>{oe(e).each(f=>{f.dom.insertBefore(h.dom,e.dom)})},Et=(e,h)=>{le(e).fold(()=>{oe(e).each(e=>{Bt(e,h)})},e=>{kt(e,h)})},Bt=(e,h)=>{e.dom.appendChild(h.dom)},Ft=(e,h)=>{P(h,(f,w)=>{let S=0===w?e:h[w-1];Et(S,f)})},qt=e=>{let h=e.dom;null!==h.parentNode&&h.parentNode.removeChild(h)},eP=((e,h)=>{let o=h=>e(h)?y.from(h.dom.nodeValue):y.none();return{get:h=>{if(!e(h))throw Error("Can only get text value of a text node");return o(h).getOr("")},getOption:o,set:(h,f)=>{if(!e(h))throw Error("Can only set raw text value of a text node");h.dom.nodeValue=f}}})(en);var eI=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];let jt=(e,h,f,w)=>{var S,O;let _=h(e,f);return S=(f,w)=>{let S=h(e,w);return Vt(e,f,S)},O=_,((e,h)=>{for(let f=e.length-1;f>=0;f--)h(e[f],f)})(w,(e,h)=>{O=S(O,e)}),O},Vt=(e,h,f)=>h.bind(h=>f.filter(b(e.eq,h))),eN={up:d({selector:me,closest:pe,predicate:ie,all:(e,h)=>{let f=O(h)?h:V,w=e.dom,S=[];for(;null!==w.parentNode&&void 0!==w.parentNode;){let e=w.parentNode,h=et.fromDom(e);if(S.push(h),!0===f(h))break;w=e}return S}}),down:d({selector:Ce,predicate:we}),styles:d({get:ke,getRaw:Be,set:(e,h,w)=>{((e,h,w)=>{if(!f(w))throw console.error("Invalid call to CSS.set. Property ",h,":: Value ",w,":: Element ",e),Error("CSS value must be a string: "+w);Pe(e)&&e.style.setProperty(h,w)})(e.dom,h,w)},remove:(e,h)=>{var f;Pe(f=e.dom)&&f.style.removeProperty(h),Re(xe(e,"style").map(ec),"")&&Ae(e,"style")}}),attrs:d({get:Te,set:(e,h,f)=>{ve(e.dom,h,f)},remove:Ae,copyTo:(e,h)=>{((e,h)=>{let f=e.dom;C(h,(e,h)=>{ve(f,h,e)})})(h,E(e.dom.attributes,(e,h)=>(e[h.name]=h.value,e),{}))}}),insert:d({before:kt,after:Et,afterAll:Ft,append:Bt,appendAll:(e,h)=>{P(h,h=>{Bt(e,h)})},prepend:(e,h)=>{((e,h)=>{let f=e.dom.childNodes;return y.from(f[0]).map(et.fromDom)})(e).fold(()=>{Bt(e,h)},f=>{e.dom.insertBefore(h.dom,f.dom)})},wrap:(e,h)=>{kt(e,h),Bt(h,e)}}),remove:d({unwrap:e=>{let h=ne(e);h.length>0&&Ft(e,h),qt(e)},remove:qt}),create:d({nu:et.fromTag,clone:e=>et.fromDom(e.dom.cloneNode(!1)),text:et.fromText}),query:d({comparePosition:(e,h)=>e.dom.compareDocumentPosition(h.dom),prevSibling:e=>y.from(e.dom.previousSibling).map(et.fromDom),nextSibling:le}),property:d({children:ne,name:G,parent:oe,document:e=>te(e).dom,isText:en,isComment:e=>8===K(e)||"#comment"===G(e),isElement:er,isSpecial:e=>{let h=G(e);return D(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],h)},getLanguage:e=>er(e)?xe(e,"lang"):y.none(),getText:e=>eP.get(e),setText:(e,h)=>eP.set(e,h),isBoundary:e=>!!er(e)&&("body"===G(e)||D(eI,G(e))),isEmptyTag:e=>!!er(e)&&D(["br","img","hr","input"],G(e)),isNonEditable:e=>er(e)&&"false"===Te(e,"contenteditable")}),eq:z,is:$},Wt=e=>me(e,"table"),zt=(e,h,f)=>ue(e,h).bind(h=>ue(e,f).bind(e=>{var f;return((f=[h,e]).length>0?jt(eN,(e,h)=>Wt(h),f[0],f.slice(1)):y.none()).map(f=>({first:h,last:e,table:f}))})),Ut=e=>M(e,et.fromDom),ek="data-mce-selected",eB="data-mce-first-selected",eE="data-mce-last-selected",eF={selected:ek,selectedSelector:"td["+ek+"],th["+ek+"]",firstSelected:eB,firstSelectedSelector:"td["+eB+"],th["+eB+"]",lastSelected:eE,lastSelectedSelector:"td["+eE+"],th["+eE+"]"},Xt=e=>(h,f)=>{let w=G(h),S="col"===w||"colgroup"===w?$e(h).bind(e=>((e,h)=>{let f=Ce(e,h);return f.length>0?y.some(f):y.none()})(e,eF.firstSelectedSelector)).fold(d(h),e=>e[0]):h;return pe(S,e,f)},e$=Xt("th,td,caption"),eq=Xt("th,td"),eo=e=>Ut(e.model.table.getSelectedCells()),to=(e,h)=>{let f=eq(e),w=f.bind(e=>$e(e)).map(e=>We(e));return Oe(f,w,(e,f)=>k(f,f=>N(Ut(f.dom.cells),f=>"1"===Te(f,h)||z(f,e)))).getOr([])},ej=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],eL=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ez=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ro=e=>(_e(e,"#")?e.substring(1):e).toUpperCase(),ao=e=>{let h=e.toString(16);return(1===h.length?"0"+h:h).toUpperCase()},so=e=>({value:ro(ao(e.red)+ao(e.green)+ao(e.blue))}),eH=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,eV=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,mo=(e,h,f,w)=>({red:e,green:h,blue:f,alpha:w}),uo=(e,h,f,w)=>{let S=parseInt(e,10),O=parseInt(h,10),_=parseInt(f,10),V=parseFloat(w);return mo(S,O,_,V)},po=e=>{if("transparent"===e)return y.some(mo(0,0,0,0));let h=eH.exec(e);if(null!==h)return y.some(uo(h[1],h[2],h[3],"1"));let f=eV.exec(e);return null!==f?y.some(uo(f[1],f[2],f[3],f[4])):y.none()},bo=e=>{let h=e;return{get:()=>h,set:e=>{h=e}}},go=(e,h,f)=>w=>{let S=(e=>{let h=bo(y.none()),o=()=>h.get().each(e);return{clear:()=>{o(),h.set(y.none())},isSet:()=>h.get().isSome(),get:()=>h.get(),set:e=>{o(),h.set(y.some(e))}}})(e=>e.unbind()),O=!Ie(f),a=()=>{let _=eo(e),s=w=>e.formatter.match(h,{value:f},w.dom,O);O?(w.setActive(!N(_,s)),S.set(e.formatter.formatChanged(h,e=>w.setActive(!e),!0))):(w.setActive(q(_,s)),S.set(e.formatter.formatChanged(h,w.setActive,!1,{value:f})))};return e.initialized?a():e.on("init",a),S.clear},ho=e=>R(e,"menu"),fo=e=>M(e,e=>{let h=e.text||e.title||"";return ho(e)?{text:h,items:fo(e.menu)}:{text:h,value:e.value}}),yo=(e,h,f,w)=>M(h,h=>{let S=h.text||h.title;return ho(h)?{type:"nestedmenuitem",text:S,getSubmenuItems:()=>yo(e,h.menu,f,w)}:{text:S,type:"togglemenuitem",onAction:()=>w(h.value),onSetup:go(e,f,h.value)}}),wo=(e,h)=>f=>{e.execCommand("mceTableApplyCellStyle",!1,{[h]:f})},So=e=>F(e,e=>ho(e)?[{...e,menu:So(e.menu)}]:Ie(e.value)?[e]:[]),Co=(e,h,f,w)=>S=>S(yo(e,h,f,w)),vo=(e,h,f)=>{let w=M(h,e=>{var h,f;return{text:e.title,value:"#"+((f=h=e.value,eL.test(f)||ez.test(f))?y.some({value:ro(h)}):y.none()).orThunk(()=>po(h).map(so)).getOrThunk(()=>{let e=document.createElement("canvas");e.height=1,e.width=1;let f=e.getContext("2d");f.clearRect(0,0,e.width,e.height),f.fillStyle="#FFFFFF",f.fillStyle=h,f.fillRect(0,0,1,1);let w=f.getImageData(0,0,1,1).data,S=w[0],O=w[1],_=w[2],V=w[3];return so(mo(S,O,_,V))}).value,type:"choiceitem"}});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:w.length>0?w:void 0,allowCustomColors:!1},onAction:h=>{let w="remove"===h.value?"":h.value;e.execCommand("mceTableApplyCellStyle",!1,{[f]:w})}}]},To=e=>()=>{let h="header"===e.queryCommandValue("mceTableRowType")?"body":"header";e.execCommand("mceTableRowType",!1,{type:h})},xo=e=>()=>{let h="th"===e.queryCommandValue("mceTableColType")?"td":"th";e.execCommand("mceTableColType",!1,{type:h})},eG=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:ej}],Ro=e=>eG.concat((e=>{let h=fo(eA(e));return h.length>0?y.some({name:"class",type:"listbox",label:"Class",items:h}):y.none()})(e).toArray()),Oo=(e,h)=>{let f=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(fo(ef(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===h?[{name:"borderwidth",type:"input",label:"Border width"}].concat(f):f}},_o=(e,h)=>{let f=e.dom;return{setAttrib:(e,w)=>{f.setAttrib(h,e,w)},setStyle:(e,w)=>{f.setStyle(h,e,w)},setFormat:(f,w)=>{""===w?e.formatter.remove(f,{value:null},h,!0):e.formatter.apply(f,{value:w},h)}}},eW=ee("th"),No=(e,h)=>e&&h?"sectionCells":e?"section":"cells",Io=e=>{let h=M(e,e=>(e=>{let h="thead"===e.section,f=Re((e=>{let h=k(e,e=>eW(e.element));return 0===h.length?y.some("td"):h.length===e.length?y.some("th"):y.none()})(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:h||f?{type:"header",subType:No(h,f)}:{type:"body"}})(e).type),f=D(h,"header"),w=D(h,"footer");if(f||w){let e=D(h,"body");return!f||e||w?f||e||!w?y.none():y.some("footer"):y.some("header")}return y.some("body")},Mo=(e,h)=>H(e.all,e=>B(e.cells,e=>z(h,e.element))),Po=(e,h,f)=>{let w=(e=>{let h=[],o=e=>{h.push(e)};for(let h=0;h<e.length;h++)e[h].each(o);return h})(M(h.selection,h=>((e,h,f=V)=>f(h)?y.none():D(e,G(h))?y.some(h):me(h,e.join(","),e=>$(e,"table")||f(e)))(["td","th"],h,void 0).bind(h=>Mo(e,h)).filter(f)));return w.length>0?y.some(w):y.none()},ko=(e,h)=>Po(e,h,U),Eo=(e,h)=>q(h,h=>Mo(e,h).exists(e=>!e.isLocked)),Bo=(e,h)=>(0,h.mergable).filter(h=>Eo(e,h.cells)),Fo=(e,h)=>(0,h.unmergable).filter(h=>Eo(e,h)),eU=((e=>{if(!w(e))throw Error("cases must be an array");if(0===e.length)throw Error("there must be at least one case");let h=[],f={};P(e,(S,O)=>{let _=Q(S);if(1!==_.length)throw Error("one and only one name per case");let V=_[0],U=S[V];if(void 0!==f[V])throw Error("duplicate key detected:"+V);if("cata"===V)throw Error("cannot have a case named cata (sorry)");if(!w(U))throw Error("case arguments must be an array");h.push(V),f[V]=(...f)=>{let w=f.length;if(w!==U.length)throw Error("Wrong number of arguments to case "+V+". Expected "+U.length+" ("+U+"), got "+w);return{fold:(...h)=>{if(h.length!==e.length)throw Error("Wrong number of arguments to fold. Expected "+e.length+", got "+h.length);return h[O].apply(null,f)},match:e=>{let w=Q(e);if(h.length!==w.length)throw Error("Wrong number of arguments to match. Expected: "+h.join(",")+"\nActual: "+w.join(","));if(!q(h,e=>D(w,e)))throw Error("Not all branches were specified when using match. Specified: "+w.join(", ")+"\nRequired: "+h.join(", "));return e[V].apply(null,f)},log:e=>{console.log(e,{constructors:h,constructor:V,params:f})}}}})})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(e,h)=>{let f=Qe(e);return ko(f,h).bind(e=>{let h=e[e.length-1],w=e[0].row,S=h.row+h.rowspan,O=f.all.slice(w,S);return Io(O)}).getOr("")}),Lo=e=>_e(e,"rgb")?po(e).map(so).map(e=>"#"+e.value).getOr(e):e,Ho=e=>{let h=et.fromDom(e);return{borderwidth:Be(h,"border-width").getOr(""),borderstyle:Be(h,"border-style").getOr(""),bordercolor:Be(h,"border-color").map(Lo).getOr(""),backgroundcolor:Be(h,"background-color").map(Lo).getOr("")}},jo=e=>{let h=e[0],f=e.slice(1);return P(f,e=>{P(Q(h),f=>{C(e,(e,w)=>{let S=h[f];""!==S&&f===w&&S!==e&&(h[f]="")})})}),h},Vo=(e,h,f,w)=>B(e,e=>!a(f.formatter.matchNode(w,h+e))).getOr(""),eK=b(Vo,["left","center","right"],"align"),eQ=b(Vo,["top","middle","bottom"],"valign"),zo=e=>$e(et.fromDom(e)).map(h=>{let f={selection:Ut(e.cells)};return eU(h,f)}).getOr(""),Uo=(e,h)=>{let f=Qe(e),w=F(f.all,e=>e.cells),S=k(w,e=>N(h,h=>z(e.element,h)));return M(S,e=>({element:e.element.dom,column:Ze(f,e.column).map(e=>e.element.dom)}))},Go=(e,h,f,w)=>{let S=w.getData();w.close(),e.undoManager.transact(()=>{((e,h,f,w)=>{let S=v(w,(e,h)=>f[h]!==e);T(S)>0&&h.length>=1&&$e(h[0]).each(f=>{let O=Uo(f,h),_=T(v(S,(e,h)=>"scope"!==h&&"celltype"!==h))>0,V=A(S,"celltype");(_||A(S,"scope"))&&((e,h,f,w)=>{let S=1===h.length;P(h,h=>{var O,_;let V=h.element,Q=S?U:w,X=_o(e,V);O=h.column.map(h=>_o(e,h)).getOr(X),Q("scope")&&X.setAttrib("scope",f.scope),Q("class")&&X.setAttrib("class",f.class),Q("height")&&X.setStyle("height",fe(f.height)),Q("width")&&O.setStyle("width",fe(f.width)),ew(e)&&(Q("backgroundcolor")&&X.setFormat("tablecellbackgroundcolor",f.backgroundcolor),Q("bordercolor")&&X.setFormat("tablecellbordercolor",f.bordercolor),Q("borderstyle")&&X.setFormat("tablecellborderstyle",f.borderstyle),Q("borderwidth")&&X.setFormat("tablecellborderwidth",fe(f.borderwidth))),w("halign")&&ot(e,V,f.halign),w("valign")&&(_=f.valign,em.each("top middle bottom".split(" "),h=>{h!==_&&e.formatter.remove("valign"+h,{},V)}),_&&e.formatter.apply("valign"+_,{},V))})})(e,O,w,b(A,S)),V&&((e,h)=>{e.execCommand("mceTableCellType",!1,{type:h.celltype,no_events:!0})})(e,w),lt(e,f.dom,{structure:V,style:_})})})(e,h,f,S),e.focus()})},Ko=e=>{let h=eo(e);if(0===h.length)return;let f=((e,h)=>{let f=$e(h[0]).map(f=>M(Uo(f,h),h=>((e,h,f,w)=>{let S=e.dom,r=(e,h)=>S.getStyle(e,h)||S.getAttrib(e,h);return{width:r(w.getOr(h),"width"),height:r(h,"height"),scope:S.getAttrib(h,"scope"),celltype:h.nodeName.toLowerCase(),class:S.getAttrib(h,"class",""),halign:eK(e,h),valign:eQ(e,h),...f?Ho(h):{}}})(e,h.element,ew(e),h.column)));return jo(f.getOrDie())})(e,h),w={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ro(e)},Oo(e,"cell")]},S={type:"panel",items:[{type:"grid",columns:2,items:Ro(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:ew(e)?w:S,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:f,onSubmit:b(Go,e,h,f)})},eJ=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Qo=e=>eJ.concat((e=>{let h=fo(eR(e));return h.length>0?y.some({name:"class",type:"listbox",label:"Class",items:h}):y.none()})(e).toArray()),Xo=(e,h,f,w)=>{let S=w.getData();w.close(),e.undoManager.transact(()=>{((e,h,f,w)=>{let S=v(w,(e,h)=>f[h]!==e);if(T(S)>0){let f=A(S,"type"),O=!f||T(S)>1;O&&((e,h,f,w)=>{let S=1===h.length?U:w;P(h,h=>{let O=_o(e,h);S("class")&&O.setAttrib("class",f.class),S("height")&&O.setStyle("height",fe(f.height)),eS(e)&&(S("backgroundcolor")&&O.setStyle("background-color",f.backgroundcolor),S("bordercolor")&&O.setStyle("border-color",f.bordercolor),S("borderstyle")&&O.setStyle("border-style",f.borderstyle)),w("align")&&ot(e,h,f.align)})})(e,h,w,b(A,S)),f&&((e,h)=>{e.execCommand("mceTableRowType",!1,{type:h.type,no_events:!0})})(e,w),$e(et.fromDom(h[0])).each(h=>lt(e,h.dom,{structure:f,style:O}))}})(e,h,f,S),e.focus()})},Yo=e=>{let h=to(ye(e),eF.selected);if(0===h.length)return;let f=M(h,h=>((e,h,f)=>{let w=e.dom;return{height:w.getStyle(h,"height")||w.getAttrib(h,"height"),class:w.getAttrib(h,"class",""),type:zo(h),align:eK(e,h),...f?Ho(h):{}}})(e,h.dom,eS(e))),w=jo(f),S={type:"tabpanel",tabs:[{title:"General",name:"general",items:Qo(e)},Oo(e,"row")]},O={type:"panel",items:[{type:"grid",columns:2,items:Qo(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:eS(e)?S:O,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:w,onSubmit:b(Xo,e,M(h,e=>e.dom),w)})},Zo=(e,h,f)=>{let w=ev(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],S=h.length>0?[{type:"listbox",name:"class",label:"Class",items:h}]:[];return(f?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[]).concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(w).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(S)},el=(e,h,w,S)=>{if("TD"===h.tagName||"TH"===h.tagName)f(w)&&s(S)?e.setStyle(h,w,S):e.setStyles(h,w);else if(h.children)for(let f=0;f<h.children.length;f++)el(e,h.children[f],w,S)},tl=(e,h,f,w)=>{let S=e.dom,O=w.getData(),_=v(O,(e,h)=>f[h]!==e);w.close(),""===O.class&&delete O.class,e.undoManager.transact(()=>{if(!h){let f=Me(O.cols).getOr(1),w=Me(O.rows).getOr(1);e.execCommand("mceInsertTable",!1,{rows:w,columns:f}),h=eq(ye(e),he(e)).bind(h=>$e(h,he(e))).map(e=>e.dom).getOrDie()}if(T(_)>0){let f={border:A(_,"border"),bordercolor:A(_,"bordercolor"),cellpadding:A(_,"cellpadding")};((e,h,f,w)=>{var S;let O=e.dom,_={},V={},U=ex(e),Q=eC(e);if(a(f.class)||(_.class=f.class),V.height=fe(f.height),U?V.width=fe(f.width):O.getAttrib(h,"width")&&(_.width=(S=f.width)?S.replace(/px$/,""):""),U?(V["border-width"]=fe(f.border),V["border-spacing"]=fe(f.cellspacing)):(_.border=f.border,_.cellpadding=f.cellpadding,_.cellspacing=f.cellspacing),U&&h.children){let e={};if(w.border&&(e["border-width"]=fe(f.border)),w.cellpadding&&(e.padding=fe(f.cellpadding)),Q&&w.bordercolor&&(e["border-color"]=f.bordercolor),!(e=>{for(let h in e)if(X.call(e,h))return!1;return!0})(e))for(let f=0;f<h.children.length;f++)el(O,h.children[f],e)}Q&&(V["background-color"]=f.backgroundcolor,V["border-color"]=f.bordercolor,V["border-style"]=f.borderstyle),O.setStyles(h,{...Dt(e),...V}),O.setAttribs(h,{...Nt(e),..._})})(e,h,O,f);let w=S.select("caption",h)[0];(w&&!O.caption||!w&&O.caption)&&e.execCommand("mceTableToggleCaption"),ot(e,h,O.align)}if(e.focus(),e.addVisual(),T(_)>0){let f=A(_,"caption"),w=!f||T(_)>1;lt(e,h,{structure:f,style:w})}})},ol=(e,h)=>{let f=e.dom,w,S=((e,h)=>{let f=Dt(e),w=Nt(e),S=h?{borderstyle:x(f,"border-style").getOr(""),bordercolor:Lo(x(f,"border-color").getOr("")),backgroundcolor:Lo(x(f,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...f,...w,...S,...(()=>{let h=f["border-width"];return ex(e)&&h?{border:h}:x(w,"border").fold(()=>({}),e=>({border:e}))})(),...{...x(f,"border-spacing").or(x(w,"cellspacing")).fold(()=>({}),e=>({cellspacing:e})),...x(f,"border-padding").or(x(w,"cellpadding")).fold(()=>({}),e=>({cellpadding:e}))}}})(e,eC(e));h?(S.cols="1",S.rows="1",eC(e)&&(S.borderstyle="",S.bordercolor="",S.backgroundcolor="")):(w=f.getParent(e.selection.getStart(),"table",e.getBody()))?S=((e,h,f)=>{let w=e.dom,S=ex(e)?w.getStyle(h,"border-spacing")||w.getAttrib(h,"cellspacing"):w.getAttrib(h,"cellspacing")||w.getStyle(h,"border-spacing"),O=ex(e)?tt(w,h,"padding")||w.getAttrib(h,"cellpadding"):w.getAttrib(h,"cellpadding")||tt(w,h,"padding");return{width:w.getStyle(h,"width")||w.getAttrib(h,"width"),height:w.getStyle(h,"height")||w.getAttrib(h,"height"),cellspacing:null!=S?S:"",cellpadding:null!=O?O:"",border:((h,f)=>{let w=Be(et.fromDom(f),"border-width");return ex(e)&&w.isSome()?w.getOr(""):h.getAttrib(f,"border")||tt(e.dom,f,"border-width")||tt(e.dom,f,"border")||""})(w,h),caption:!!w.select("caption",h)[0],class:w.getAttrib(h,"class",""),align:eK(e,h),...f?Ho(h):{}}})(e,w,eC(e)):eC(e)&&(S.borderstyle="",S.bordercolor="",S.backgroundcolor="");let O=fo(eM(e));O.length>0&&S.class&&(S.class=S.class.replace(/\s*mce\-item\-table\s*/g,""));let _={type:"grid",columns:2,items:Zo(e,O,h)},V=eC(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[_]},Oo(e,"table")]}:{type:"panel",items:[_]};e.windowManager.open({title:"Table Properties",size:"normal",body:V,onSubmit:b(tl,e,w,S),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:S})},ll=e=>{C({mceTableProps:b(ol,e,!1),mceTableRowProps:b(Yo,e),mceTableCellProps:b(Ko,e),mceInsertTableDialog:b(ol,e,!0)},(h,f)=>e.addCommand(f,()=>{ce((e,h)=>h(e),ie,ye(e),ee("table"),void 0).forall(be)&&h()}))},rl=e=>{let t=(e,h)=>xe(e,h).exists(e=>parseInt(e,10)>1);return e.length>0&&q(e,e=>t(e,"rowspan")||t(e,"colspan"))?y.some(e):y.none()},al=(e,h,f)=>h.length<=1?y.none():zt(e,f.firstSelectedSelector,f.lastSelectedSelector).bind(h=>{let t=h=>z(e,h),f="thead,tfoot,tbody,table",w=me(h.first,f,t),S=me(h.last,f,t);return w.bind(e=>S.bind(f=>z(e,f)?((e,h,f)=>{let w=Qe(e);return Mt(w,h,f)})(h.table,h.first,h.last):y.none()))}).map(e=>({bounds:e,cells:h})),sl=e=>{let h=bo(y.none()),f=bo([]),w=y.none(),S=ee("caption"),r=e=>w.forall(h=>!h[e]),a=()=>e$(ye(e),he(e)).bind(h=>Oe($e(h),e$(et.fromDom(e.selection.getEnd()),he(e)).bind($e),(f,w)=>{var O;return z(f,w)?S(h)?y.some({element:h,mergable:y.none(),unmergable:y.none(),selection:[h]}):y.some({element:h,mergable:al(f,O=eo(e),eF),unmergable:rl(O),selection:u(O)}):y.none()}).bind(u)),s=e=>$e(e.element).map(h=>{let f=Qe(h),w=ko(f,e).getOr([]),S=E(w,(e,h)=>(h.isLocked&&(e.onAny=!0,0===h.column?e.onFirst=!0:h.column+h.colspan>=f.grid.columns&&(e.onLast=!0)),e),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Bo(f,e).isSome(),unmergeable:Fo(f,e).isSome(),locked:S}}),c=()=>{let e,S;h.set((S=!1,(...h)=>(S||(S=!0,e=a.apply(null,h)),e))()),w=h.get().bind(s),P(f.get(),g)},i=e=>(e(),f.set(f.get().concat([e])),()=>{f.set(k(f.get(),h=>h!==e))}),m=(f,w)=>i(()=>h.get().fold(()=>{f.setEnabled(!1)},h=>{f.setEnabled(!w(h)&&e.selection.isEditable())})),d=(f,w,S)=>i(()=>h.get().fold(()=>{f.setEnabled(!1),f.setActive(!1)},h=>{f.setEnabled(!w(h)&&e.selection.isEditable()),f.setActive(S(h))})),p=e=>w.exists(h=>h.locked[e]),b=(h,f)=>w=>d(w,e=>S(e.element),()=>e.queryCommandValue(h)===f),O=b("mceTableRowType","header"),_=b("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",c),{onSetupTable:e=>m(e,e=>!1),onSetupCellOrRow:e=>m(e,e=>S(e.element)),onSetupColumn:e=>h=>m(h,h=>S(h.element)||p(e)),onSetupPasteable:e=>h=>m(h,h=>S(h.element)||e().isNone()),onSetupPasteableColumn:(e,h)=>f=>m(f,f=>S(f.element)||e().isNone()||p(h)),onSetupMergeable:e=>m(e,e=>r("mergeable")),onSetupUnmergeable:e=>m(e,e=>r("unmergeable")),resetTargets:c,onSetupTableWithCaption:h=>d(h,V,h=>$e(h.element,he(e)).exists(e=>de(e,"caption").isSome())),onSetupTableRowHeaders:O,onSetupTableColumnHeaders:_,targets:h.get}};var eX=tinymce.util.Tools.resolve("tinymce.FakeClipboard");let eY="x-tinymce/dom-table-",eZ=eY+"rows",e0=eY+"columns",ul=e=>{var h;let f=null!==(h=eX.read())&&void 0!==h?h:[];return H(f,h=>y.from(h.getType(e)))},pl=()=>ul(eZ),bl=()=>ul(e0),gl=e=>h=>{let o=()=>{h.setEnabled(e.selection.isEditable())};return e.on("NodeChange",o),o(),()=>{e.off("NodeChange",o)}},hl=e=>h=>{let o=()=>{h.setEnabled(e.selection.isEditable())};return e.on("NodeChange",o),o(),()=>{e.off("NodeChange",o)}};h.add("table",e=>{let h=sl(e);(e=>{let h=e.options.register;h("table_border_widths",{processor:"object[]",default:ep}),h("table_border_styles",{processor:"object[]",default:eb}),h("table_cell_advtab",{processor:"boolean",default:!0}),h("table_row_advtab",{processor:"boolean",default:!0}),h("table_advtab",{processor:"boolean",default:!0}),h("table_appearance_options",{processor:"boolean",default:!0}),h("table_grid",{processor:"boolean",default:!eu.deviceType.isTouch()}),h("table_cell_class_list",{processor:"object[]",default:[]}),h("table_row_class_list",{processor:"object[]",default:[]}),h("table_class_list",{processor:"object[]",default:[]}),h("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),h("table_background_color_map",{processor:"object[]",default:[]}),h("table_border_color_map",{processor:"object[]",default:[]})})(e),ll(e),((e,h)=>{let o=h=>()=>e.execCommand(h),l=(h,f)=>!!e.queryCommandSupported(f.command)&&(e.ui.registry.addMenuItem(h,{...f,onAction:O(f.onAction)?f.onAction:o(f.command)}),!0),n=(h,f)=>{e.queryCommandSupported(f.command)&&e.ui.registry.addToggleMenuItem(h,{...f,onAction:O(f.onAction)?f.onAction:o(f.command)})},r=h=>{e.execCommand("mceInsertTable",!1,{rows:h.numRows,columns:h.numColumns})},f=[l("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:h.onSetupCellOrRow}),l("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:h.onSetupCellOrRow}),l("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:h.onSetupCellOrRow}),l("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:h.onSetupCellOrRow}),l("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:h.onSetupCellOrRow}),l("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:h.onSetupCellOrRow}),l("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:h.onSetupPasteable(pl)}),l("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:h.onSetupPasteable(pl)})],w=[l("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:h.onSetupColumn("onFirst")}),l("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:h.onSetupColumn("onLast")}),l("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:h.onSetupColumn("onAny")}),l("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:h.onSetupColumn("onAny")}),l("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:h.onSetupColumn("onAny")}),l("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:h.onSetupPasteableColumn(bl,"onFirst")}),l("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:h.onSetupPasteableColumn(bl,"onLast")})],S=[l("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:h.onSetupCellOrRow}),l("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:h.onSetupMergeable}),l("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:h.onSetupUnmergeable})];eT(e)?e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:r}],onSetup:hl(e)}):e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTableDialog"),onSetup:hl(e)}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTableDialog"),onSetup:hl(e)}),l("tableprops",{text:"Table properties",onSetup:h.onSetupTable,command:"mceTableProps"}),l("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:h.onSetupTable,command:"mceTableDelete"}),D(f,!0)&&e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:d("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),D(w,!0)&&e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:d("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),D(S,!0)&&e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:d("tablecellprops tablemergecells tablesplitcells")}),e.ui.registry.addContextMenu("table",{update:()=>(h.resetTargets(),h.targets().fold(d(""),e=>"caption"===G(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});let _=So(eM(e));0!==_.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>yo(e,_,"tableclass",h=>e.execCommand("mceTableToggleClass",!1,h)),onSetup:h.onSetupTable});let V=So(eA(e));0!==V.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>yo(e,V,"tablecellclass",h=>e.execCommand("mceTableCellToggleClass",!1,h)),onSetup:h.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>yo(e,ej,"tablecellverticalalign",wo(e,"vertical-align")),onSetup:h.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>yo(e,eh(e),"tablecellborderwidth",wo(e,"border-width")),onSetup:h.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>yo(e,ef(e),"tablecellborderstyle",wo(e,"border-style")),onSetup:h.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>vo(e,eO(e),"background-color"),onSetup:h.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>vo(e,e_(e),"border-color"),onSetup:h.onSetupCellOrRow})),n("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:h.onSetupTableWithCaption}),n("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:To(e),onSetup:h.onSetupTableRowHeaders}),n("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:xo(e),onSetup:h.onSetupTableRowHeaders})})(e,h),((e,h)=>{e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:gl(e),fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});let o=h=>()=>e.execCommand(h),l=(h,f)=>{e.queryCommandSupported(f.command)&&e.ui.registry.addButton(h,{...f,onAction:O(f.onAction)?f.onAction:o(f.command)})},n=(h,f)=>{e.queryCommandSupported(f.command)&&e.ui.registry.addToggleButton(h,{...f,onAction:O(f.onAction)?f.onAction:o(f.command)})};l("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:h.onSetupTable}),l("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:h.onSetupTable}),l("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:h.onSetupCellOrRow}),l("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:h.onSetupMergeable}),l("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:h.onSetupUnmergeable}),l("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:h.onSetupCellOrRow}),l("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:h.onSetupCellOrRow}),l("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:h.onSetupCellOrRow}),l("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:h.onSetupCellOrRow}),l("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:h.onSetupColumn("onFirst")}),l("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:h.onSetupColumn("onLast")}),l("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:h.onSetupColumn("onAny")}),l("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:h.onSetupCellOrRow}),l("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:h.onSetupCellOrRow}),l("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:h.onSetupPasteable(pl)}),l("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:h.onSetupPasteable(pl)}),l("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:h.onSetupColumn("onAny")}),l("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:h.onSetupColumn("onAny")}),l("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:h.onSetupPasteableColumn(bl,"onFirst")}),l("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:h.onSetupPasteableColumn(bl,"onLast")}),l("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:gl(e)});let f=So(eM(e));0!==f.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Co(e,f,"tableclass",h=>e.execCommand("mceTableToggleClass",!1,h)),onSetup:h.onSetupTable});let w=So(eA(e));0!==w.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Co(e,w,"tablecellclass",h=>e.execCommand("mceTableCellToggleClass",!1,h)),onSetup:h.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Co(e,ej,"tablecellverticalalign",wo(e,"vertical-align")),onSetup:h.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Co(e,eh(e),"tablecellborderwidth",wo(e,"border-width")),onSetup:h.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Co(e,ef(e),"tablecellborderstyle",wo(e,"border-style")),onSetup:h.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:h=>h(vo(e,eO(e),"background-color")),onSetup:h.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:h=>h(vo(e,e_(e),"border-color")),onSetup:h.onSetupCellOrRow})),n("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:h.onSetupTableWithCaption}),n("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:To(e),onSetup:h.onSetupTableRowHeaders}),n("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:xo(e),onSetup:h.onSetupTableColumnHeaders})})(e,h),(e=>{let h=eD(e);h.length>0&&e.ui.registry.addContextToolbar("table",{predicate:h=>e.dom.is(h,"table")&&e.getBody().contains(h)&&e.dom.isEditable(h.parentNode),items:h,scope:"node",position:"node"})})(e)})}();