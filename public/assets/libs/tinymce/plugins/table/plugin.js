!function(){"use strict";var e,t,o=tinymce.util.Tools.resolve("tinymce.PluginManager");let hasProto=(e,t,o)=>{var l;return!!o(e,t.prototype)||(null===(l=e.constructor)||void 0===l?void 0:l.name)===t.name},typeOf=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&hasProto(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},isType$1=e=>t=>typeOf(t)===e,isSimpleType=e=>t=>typeof t===e,l=isType$1("string"),n=isType$1("array"),r=isSimpleType("boolean"),a=(e=void 0,t=>e===t),isNullable=e=>null==e,isNonNullable=e=>!isNullable(e),i=isSimpleType("function"),s=isSimpleType("number"),noop=()=>{},compose1=(e,t)=>o=>e(t(o)),constant=e=>()=>e,identity=e=>e,tripleEquals=(e,t)=>e===t;function curry(e,...t){return(...o)=>{let l=t.concat(o);return e.apply(null,l)}}let call=e=>{e()},d=constant(!1),c=constant(!0);let Optional=class Optional{constructor(e,t){this.tag=e,this.value=t}static some(e){return new Optional(!0,e)}static none(){return Optional.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?Optional.some(e(this.value)):Optional.none()}bind(e){return this.tag?e(this.value):Optional.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:Optional.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return isNonNullable(e)?Optional.some(e):Optional.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Optional.singletonNone=new Optional(!1);let m=Object.keys,u=Object.hasOwnProperty,each$1=(e,t)=>{let o=m(e);for(let l=0,n=o.length;l<n;l++){let n=o[l],r=e[n];t(r,n)}},objAcc=e=>(t,o)=>{e[o]=t},internalFilter=(e,t,o,l)=>{each$1(e,(e,n)=>{(t(e,n)?o:l)(e,n)})},filter$1=(e,t)=>{let o={};return internalFilter(e,t,objAcc(o),noop),o},mapToArray=(e,t)=>{let o=[];return each$1(e,(e,l)=>{o.push(t(e,l))}),o},values=e=>mapToArray(e,identity),size=e=>m(e).length,get$4=(e,t)=>has(e,t)?Optional.from(e[t]):Optional.none(),has=(e,t)=>u.call(e,t),hasNonNullableKey=(e,t)=>has(e,t)&&void 0!==e[t]&&null!==e[t],isEmpty$1=e=>{for(let t in e)if(u.call(e,t))return!1;return!0},p=Array.prototype.indexOf,g=Array.prototype.push,rawIndexOf=(e,t)=>p.call(e,t),contains=(e,t)=>rawIndexOf(e,t)>-1,exists=(e,t)=>{for(let o=0,l=e.length;o<l;o++){let l=e[o];if(t(l,o))return!0}return!1},range=(e,t)=>{let o=[];for(let l=0;l<e;l++)o.push(t(l));return o},map=(e,t)=>{let o=e.length,l=Array(o);for(let n=0;n<o;n++){let o=e[n];l[n]=t(o,n)}return l},each=(e,t)=>{for(let o=0,l=e.length;o<l;o++){let l=e[o];t(l,o)}},eachr=(e,t)=>{for(let o=e.length-1;o>=0;o--){let l=e[o];t(l,o)}},partition=(e,t)=>{let o=[],l=[];for(let n=0,r=e.length;n<r;n++){let r=e[n],a=t(r,n)?o:l;a.push(r)}return{pass:o,fail:l}},filter=(e,t)=>{let o=[];for(let l=0,n=e.length;l<n;l++){let n=e[l];t(n,l)&&o.push(n)}return o},foldr=(e,t,o)=>(eachr(e,(e,l)=>{o=t(o,e,l)}),o),foldl=(e,t,o)=>(each(e,(e,l)=>{o=t(o,e,l)}),o),findUntil=(e,t,o)=>{for(let l=0,n=e.length;l<n;l++){let n=e[l];if(t(n,l))return Optional.some(n);if(o(n,l))break}return Optional.none()},find=(e,t)=>findUntil(e,t,d),flatten$1=e=>{let t=[];for(let o=0,l=e.length;o<l;++o){if(!n(e[o]))throw Error("Arr.flatten item "+o+" was not an array, input: "+e);g.apply(t,e[o])}return t},bind=(e,t)=>flatten$1(map(e,t)),forall=(e,t)=>{for(let o=0,l=e.length;o<l;++o){let l=e[o];if(!0!==t(l,o))return!1}return!0},mapToObject=(e,t)=>{let o={};for(let l=0,n=e.length;l<n;l++){let n=e[l];o[String(n)]=t(n,l)}return o},get$3=(e,t)=>t>=0&&t<e.length?Optional.some(e[t]):Optional.none(),head=e=>get$3(e,0),last=e=>get$3(e,e.length-1),findMap=(e,t)=>{for(let o=0;o<e.length;o++){let l=t(e[o],o);if(l.isSome())return l}return Optional.none()},fromDom$1=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},b={fromHtml:(e,t)=>{let o=t||document,l=o.createElement("div");if(l.innerHTML=e,!l.hasChildNodes()||l.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return fromDom$1(l.childNodes[0])},fromTag:(e,t)=>{let o=t||document,l=o.createElement(e);return fromDom$1(l)},fromText:(e,t)=>{let o=t||document,l=o.createTextNode(e);return fromDom$1(l)},fromDom:fromDom$1,fromPoint:(e,t,o)=>Optional.from(e.dom.elementFromPoint(t,o)).map(fromDom$1)},is$2=(e,t)=>{let o=e.dom;if(1!==o.nodeType)return!1;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},bypassSelector=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,all$1=(e,t)=>{let o=void 0===t?document:t.dom;return bypassSelector(o)?[]:map(o.querySelectorAll(e),b.fromDom)},one=(e,t)=>{let o=void 0===t?document:t.dom;return bypassSelector(o)?Optional.none():Optional.from(o.querySelector(e)).map(b.fromDom)},eq=(e,t)=>e.dom===t.dom;"undefined"!=typeof window?window:Function("return this;")();let name=e=>{let t=e.dom.nodeName;return t.toLowerCase()},type=e=>e.dom.nodeType,isType=e=>t=>type(t)===e,f=isType(1),h=isType(3),y=isType(9),S=isType(11),isTag=e=>t=>f(t)&&name(t)===e,owner=e=>b.fromDom(e.dom.ownerDocument),documentOrOwner=e=>y(e)?e:owner(e),parent=e=>Optional.from(e.dom.parentNode).map(b.fromDom),nextSibling=e=>Optional.from(e.dom.nextSibling).map(b.fromDom),children$3=e=>map(e.dom.childNodes,b.fromDom),child$3=(e,t)=>{let o=e.dom.childNodes;return Optional.from(o[t]).map(b.fromDom)},firstChild=e=>child$3(e,0),isShadowRoot=e=>S(e)&&isNonNullable(e.dom.host),w=i(Element.prototype.attachShadow)&&i(Node.prototype.getRootNode),C=w?e=>b.fromDom(e.dom.getRootNode()):documentOrOwner,getShadowRoot=e=>{let t=C(e);return isShadowRoot(t)?Optional.some(t):Optional.none()},getShadowHost=e=>b.fromDom(e.dom.host),inBody=e=>{let t=h(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let o=t.ownerDocument;return getShadowRoot(b.fromDom(t)).fold(()=>o.body.contains(t),compose1(inBody,getShadowHost))};var ClosestOrAncestor=(e,t,o,l,n)=>e(o,l)?Optional.some(o):i(n)&&n(o)?Optional.none():t(o,l,n);let ancestor$1=(e,t,o)=>{let l=e.dom,n=i(o)?o:d;for(;l.parentNode;){l=l.parentNode;let e=b.fromDom(l);if(t(e))return Optional.some(e);if(n(e))break}return Optional.none()},closest$2=(e,t,o)=>ClosestOrAncestor((e,t)=>t(e),ancestor$1,e,t,o),child$2=(e,t)=>{let o=find(e.dom.childNodes,e=>t(b.fromDom(e)));return o.map(b.fromDom)},ancestor=(e,t,o)=>ancestor$1(e,e=>is$2(e,t),o),child$1=(e,t)=>child$2(e,e=>is$2(e,t)),descendant=(e,t)=>one(t,e),closest$1=(e,t,o)=>ClosestOrAncestor((e,t)=>is$2(e,t),ancestor,e,t,o),closest=e=>closest$1(e,"[contenteditable]"),isEditable=(e,t=!1)=>inBody(e)?e.dom.isContentEditable:closest(e).fold(constant(t),e=>"true"===getRaw$1(e)),getRaw$1=e=>e.dom.contentEditable,getNodeName=e=>e.nodeName.toLowerCase(),getBody=e=>b.fromDom(e.getBody()),getIsRoot=e=>t=>eq(t,getBody(e)),removePxSuffix=e=>e?e.replace(/px$/,""):"",addPxSuffix=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,getSelectionStart=e=>b.fromDom(e.selection.getStart()),getSelectionEnd=e=>b.fromDom(e.selection.getEnd()),isInEditableContext=e=>closest$2(e,isTag("table")).forall(isEditable),children$2=(e,t)=>filter(children$3(e),t),descendants$1=(e,t)=>{let o=[];return each(children$3(e),e=>{t(e)&&(o=o.concat([e])),o=o.concat(descendants$1(e,t))}),o},children$1=(e,t)=>children$2(e,e=>is$2(e,t)),descendants=(e,t)=>all$1(t,e),rawSet=(e,t,o)=>{if(l(o)||r(o)||s(o))e.setAttribute(t,o+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),Error("Attribute value was not simple")},setAll=(e,t)=>{let o=e.dom;each$1(t,(e,t)=>{rawSet(o,t,e)})},get$2=(e,t)=>{let o=e.dom.getAttribute(t);return null===o?void 0:o},getOpt=(e,t)=>Optional.from(get$2(e,t)),remove$2=(e,t)=>{e.dom.removeAttribute(t)},clone=e=>foldl(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),is=(e,t,o=tripleEquals)=>e.exists(e=>o(e,t)),cat=e=>{let t=[],push=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(push);return t},lift2=(e,t,o)=>e.isSome()&&t.isSome()?Optional.some(o(e.getOrDie(),t.getOrDie())):Optional.none(),flatten=e=>e.bind(identity),someIf=(e,t)=>e?Optional.some(t):Optional.none(),removeFromStart=(e,t)=>e.substring(t),checkRange=(e,t,o)=>""===t||e.length>=t.length&&e.substr(o,o+t.length)===t,removeLeading=(e,t)=>startsWith(e,t)?removeFromStart(e,t.length):e,startsWith=(e,t)=>checkRange(e,t,0),T=(t=/^\s+|\s+$/g,e=>e.replace(t,"")),isNotEmpty=e=>e.length>0,isEmpty=e=>!isNotEmpty(e),toInt=(e,t=10)=>{let o=parseInt(e,t);return isNaN(o)?Optional.none():Optional.some(o)},toFloat=e=>{let t=parseFloat(e);return isNaN(t)?Optional.none():Optional.some(t)},isSupported=e=>void 0!==e.style&&i(e.style.getPropertyValue),internalSet=(e,t,o)=>{if(!l(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),Error("CSS value must be a string: "+o);isSupported(e)&&e.style.setProperty(t,o)},internalRemove=(e,t)=>{isSupported(e)&&e.style.removeProperty(t)},get$1=(e,t)=>{let o=e.dom,l=window.getComputedStyle(o),n=l.getPropertyValue(t);return""!==n||inBody(e)?n:getUnsafeProperty(o,t)},getUnsafeProperty=(e,t)=>isSupported(e)?e.style.getPropertyValue(t):"",getRaw=(e,t)=>{let o=e.dom,l=getUnsafeProperty(o,t);return Optional.from(l).filter(e=>e.length>0)},getAttrValue=(e,t,o=0)=>getOpt(e,t).map(e=>parseInt(e,10)).getOr(o),firstLayer=(e,t)=>filterFirstLayer(e,t,c),filterFirstLayer=(e,t,o)=>bind(children$3(e),e=>is$2(e,t)?o(e)?[e]:[]:filterFirstLayer(e,t,o)),x=["tfoot","thead","tbody","colgroup"],isValidSection=e=>contains(x,e),grid=(e,t)=>({rows:e,columns:t}),detail=(e,t,o)=>({element:e,rowspan:t,colspan:o}),extended=(e,t,o,l,n,r)=>({element:e,rowspan:t,colspan:o,row:l,column:n,isLocked:r}),rowdetail=(e,t,o)=>({element:e,cells:t,section:o}),bounds=(e,t,o,l)=>({startRow:e,startCol:t,finishRow:o,finishCol:l}),columnext=(e,t,o)=>({element:e,colspan:t,column:o}),colgroup=(e,t)=>({element:e,columns:t}),lookup=(e,t,o=d)=>o(t)?Optional.none():contains(e,name(t))?Optional.some(t):ancestor(t,e.join(","),e=>is$2(e,"table")||o(e)),cell=(e,t)=>lookup(["td","th"],e,t),cells=e=>firstLayer(e,"th,td"),columns=e=>is$2(e,"colgroup")?children$1(e,"col"):bind(columnGroups(e),e=>children$1(e,"col")),table=(e,t)=>closest$1(e,"table",t),rows=e=>firstLayer(e,"tr"),columnGroups=e=>table(e).fold(constant([]),e=>children$1(e,"colgroup")),fromRowsOrColGroups=(e,t)=>map(e,e=>{if("colgroup"===name(e)){let t=map(columns(e),e=>{let t=getAttrValue(e,"span",1);return detail(e,1,t)});return rowdetail(e,t,"colgroup")}{let o=map(cells(e),e=>{let t=getAttrValue(e,"rowspan",1),o=getAttrValue(e,"colspan",1);return detail(e,t,o)});return rowdetail(e,o,t(e))}}),getParentSection=e=>parent(e).map(e=>{let t=name(e);return isValidSection(t)?t:"tbody"}).getOr("tbody"),fromTable$1=e=>{let t=rows(e),o=columnGroups(e),l=[...o,...t];return fromRowsOrColGroups(l,getParentSection)},getLockedColumnsFromTable=e=>getOpt(e,"data-snooker-locked-cols").bind(e=>Optional.from(e.match(/\d+/g))).map(e=>mapToObject(e,c)),key=(e,t)=>e+","+t,filterItems=(e,t)=>{let o=bind(e.all,e=>e.cells);return filter(o,t)},generateColumns=e=>{let t={},o=0;return each(e.cells,e=>{let l=e.colspan;range(l,n=>{let r=o+n;t[r]=columnext(e.element,l,r)}),o+=l}),t},generate$1=e=>{let t={},o=[],l=head(e).map(e=>e.element).bind(table),n=l.bind(getLockedColumnsFromTable).getOr({}),r=0,a=0,i=0,{pass:s,fail:d}=partition(e,e=>"colgroup"===e.section);each(d,e=>{let l=[];each(e.cells,e=>{let o=0;for(;void 0!==t[key(i,o)];)o++;let r=hasNonNullableKey(n,o.toString()),s=extended(e.element,e.rowspan,e.colspan,i,o,r);for(let l=0;l<e.colspan;l++)for(let n=0;n<e.rowspan;n++){let e=i+n,r=o+l,d=key(e,r);t[d]=s,a=Math.max(a,r+1)}l.push(s)}),r++,o.push(rowdetail(e.element,l,e.section)),i++});let{columns:c,colgroups:m}=last(s).map(e=>{let t=generateColumns(e),o=colgroup(e.element,values(t));return{colgroups:[o],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}})),u=grid(r,a);return{grid:u,access:t,all:o,columns:c,colgroups:m}},v={fromTable:e=>{let t=fromTable$1(e);return generate$1(t)},generate:generate$1,getAt:(e,t,o)=>Optional.from(e.access[key(t,o)]),findItem:(e,t,o)=>{let l=filterItems(e,e=>o(t,e.element));return l.length>0?Optional.some(l[0]):Optional.none()},filterItems,justCells:e=>bind(e.all,e=>e.cells),justColumns:e=>values(e.columns),hasColumns:e=>m(e.columns).length>0,getColumnAt:(e,t)=>Optional.from(e.columns[t])};var O=tinymce.util.Tools.resolve("tinymce.util.Tools");let getTDTHOverallStyle=(e,t,o)=>{let l;let n=e.select("td,th",t);for(let t=0;t<n.length;t++){let r=e.getStyle(n[t],o);if(a(l)&&(l=r),l!==r)return""}return l},setAlign=(e,t,o)=>{O.each("left center right".split(" "),l=>{l!==o&&e.formatter.remove("align"+l,{},t)}),o&&e.formatter.apply("align"+o,{},t)},setVAlign=(e,t,o)=>{O.each("top middle bottom".split(" "),l=>{l!==o&&e.formatter.remove("valign"+l,{},t)}),o&&e.formatter.apply("valign"+o,{},t)},fireTableModified=(e,t,o)=>{e.dispatch("TableModified",{...o,table:t})},toNumber=(e,t)=>toFloat(e).getOr(t),getProp=(e,t,o)=>toNumber(get$1(e,t),o),calcContentBoxSize=(e,t,o,l)=>{let n=getProp(e,`padding-${o}`,0),r=getProp(e,`padding-${l}`,0),a=getProp(e,`border-${o}-width`,0),i=getProp(e,`border-${l}-width`,0);return t-n-r-a-i},getCalculatedWidth=(e,t)=>{let o=e.dom,l=o.getBoundingClientRect().width||o.offsetWidth;return"border-box"===t?l:calcContentBoxSize(e,l,"left","right")},getInner=e=>getCalculatedWidth(e,"content-box");var R=tinymce.util.Tools.resolve("tinymce.Env");let I=range(5,e=>{let t=`${e+1}px`;return{title:t,value:t}}),$=map(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],e=>({title:e,value:e.toLowerCase()})),A="100%",getPixelForcedWidth=e=>{var t;let o=e.dom,l=null!==(t=o.getParent(e.selection.getStart(),o.isBlock))&&void 0!==t?t:e.getBody();return getInner(b.fromDom(l))+"px"},determineDefaultStyles=(e,t)=>isResponsiveForced(e)||!_(e)?t:isPixelsForced(e)?{...t,width:getPixelForcedWidth(e)}:{...t,width:A},determineDefaultAttributes=(e,t)=>isResponsiveForced(e)||_(e)?t:isPixelsForced(e)?{...t,width:getPixelForcedWidth(e)}:{...t,width:A},option=e=>t=>t.options.get(e),register=e=>{let t=e.options.register;t("table_border_widths",{processor:"object[]",default:I}),t("table_border_styles",{processor:"object[]",default:$}),t("table_cell_advtab",{processor:"boolean",default:!0}),t("table_row_advtab",{processor:"boolean",default:!0}),t("table_advtab",{processor:"boolean",default:!0}),t("table_appearance_options",{processor:"boolean",default:!0}),t("table_grid",{processor:"boolean",default:!R.deviceType.isTouch()}),t("table_cell_class_list",{processor:"object[]",default:[]}),t("table_row_class_list",{processor:"object[]",default:[]}),t("table_class_list",{processor:"object[]",default:[]}),t("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),t("table_background_color_map",{processor:"object[]",default:[]}),t("table_border_color_map",{processor:"object[]",default:[]})},D=option("table_sizing_mode"),M=option("table_border_widths"),N=option("table_border_styles"),P=option("table_cell_advtab"),B=option("table_row_advtab"),k=option("table_advtab"),E=option("table_appearance_options"),F=option("table_grid"),_=option("table_style_by_css"),H=option("table_cell_class_list"),L=option("table_row_class_list"),q=option("table_class_list"),V=option("table_toolbar"),W=option("table_background_color_map"),U=option("table_border_color_map"),isPixelsForced=e=>"fixed"===D(e),isResponsiveForced=e=>"responsive"===D(e),getDefaultStyles=e=>{let t=e.options,o=t.get("table_default_styles");return t.isSet("table_default_styles")?o:determineDefaultStyles(e,o)},getDefaultAttributes=e=>{let t=e.options,o=t.get("table_default_attributes");return t.isSet("table_default_attributes")?o:determineDefaultAttributes(e,o)},isWithin=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,isRectangular=(e,t)=>{let o=!0,l=curry(isWithin,t);for(let n=t.startRow;n<=t.finishRow;n++)for(let r=t.startCol;r<=t.finishCol;r++)o=o&&v.getAt(e,n,r).exists(l);return o?Optional.some(t):Optional.none()},getBounds=(e,t)=>bounds(Math.min(e.row,t.row),Math.min(e.column,t.column),Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),Math.max(e.column+e.colspan-1,t.column+t.colspan-1)),getAnyBox=(e,t,o)=>{let l=v.findItem(e,t,eq),n=v.findItem(e,o,eq);return l.bind(e=>n.map(t=>getBounds(e,t)))},getBox$1=(e,t,o)=>getAnyBox(e,t,o).bind(t=>isRectangular(e,t)),getBox=(e,t,o)=>{let l=j(e);return getBox$1(l,t,o)},j=v.fromTable,before=(e,t)=>{let o=parent(e);o.each(o=>{o.dom.insertBefore(t.dom,e.dom)})},after$1=(e,t)=>{let o=nextSibling(e);o.fold(()=>{let o=parent(e);o.each(e=>{append$1(e,t)})},e=>{before(e,t)})},append$1=(e,t)=>{e.dom.appendChild(t.dom)},after=(e,t)=>{each(t,(o,l)=>{let n=0===l?e:t[l-1];after$1(n,o)})},remove=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},z=((e,t)=>{let getOption=t=>e(t)?Optional.from(t.dom.nodeValue):Optional.none();return{get:o=>{if(!e(o))throw Error("Can only get "+t+" value of a "+t+" node");return getOption(o).getOr("")},getOption,set:(o,l)=>{if(!e(o))throw Error("Can only set raw "+t+" value of a "+t+" node");o.dom.nodeValue=l}}})(h,"text");var G=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];let all=(e,t,o,l)=>{let n=o[0],r=o.slice(1);return l(e,t,n,r)},unsafeOne=(e,t,o,l)=>{let n=t(e,o);return foldr(l,(o,l)=>{let n=t(e,l);return commonElement(e,o,n)},n)},commonElement=(e,t,o)=>t.bind(t=>o.filter(curry(e.eq,t))),sharedOne$1=(e,t,o)=>o.length>0?all(e,t,o,unsafeOne):Optional.none(),K={up:constant({selector:ancestor,closest:closest$1,predicate:ancestor$1,all:(e,t)=>{let o=i(t)?t:d,l=e.dom,n=[];for(;null!==l.parentNode&&void 0!==l.parentNode;){let e=l.parentNode,t=b.fromDom(e);if(n.push(t),!0===o(t))break;l=e}return n}}),down:constant({selector:descendants,predicate:descendants$1}),styles:constant({get:get$1,getRaw:getRaw,set:(e,t,o)=>{let l=e.dom;internalSet(l,t,o)},remove:(e,t)=>{let o=e.dom;internalRemove(o,t),is(getOpt(e,"style").map(T),"")&&remove$2(e,"style")}}),attrs:constant({get:get$2,set:(e,t,o)=>{rawSet(e.dom,t,o)},remove:remove$2,copyTo:(e,t)=>{let o=clone(e);setAll(t,o)}}),insert:constant({before:before,after:after$1,afterAll:after,append:append$1,appendAll:(e,t)=>{each(t,t=>{append$1(e,t)})},prepend:(e,t)=>{let o=firstChild(e);o.fold(()=>{append$1(e,t)},o=>{e.dom.insertBefore(t.dom,o.dom)})},wrap:(e,t)=>{before(e,t),append$1(t,e)}}),remove:constant({unwrap:e=>{let t=children$3(e);t.length>0&&after(e,t),remove(e)},remove:remove}),create:constant({nu:b.fromTag,clone:e=>b.fromDom(e.dom.cloneNode(!1)),text:b.fromText}),query:constant({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:e=>Optional.from(e.dom.previousSibling).map(b.fromDom),nextSibling:nextSibling}),property:constant({children:children$3,name:name,parent:parent,document:e=>documentOrOwner(e).dom,isText:h,isComment:e=>8===type(e)||"#comment"===name(e),isElement:f,isSpecial:e=>{let t=name(e);return contains(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>f(e)?getOpt(e,"lang"):Optional.none(),getText:e=>z.get(e),setText:(e,t)=>z.set(e,t),isBoundary:e=>!!f(e)&&("body"===name(e)||contains(G,name(e))),isEmptyTag:e=>!!f(e)&&contains(["br","img","hr","input"],name(e)),isNonEditable:e=>f(e)&&"false"===get$2(e,"contenteditable")}),eq:eq,is:is$2},sharedOne=(e,t)=>sharedOne$1(K,(t,o)=>e(o),t),lookupTable=e=>ancestor(e,"table"),retrieve$1=(e,t)=>{let o=descendants(e,t);return o.length>0?Optional.some(o):Optional.none()},getEdges=(e,t,o)=>descendant(e,t).bind(t=>descendant(e,o).bind(e=>sharedOne(lookupTable,[t,e]).map(o=>({first:t,last:e,table:o})))),retrieve=(e,t)=>retrieve$1(e,t),retrieveBox=(e,t,o)=>getEdges(e,t,o).bind(t=>{let isRoot=t=>eq(e,t),o="thead,tfoot,tbody,table",l=ancestor(t.first,o,isRoot),n=ancestor(t.last,o,isRoot);return l.bind(e=>n.bind(o=>eq(e,o)?getBox(t.table,t.first,t.last):Optional.none()))}),fromDom=e=>map(e,b.fromDom),J="data-mce-selected",Q="data-mce-first-selected",X="data-mce-last-selected",Y={selected:J,selectedSelector:"td["+J+"],th["+J+"]",firstSelected:Q,firstSelectedSelector:"td["+Q+"],th["+Q+"]",lastSelected:X,lastSelectedSelector:"td["+X+"],th["+X+"]"},getSelectionCellFallback=e=>table(e).bind(e=>retrieve(e,Y.firstSelectedSelector)).fold(constant(e),e=>e[0]),getSelectionFromSelector=e=>(t,o)=>{let l=name(t),n="col"===l||"colgroup"===l?getSelectionCellFallback(t):t;return closest$1(n,e,o)},Z=getSelectionFromSelector("th,td,caption"),ee=getSelectionFromSelector("th,td"),getCellsFromSelection=e=>fromDom(e.model.table.getSelectedCells()),getRowsFromSelection=(e,t)=>{let o=ee(e),l=o.bind(e=>table(e)).map(e=>rows(e));return lift2(o,l,(e,o)=>filter(o,o=>exists(fromDom(o.dom.cells),o=>"1"===get$2(o,t)||eq(o,e)))).getOr([])},et=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],hexColour=e=>({value:normalizeHex(e)}),eo=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,el=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,isHexString=e=>eo.test(e)||el.test(e),normalizeHex=e=>removeLeading(e,"#").toUpperCase(),fromString$1=e=>isHexString(e)?Optional.some({value:normalizeHex(e)}):Optional.none(),toHex=e=>{let t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},fromRgba=e=>{let t=toHex(e.red)+toHex(e.green)+toHex(e.blue);return hexColour(t)},en=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,er=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,rgbaColour=(e,t,o,l)=>({red:e,green:t,blue:o,alpha:l}),fromStringValues=(e,t,o,l)=>{let n=parseInt(e,10),r=parseInt(t,10),a=parseInt(o,10),i=parseFloat(l);return rgbaColour(n,r,a,i)},fromString=e=>{if("transparent"===e)return Optional.some(rgbaColour(0,0,0,0));let t=en.exec(e);if(null!==t)return Optional.some(fromStringValues(t[1],t[2],t[3],"1"));let o=er.exec(e);return null!==o?Optional.some(fromStringValues(o[1],o[2],o[3],o[4])):Optional.none()},anyToHex=e=>fromString$1(e).orThunk(()=>fromString(e).map(fromRgba)).getOrThunk(()=>{let t=document.createElement("canvas");t.height=1,t.width=1;let o=t.getContext("2d");o.clearRect(0,0,t.width,t.height),o.fillStyle="#FFFFFF",o.fillStyle=e,o.fillRect(0,0,1,1);let l=o.getImageData(0,0,1,1).data,n=l[0],r=l[1],a=l[2],i=l[3];return fromRgba(rgbaColour(n,r,a,i))}),rgbaToHexString=e=>fromString(e).map(fromRgba).map(e=>"#"+e.value).getOr(e),Cell=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},singleton=e=>{let t=Cell(Optional.none()),revoke=()=>t.get().each(e);return{clear:()=>{revoke(),t.set(Optional.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{revoke(),t.set(Optional.some(e))}}},unbindable=()=>singleton(e=>e.unbind()),onSetupToggle=(e,t,o)=>l=>{let n=unbindable(),r=isEmpty(o),init=()=>{let a=getCellsFromSelection(e),checkNode=l=>e.formatter.match(t,{value:o},l.dom,r);r?(l.setActive(!exists(a,checkNode)),n.set(e.formatter.formatChanged(t,e=>l.setActive(!e),!0))):(l.setActive(forall(a,checkNode)),n.set(e.formatter.formatChanged(t,l.setActive,!1,{value:o})))};return e.initialized?init():e.on("init",init),n.clear},isListGroup=e=>hasNonNullableKey(e,"menu"),buildListItems=e=>map(e,e=>{let t=e.text||e.title||"";return isListGroup(e)?{text:t,items:buildListItems(e.menu)}:{text:t,value:e.value}}),buildMenuItems=(e,t,o,l)=>map(t,t=>{let n=t.text||t.title;return isListGroup(t)?{type:"nestedmenuitem",text:n,getSubmenuItems:()=>buildMenuItems(e,t.menu,o,l)}:{text:n,type:"togglemenuitem",onAction:()=>l(t.value),onSetup:onSetupToggle(e,o,t.value)}}),applyTableCellStyle=(e,t)=>o=>{e.execCommand("mceTableApplyCellStyle",!1,{[t]:o})},filterNoneItem=e=>bind(e,e=>isListGroup(e)?[{...e,menu:filterNoneItem(e.menu)}]:isNotEmpty(e.value)?[e]:[]),generateMenuItemsCallback=(e,t,o,l)=>n=>n(buildMenuItems(e,t,o,l)),buildColorMenu=(e,t,o)=>{let l=map(t,e=>({text:e.title,value:"#"+anyToHex(e.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:l.length>0?l:void 0,allowCustomColors:!1},onAction:t=>{let l="remove"===t.value?"":t.value;e.execCommand("mceTableApplyCellStyle",!1,{[o]:l})}}]},changeRowHeader=e=>()=>{let t=e.queryCommandValue("mceTableRowType");e.execCommand("mceTableRowType",!1,{type:"header"===t?"body":"header"})},changeColumnHeader=e=>()=>{let t=e.queryCommandValue("mceTableColType");e.execCommand("mceTableColType",!1,{type:"th"===t?"td":"th"})},getClassList$1=e=>{let t=buildListItems(H(e));return t.length>0?Optional.some({name:"class",type:"listbox",label:"Class",items:t}):Optional.none()},ea=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:et}],getItems$2=e=>ea.concat(getClassList$1(e).toArray()),getAdvancedTab=(e,t)=>{let o=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(buildListItems(N(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],l="cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(o):o;return{title:"Advanced",name:"advanced",items:l}},ei={normal:(e,t)=>{let o=e.dom;return{setAttrib:(e,l)=>{o.setAttrib(t,e,l)},setStyle:(e,l)=>{o.setStyle(t,e,l)},setFormat:(o,l)=>{""===l?e.formatter.remove(o,{value:null},t,!0):e.formatter.apply(o,{value:l},t)}}}},es=isTag("th"),getRowHeaderType=(e,t)=>e&&t?"sectionCells":e?"section":"cells",getRowType$1=e=>{let t="thead"===e.section,o=is(findCommonCellType(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||o?{type:"header",subType:getRowHeaderType(t,o)}:{type:"body"}},findCommonCellType=e=>{let t=filter(e,e=>es(e.element));return 0===t.length?Optional.some("td"):t.length===e.length?Optional.some("th"):Optional.none()},findCommonRowType=e=>{let t=map(e,e=>getRowType$1(e).type),o=contains(t,"header"),l=contains(t,"footer");if(!o&&!l)return Optional.some("body");{let e=contains(t,"body");return!o||e||l?o||e||!l?Optional.none():Optional.some("footer"):Optional.some("header")}},cached=e=>{let t,o=!1;return(...l)=>(o||(o=!0,t=e.apply(null,l)),t)},findInWarehouse=(e,t)=>findMap(e.all,e=>find(e.cells,e=>eq(t,e.element))),extractCells=(e,t,o)=>{let l=map(t.selection,t=>cell(t).bind(t=>findInWarehouse(e,t)).filter(o)),n=cat(l);return someIf(n.length>0,n)},onMergable=(e,t)=>t.mergable,onUnmergable=(e,t)=>t.unmergable,onCells=(e,t)=>extractCells(e,t,c),isUnlockedTableCell=(e,t)=>findInWarehouse(e,t).exists(e=>!e.isLocked),allUnlocked=(e,t)=>forall(t,t=>isUnlockedTableCell(e,t)),onUnlockedMergable=(e,t)=>onMergable(e,t).filter(t=>allUnlocked(e,t.cells)),onUnlockedUnmergable=(e,t)=>onUnmergable(e,t).filter(t=>allUnlocked(e,t)),ed=({generate:e=>{if(!n(e))throw Error("cases must be an array");if(0===e.length)throw Error("there must be at least one case");let t=[],o={};return each(e,(l,r)=>{let a=m(l);if(1!==a.length)throw Error("one and only one name per case");let i=a[0],s=l[i];if(void 0!==o[i])throw Error("duplicate key detected:"+i);if("cata"===i)throw Error("cannot have a case named cata (sorry)");if(!n(s))throw Error("case arguments must be an array");t.push(i),o[i]=(...o)=>{let l=o.length;if(l!==s.length)throw Error("Wrong number of arguments to case "+i+". Expected "+s.length+" ("+s+"), got "+l);return{fold:(...t)=>{if(t.length!==e.length)throw Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);let l=t[r];return l.apply(null,o)},match:e=>{let l=m(e);if(t.length!==l.length)throw Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+l.join(","));let n=forall(t,e=>contains(l,e));if(!n)throw Error("Not all branches were specified when using match. Specified: "+l.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,o)},log:e=>{console.log(e,{constructors:t,constructor:i,params:o})}}}}),o}}).generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]);({...ed});let getRowsType=(e,t)=>{let o=v.fromTable(e),l=onCells(o,t);return l.bind(e=>{let t=e[e.length-1],l=e[0].row,n=t.row+t.rowspan,r=o.all.slice(l,n);return findCommonRowType(r)}).getOr("")},rgbToHex=e=>startsWith(e,"rgb")?rgbaToHexString(e):e,extractAdvancedStyles=e=>{let t=b.fromDom(e);return{borderwidth:getRaw(t,"border-width").getOr(""),borderstyle:getRaw(t,"border-style").getOr(""),bordercolor:getRaw(t,"border-color").map(rgbToHex).getOr(""),backgroundcolor:getRaw(t,"background-color").map(rgbToHex).getOr("")}},getSharedValues=e=>{let t=e[0],o=e.slice(1);return each(o,e=>{each(m(t),o=>{each$1(e,(e,l)=>{let n=t[o];""!==n&&o===l&&n!==e&&(t[o]="")})})}),t},getAlignment=(e,t,o,l)=>find(e,e=>!a(o.formatter.matchNode(l,t+e))).getOr(""),ec=curry(getAlignment,["left","center","right"],"align"),em=curry(getAlignment,["top","middle","bottom"],"valign"),extractDataFromSettings=(e,t)=>{let o=getDefaultStyles(e),l=getDefaultAttributes(e),n=t?{borderstyle:get$4(o,"border-style").getOr(""),bordercolor:rgbToHex(get$4(o,"border-color").getOr("")),backgroundcolor:rgbToHex(get$4(o,"background-color").getOr(""))}:{},r={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...o,...l,...n,...(()=>{let t=o["border-width"];return _(e)&&t?{border:t}:get$4(l,"border").fold(()=>({}),e=>({border:e}))})(),...(()=>{let e=get$4(o,"border-spacing").or(get$4(l,"cellspacing")).fold(()=>({}),e=>({cellspacing:e})),t=get$4(o,"border-padding").or(get$4(l,"cellpadding")).fold(()=>({}),e=>({cellpadding:e}));return{...e,...t}})()};return r},getRowType=e=>table(b.fromDom(e)).map(t=>{let o={selection:fromDom(e.cells)};return getRowsType(t,o)}).getOr(""),extractDataFromTableElement=(e,t,o)=>{let l=e.dom,n=_(e)?l.getStyle(t,"border-spacing")||l.getAttrib(t,"cellspacing"):l.getAttrib(t,"cellspacing")||l.getStyle(t,"border-spacing"),r=_(e)?getTDTHOverallStyle(l,t,"padding")||l.getAttrib(t,"cellpadding"):l.getAttrib(t,"cellpadding")||getTDTHOverallStyle(l,t,"padding");return{width:l.getStyle(t,"width")||l.getAttrib(t,"width"),height:l.getStyle(t,"height")||l.getAttrib(t,"height"),cellspacing:null!=n?n:"",cellpadding:null!=r?r:"",border:((t,o)=>{let l=getRaw(b.fromDom(o),"border-width");return _(e)&&l.isSome()?l.getOr(""):t.getAttrib(o,"border")||getTDTHOverallStyle(e.dom,o,"border-width")||getTDTHOverallStyle(e.dom,o,"border")||""})(l,t),caption:!!l.select("caption",t)[0],class:l.getAttrib(t,"class",""),align:ec(e,t),...o?extractAdvancedStyles(t):{}}},extractDataFromRowElement=(e,t,o)=>{let l=e.dom;return{height:l.getStyle(t,"height")||l.getAttrib(t,"height"),class:l.getAttrib(t,"class",""),type:getRowType(t),align:ec(e,t),...o?extractAdvancedStyles(t):{}}},extractDataFromCellElement=(e,t,o,l)=>{let n=e.dom,r=l.getOr(t),getStyle=(e,t)=>n.getStyle(e,t)||n.getAttrib(e,t);return{width:getStyle(r,"width"),height:getStyle(t,"height"),scope:n.getAttrib(t,"scope"),celltype:getNodeName(t),class:n.getAttrib(t,"class",""),halign:ec(e,t),valign:em(e,t),...o?extractAdvancedStyles(t):{}}},getSelectedCells=(e,t)=>{let o=v.fromTable(e),l=v.justCells(o),n=filter(l,e=>exists(t,t=>eq(e.element,t)));return map(n,e=>({element:e.element.dom,column:v.getColumnAt(o,e.column).map(e=>e.element.dom)}))},updateSimpleProps$1=(e,t,o,l)=>{l("scope")&&e.setAttrib("scope",o.scope),l("class")&&e.setAttrib("class",o.class),l("height")&&e.setStyle("height",addPxSuffix(o.height)),l("width")&&t.setStyle("width",addPxSuffix(o.width))},updateAdvancedProps$1=(e,t,o)=>{o("backgroundcolor")&&e.setFormat("tablecellbackgroundcolor",t.backgroundcolor),o("bordercolor")&&e.setFormat("tablecellbordercolor",t.bordercolor),o("borderstyle")&&e.setFormat("tablecellborderstyle",t.borderstyle),o("borderwidth")&&e.setFormat("tablecellborderwidth",addPxSuffix(t.borderwidth))},applyStyleData$1=(e,t,o,l)=>{let n=1===t.length;each(t,t=>{let r=t.element,a=n?c:l,i=ei.normal(e,r),s=t.column.map(t=>ei.normal(e,t)).getOr(i);updateSimpleProps$1(i,s,o,a),P(e)&&updateAdvancedProps$1(i,o,a),l("halign")&&setAlign(e,r,o.halign),l("valign")&&setVAlign(e,r,o.valign)})},applyStructureData$1=(e,t)=>{e.execCommand("mceTableCellType",!1,{type:t.celltype,no_events:!0})},applyCellData=(e,t,o,l)=>{let n=filter$1(l,(e,t)=>o[t]!==e);size(n)>0&&t.length>=1&&table(t[0]).each(o=>{let r=getSelectedCells(o,t),a=size(filter$1(n,(e,t)=>"scope"!==t&&"celltype"!==t))>0,i=has(n,"celltype");(a||has(n,"scope"))&&applyStyleData$1(e,r,l,curry(has,n)),i&&applyStructureData$1(e,l),fireTableModified(e,o.dom,{structure:i,style:a})})},onSubmitCellForm=(e,t,o,l)=>{let n=l.getData();l.close(),e.undoManager.transact(()=>{applyCellData(e,t,o,n),e.focus()})},getData$1=(e,t)=>{let o=table(t[0]).map(o=>map(getSelectedCells(o,t),t=>extractDataFromCellElement(e,t.element,P(e),t.column)));return getSharedValues(o.getOrDie())},open$2=e=>{let t=getCellsFromSelection(e);if(0===t.length)return;let o=getData$1(e,t),l={type:"tabpanel",tabs:[{title:"General",name:"general",items:getItems$2(e)},getAdvancedTab(e,"cell")]},n={type:"panel",items:[{type:"grid",columns:2,items:getItems$2(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:P(e)?l:n,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:curry(onSubmitCellForm,e,t,o)})},getClassList=e=>{let t=buildListItems(L(e));return t.length>0?Optional.some({name:"class",type:"listbox",label:"Class",items:t}):Optional.none()},eu=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],getItems$1=e=>eu.concat(getClassList(e).toArray()),updateSimpleProps=(e,t,o)=>{o("class")&&e.setAttrib("class",t.class),o("height")&&e.setStyle("height",addPxSuffix(t.height))},updateAdvancedProps=(e,t,o)=>{o("backgroundcolor")&&e.setStyle("background-color",t.backgroundcolor),o("bordercolor")&&e.setStyle("border-color",t.bordercolor),o("borderstyle")&&e.setStyle("border-style",t.borderstyle)},applyStyleData=(e,t,o,l)=>{let n=1===t.length,r=n?c:l;each(t,t=>{let n=ei.normal(e,t);updateSimpleProps(n,o,r),B(e)&&updateAdvancedProps(n,o,r),l("align")&&setAlign(e,t,o.align)})},applyStructureData=(e,t)=>{e.execCommand("mceTableRowType",!1,{type:t.type,no_events:!0})},applyRowData=(e,t,o,l)=>{let n=filter$1(l,(e,t)=>o[t]!==e);if(size(n)>0){let o=has(n,"type"),r=!o||size(n)>1;r&&applyStyleData(e,t,l,curry(has,n)),o&&applyStructureData(e,l),table(b.fromDom(t[0])).each(t=>fireTableModified(e,t.dom,{structure:o,style:r}))}},onSubmitRowForm=(e,t,o,l)=>{let n=l.getData();l.close(),e.undoManager.transact(()=>{applyRowData(e,t,o,n),e.focus()})},open$1=e=>{let t=getRowsFromSelection(getSelectionStart(e),Y.selected);if(0===t.length)return;let o=map(t,t=>extractDataFromRowElement(e,t.dom,B(e))),l=getSharedValues(o),n={type:"tabpanel",tabs:[{title:"General",name:"general",items:getItems$1(e)},getAdvancedTab(e,"row")]},r={type:"panel",items:[{type:"grid",columns:2,items:getItems$1(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:B(e)?n:r,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:l,onSubmit:curry(onSubmitRowForm,e,map(t,e=>e.dom),l)})},getItems=(e,t,o)=>{let l=E(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],n=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return(o?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[]).concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(l).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(n)},styleTDTH=(e,t,o,n)=>{if("TD"===t.tagName||"TH"===t.tagName)l(o)&&isNonNullable(n)?e.setStyle(t,o,n):e.setStyles(t,o);else if(t.children)for(let l=0;l<t.children.length;l++)styleTDTH(e,t.children[l],o,n)},applyDataToElement=(e,t,o,l)=>{let n=e.dom,r={},i={},s=_(e),d=k(e);if(a(o.class)||(r.class=o.class),i.height=addPxSuffix(o.height),s?i.width=addPxSuffix(o.width):n.getAttrib(t,"width")&&(r.width=removePxSuffix(o.width)),s?(i["border-width"]=addPxSuffix(o.border),i["border-spacing"]=addPxSuffix(o.cellspacing)):(r.border=o.border,r.cellpadding=o.cellpadding,r.cellspacing=o.cellspacing),s&&t.children){let e={};if(l.border&&(e["border-width"]=addPxSuffix(o.border)),l.cellpadding&&(e.padding=addPxSuffix(o.cellpadding)),d&&l.bordercolor&&(e["border-color"]=o.bordercolor),!isEmpty$1(e))for(let o=0;o<t.children.length;o++)styleTDTH(n,t.children[o],e)}d&&(i["background-color"]=o.backgroundcolor,i["border-color"]=o.bordercolor,i["border-style"]=o.borderstyle),n.setStyles(t,{...getDefaultStyles(e),...i}),n.setAttribs(t,{...getDefaultAttributes(e),...r})},onSubmitTableForm=(e,t,o,l)=>{let n=e.dom,r=l.getData(),a=filter$1(r,(e,t)=>o[t]!==e);l.close(),""===r.class&&delete r.class,e.undoManager.transact(()=>{if(!t){let o=toInt(r.cols).getOr(1),l=toInt(r.rows).getOr(1);e.execCommand("mceInsertTable",!1,{rows:l,columns:o}),t=ee(getSelectionStart(e),getIsRoot(e)).bind(t=>table(t,getIsRoot(e))).map(e=>e.dom).getOrDie()}if(size(a)>0){let o={border:has(a,"border"),bordercolor:has(a,"bordercolor"),cellpadding:has(a,"cellpadding")};applyDataToElement(e,t,r,o);let l=n.select("caption",t)[0];(l&&!r.caption||!l&&r.caption)&&e.execCommand("mceTableToggleCaption"),setAlign(e,t,r.align)}if(e.focus(),e.addVisual(),size(a)>0){let o=has(a,"caption"),l=!o||size(a)>1;fireTableModified(e,t,{structure:o,style:l})}})},open=(e,t)=>{let o;let l=e.dom,n=extractDataFromSettings(e,k(e));t?(n.cols="1",n.rows="1",k(e)&&(n.borderstyle="",n.bordercolor="",n.backgroundcolor="")):(o=l.getParent(e.selection.getStart(),"table",e.getBody()))?n=extractDataFromTableElement(e,o,k(e)):k(e)&&(n.borderstyle="",n.bordercolor="",n.backgroundcolor="");let r=buildListItems(q(e));r.length>0&&n.class&&(n.class=n.class.replace(/\s*mce\-item\-table\s*/g,""));let a={type:"grid",columns:2,items:getItems(e,r,t)},i=k(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},getAdvancedTab(e,"table")]}:{type:"panel",items:[a]};e.windowManager.open({title:"Table Properties",size:"normal",body:i,onSubmit:curry(onSubmitTableForm,e,o,n),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:n})},registerCommands=e=>{let runAction=t=>{isInEditableContext(getSelectionStart(e))&&t()};each$1({mceTableProps:curry(open,e,!1),mceTableRowProps:curry(open$1,e),mceTableCellProps:curry(open$2,e),mceInsertTableDialog:curry(open,e,!0)},(t,o)=>e.addCommand(o,()=>runAction(t)))},child=(e,t)=>child$1(e,t).isSome(),unmergable=e=>{let hasSpan=(e,t)=>getOpt(e,t).exists(e=>parseInt(e,10)>1);return e.length>0&&forall(e,e=>hasSpan(e,"rowspan")||hasSpan(e,"colspan"))?Optional.some(e):Optional.none()},mergable=(e,t,o)=>t.length<=1?Optional.none():retrieveBox(e,o.firstSelectedSelector,o.lastSelectedSelector).map(e=>({bounds:e,cells:t})),noMenu=e=>({element:e,mergable:Optional.none(),unmergable:Optional.none(),selection:[e]}),forMenu=(e,t,o)=>({element:o,mergable:mergable(t,e,Y),unmergable:unmergable(e),selection:identity(e)}),getSelectionTargets=e=>{let t=Cell(Optional.none()),o=Cell([]),l=Optional.none(),n=isTag("caption"),isDisabledForSelection=e=>l.forall(t=>!t[e]),getStart=()=>Z(getSelectionStart(e),getIsRoot(e)),getEnd=()=>Z(getSelectionEnd(e),getIsRoot(e)),findTargets=()=>getStart().bind(t=>flatten(lift2(table(t),getEnd().bind(table),(o,l)=>eq(o,l)?n(t)?Optional.some(noMenu(t)):Optional.some(forMenu(getCellsFromSelection(e),o,t)):Optional.none()))),getExtractedDetails=e=>{let t=table(e.element);return t.map(t=>{let o=v.fromTable(t),l=onCells(o,e).getOr([]),n=foldl(l,(e,t)=>(t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=o.grid.columns&&(e.onLast=!0)),e),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:onUnlockedMergable(o,e).isSome(),unmergeable:onUnlockedUnmergable(o,e).isSome(),locked:n}})},resetTargets=()=>{t.set(cached(findTargets)()),l=t.get().bind(getExtractedDetails),each(o.get(),call)},setupHandler=e=>(e(),o.set(o.get().concat([e])),()=>{o.set(filter(o.get(),t=>t!==e))}),onSetup=(o,l)=>setupHandler(()=>t.get().fold(()=>{o.setEnabled(!1)},t=>{o.setEnabled(!l(t)&&e.selection.isEditable())})),onSetupWithToggle=(o,l,n)=>setupHandler(()=>t.get().fold(()=>{o.setEnabled(!1),o.setActive(!1)},t=>{o.setEnabled(!l(t)&&e.selection.isEditable()),o.setActive(n(t))})),isDisabledFromLocked=e=>l.exists(t=>t.locked[e]),onSetupTableHeaders=(t,o)=>l=>onSetupWithToggle(l,e=>n(e.element),()=>e.queryCommandValue(t)===o),r=onSetupTableHeaders("mceTableRowType","header"),a=onSetupTableHeaders("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",resetTargets),{onSetupTable:e=>onSetup(e,e=>!1),onSetupCellOrRow:e=>onSetup(e,e=>n(e.element)),onSetupColumn:e=>t=>onSetup(t,t=>n(t.element)||isDisabledFromLocked(e)),onSetupPasteable:e=>t=>onSetup(t,t=>n(t.element)||e().isNone()),onSetupPasteableColumn:(e,t)=>o=>onSetup(o,o=>n(o.element)||e().isNone()||isDisabledFromLocked(t)),onSetupMergeable:e=>onSetup(e,e=>isDisabledForSelection("mergeable")),onSetupUnmergeable:e=>onSetup(e,e=>isDisabledForSelection("unmergeable")),resetTargets,onSetupTableWithCaption:t=>onSetupWithToggle(t,d,t=>{let o=table(t.element,getIsRoot(e));return o.exists(e=>child(e,"caption"))}),onSetupTableRowHeaders:r,onSetupTableColumnHeaders:a,targets:t.get}};var ep=tinymce.util.Tools.resolve("tinymce.FakeClipboard");let eg="x-tinymce/dom-table-",eb=eg+"rows",ef=eg+"columns",getData=e=>{var t;let o=null!==(t=ep.read())&&void 0!==t?t:[];return findMap(o,t=>Optional.from(t.getType(e)))},getRows=()=>getData(eb),getColumns=()=>getData(ef),onSetupEditable$1=e=>t=>{let nodeChanged=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",nodeChanged),nodeChanged(),()=>{e.off("NodeChange",nodeChanged)}},addButtons=(e,t)=>{e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:onSetupEditable$1(e),fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});let cmd=t=>()=>e.execCommand(t),addButtonIfRegistered=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addButton(t,{...o,onAction:i(o.onAction)?o.onAction:cmd(o.command)})},addToggleButtonIfRegistered=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addToggleButton(t,{...o,onAction:i(o.onAction)?o.onAction:cmd(o.command)})};addButtonIfRegistered("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:t.onSetupTable}),addButtonIfRegistered("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:t.onSetupTable}),addButtonIfRegistered("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),addButtonIfRegistered("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:t.onSetupMergeable}),addButtonIfRegistered("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),addButtonIfRegistered("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),addButtonIfRegistered("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),addButtonIfRegistered("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),addButtonIfRegistered("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),addButtonIfRegistered("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),addButtonIfRegistered("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),addButtonIfRegistered("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),addButtonIfRegistered("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:t.onSetupCellOrRow}),addButtonIfRegistered("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:t.onSetupCellOrRow}),addButtonIfRegistered("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:t.onSetupPasteable(getRows)}),addButtonIfRegistered("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:t.onSetupPasteable(getRows)}),addButtonIfRegistered("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:t.onSetupColumn("onAny")}),addButtonIfRegistered("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:t.onSetupColumn("onAny")}),addButtonIfRegistered("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:t.onSetupPasteableColumn(getColumns,"onFirst")}),addButtonIfRegistered("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:t.onSetupPasteableColumn(getColumns,"onLast")}),addButtonIfRegistered("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:onSetupEditable$1(e)});let o=filterNoneItem(q(e));0!==o.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:generateMenuItemsCallback(e,o,"tableclass",t=>e.execCommand("mceTableToggleClass",!1,t)),onSetup:t.onSetupTable});let l=filterNoneItem(H(e));0!==l.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:generateMenuItemsCallback(e,l,"tablecellclass",t=>e.execCommand("mceTableCellToggleClass",!1,t)),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:generateMenuItemsCallback(e,et,"tablecellverticalalign",applyTableCellStyle(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:generateMenuItemsCallback(e,M(e),"tablecellborderwidth",applyTableCellStyle(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:generateMenuItemsCallback(e,N(e),"tablecellborderstyle",applyTableCellStyle(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:t=>t(buildColorMenu(e,W(e),"background-color")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:t=>t(buildColorMenu(e,U(e),"border-color")),onSetup:t.onSetupCellOrRow})),addToggleButtonIfRegistered("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),addToggleButtonIfRegistered("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:changeRowHeader(e),onSetup:t.onSetupTableRowHeaders}),addToggleButtonIfRegistered("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:changeColumnHeader(e),onSetup:t.onSetupTableColumnHeaders})},addToolbars=e=>{let t=V(e);t.length>0&&e.ui.registry.addContextToolbar("table",{predicate:t=>e.dom.is(t,"table")&&e.getBody().contains(t)&&e.dom.isEditable(t.parentNode),items:t,scope:"node",position:"node"})},onSetupEditable=e=>t=>{let nodeChanged=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",nodeChanged),nodeChanged(),()=>{e.off("NodeChange",nodeChanged)}},addMenuItems=(e,t)=>{let cmd=t=>()=>e.execCommand(t),addMenuIfRegistered=(t,o)=>!!e.queryCommandSupported(o.command)&&(e.ui.registry.addMenuItem(t,{...o,onAction:i(o.onAction)?o.onAction:cmd(o.command)}),!0),addToggleMenuIfRegistered=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addToggleMenuItem(t,{...o,onAction:i(o.onAction)?o.onAction:cmd(o.command)})},insertTableAction=t=>{e.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},o=[addMenuIfRegistered("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:t.onSetupCellOrRow}),addMenuIfRegistered("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:t.onSetupCellOrRow}),addMenuIfRegistered("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:t.onSetupCellOrRow}),addMenuIfRegistered("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:t.onSetupCellOrRow}),addMenuIfRegistered("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:t.onSetupCellOrRow}),addMenuIfRegistered("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:t.onSetupCellOrRow}),addMenuIfRegistered("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:t.onSetupPasteable(getRows)}),addMenuIfRegistered("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:t.onSetupPasteable(getRows)})],l=[addMenuIfRegistered("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:t.onSetupColumn("onFirst")}),addMenuIfRegistered("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:t.onSetupColumn("onLast")}),addMenuIfRegistered("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:t.onSetupColumn("onAny")}),addMenuIfRegistered("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:t.onSetupColumn("onAny")}),addMenuIfRegistered("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:t.onSetupColumn("onAny")}),addMenuIfRegistered("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:t.onSetupPasteableColumn(getColumns,"onFirst")}),addMenuIfRegistered("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:t.onSetupPasteableColumn(getColumns,"onLast")})],n=[addMenuIfRegistered("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:t.onSetupCellOrRow}),addMenuIfRegistered("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:t.onSetupMergeable}),addMenuIfRegistered("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:t.onSetupUnmergeable})];F(e)?e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:insertTableAction}],onSetup:onSetupEditable(e)}):e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:cmd("mceInsertTableDialog"),onSetup:onSetupEditable(e)}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:cmd("mceInsertTableDialog"),onSetup:onSetupEditable(e)}),addMenuIfRegistered("tableprops",{text:"Table properties",onSetup:t.onSetupTable,command:"mceTableProps"}),addMenuIfRegistered("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,command:"mceTableDelete"}),contains(o,!0)&&e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:constant("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),contains(l,!0)&&e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:constant("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),contains(n,!0)&&e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:constant("tablecellprops tablemergecells tablesplitcells")}),e.ui.registry.addContextMenu("table",{update:()=>(t.resetTargets(),t.targets().fold(constant(""),e=>"caption"===name(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});let r=filterNoneItem(q(e));0!==r.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>buildMenuItems(e,r,"tableclass",t=>e.execCommand("mceTableToggleClass",!1,t)),onSetup:t.onSetupTable});let a=filterNoneItem(H(e));0!==a.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>buildMenuItems(e,a,"tablecellclass",t=>e.execCommand("mceTableCellToggleClass",!1,t)),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>buildMenuItems(e,et,"tablecellverticalalign",applyTableCellStyle(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>buildMenuItems(e,M(e),"tablecellborderwidth",applyTableCellStyle(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>buildMenuItems(e,N(e),"tablecellborderstyle",applyTableCellStyle(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>buildColorMenu(e,W(e),"background-color"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>buildColorMenu(e,U(e),"border-color"),onSetup:t.onSetupCellOrRow})),addToggleMenuIfRegistered("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),addToggleMenuIfRegistered("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:changeRowHeader(e),onSetup:t.onSetupTableRowHeaders}),addToggleMenuIfRegistered("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:changeColumnHeader(e),onSetup:t.onSetupTableRowHeaders})};o.add("table",e=>{let t=getSelectionTargets(e);register(e),registerCommands(e),addMenuItems(e,t),addButtons(e,t),addToolbars(e)})}();