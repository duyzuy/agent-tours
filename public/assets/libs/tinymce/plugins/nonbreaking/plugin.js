!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let isSimpleType=e=>n=>typeof n===e,n=isSimpleType("boolean"),t=isSimpleType("number"),option=e=>n=>n.options.get(e),register$2=e=>{let a=e.options.register;a("nonbreaking_force_tab",{processor:e=>n(e)?{value:e?3:0,valid:!0}:t(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),a("nonbreaking_wrap",{processor:"boolean",default:!0})},a=option("nonbreaking_force_tab"),i=option("nonbreaking_wrap"),stringRepeat=(e,n)=>{let t="";for(let a=0;a<n;a++)t+=e;return t},isVisualCharsEnabled=e=>!!e.plugins.visualchars&&e.plugins.visualchars.isEnabled(),insertNbsp=(e,n)=>{let t=i(e),a=t||e.plugins.visualchars?`<span class="${isVisualCharsEnabled(e)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap"}" contenteditable="false">${stringRepeat("&nbsp;",n)}</span>`:stringRepeat("&nbsp;",n);e.undoManager.transact(()=>e.insertContent(a))},register$1=e=>{e.addCommand("mceNonBreaking",()=>{insertNbsp(e,1)})};var o=tinymce.util.Tools.resolve("tinymce.util.VK");let setup=e=>{let n=a(e);n>0&&e.on("keydown",t=>{t.keyCode!==o.TAB||t.isDefaultPrevented()||t.shiftKey||(t.preventDefault(),t.stopImmediatePropagation(),insertNbsp(e,n))})},onSetupEditable=e=>n=>{let nodeChanged=()=>{n.setEnabled(e.selection.isEditable())};return e.on("NodeChange",nodeChanged),nodeChanged(),()=>{e.off("NodeChange",nodeChanged)}},register=e=>{let onAction=()=>e.execCommand("mceNonBreaking");e.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction,onSetup:onSetupEditable(e)}),e.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction,onSetup:onSetupEditable(e)})};e.add("nonbreaking",e=>{register$2(e),register$1(e),register(e),setup(e)})}();