!function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager");let e=n=>a=>typeof a===n,a=e("boolean"),i=e("number"),t=n=>a=>a.options.get(n),s=t("nonbreaking_force_tab"),l=t("nonbreaking_wrap"),r=(n,a)=>{let i="";for(let s=0;s<a;s++)i+=n;return i},c=(n,a)=>{let i=l(n)||n.plugins.visualchars?`<span class="${n.plugins.visualchars&&n.plugins.visualchars.isEnabled()?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap"}" contenteditable="false">${r("&nbsp;",a)}</span>`:r("&nbsp;",a);n.undoManager.transact(()=>n.insertContent(i))};var b=tinymce.util.Tools.resolve("tinymce.util.VK");let u=n=>a=>{let o=()=>{a.setEnabled(n.selection.isEditable())};return n.on("NodeChange",o),o(),()=>{n.off("NodeChange",o)}};n.add("nonbreaking",n=>{(n=>{let s=n.options.register;s("nonbreaking_force_tab",{processor:n=>a(n)?{value:n?3:0,valid:!0}:i(n)?{value:n,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),s("nonbreaking_wrap",{processor:"boolean",default:!0})})(n),(n=>{n.addCommand("mceNonBreaking",()=>{c(n,1)})})(n),(n=>{let e=()=>n.execCommand("mceNonBreaking");n.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:e,onSetup:u(n)}),n.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:e,onSetup:u(n)})})(n),(n=>{let a=s(n);a>0&&n.on("keydown",i=>{i.keyCode!==b.TAB||i.isDefaultPrevented()||i.shiftKey||(i.preventDefault(),i.stopImmediatePropagation(),c(n,a))})})(n)})}();