!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");let applyListFormat=(t,e,l)=>{t.execCommand("UL"===e?"InsertUnorderedList":"InsertOrderedList",!1,!1===l?null:{"list-style-type":l})},register$2=t=>{t.addCommand("ApplyUnorderedListStyle",(e,l)=>{applyListFormat(t,"UL",l["list-style-type"])}),t.addCommand("ApplyOrderedListStyle",(e,l)=>{applyListFormat(t,"OL",l["list-style-type"])})},option=t=>e=>e.options.get(t),register$1=t=>{let e=t.options.register;e("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),e("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},e=option("advlist_number_styles"),l=option("advlist_bullet_styles"),isNullable=t=>null==t,isNonNullable=t=>!isNullable(t);var i=tinymce.util.Tools.resolve("tinymce.util.Tools");let Optional=class Optional{constructor(t,e){this.tag=t,this.value=e}static some(t){return new Optional(!0,t)}static none(){return Optional.singletonNone}fold(t,e){return this.tag?e(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?Optional.some(t(this.value)):Optional.none()}bind(t){return this.tag?t(this.value):Optional.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:Optional.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw Error(null!=t?t:"Called getOrDie on None")}static from(t){return isNonNullable(t)?Optional.some(t):Optional.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Optional.singletonNone=new Optional(!1);let findUntil=(t,e,l)=>{for(let i=0,n=t.length;i<n;i++){let n=t[i];if(e(n,i))return Optional.some(n);if(l(n,i))break}return Optional.none()},isCustomList=t=>/\btox\-/.test(t.className),isChildOfBody=(t,e)=>t.dom.isChildOf(e,t.getBody()),matchNodeNames=t=>e=>isNonNullable(e)&&t.test(e.nodeName),n=matchNodeNames(/^(OL|UL|DL)$/),s=matchNodeNames(/^(TH|TD)$/),inList=(t,e,l)=>findUntil(e,t=>n(t)&&!isCustomList(t),s).exists(e=>e.nodeName===l&&isChildOfBody(t,e)),getSelectedStyleType=t=>{let e=t.dom.getParent(t.selection.getNode(),"ol,ul"),l=t.dom.getStyle(e,"listStyleType");return Optional.from(l)},isWithinNonEditable=(t,e)=>null!==e&&!t.dom.isEditable(e),isWithinNonEditableList=(t,e)=>{let l=t.dom.getParent(e,"ol,ul,dl");return isWithinNonEditable(t,l)&&t.selection.isEditable()},setNodeChangeHandler=(t,e)=>{let l=t.selection.getNode();return e({parents:t.dom.getParents(l),element:l}),t.on("NodeChange",e),()=>t.off("NodeChange",e)},styleValueToText=t=>t.replace(/\-/g," ").replace(/\b\w/g,t=>t.toUpperCase()),normalizeStyleValue=t=>isNullable(t)||"default"===t?"":t,makeSetupHandler=(t,e)=>l=>{let updateButtonState=(t,i)=>{let n=t.selection.getStart(!0);l.setActive(inList(t,i,e)),l.setEnabled(!isWithinNonEditableList(t,n)&&t.selection.isEditable())};return setNodeChangeHandler(t,e=>updateButtonState(t,e.parents))},addSplitButton=(t,e,l,n,s,r)=>{t.ui.registry.addSplitButton(e,{tooltip:l,icon:"OL"===s?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:t=>{let e=i.map(r,t=>{let e="OL"===s?"num":"bull",l="disc"===t||"decimal"===t?"default":t,i=normalizeStyleValue(t),n=styleValueToText(t);return{type:"choiceitem",value:i,icon:"list-"+e+"-"+l,text:n}});t(e)},onAction:()=>t.execCommand(n),onItemAction:(e,l)=>{applyListFormat(t,s,l)},select:e=>{let l=getSelectedStyleType(t);return l.map(t=>e===t).getOr(!1)},onSetup:makeSetupHandler(t,s)})},addButton=(t,e,l,i,n,s)=>{t.ui.registry.addToggleButton(e,{active:!1,tooltip:l,icon:"OL"===n?"ordered-list":"unordered-list",onSetup:makeSetupHandler(t,n),onAction:()=>t.queryCommandState(i)||""===s?t.execCommand(i):applyListFormat(t,n,s)})},addControl=(t,e,l,i,n,s)=>{s.length>1?addSplitButton(t,e,l,i,n,s):addButton(t,e,l,i,n,normalizeStyleValue(s[0]))},register=t=>{addControl(t,"numlist","Numbered list","InsertOrderedList","OL",e(t)),addControl(t,"bullist","Bullet list","InsertUnorderedList","UL",l(t))};t.add("advlist",t=>{t.hasPlugin("lists")?(register$1(t),register(t),register$2(t)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})}();