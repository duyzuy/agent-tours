!function(){"use strict";let Cell=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let fireVisualBlocks=(e,t)=>{e.dispatch("VisualBlocks",{state:t})},toggleVisualBlocks=(e,t,l)=>{let s=e.dom;s.toggleClass(e.getBody(),"mce-visualblocks"),l.set(!l.get()),fireVisualBlocks(e,l.get())},register$2=(e,t,l)=>{e.addCommand("mceVisualBlocks",()=>{toggleVisualBlocks(e,t,l)})},register$1=e=>{let t=e.options.register;t("visualblocks_default_state",{processor:"boolean",default:!1})},isEnabledByDefault=e=>e.options.get("visualblocks_default_state"),setup=(e,t,l)=>{e.on("PreviewFormats AfterPreviewFormats",t=>{l.get()&&e.dom.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)}),e.on("init",()=>{isEnabledByDefault(e)&&toggleVisualBlocks(e,t,l)})},toggleActiveState=(e,t)=>l=>{l.setActive(t.get());let editorEventCallback=e=>l.setActive(e.state);return e.on("VisualBlocks",editorEventCallback),()=>e.off("VisualBlocks",editorEventCallback)},register=(e,t)=>{let onAction=()=>e.execCommand("mceVisualBlocks");e.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction,onSetup:toggleActiveState(e,t)}),e.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction,onSetup:toggleActiveState(e,t)})};e.add("visualblocks",(e,t)=>{register$1(e);let l=Cell(!1);register$2(e,t,l),register(e,l),setup(e,t,l)})}();