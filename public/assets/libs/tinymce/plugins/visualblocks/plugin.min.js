!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");let s=(t,l,i)=>{t.dom.toggleClass(t.getBody(),"mce-visualblocks"),i.set(!i.get()),((t,l)=>{t.dispatch("VisualBlocks",{state:l})})(t,i.get())},o=t=>t.options.get("visualblocks_default_state"),e=(t,l)=>i=>{i.setActive(l.get());let e=t=>i.setActive(t.state);return t.on("VisualBlocks",e),()=>t.off("VisualBlocks",e)};t.add("visualblocks",(t,l)=>{let i;(t=>{(0,t.options.register)("visualblocks_default_state",{processor:"boolean",default:!1})})(t);let a=(i=!1,{get:()=>i,set:t=>{i=t}});((t,l,i)=>{t.addCommand("mceVisualBlocks",()=>{s(t,0,i)})})(t,0,a),((t,l)=>{let o=()=>t.execCommand("mceVisualBlocks");t.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:o,onSetup:e(t,l)}),t.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:o,onSetup:e(t,l)})})(t,a),t.on("PreviewFormats AfterPreviewFormats",l=>{a.get()&&t.dom.toggleClass(t.getBody(),"mce-visualblocks","afterpreviewformats"===l.type)}),t.on("init",()=>{o(t)&&s(t,0,a)})})}();