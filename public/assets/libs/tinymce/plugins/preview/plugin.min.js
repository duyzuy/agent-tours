!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.Env"),i=tinymce.util.Tools.resolve("tinymce.util.Tools");let n=e=>o=>o.options.get(e),s=n("content_style"),l=n("content_css_cors"),r=n("body_class"),a=n("body_id");e.add("preview",e=>{(e=>{e.addCommand("mcePreview",()=>{(e=>{let c=(e=>{var c;let d="",m=e.dom.encode,y=null!==(c=s(e))&&void 0!==c?c:"";d+='<base href="'+m(e.documentBaseURI.getURI())+'">';let u=l(e)?' crossorigin="anonymous"':"";i.each(e.contentCSS,o=>{d+='<link type="text/css" rel="stylesheet" href="'+m(e.documentBaseURI.toAbsolute(o))+'"'+u+">"}),y&&(d+='<style type="text/css">'+y+"</style>");let v=a(e),p=r(e),w='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(o.os.isMacOS()||o.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);</script> ",g=e.getBody().dir,b=g?' dir="'+m(g)+'"':"";return"<!DOCTYPE html><html><head>"+d+'</head><body id="'+m(v)+'" class="mce-content-body '+m(p)+'"'+b+">"+e.getContent()+w+"</body></html>"})(e);e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:c}}).focus("close")})(e)})})(e),(e=>{let t=()=>e.execCommand("mcePreview");e.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:t}),e.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:t})})(e)})}();