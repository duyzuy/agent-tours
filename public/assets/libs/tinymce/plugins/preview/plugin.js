!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),o=tinymce.util.Tools.resolve("tinymce.util.Tools");let option=e=>t=>t.options.get(e),i=option("content_style"),n=option("content_css_cors"),r=option("body_class"),s=option("body_id"),getPreviewHtml=e=>{var l;let c="",a=e.dom.encode,d=null!==(l=i(e))&&void 0!==l?l:"";c+='<base href="'+a(e.documentBaseURI.getURI())+'">';let m=n(e)?' crossorigin="anonymous"':"";o.each(e.contentCSS,t=>{c+='<link type="text/css" rel="stylesheet" href="'+a(e.documentBaseURI.toAbsolute(t))+'"'+m+">"}),d&&(c+='<style type="text/css">'+d+"</style>");let p=s(e),y=r(e),v=t.os.isMacOS()||t.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey",u=e.getBody().dir,g=u?' dir="'+a(u)+'"':"",w="<!DOCTYPE html><html><head>"+c+'</head><body id="'+a(p)+'" class="mce-content-body '+a(y)+'"'+g+">"+e.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+v+")) {e.preventDefault();}}}, false);</script> </body></html>";return w},open=e=>{let t=getPreviewHtml(e),o=e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:t}});o.focus("close")},register$1=e=>{e.addCommand("mcePreview",()=>{open(e)})},register=e=>{let onAction=()=>e.execCommand("mcePreview");e.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction}),e.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction})};e.add("preview",e=>{register$1(e),register(e)})}();