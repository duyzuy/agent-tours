!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let n=e=>"function"==typeof e;var t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),i=tinymce.util.Tools.resolve("tinymce.util.Tools");let a=e=>t=>t.options.get(e),c=a("save_enablewhendirty"),s=a("save_onsavecallback"),d=a("save_oncancelcallback"),r=(e,t)=>{e.notificationManager.open({text:t,type:"error"})},l=e=>t=>{let o=()=>{t.setEnabled(!c(e)||e.isDirty())};return o(),e.on("NodeChange dirty",o),()=>e.off("NodeChange dirty",o)};e.add("save",e=>{(e=>{let t=e.options.register;t("save_enablewhendirty",{processor:"boolean",default:!0}),t("save_onsavecallback",{processor:"function"}),t("save_oncancelcallback",{processor:"function"})})(e),e.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>e.execCommand("mceSave"),onSetup:l(e)}),e.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>e.execCommand("mceCancel"),onSetup:l(e)}),e.addShortcut("Meta+S","","mceSave"),e.addCommand("mceSave",()=>{(e=>{let i=t.DOM.getParent(e.id,"form");if(c(e)&&!e.isDirty())return;e.save();let d=s(e);if(n(d))return d.call(e,e),void e.nodeChanged();i?(e.setDirty(!1),i.onsubmit&&!i.onsubmit()||("function"==typeof i.submit?i.submit():r(e,"Error: Form submit field collision.")),e.nodeChanged()):r(e,"Error: No form element found.")})(e)}),e.addCommand("mceCancel",()=>{(e=>{let t=i.trim(e.startContent),c=d(e);n(c)?c.call(e,e):e.resetContent(t)})(e)})})}();