!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let isFunction=e=>"function"==typeof e;var t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");let option=e=>t=>t.options.get(e),register$2=e=>{let t=e.options.register;t("save_enablewhendirty",{processor:"boolean",default:!0}),t("save_onsavecallback",{processor:"function"}),t("save_oncancelcallback",{processor:"function"})},o=option("save_enablewhendirty"),a=option("save_onsavecallback"),r=option("save_oncancelcallback"),displayErrorMessage=(e,t)=>{e.notificationManager.open({text:t,type:"error"})},save=e=>{let n=t.DOM.getParent(e.id,"form");if(o(e)&&!e.isDirty())return;e.save();let r=a(e);if(isFunction(r)){r.call(e,e),e.nodeChanged();return}n?(e.setDirty(!1),(!n.onsubmit||n.onsubmit())&&("function"==typeof n.submit?n.submit():displayErrorMessage(e,"Error: Form submit field collision.")),e.nodeChanged()):displayErrorMessage(e,"Error: No form element found.")},cancel=e=>{let t=n.trim(e.startContent),o=r(e);if(isFunction(o)){o.call(e,e);return}e.resetContent(t)},register$1=e=>{e.addCommand("mceSave",()=>{save(e)}),e.addCommand("mceCancel",()=>{cancel(e)})},stateToggle=e=>t=>{let handler=()=>{t.setEnabled(!o(e)||e.isDirty())};return handler(),e.on("NodeChange dirty",handler),()=>e.off("NodeChange dirty",handler)},register=e=>{e.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>e.execCommand("mceSave"),onSetup:stateToggle(e)}),e.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>e.execCommand("mceCancel"),onSetup:stateToggle(e)}),e.addShortcut("Meta+S","","mceSave")};e.add("save",e=>{register$2(e),register(e),register$1(e)})}();