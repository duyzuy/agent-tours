!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let hasProto=(e,t,o)=>{var r;return!!o(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},typeOf=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&hasProto(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},isSimpleType=e=>t=>typeof t===e,isString=e=>"string"===typeOf(e),t=isSimpleType("boolean"),isNullable=e=>null==e,isNonNullable=e=>!isNullable(e),o=isSimpleType("function"),r=isSimpleType("number"),compose1=(e,t)=>o=>e(t(o)),never=()=>!1;let Optional=class Optional{constructor(e,t){this.tag=e,this.value=t}static some(e){return new Optional(!0,e)}static none(){return Optional.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?Optional.some(e(this.value)):Optional.none()}bind(e){return this.tag?e(this.value):Optional.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:Optional.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return isNonNullable(e)?Optional.some(e):Optional.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Optional.singletonNone=new Optional(!1);let map=(e,t)=>{let o=e.length,r=Array(o);for(let n=0;n<o;n++){let o=e[n];r[n]=t(o,n)}return r},each=(e,t)=>{for(let o=0,r=e.length;o<r;o++){let r=e[o];t(r,o)}},filter=(e,t)=>{let o=[];for(let r=0,n=e.length;r<n;r++){let n=e[r];t(n,r)&&o.push(n)}return o},fromDom=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},n={fromHtml:(e,t)=>{let o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return fromDom(o.childNodes[0])},fromTag:(e,t)=>{let o=(t||document).createElement(e);return fromDom(o)},fromText:(e,t)=>{let o=(t||document).createTextNode(e);return fromDom(o)},fromDom,fromPoint:(e,t,o)=>Optional.from(e.dom.elementFromPoint(t,o)).map(fromDom)},is=(e,t)=>{let o=e.dom;if(1!==o.nodeType)return!1;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw Error("Browser lacks native selectors")};"undefined"!=typeof window?window:Function("return this;")();let name=e=>{let t=e.dom.nodeName;return t.toLowerCase()},type=e=>e.dom.nodeType,isType=e=>t=>type(t)===e,i=isType(1),l=isType(3),a=isType(9),s=isType(11),owner=e=>n.fromDom(e.dom.ownerDocument),parent=e=>Optional.from(e.dom.parentNode).map(n.fromDom),children$2=e=>map(e.dom.childNodes,n.fromDom),rawSet=(e,o,n)=>{if(isString(n)||t(n)||r(n))e.setAttribute(o,n+"");else throw console.error("Invalid call to Attribute.set. Key ",o,":: Value ",n,":: Element ",e),Error("Attribute value was not simple")},set=(e,t,o)=>{rawSet(e.dom,t,o)},remove=(e,t)=>{e.dom.removeAttribute(t)},isShadowRoot=e=>s(e)&&isNonNullable(e.dom.host),d=o(Element.prototype.attachShadow)&&o(Node.prototype.getRootNode),m=d?e=>n.fromDom(e.dom.getRootNode()):e=>a(e)?e:owner(e),getShadowRoot=e=>{let t=m(e);return isShadowRoot(t)?Optional.some(t):Optional.none()},getShadowHost=e=>n.fromDom(e.dom.host),inBody=e=>{let t=l(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let o=t.ownerDocument;return getShadowRoot(n.fromDom(t)).fold(()=>o.body.contains(t),compose1(inBody,getShadowHost))},ancestor$1=(e,t,r)=>{let i=e.dom,l=o(r)?r:never;for(;i.parentNode;){i=i.parentNode;let e=n.fromDom(i);if(t(e))return Optional.some(e);if(l(e))break}return Optional.none()},ancestor=(e,t,o)=>ancestor$1(e,e=>is(e,t),o),isSupported=e=>void 0!==e.style&&o(e.style.getPropertyValue),get=(e,t)=>{let o=e.dom,r=window.getComputedStyle(o),n=r.getPropertyValue(t);return""!==n||inBody(e)?n:getUnsafeProperty(o,t)},getUnsafeProperty=(e,t)=>isSupported(e)?e.style.getPropertyValue(t):"",getDirection=e=>"rtl"===get(e,"direction")?"rtl":"ltr",children$1=(e,t)=>filter(children$2(e),t),children=(e,t)=>children$1(e,e=>is(e,t)),getParentElement=e=>parent(e).filter(i),getNormalizedBlock=(e,t)=>{let o=t?ancestor(e,"ol,ul"):Optional.some(e);return o.getOr(e)},isListItem=e=>i(e)&&"li"===name(e),setDirOnElements=(e,t,o)=>{each(t,t=>{let r=n.fromDom(t),i=isListItem(r),l=getNormalizedBlock(r,i),a=getParentElement(l);a.each(t=>{e.setStyle(l.dom,"direction",null);let r=getDirection(t);if(r===o?remove(l,"dir"):set(l,"dir",o),getDirection(l)!==o&&e.setStyle(l.dom,"direction",o),i){let t=children(l,"li[dir],li[style]");each(t,t=>{remove(t,"dir"),e.setStyle(t.dom,"direction",null)})}})})},setDir=(e,t)=>{e.selection.isEditable()&&(setDirOnElements(e.dom,e.selection.getSelectedBlocks(),t),e.nodeChanged())},register$1=e=>{e.addCommand("mceDirectionLTR",()=>{setDir(e,"ltr")}),e.addCommand("mceDirectionRTL",()=>{setDir(e,"rtl")})},getNodeChangeHandler=(e,t)=>o=>{let nodeChangeHandler=r=>{let i=n.fromDom(r.element);o.setActive(getDirection(i)===t),o.setEnabled(e.selection.isEditable())};return e.on("NodeChange",nodeChangeHandler),o.setEnabled(e.selection.isEditable()),()=>e.off("NodeChange",nodeChangeHandler)},register=e=>{e.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>e.execCommand("mceDirectionLTR"),onSetup:getNodeChangeHandler(e,"ltr")}),e.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>e.execCommand("mceDirectionRTL"),onSetup:getNodeChangeHandler(e,"rtl")})};e.add("directionality",e=>{register$1(e),register(e)})}();