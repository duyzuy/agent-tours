!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");let e=t=>a=>typeof a===t,o=t=>"string"===(t=>{var a,l;let u=typeof t;return null===t?"null":"object"===u&&Array.isArray(t)?"array":"object"===u&&((a=String).prototype.isPrototypeOf(t)||(null===(l=t.constructor)||void 0===l?void 0:l.name)===a.name)?"string":u})(t),a=e("boolean"),l=e("function"),i=t=>a=>a.options.get(t),u=i("quickbars_selection_toolbar"),c=i("quickbars_insert_toolbar"),b=i("quickbars_image_toolbar"),w=0;var q=tinymce.util.Tools.resolve("tinymce.util.Delay");let d=t=>{t.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{new Promise(a=>{let l=!1,u=document.createElement("input");u.type="file",u.accept="image/*",u.style.position="fixed",u.style.left="0",u.style.top="0",u.style.opacity="0.001",document.body.appendChild(u);let r=t=>{var c;l||(null===(c=u.parentNode)||void 0===c||c.removeChild(u),l=!0,a(t))},i=t=>{r(Array.prototype.slice.call(t.target.files))};u.addEventListener("input",i),u.addEventListener("change",i);let s=a=>{let n=()=>{r([])};l||("focusin"===a.type?q.setEditorTimeout(t,n,1e3):n()),t.off("focusin remove",s)};t.on("focusin remove",s),u.click()}).then(a=>{if(a.length>0){let l=a[0];new Promise(t=>{let a=new FileReader;a.onloadend=()=>{t(a.result.split(",")[1])},a.readAsDataURL(l)}).then(a=>{((t,a,l)=>{let u=t.editorUpload.blobCache,c=u.create((t=>{let a=(new Date).getTime();return"mceu_"+Math.floor(1e9*Math.random())+ ++w+String(a)})(),l,a);u.add(c),t.insertContent(t.dom.createHTML("img",{src:c.blobUri()}))})(t,a,l)})}})}}),t.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{((t,a,l)=>{t.execCommand("mceInsertTable",!1,{rows:2,columns:2})})(t)}})},m=()=>!1;let g=class g{constructor(t,a){this.tag=t,this.value=a}static some(t){return new g(!0,t)}static none(){return g.singletonNone}fold(t,a){return this.tag?a(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?g.some(t(this.value)):g.none()}bind(t){return this.tag?t(this.value):g.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:g.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw Error(null!=t?t:"Called getOrDie on None")}static from(t){return null==t?g.none():g.some(t)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};g.singletonNone=new g(!1),"undefined"!=typeof window?window:Function("return this;")();var h=(t,a,u,c,b)=>t(u,c)?g.some(u):l(b)&&b(u)?g.none():a(u,c,b);let p=t=>{if(null==t)throw Error("Node cannot be null or undefined");return{dom:t}},v=(t,a)=>{let l=t.dom;if(1!==l.nodeType)return!1;if(void 0!==l.matches)return l.matches(a);if(void 0!==l.msMatchesSelector)return l.msMatchesSelector(a);if(void 0!==l.webkitMatchesSelector)return l.webkitMatchesSelector(a);if(void 0!==l.mozMatchesSelector)return l.mozMatchesSelector(a);throw Error("Browser lacks native selectors")},f=(t,a,u)=>{let c=t.dom,b=l(u)?u:m;for(;c.parentNode;){c=c.parentNode;let t=p(c);if(a(t))return g.some(t);if(b(t))break}return g.none()},y=(t,a,l)=>f(t,t=>v(t,a),l),k=t=>{let a=c(t);a.length>0&&t.ui.registry.addContextToolbar("quickblock",{predicate:a=>{let l=p(a),u=t.schema.getTextBlockElements(),r=a=>a.dom===t.getBody();return!((t,a)=>{let l=t.dom;return!(!l||!l.hasAttribute)&&l.hasAttribute("data-mce-bogus")})(l)&&h((t,a)=>v(t,a),y,l,'table,[data-mce-bogus="all"]',r).fold(()=>h((t,a)=>a(t),f,l,a=>a.dom.nodeName.toLowerCase() in u&&t.dom.isEmpty(a.dom),r).isSome(),m)},items:a,position:"line",scope:"editor"})};t.add("quickbars",t=>{(t=>{let l=t.options.register,r=t=>l=>{let u=a(l)||o(l);return u?a(l)?{value:l?t:"",valid:u}:{value:l.trim(),valid:u}:{valid:!1,message:"Must be a boolean or string."}},u="bold italic | quicklink h2 h3 blockquote";l("quickbars_selection_toolbar",{processor:r(u),default:u});let c="quickimage quicktable";l("quickbars_insert_toolbar",{processor:r(c),default:c});let b="alignleft aligncenter alignright";l("quickbars_image_toolbar",{processor:r(b),default:b})})(t),d(t),k(t),(t=>{let e=a=>t.dom.isEditable(a),o=t=>{var a;let l="FIGURE"===t.nodeName&&/image/i.test(t.className),u="IMG"===t.nodeName||l,c=void 0!==(a=p(t)).dom.classList&&a.dom.classList.contains("mce-pagebreak");return u&&e(t.parentElement)&&!c},a=b(t);a.length>0&&t.ui.registry.addContextToolbar("imageselection",{predicate:o,items:a,position:"node"});let l=u(t);l.length>0&&t.ui.registry.addContextToolbar("textselection",{predicate:a=>!o(a)&&!t.selection.isCollapsed()&&e(a),items:l,position:"selection",scope:"editor"})})(t)})}();