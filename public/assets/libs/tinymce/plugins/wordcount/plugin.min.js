!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");let e=t=>null===t,n=t=>t,o=(t,l)=>{let u=t.length,a=Array(u);for(let c=0;c<u;c++){let u=t[c];a[c]=l(u,c)}return a},l=[RegExp("[A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),RegExp("[-'\\.‘’․﹒＇．]"),RegExp("[:\xb7\xb7״‧︓﹕：]"),RegExp("[\xb1+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]"),RegExp("[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]"),RegExp("\\r"),RegExp("\\n"),RegExp("[\v\f\x85\u2028\u2029]"),RegExp("[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]"),RegExp("[\xad؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]"),RegExp("[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]"),RegExp("[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]"),RegExp("@")],u=RegExp("^[~№|!-*+-\\/:;?@\\[-`{}\xa1\xab\xb7\xbb\xbf;\xb7՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]$"),f=t=>{let u=13,a=l.length;for(let c=0;c<a;++c){let a=l[c];if(a&&a.test(t)){u=c;break}}return u},x=(t,l)=>{let u=t[l],a=t[l+1];if(l<0||l>t.length-1&&0!==l||0===u&&0===a)return!1;let c=t[l+2];if(0===u&&(2===a||1===a||12===a)&&0===c)return!1;let i=t[l-1];return(2!==u&&1!==u&&12!==a||0!==a||0!==i)&&(4!==u&&0!==u||4!==a&&0!==a)&&(3!==u&&1!==u||4!==a||4!==i)&&(4!==u||3!==a&&1!==a||4!==c)&&(8!==u&&9!==u||0!==a&&4!==a&&10!==a&&8!==a&&9!==a)&&(8!==a&&(9!==a||0!==c&&4!==c&&10!==c&&8!==c&&9!==c)||0!==u&&4!==u&&10!==u&&8!==u&&9!==u)&&(5!==u||6!==a)&&(7===u||5===u||6===u||7===a||5===a||6===a||(10!==u||10!==a)&&(11!==a||0!==u&&4!==u&&10!==u&&11!==u)&&(11!==u||0!==a&&4!==a&&10!==a)&&12!==u)},a=/^\s+$/,S=t=>"http"===t||"https"===t,b=(t,l)=>{let u=((t,l)=>{let u;for(u=l;u<t.length&&!a.test(t[u]);u++);return u})(t,l+1);return"://"===t.slice(l+1,u).join("").substr(0,3)?u:l},v=(t,l,c)=>((t,l,c)=>{c={includeWhitespace:!1,includePunctuation:!1,...c};let i=o(t,l);return((t,l,c,i)=>{let s=[],d=[],g=[];for(let p=0;p<c.length;++p)if(g.push(t[p]),x(c,p)){let c=l[p];if((i.includeWhitespace||!a.test(c))&&(i.includePunctuation||!u.test(c))){let u=p-g.length+1,a=p+1,c=l.slice(u,a).join("");if(S(c)){let u=b(l,p),c=t.slice(a,u);Array.prototype.push.apply(g,c),p=u}s.push(g),d.push({start:u,end:a})}g=[]}return{words:s,indices:d}})(t,i,(t=>{let l=(t=>{let l={};return u=>{if(l[u])return l[u];{let a=t(u);return l[u]=a,a}}})(f);return o(t,l)})(i),c)})(t,l,c).words;var c=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");let T=(t,l)=>{let u;let a=l.getBlockElements(),i=l.getVoidElements(),r=t=>a[t.nodeName]||i[t.nodeName],s=[],d="",g=new c(t,t);for(;u=g.next();)3===u.nodeType?d+=u.data.replace(/\uFEFF/g,""):r(u)&&d.length&&(s.push(d),d="");return d.length&&s.push(d),s},A=t=>t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,B=(t,l)=>{let u=T(t,l).join("\n").replace(/\u200B/g,"");return v(u.split(""),n).length},D=(t,l)=>{let u=T(t,l).join("");return A(u)},j=(t,l)=>{let u=T(t,l).join("").replace(/\s/g,"");return A(u)},k=(t,l)=>()=>l(t.getBody(),t.schema),U=(t,l)=>()=>l(t.selection.getRng().cloneContents(),t.schema),M=t=>k(t,B);var i=tinymce.util.Tools.resolve("tinymce.util.Delay");let N=(t,l)=>{((t,l)=>{t.dispatch("wordCountUpdate",{wordCount:{words:l.body.getWordCount(),characters:l.body.getCharacterCount(),charactersWithoutSpaces:l.body.getCharacterCountWithoutSpaces()}})})(t,l)},V=(t,l,u)=>{var a;let c;let s=(a=()=>N(t,l),c=null,{cancel:()=>{e(c)||(clearTimeout(c),c=null)},throttle:(...t)=>{e(c)&&(c=setTimeout(()=>{c=null,a.apply(null,t)},u))}});t.on("init",()=>{N(t,l),i.setEditorTimeout(t,()=>{t.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",s.throttle)},0),t.on("remove",s.cancel)})};((l=300)=>{t.add("wordcount",t=>{let u={body:{getWordCount:M(t),getCharacterCount:k(t,D),getCharacterCountWithoutSpaces:k(t,j)},selection:{getWordCount:U(t,B),getCharacterCount:U(t,D),getCharacterCountWithoutSpaces:U(t,j)},getCount:M(t)};return((t,l)=>{t.addCommand("mceWordCount",()=>((t,l)=>{t.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(l.body.getWordCount()),String(l.selection.getWordCount())],["Characters (no spaces)",String(l.body.getCharacterCountWithoutSpaces()),String(l.selection.getCharacterCountWithoutSpaces())],["Characters",String(l.body.getCharacterCount()),String(l.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})})(t,l))})(t,u),(t=>{let e=()=>t.execCommand("mceWordCount");t.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:e}),t.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:e})})(t),V(t,u,l),u})})()}();