!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let t=e=>r=>r.options.get(e),r=t("autolink_pattern"),n=t("link_default_target"),o=t("link_default_protocol"),a=t("allow_unsafe_link_target"),s=e=>"string"===(e=>{var r,n;let o=typeof e;return null===e?"null":"object"===o&&Array.isArray(e)?"array":"object"===o&&((r=String).prototype.isPrototypeOf(e)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===r.name)?"string":o})(e),l=e=>void 0===e,i=e=>null!=e,u=Object.hasOwnProperty,d=e=>"\uFEFF"===e;var c=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");let f=e=>/^[(\[{ \u00a0]$/.test(e),g=(e,r,n)=>{for(let o=r-1;o>=0;o--){let r=e.charAt(o);if(!d(r)&&n(r))return o}return -1},m=(e,n)=>{var a,y,w;let h=e.schema.getVoidElements(),v=r(e),{dom:_,selection:A}=e;if(null!==_.getParent(A.getNode(),"a[href]"))return null;let C=A.getRng(),b=c(_,e=>{var r;return _.isBlock(e)||(r=e.nodeName.toLowerCase(),u.call(h,r))||"false"===_.getContentEditable(e)}),{container:E,offset:$}=((e,r)=>{let n=e,o=r;for(;1===n.nodeType&&n.childNodes[o];)o=3===(n=n.childNodes[o]).nodeType?n.data.length:n.childNodes.length;return{container:n,offset:o}})(C.endContainer,C.endOffset),x=null!==(a=_.getParent(E,_.isBlock))&&void 0!==a?a:_.getRoot(),P=b.backwards(E,$+n,(e,r)=>{var n;let o=e.data,a=g(o,r,e=>!f(e));return -1===a||(n=o[a],/[?!,.;:]/.test(n))?a:a+1},x);if(!P)return null;let z=P.container,F=b.backwards(P.container,P.offset,(e,r)=>{z=e;let n=g(e.data,r,f);return -1===n?n:n+1},x),N=_.createRng();F?N.setStart(F.container,F.offset):N.setStart(z,0),N.setEnd(P.container,P.offset);let T=N.toString().replace(/\uFEFF/g,"").match(v);if(T){let r=T[0];return(y=r).length>=4&&"www."===y.substr(0,4)?r=o(e)+"://"+r:((e,r,n=0,o)=>{let a=e.indexOf(r,n);return -1!==a&&(!!l(o)||a+r.length<=o)})(r,"@")&&(w=r,!/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(w))&&(r="mailto:"+r),{rng:N,url:r}}return null},k=(e,r)=>{let{dom:o,selection:u}=e,{rng:c,url:y}=r,w=u.getBookmark();u.setRng(c);let h="createlink",v={command:h,ui:!1,value:y};if(!e.dispatch("BeforeExecCommand",v).isDefaultPrevented()){e.getDoc().execCommand(h,!1,y),e.dispatch("ExecCommand",v);let r=n(e);if(s(r)){let n=u.getNode();o.setAttrib(n,"target",r),"_blank"!==r||a(e)||o.setAttrib(n,"rel","noopener")}}u.moveToBookmark(w),e.nodeChanged()},p=e=>{let r=m(e,-1);i(r)&&k(e,r)};e.add("autolink",e=>{(e=>{let r=e.options.register;r("autolink_pattern",{processor:"regexp",default:RegExp("^"+/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g.source+"$","i")}),r("link_default_target",{processor:"string"}),r("link_default_protocol",{processor:"string",default:"https"})})(e),e.on("keydown",r=>{13!==r.keyCode||r.isDefaultPrevented()||(e=>{let r=m(e,0);i(r)&&k(e,r)})(e)}),e.on("keyup",r=>{32===r.keyCode?p(e):(48===r.keyCode&&r.shiftKey||221===r.keyCode)&&p(e)})})}();