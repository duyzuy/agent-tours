!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager");let link=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,option=e=>t=>t.options.get(e),register=e=>{let t=e.options.register;t("autolink_pattern",{processor:"regexp",default:RegExp("^"+link().source+"$","i")}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"})},n=option("autolink_pattern"),r=option("link_default_target"),o=option("link_default_protocol"),a=option("allow_unsafe_link_target"),hasProto=(e,t,n)=>{var r;return!!n(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},typeOf=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&hasProto(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},isString=e=>"string"===typeOf(e),l=(e=void 0,t=>e===t),isNullable=e=>null==e,isNonNullable=e=>!isNullable(e),not=e=>t=>!e(t),i=Object.hasOwnProperty,has=(e,t)=>i.call(e,t),checkRange=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,contains=(e,t,n=0,r)=>{let o=e.indexOf(t,n);return -1!==o&&(!!l(r)||o+t.length<=r)},startsWith=(e,t)=>checkRange(e,t,0),isZwsp=e=>"\uFEFF"===e,removeZwsp=e=>e.replace(/\uFEFF/g,"");var s=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");let isTextNode=e=>3===e.nodeType,isElement=e=>1===e.nodeType,isBracketOrSpace=e=>/^[(\[{ \u00a0]$/.test(e),hasProtocol=e=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e),isPunctuation=e=>/[?!,.;:]/.test(e),findChar=(e,t,n)=>{for(let r=t-1;r>=0;r--){let t=e.charAt(r);if(!isZwsp(t)&&n(t))return r}return -1},freefallRtl=(e,t)=>{let n=e,r=t;for(;isElement(n)&&n.childNodes[r];)r=isTextNode(n=n.childNodes[r])?n.data.length:n.childNodes.length;return{container:n,offset:r}},parseCurrentLine=(e,t)=>{var r;let a=e.schema.getVoidElements(),l=n(e),{dom:i,selection:c}=e;if(null!==i.getParent(c.getNode(),"a[href]"))return null;let d=c.getRng(),u=s(i,e=>i.isBlock(e)||has(a,e.nodeName.toLowerCase())||"false"===i.getContentEditable(e)),{container:f,offset:p}=freefallRtl(d.endContainer,d.endOffset),g=null!==(r=i.getParent(f,i.isBlock))&&void 0!==r?r:i.getRoot(),h=u.backwards(f,p+t,(e,t)=>{let n=e.data,r=findChar(n,t,not(isBracketOrSpace));return -1===r||isPunctuation(n[r])?r:r+1},g);if(!h)return null;let k=h.container,m=u.backwards(h.container,h.offset,(e,t)=>{k=e;let n=findChar(e.data,t,isBracketOrSpace);return -1===n?n:n+1},g),w=i.createRng();m?w.setStart(m.container,m.offset):w.setStart(k,0),w.setEnd(h.container,h.offset);let y=removeZwsp(w.toString()),v=y.match(l);if(!v)return null;{let t=v[0];if(startsWith(t,"www.")){let n=o(e);t=n+"://"+t}else contains(t,"@")&&!hasProtocol(t)&&(t="mailto:"+t);return{rng:w,url:t}}},convertToLink=(e,t)=>{let{dom:n,selection:o}=e,{rng:l,url:i}=t,s=o.getBookmark();o.setRng(l);let c="createlink",d={command:c,ui:!1,value:i},u=e.dispatch("BeforeExecCommand",d);if(!u.isDefaultPrevented()){e.getDoc().execCommand(c,!1,i),e.dispatch("ExecCommand",d);let t=r(e);if(isString(t)){let r=o.getNode();n.setAttrib(r,"target",t),"_blank"!==t||a(e)||n.setAttrib(r,"rel","noopener")}}o.moveToBookmark(s),e.nodeChanged()},handleSpacebar=e=>{let t=parseCurrentLine(e,-1);isNonNullable(t)&&convertToLink(e,t)},handleEnter=e=>{let t=parseCurrentLine(e,0);isNonNullable(t)&&convertToLink(e,t)},setup=e=>{e.on("keydown",t=>{13!==t.keyCode||t.isDefaultPrevented()||handleEnter(e)}),e.on("keyup",t=>{32===t.keyCode?handleSpacebar(e):(48===t.keyCode&&t.shiftKey||221===t.keyCode)&&handleSpacebar(e)})};t.add("autolink",e=>{register(e),setup(e)})}();